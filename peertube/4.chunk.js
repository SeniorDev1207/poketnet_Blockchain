(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{165:function(t,e,i){var g=i(162).Buffer;function r(t,e){this._block=g.alloc(t);this._finalSize=e;this._blockSize=t;this._len=0}r.prototype.update=function(t,e){if(typeof t==="string"){e=e||"utf8";t=g.from(t,e)}var i=this._block;var r=this._blockSize;var a=t.length;var s=this._len;for(var n=0;n<a;){var u=s%r;var f=Math.min(a-n,r-u);for(var o=0;o<f;o++){i[u+o]=t[n+o]}s+=f;n+=f;if(s%r===0){this._update(i)}}this._len+=a;return this};r.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128;this._block.fill(0,e+1);if(e>=this._finalSize){this._update(this._block);this._block.fill(0)}var i=this._len*8;if(i<=4294967295){this._block.writeUInt32BE(i,this._blockSize-4)}else{var r=(i&4294967295)>>>0;var a=(i-r)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8);this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};r.prototype._update=function(){throw new Error("_update must be implemented by subclass")};t.exports=r},219:function(t,e,i){var r=i(158);var a=i(165);var s=i(162).Buffer;var c=[1518500249,1859775393,2400959708|0,3395469782|0];var n=new Array(80);function u(){this.init();this._w=n;a.call(this,64,56)}r(u,a);u.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function h(t){return t<<1|t>>>31}function p(t){return t<<5|t>>>27}function d(t){return t<<30|t>>>2}function l(t,e,i,r){if(t===0)return e&i|~e&r;if(t===2)return e&i|e&r|i&r;return e^i^r}u.prototype._update=function(t){var e=this._w;var i=this._a|0;var r=this._b|0;var a=this._c|0;var s=this._d|0;var n=this._e|0;for(var u=0;u<16;++u)e[u]=t.readInt32BE(u*4);for(;u<80;++u)e[u]=h(e[u-3]^e[u-8]^e[u-14]^e[u-16]);for(var f=0;f<80;++f){var o=~~(f/20);var g=p(i)+l(o,r,a,s)+n+e[f]+c[o]|0;n=s;s=a;a=d(r);r=i;i=g}this._a=i+this._a|0;this._b=r+this._b|0;this._c=a+this._c|0;this._d=s+this._d|0;this._e=n+this._e|0};u.prototype._hash=function(){var t=s.allocUnsafe(20);t.writeInt32BE(this._a|0,0);t.writeInt32BE(this._b|0,4);t.writeInt32BE(this._c|0,8);t.writeInt32BE(this._d|0,12);t.writeInt32BE(this._e|0,16);return t};t.exports=u},511:function(t,s,n){"use strict";(function(i){n.d(s,"a",function(){return e});var t=n(16);var r=n.n(t);var a=function t(e){return r.a.atob?r.a.atob(e):i.from(e,"base64").toString("binary")};function e(t){var e=a(t);var i=new Uint8Array(e.length);for(var r=0;r<e.length;r++){i[r]=e.charCodeAt(r)}return i}}).call(this,n(73).Buffer)},512:function(t,e,i){"use strict";i.d(e,"a",function(){return r});class r{constructor(){this.aborted=false;this.loaded=0;this.retry=0;this.total=0;this.chunkCount=0;this.bwEstimate=0;this.loading={start:0,first:0,end:0};this.parsing={start:0,end:0};this.buffering={start:0,first:0,end:0}}}},517:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var r=i(75);var a=i.n(r);var s=function(){function t(){this.listeners={}}var e=t.prototype;e.on=function t(e,i){if(!this.listeners[e]){this.listeners[e]=[]}this.listeners[e].push(i)};e.off=function t(e,i){if(!this.listeners[e]){return false}var r=this.listeners[e].indexOf(i);this.listeners[e]=this.listeners[e].slice(0);this.listeners[e].splice(r,1);return r>-1};e.trigger=function t(e){var i=this.listeners[e];if(!i){return}if(arguments.length===2){var r=i.length;for(var a=0;a<r;++a){i[a].call(this,arguments[1])}}else{var s=Array.prototype.slice.call(arguments,1);var n=i.length;for(var u=0;u<n;++u){i[u].apply(this,s)}}};e.dispose=function t(){this.listeners={}};e.pipe=function t(e){this.on("data",function(t){e.push(t)})};return t}();var n=i(52);var b=i.n(n);var u=i(53);var E=i.n(u);var T=i(511);
/*! @name m3u8-parser @version 4.6.0 @license Apache-2.0 */var m=function(e){a()(t,e);function t(){var t;t=e.call(this)||this;t.buffer="";return t}var i=t.prototype;i.push=function t(e){var i;this.buffer+=e;i=this.buffer.indexOf("\n");for(;i>-1;i=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,i));this.buffer=this.buffer.substring(i+1)}};return t}(s);var f=String.fromCharCode(9);var o=function t(e){var i=/([0-9.]*)?@?([0-9.]*)?/.exec(e||"");var r={};if(i[1]){r.length=parseInt(i[1],10)}if(i[2]){r.offset=parseInt(i[2],10)}return r};var g=function t(){var e="[^=]*";var i='"[^"]*"|[^,]*';var r="(?:"+e+")=(?:"+i+")";return new RegExp("(?:^|,)("+r+")")};var c=function t(e){var i=e.split(g());var r={};var a=i.length;var s;while(a--){if(i[a]===""){continue}s=/([^=]*)=(.*)/.exec(i[a]).slice(1);s[0]=s[0].replace(/^\s+|\s+$/g,"");s[1]=s[1].replace(/^\s+|\s+$/g,"");s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1");r[s[0]]=s[1]}return r};var y=function(e){a()(t,e);function t(){var t;t=e.call(this)||this;t.customParsers=[];t.tagMappers=[];return t}var i=t.prototype;i.push=function t(r){var s=this;var n;var u;r=r.trim();if(r.length===0){return}if(r[0]!=="#"){this.trigger("data",{type:"uri",uri:r});return}var e=this.tagMappers.reduce(function(t,e){var i=e(r);if(i===r){return t}return t.concat([i])},[r]);e.forEach(function(t){for(var e=0;e<s.customParsers.length;e++){if(s.customParsers[e].call(s,t)){return}}if(t.indexOf("#EXT")!==0){s.trigger("data",{type:"comment",text:t.slice(1)});return}t=t.replace("\r","");n=/^#EXTM3U/.exec(t);if(n){s.trigger("data",{type:"tag",tagType:"m3u"});return}n=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t);if(n){u={type:"tag",tagType:"inf"};if(n[1]){u.duration=parseFloat(n[1])}if(n[2]){u.title=n[2]}s.trigger("data",u);return}n=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t);if(n){u={type:"tag",tagType:"targetduration"};if(n[1]){u.duration=parseInt(n[1],10)}s.trigger("data",u);return}n=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t);if(n){u={type:"tag",tagType:"version"};if(n[1]){u.version=parseInt(n[1],10)}s.trigger("data",u);return}n=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(n){u={type:"tag",tagType:"media-sequence"};if(n[1]){u.number=parseInt(n[1],10)}s.trigger("data",u);return}n=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t);if(n){u={type:"tag",tagType:"discontinuity-sequence"};if(n[1]){u.number=parseInt(n[1],10)}s.trigger("data",u);return}n=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t);if(n){u={type:"tag",tagType:"playlist-type"};if(n[1]){u.playlistType=n[1]}s.trigger("data",u);return}n=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t);if(n){u=b()(o(n[1]),{type:"tag",tagType:"byterange"});s.trigger("data",u);return}n=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t);if(n){u={type:"tag",tagType:"allow-cache"};if(n[1]){u.allowed=!/NO/.test(n[1])}s.trigger("data",u);return}n=/^#EXT-X-MAP:?(.*)$/.exec(t);if(n){u={type:"tag",tagType:"map"};if(n[1]){var i=c(n[1]);if(i.URI){u.uri=i.URI}if(i.BYTERANGE){u.byterange=o(i.BYTERANGE)}}s.trigger("data",u);return}n=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t);if(n){u={type:"tag",tagType:"stream-inf"};if(n[1]){u.attributes=c(n[1]);if(u.attributes.RESOLUTION){var r=u.attributes.RESOLUTION.split("x");var a={};if(r[0]){a.width=parseInt(r[0],10)}if(r[1]){a.height=parseInt(r[1],10)}u.attributes.RESOLUTION=a}if(u.attributes.BANDWIDTH){u.attributes.BANDWIDTH=parseInt(u.attributes.BANDWIDTH,10)}if(u.attributes["PROGRAM-ID"]){u.attributes["PROGRAM-ID"]=parseInt(u.attributes["PROGRAM-ID"],10)}}s.trigger("data",u);return}n=/^#EXT-X-MEDIA:?(.*)$/.exec(t);if(n){u={type:"tag",tagType:"media"};if(n[1]){u.attributes=c(n[1])}s.trigger("data",u);return}n=/^#EXT-X-ENDLIST/.exec(t);if(n){s.trigger("data",{type:"tag",tagType:"endlist"});return}n=/^#EXT-X-DISCONTINUITY/.exec(t);if(n){s.trigger("data",{type:"tag",tagType:"discontinuity"});return}n=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t);if(n){u={type:"tag",tagType:"program-date-time"};if(n[1]){u.dateTimeString=n[1];u.dateTimeObject=new Date(n[1])}s.trigger("data",u);return}n=/^#EXT-X-KEY:?(.*)$/.exec(t);if(n){u={type:"tag",tagType:"key"};if(n[1]){u.attributes=c(n[1]);if(u.attributes.IV){if(u.attributes.IV.substring(0,2).toLowerCase()==="0x"){u.attributes.IV=u.attributes.IV.substring(2)}u.attributes.IV=u.attributes.IV.match(/.{8}/g);u.attributes.IV[0]=parseInt(u.attributes.IV[0],16);u.attributes.IV[1]=parseInt(u.attributes.IV[1],16);u.attributes.IV[2]=parseInt(u.attributes.IV[2],16);u.attributes.IV[3]=parseInt(u.attributes.IV[3],16);u.attributes.IV=new Uint32Array(u.attributes.IV)}}s.trigger("data",u);return}n=/^#EXT-X-START:?(.*)$/.exec(t);if(n){u={type:"tag",tagType:"start"};if(n[1]){u.attributes=c(n[1]);u.attributes["TIME-OFFSET"]=parseFloat(u.attributes["TIME-OFFSET"]);u.attributes.PRECISE=/YES/.test(u.attributes.PRECISE)}s.trigger("data",u);return}n=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t);if(n){u={type:"tag",tagType:"cue-out-cont"};if(n[1]){u.data=n[1]}else{u.data=""}s.trigger("data",u);return}n=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t);if(n){u={type:"tag",tagType:"cue-out"};if(n[1]){u.data=n[1]}else{u.data=""}s.trigger("data",u);return}n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t);if(n){u={type:"tag",tagType:"cue-in"};if(n[1]){u.data=n[1]}else{u.data=""}s.trigger("data",u);return}n=/^#EXT-X-SKIP:(.*)$/.exec(t);if(n&&n[1]){u={type:"tag",tagType:"skip"};u.attributes=c(n[1]);if(u.attributes.hasOwnProperty("SKIPPED-SEGMENTS")){u.attributes["SKIPPED-SEGMENTS"]=parseInt(u.attributes["SKIPPED-SEGMENTS"],10)}if(u.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")){u.attributes["RECENTLY-REMOVED-DATERANGES"]=u.attributes["RECENTLY-REMOVED-DATERANGES"].split(f)}s.trigger("data",u);return}n=/^#EXT-X-PART:(.*)$/.exec(t);if(n&&n[1]){u={type:"tag",tagType:"part"};u.attributes=c(n[1]);["DURATION"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=parseFloat(u.attributes[t])}});["INDEPENDENT","GAP"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=/YES/.test(u.attributes[t])}});if(u.attributes.hasOwnProperty("BYTERANGE")){u.attributes.byterange=o(u.attributes.BYTERANGE)}s.trigger("data",u);return}n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t);if(n&&n[1]){u={type:"tag",tagType:"server-control"};u.attributes=c(n[1]);["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=parseFloat(u.attributes[t])}});["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=/YES/.test(u.attributes[t])}});s.trigger("data",u);return}n=/^#EXT-X-PART-INF:(.*)$/.exec(t);if(n&&n[1]){u={type:"tag",tagType:"part-inf"};u.attributes=c(n[1]);["PART-TARGET"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=parseFloat(u.attributes[t])}});s.trigger("data",u);return}n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t);if(n&&n[1]){u={type:"tag",tagType:"preload-hint"};u.attributes=c(n[1]);["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=parseInt(u.attributes[t],10);var e=t==="BYTERANGE-LENGTH"?"length":"offset";u.attributes.byterange=u.attributes.byterange||{};u.attributes.byterange[e]=u.attributes[t];delete u.attributes[t]}});s.trigger("data",u);return}n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t);if(n&&n[1]){u={type:"tag",tagType:"rendition-report"};u.attributes=c(n[1]);["LAST-MSN","LAST-PART"].forEach(function(t){if(u.attributes.hasOwnProperty(t)){u.attributes[t]=parseInt(u.attributes[t],10)}});s.trigger("data",u);return}s.trigger("data",{type:"tag",data:t.slice(4)})})};i.addParser=function t(e){var i=this;var r=e.expression,a=e.customType,s=e.dataParser,n=e.segment;if(typeof s!=="function"){s=function t(e){return e}}this.customParsers.push(function(t){var e=r.exec(t);if(e){i.trigger("data",{type:"custom",data:s(t),customType:a,segment:n});return true}})};i.addTagMapper=function t(e){var i=e.expression,r=e.map;var a=function t(e){if(i.test(e)){return r(e)}return e};this.tagMappers.push(a)};return t}(s);var h=function t(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})};var v=function t(e){var i={};Object.keys(e).forEach(function(t){i[h(t)]=e[t]});return i};var I=function t(e){var i=e.serverControl,r=e.targetDuration,a=e.partTargetDuration;if(!i){return}var s="#EXT-X-SERVER-CONTROL";var n="holdBack";var u="partHoldBack";var f=r&&r*3;var o=a&&a*2;if(r&&!i.hasOwnProperty(n)){i[n]=f;this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+f+")."})}if(f&&i[n]<f){this.trigger("warn",{message:s+" clamping HOLD-BACK ("+i[n]+") to targetDuration * 3 ("+f+")"});i[n]=f}if(a&&!i.hasOwnProperty(u)){i[u]=a*3;this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+i[u]+")."})}if(a&&i[u]<o){this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+i[u]+") to partTargetDuration * 2 ("+o+")."});i[u]=o}};var p=function(i){a()(t,i);function t(){var t;t=i.call(this)||this;t.lineStream=new m;t.parseStream=new y;t.lineStream.pipe(t.parseStream);var e=E()(t);var a=[];var f={};var s;var n;var o=false;var g=function t(){};var c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var h="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";var p=0;t.manifest={allowCache:true,discontinuityStarts:[],segments:[]};var d=0;var l=0;t.on("end",function(){if(f.uri||!f.parts&&!f.preloadHints){return}if(!f.map&&s){f.map=s}if(!f.key&&n){f.key=n}if(!f.timeline&&typeof p==="number"){f.timeline=p}t.manifest.preloadSegment=f});t.parseStream.on("data",function(u){var i;var r;({tag:function t(){({version:function t(){if(u.version){this.manifest.version=u.version}},"allow-cache":function t(){this.manifest.allowCache=u.allowed;if(!("allowed"in u)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function t(){var t={};if("length"in u){f.byterange=t;t.length=u.length;if(!("offset"in u)){u.offset=d}}if("offset"in u){f.byterange=t;t.offset=u.offset}d=t.offset+t.length},endlist:function t(){this.manifest.endList=true},inf:function t(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(u.duration>0){f.duration=u.duration}if(u.duration===0){f.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=a},key:function t(){if(!u.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(u.attributes.METHOD==="NONE"){n=null;return}if(!u.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(u.attributes.KEYFORMAT===h){var e=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(e.indexOf(u.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(u.attributes.METHOD==="SAMPLE-AES-CENC"){this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"})}if(u.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(u.attributes.KEYID&&u.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:u.attributes.KEYFORMAT,keyId:u.attributes.KEYID.substring(2)},pssh:Object(T["a"])(u.attributes.URI.split(",")[1])}};return}if(!u.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}n={method:u.attributes.METHOD||"AES-128",uri:u.attributes.URI};if(typeof u.attributes.IV!=="undefined"){n.iv=u.attributes.IV}},"media-sequence":function t(){if(!isFinite(u.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+u.number});return}this.manifest.mediaSequence=u.number},"discontinuity-sequence":function t(){if(!isFinite(u.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+u.number});return}this.manifest.discontinuitySequence=u.number;p=u.number},"playlist-type":function t(){if(!/VOD|EVENT/.test(u.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+u.playlist});return}this.manifest.playlistType=u.playlistType},map:function t(){s={};if(u.uri){s.uri=u.uri}if(u.byterange){s.byterange=u.byterange}},"stream-inf":function t(){this.manifest.playlists=a;this.manifest.mediaGroups=this.manifest.mediaGroups||c;if(!u.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!f.attributes){f.attributes={}}b()(f.attributes,u.attributes)},media:function t(){this.manifest.mediaGroups=this.manifest.mediaGroups||c;if(!(u.attributes&&u.attributes.TYPE&&u.attributes["GROUP-ID"]&&u.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var e=this.manifest.mediaGroups[u.attributes.TYPE];e[u.attributes["GROUP-ID"]]=e[u.attributes["GROUP-ID"]]||{};i=e[u.attributes["GROUP-ID"]];r={default:/yes/i.test(u.attributes.DEFAULT)};if(r.default){r.autoselect=true}else{r.autoselect=/yes/i.test(u.attributes.AUTOSELECT)}if(u.attributes.LANGUAGE){r.language=u.attributes.LANGUAGE}if(u.attributes.URI){r.uri=u.attributes.URI}if(u.attributes["INSTREAM-ID"]){r.instreamId=u.attributes["INSTREAM-ID"]}if(u.attributes.CHARACTERISTICS){r.characteristics=u.attributes.CHARACTERISTICS}if(u.attributes.FORCED){r.forced=/yes/i.test(u.attributes.FORCED)}i[u.attributes.NAME]=r},discontinuity:function t(){p+=1;f.discontinuity=true;this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function t(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=u.dateTimeString;this.manifest.dateTimeObject=u.dateTimeObject}f.dateTimeString=u.dateTimeString;f.dateTimeObject=u.dateTimeObject},targetduration:function t(){if(!isFinite(u.duration)||u.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+u.duration});return}this.manifest.targetDuration=u.duration;I.call(this,this.manifest)},start:function t(){if(!u.attributes||isNaN(u.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:u.attributes["TIME-OFFSET"],precise:u.attributes.PRECISE}},"cue-out":function t(){f.cueOut=u.data},"cue-out-cont":function t(){f.cueOutCont=u.data},"cue-in":function t(){f.cueIn=u.data},skip:function t(){this.manifest.skip=v(u.attributes);this.warnOnMissingAttributes_("#EXT-X-SKIP",u.attributes,["SKIPPED-SEGMENTS"])},part:function t(){var i=this;o=true;var e=this.manifest.segments.length;var t=v(u.attributes);f.parts=f.parts||[];f.parts.push(t);if(t.byterange){if(!t.byterange.hasOwnProperty("offset")){t.byterange.offset=l}l=t.byterange.offset+t.byterange.length}var r=f.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+e,u.attributes,["URI","DURATION"]);if(this.manifest.renditionReports){this.manifest.renditionReports.forEach(function(t,e){if(!t.hasOwnProperty("lastPart")){i.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+e+" lacks required attribute(s): LAST-PART"})}})}},"server-control":function t(){var e=this.manifest.serverControl=v(u.attributes);if(!e.hasOwnProperty("canBlockReload")){e.canBlockReload=false;this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})}I.call(this,this.manifest);if(e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")){this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})}},"preload-hint":function t(){var e=this.manifest.segments.length;var i=v(u.attributes);var r=i.type&&i.type==="PART";f.preloadHints=f.preloadHints||[];f.preloadHints.push(i);if(i.byterange){if(!i.byterange.hasOwnProperty("offset")){i.byterange.offset=r?l:0;if(r){l=i.byterange.offset+i.byterange.length}}}var a=f.preloadHints.length-1;this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+a+" for segment #"+e,u.attributes,["TYPE","URI"]);if(!i.type){return}for(var s=0;s<f.preloadHints.length-1;s++){var n=f.preloadHints[s];if(!n.type){continue}if(n.type===i.type){this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+a+" for segment #"+e+" has the same TYPE "+i.type+" as preload hint #"+s})}}},"rendition-report":function t(){var e=v(u.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[];this.manifest.renditionReports.push(e);var i=this.manifest.renditionReports.length-1;var r=["LAST-MSN","URI"];if(o){r.push("LAST-PART")}this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,u.attributes,r)},"part-inf":function t(){this.manifest.partInf=v(u.attributes);this.warnOnMissingAttributes_("#EXT-X-PART-INF",u.attributes,["PART-TARGET"]);if(this.manifest.partInf.partTarget){this.manifest.partTargetDuration=this.manifest.partInf.partTarget}I.call(this,this.manifest)}}[u.tagType]||g).call(e)},uri:function t(){f.uri=u.uri;a.push(f);if(this.manifest.targetDuration&&!("duration"in f)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});f.duration=this.manifest.targetDuration}if(n){f.key=n}f.timeline=p;if(s){f.map=s}l=0;f={}},comment:function t(){},custom:function t(){if(u.segment){f.custom=f.custom||{};f.custom[u.customType]=u.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[u.customType]=u.data}}})[u.type].call(e)});return t}var e=t.prototype;e.warnOnMissingAttributes_=function t(e,i,r){var a=[];r.forEach(function(t){if(!i.hasOwnProperty(t)){a.push(t)}});if(a.length){this.trigger("warn",{message:e+" lacks required attribute(s): "+a.join(", ")})}};e.push=function t(e){this.lineStream.push(e)};e.end=function t(){this.lineStream.push("\n");this.trigger("end")};e.addParser=function t(e){this.parseStream.addParser(e)};e.addTagMapper=function t(e){this.parseStream.addTagMapper(e)};return t}(s)}}]);