
 /*_____*/ 
var tableAlignmentCenter=function(e){return e.width="auto",{columns:[{width:"*",text:""},e,{width:"*",text:""}]}},dateFormat=function(){var h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,m=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,y=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(e,t,n){var a=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");"UTC:"==(t=String(a.masks[t]||t||a.masks.default)).slice(0,4)&&(t=t.slice(4),n=!0);var i=n?"getUTC":"get",r=e[i+"Date"](),o=e[i+"Day"](),s=e[i+"Month"](),l=e[i+"FullYear"](),u=e[i+"Hours"](),c=e[i+"Minutes"](),d=e[i+"Seconds"](),f=e[i+"Milliseconds"](),p=n?0:e.getTimezoneOffset(),v={d:r,dd:y(r),ddd:a.i18n.dayNames[o],dddd:a.i18n.dayNames[o+7],m:s+1,mm:y(s+1),mmm:a.i18n.monthNames[s],mmmm:a.i18n.monthNames[s+12],yy:String(l).slice(2),yyyy:l,h:u%12||12,hh:y(u%12||12),H:u,HH:y(u),M:c,MM:y(c),s:d,ss:y(d),l:y(f,3),L:y(99<f?Math.round(f/10):f),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:n?"UTC":(String(e).match(m)||[""]).pop().replace(g,""),o:(0<p?"-":"+")+y(100*Math.floor(Math.abs(p)/60)+Math.abs(p)%60,4),S:["th","st","nd","rd"][3<r%10?0:(r%100-r%10!=10)*r%10]};return t.replace(h,function(e){return e in v?v[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.addDays=function(e){return this.setDate(this.getDate()+e),this},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},Date.prototype.addMonths=function(e){return a=new Date(this.valueOf()),a.setMonth(a.getMonth()+e),a},Date.prototype.addDays=function(e){return a=new Date(this.valueOf()),a.setDate(a.getDate()+e),a},Date.prototype.addHours=function(e){return a=new Date(this.valueOf()),a.setHours(this.getHours()+e),a},Date.prototype.addMinutes=function(e){return a=new Date(this.valueOf()),a.setMinutes(this.getMinutes()+e),a},Date.prototype.addSeconds=function(e){return a=new Date(this.valueOf()),a.setSeconds(this.getSeconds()+e),a},Date.prototype.lastDayOfMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},Date.prototype.yyyymmdd=function(e){var t=this.getMonth()+1,n=this.getDate();return[this.getFullYear(),(9<t?"":"0")+t,(9<n?"":"0")+n].join(e||"")};var secInTime=function(e){var t=e/3600^0,n=(e-3600*t)/60^0,a=e-3600*t-60*n,i=[];return t&&i.push(addZero(t.toFixed(0))),i.push(addZero(n.toFixed(0))),i.push(addZero(a.toFixed(0))),i.join(":")};function M(e){for(var t,n="0123456789ABCDEF",a="",i=0;i<e.length;i++)t=e.charCodeAt(i),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}function X(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function V(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function Y(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,a=-271733879,i=-1732584194,r=271733878,o=0;o<e.length;o+=16){var s=n,l=a,u=i,c=r;a=md5_ii(a=md5_ii(a=md5_ii(a=md5_ii(a=md5_hh(a=md5_hh(a=md5_hh(a=md5_hh(a=md5_gg(a=md5_gg(a=md5_gg(a=md5_gg(a=md5_ff(a=md5_ff(a=md5_ff(a=md5_ff(a,i=md5_ff(i,r=md5_ff(r,n=md5_ff(n,a,i,r,e[o+0],7,-680876936),a,i,e[o+1],12,-389564586),n,a,e[o+2],17,606105819),r,n,e[o+3],22,-1044525330),i=md5_ff(i,r=md5_ff(r,n=md5_ff(n,a,i,r,e[o+4],7,-176418897),a,i,e[o+5],12,1200080426),n,a,e[o+6],17,-1473231341),r,n,e[o+7],22,-45705983),i=md5_ff(i,r=md5_ff(r,n=md5_ff(n,a,i,r,e[o+8],7,1770035416),a,i,e[o+9],12,-1958414417),n,a,e[o+10],17,-42063),r,n,e[o+11],22,-1990404162),i=md5_ff(i,r=md5_ff(r,n=md5_ff(n,a,i,r,e[o+12],7,1804603682),a,i,e[o+13],12,-40341101),n,a,e[o+14],17,-1502002290),r,n,e[o+15],22,1236535329),i=md5_gg(i,r=md5_gg(r,n=md5_gg(n,a,i,r,e[o+1],5,-165796510),a,i,e[o+6],9,-1069501632),n,a,e[o+11],14,643717713),r,n,e[o+0],20,-373897302),i=md5_gg(i,r=md5_gg(r,n=md5_gg(n,a,i,r,e[o+5],5,-701558691),a,i,e[o+10],9,38016083),n,a,e[o+15],14,-660478335),r,n,e[o+4],20,-405537848),i=md5_gg(i,r=md5_gg(r,n=md5_gg(n,a,i,r,e[o+9],5,568446438),a,i,e[o+14],9,-1019803690),n,a,e[o+3],14,-187363961),r,n,e[o+8],20,1163531501),i=md5_gg(i,r=md5_gg(r,n=md5_gg(n,a,i,r,e[o+13],5,-1444681467),a,i,e[o+2],9,-51403784),n,a,e[o+7],14,1735328473),r,n,e[o+12],20,-1926607734),i=md5_hh(i,r=md5_hh(r,n=md5_hh(n,a,i,r,e[o+5],4,-378558),a,i,e[o+8],11,-2022574463),n,a,e[o+11],16,1839030562),r,n,e[o+14],23,-35309556),i=md5_hh(i,r=md5_hh(r,n=md5_hh(n,a,i,r,e[o+1],4,-1530992060),a,i,e[o+4],11,1272893353),n,a,e[o+7],16,-155497632),r,n,e[o+10],23,-1094730640),i=md5_hh(i,r=md5_hh(r,n=md5_hh(n,a,i,r,e[o+13],4,681279174),a,i,e[o+0],11,-358537222),n,a,e[o+3],16,-722521979),r,n,e[o+6],23,76029189),i=md5_hh(i,r=md5_hh(r,n=md5_hh(n,a,i,r,e[o+9],4,-640364487),a,i,e[o+12],11,-421815835),n,a,e[o+15],16,530742520),r,n,e[o+2],23,-995338651),i=md5_ii(i,r=md5_ii(r,n=md5_ii(n,a,i,r,e[o+0],6,-198630844),a,i,e[o+7],10,1126891415),n,a,e[o+14],15,-1416354905),r,n,e[o+5],21,-57434055),i=md5_ii(i,r=md5_ii(r,n=md5_ii(n,a,i,r,e[o+12],6,1700485571),a,i,e[o+3],10,-1894986606),n,a,e[o+10],15,-1051523),r,n,e[o+1],21,-2054922799),i=md5_ii(i,r=md5_ii(r,n=md5_ii(n,a,i,r,e[o+8],6,1873313359),a,i,e[o+15],10,-30611744),n,a,e[o+6],15,-1560198380),r,n,e[o+13],21,1309151649),i=md5_ii(i,r=md5_ii(r,n=md5_ii(n,a,i,r,e[o+4],6,-145523070),a,i,e[o+11],10,-1120210379),n,a,e[o+2],15,718787259),r,n,e[o+9],21,-343485551),n=safe_add(n,s),a=safe_add(a,l),i=safe_add(i,u),r=safe_add(r,c)}return Array(n,a,i,r)}function md5_cmn(e,t,n,a,i,r){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(a,r)),i),n)}function md5_ff(e,t,n,a,i,r,o){return md5_cmn(t&n|~t&a,e,t,i,r,o)}function md5_gg(e,t,n,a,i,r,o){return md5_cmn(t&a|n&~a,e,t,i,r,o)}function md5_hh(e,t,n,a,i,r,o){return md5_cmn(t^n^a,e,t,i,r,o)}function md5_ii(e,t,n,a,i,r,o){return md5_cmn(n^(t|~a),e,t,i,r,o)}function safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function bit_rol(e,t){return e<<t|e>>>32-t}currentYear=function(){return(new Date).getFullYear()},monthConvert=function(e){var t=_.indexOf(["January","February","March","April","May","June","July","August","September","October","November","December"],e);return-1==t&&(t=0),t},addZero=function(e){return Number(e)<10&&(e="0"+e),e},dateToStr=function(e){var t=e||new Date,n=addZero((t.getMonth()+1).toString());e=addZero(t.getDate().toString());return addZero(t.getFullYear().toString())+n+e+addZero(t.getHours().toString())+addZero(t.getMinutes().toString())},dateToStrS=function(e){var t=e||new Date,n=addZero((t.getMonth()+1).toString());e=addZero(t.getDate().toString());return addZero(t.getFullYear().toString())+n+e+addZero(t.getHours().toString())+addZero(t.getMinutes().toString())+addZero(t.getSeconds().toString())},strToDateArr=function(e){return[e.substring(0,4),e.substring(4,6),e.substring(6,8)]},dateToStrSmall=function(e){var t=e||new Date,n=addZero((t.getMonth()+1).toString());e=addZero(t.getDate().toString());return addZero(t.getFullYear().toString())+n+e},dateToStrUtc=function(e){var t=nowDateUtc(e);return dateToStr(t)},dateToStrUtcS=function(e){var t=nowDateUtc(e);return dateToStrS(t)},strToDate=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8),i=e.substring(8,10),r=e.substring(10,12),o=e.substring(12,14)||0;return new Date(t,n-1,a,i,r,o)},strToDateSmall=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8);return new Date(t,n-1,a)},dateNow=function(e){if(!e)e=new Date;var t=e.getMonth()+1,n=e.getDate(),a=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),[e.getFullYear(),t,n,a,i]},dateUtcNow=function(e){if(!e)e=new Date;var t=e.getUTCMonth()+1,n=e.getUTCDate(),a=e.getUTCHours(),i=e.getUTCMinutes(),r=e.getUTCSeconds();return t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),e.getUTCFullYear()+""+t+n+a+i},randomString=function(e){e||(e=8);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},utcStrToDate=function(e){var t=strToDate(e),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());return n=new Date(n),n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())},utcStrToConvertDate=function(e){return convertDate(dateToStr(utcStrToDate(e)))},nowDateUtc=function(e){var t=e||new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},nextMonday=function(e){var t=e||new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.getDay()?a.setDate(n.getDate()+8-n.getDay()):a.setDate(n.getDate()+1),a},nextMondayUtc=function(e){e||(e=new Date);var t=nowDateUtc(),n=nowDateUtc();return t.getDay()?n.setDate(t.getDate()+8-t.getDay()):n.setDate(t.getDate()+1),n},convertDate=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6,8),i=e.substring(8,10),r=e.substring(10,12),o=t;return n&&(o+=" "+["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][n-1]),a&&(o+=" "+a),i&&(o+=", "+i,o+=r?":"+r:"H"),o},wnd=function(a){a||(a={});var n,i=this,r=a.app,o=a.content||null,s="w"+makeid().split("-")[0],l=a.nooverflow||$("html").hasClass("nooverflow"),u=a.el||$("body"),e=function(e){if(n)return n.find(e)};i.redraw=function(){var t=[];a.scrollers&&(t=_.map(e(a.scrollers),function(e){return $(e).scrollTop()})),e(".wndcontent").html(o),a.scrollers&&$.each(e(a.scrollers),function(e){$(this).scrollTop(t[e])}),a.success&&a.success(n,i,!0)};var c={close:function(e){e&&a.closecross&&a.closecross(n,i),a.close&&a.close(n,i),l||r.actions.onScroll(),i.module&&i.module.stop(),n.remove(),a.noblur,$("#habla_beta_container_do_not_rely_on_div_classes_or_names").css("display","block")}};i.buttonState=function(e,t){var n="disabled";"function"==typeof t&&(t=t()),t?a.buttons[e].el.removeClass(n):a.buttons[e].el.addClass(n)};return function(){a.preloader&&preloader(!0),a.buttons||(a.buttons={}),a.buttons.close||(a.buttons.close={action:close,html:"Close",class:"close"});var e,t;a.noblur,o&&(a.preloader&&preloader(!1),e='<div class="wndback" id='+s+'></div><div class="wndinner">\t\t\t\t\t ',t="",a.leftbg&&(e+='<div class="leftbg"><div>'+a.leftbg+"</div></div>"),e+='<div class="wndcontent">'+o+"</div>",a.header?e+='<div class="wndheader">'+a.header+"</div>":t="onwhite",e+=' <div class="buttons"></div>',e+='<div class="_close roundclosebutton '+t+'"><i class="fa fa-times" aria-hidden="true"></i></div></div>',n=$("<div>",{class:"wnd",html:e}),a.header||n.addClass("noheader"),u.append(n),n.find("._close").on("click",function(){c.close(!0)}),_.each(a.buttons,function(e){e.el=$("<div>",{class:"button "+(e.class||""),html:"<div>"+e.html+"</div>"}),n.find(".wndinner>div.buttons").append(e.el);var t=e.fn||c[e.action]||c.close;e.el.on("click",function(){t(n,i)})}),a.class&&n.addClass(a.class),l||r.actions.offScroll(a.offScroll),n.css("display","block"),a.noCloseBack||n.find(".wndback").one("click",function(){c.close(!0)}),i.el=n,a.clbk&&a.clbk(i,n))}(),i.find=e,i.close=c.close,i.el=n,i},inputDialogNew=function(l){var e;l||(l={}),l.alert||(l.alert="Please enter values"),l.class=(l.class||"")+" input",l.wrap=!0;var u=l.mmoneyparam,c=l.percentparam,o=function(e,t){return e.dollars&&(u.value=t.toString(),t=maskValue(u)),e.percent&&(c.value=t.toString(),t=maskValue(c)),e.convertIn&&(t=e.convertIn(t)),t};l.html='<div class="caption">'+l.caption+"</div>",l.html+='<div class="values">',_.each(l.values,function(n,e){var t="",a="";n.dollars&&(t="dollars"),n.percent&&(t="percent"),n.slider&&(a="hasslider"),l.html+='<div class="value '+a+'">',n.checkbox||(l.html+='<div class="label">',l.html+=n.label,l.html+="</div>"),l.html+='<div class="v">',n.checkbox?(l.html+='<input class="checkbox" type="checkbox" index="'+e+'" id="value'+e+'" ',1==n.defValue&&(l.html+="checked"),l.html+='><label for="value'+e+'">'+n.label+"</label>"):n.select?(l.html+='<select index="'+e+'">',_.each(n.select.values,function(e){var t="";e.v==n.select.default&&(t="selected"),l.html+='<option  value="'+e.v+'" '+t+">",l.html+=e.l,l.html+="</option>"}),l.html+="</select>"):(n.defValue&&n.defValue.toFixed&&(n.defValue=n.defValue.toFixed(l.precision||0)),l.html+='<input placeholder="'+(n.placeholder||n.label||"")+'" class="'+t+'" index="'+e+'" data-validate="'+(n.validate||"name")+'" type="'+(n.type||"text")+'" value="'+(n.defValue||"")+'"></input>'),l.html+="</div>",n.slider&&(l.html+="<div class='sliderWrapper' index='"+e+"'>",l.html+="<div class='sliderTableWrapper'>",l.html+="<div class='min'>"+o(n,n.slider.min)+"</div>",l.html+="<div class='sliderc'>",l.html+="<div class='slider'></div>",l.html+="</div>",l.html+="<div class='max'>"+o(n,n.slider.max)+"</div>",l.html+="</div>",l.html+="</div>"),l.html+="</div>"}),l.html+="</div>",l.html+='<div class="alert" style="display:none">'+l.alert+"</div>";var t=l.success,n=l.clbk;return l.clbk=function(a){e=new Validation({form:a,success:function(){}}),u&&a.find(".dollars").maskMoney(u),c&&a.find(".percent").maskMoney(c),_.each(l.values,function(i,e){if(i.slider){var r=a.find('input[index="'+e+'"]'),t=a.find('.sliderWrapper[index="'+e+'"] .slider'),n={slide:function(e,t){var n=t.value,a=l.precision||0;i.dollars&&(a=u.precision||0),i.percent&&(a=u.precision||0),n=n.toFixed(a),r.val(o(i,n))},value:i.defValue};_.isObject(i.slider)&&(n=_.extend(n,i.slider)),t.slider(n),r.on("change",function(){var e=$(this).val();i.dollars&&(e=r.maskMoney("unmasked",u)[0].value),i.percent&&(e=r.maskMoney("unmasked",c)[0].value),e>i.slider.max&&(e=i.slider.max),e<i.slider.min&&(e=i.slider.min),t.slider("value",e),$(this).val(o(i,e))})}}),n&&n()},l.success=function(r){if(!e.validation())return!1;var o={},s=!0;return _.each(l.values,function(e,t){var n=r.el.find(".values [index='"+t+"']"),a=n.val();e.checkbox&&(a=n.is(":checked")),e.dollars&&(a=n.maskMoney("unmasked",u)[0].value),e.percent&&(a=n.maskMoney("unmasked",c)[0].value);var i=e.id||t;e.id&&(s=!1),o[i]=a}),s&&(o=_.toArray(o)),t(o),!0},new dialog(l)},dialog=function(n){var a,e,i=this,t=n.removescroll&&n.app,r=!1;if($("html").hasClass("nooverflow")&&(t=!1),n.success||(n.success=!1),n.fail||(n.fail=!1),n.btn1text||(n.btn1text="Accept"),n.btn2text||(n.btn2text="Cancel"),n.id){if("undefined"==typeof localStorage)return;if(n.btn2text||(n.btn2text="Don't Show Anymore"),(a=JSON.parse(localStorage.qu_rx||"{}"))[n.id])return void(n.alltrue&&n.success())}var o,s=function(e,t){"function"==typeof e?e(i)&&n.wrap&&l():l(),t&&n.id&&(a[n.id]=!0,localStorage.qu_rx=JSON.stringify(a)),n.wrap||l()},l=function(){r||(r=!0,e.fadeOut(200),setTimeout(function(){e.remove()},200),t&&app.actions.onScroll())};return o='<div class="wrapper table"><div class="secondwrapper"><div class="thwrapper">',n.header&&(o+='<div class="header"><div class="text">'+n.header+"</div></div>"),n.html&&(o+='<div class="body"><div class="text">'+(n.html||"")+"</div></div>"),o+='<div class="buttons">\t\t\t\t\t\t\t<div class="btn2wr"><button class="btn2 medium">'+n.btn2text+'</button></div>\t\t\t\t\t\t\t<div class="btn1wr"><button class="btn1 medium">'+n.btn1text+'</button></div>\t\t\t\t\t\t</div><div class="_close"><i class="fa fa-times" aria-hidden="true"></i></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t</div></div>',(e=$("<div/>",{class:"dialog "+(n.class||"")})).html(o),$("body").append(e),n.class&&e.addClass(n.class),e.find(".btn1").on("click",function(){s(n.success)}),e.find(".btn2").on("click",function(){s(n.fail,!0)}),e.find("._close").on("click",function(){s(n.close,!0)}),n.clbk&&n.clbk(e,i),t&&app.actions.offScroll(),n.render&&n.render(e),e.fadeIn(200),i.el=e,i.destroy=l,i},tooltip=function(i){i||(i={});var r=this,e=i.content||"",t=i.el,o=i.event||"click",n=i.options||{},a=function(){t.hasClass("tooltipstered")||(n.debug=!1,n.contentAsHTML=!0,n.interactive=!0,n.interactiveTolerance=400,n.onlyOne=!0,n.delay=100,"mouseenter"!=o?n.trigger=o:n.delay=400,n.autoClose=!1,n.theme||(n.theme="lighttooltip"),n.position||(n.position="bottom"),n.height||(n.height=420),n.maxWidth||(n.maxWidth=600),n.content=function(){return e},n.functionReady=function(e,t){r.instance=e;var n=$(t.tooltip),a=$(t.origin);r.el=function(){return n},"click"!=o&&a.on("click",function(){e.close()}),i.clbk&&i.clbk({el:n})},n.functionInit=function(e,t){},n.functionAfter=function(e,t){i.destroy&&i.destroy()},t.tooltipster(n))};return r.close=function(){r.instance&&r.instance.close()},i.render&&a(),a(),r},sitemessage=function(e,t){$("<div/>",{class:"sitemessage remove_now",style:"opacity:0",text:e}).appendTo("body").animate({opacity:1},200),setTimeout(function(){$(".remove_now").animate({opacity:0},500),"function"==typeof t&&t(),setTimeout(function(){$(".remove_now").detach()},500)},2200)},bgImages=function(t,n){n||(n={}),t.find("[image]").each(function(){var e=$(this);e.attr("image")&&(e.css("background-image","url("+$(this).attr("image")+")"),e.css("background-size",n.size||"cover"),e.css("background-position",n.position||"center center"),e.css("background-repeat",n.repeat||"no-repeat"),e.attr("image","")),n.clbk&&e.imagesLoaded({background:!0},function(e){t.fadeIn(100),"function"==typeof n.clbk&&n.clbk(e)})})},pathFromMD5Name=function(e){return e.substr(0,2)+"/"+e.substr(2,2)+"/"+e.substr(4)+".jpg"},srcToData=function(e,t){var n=new XMLHttpRequest;n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n.response)},n.onerror=function(){console.log("ERROR")},n.open("GET",e),n.responseType="blob",n.send()},resizeFit=function(e,n,a,i,r){var o,s,l,u=new Image,c=document.createElement("canvas"),d=c.getContext("2d");u.src=e,r||(r="jpeg"),u.setAttribute("crossOrigin","anonymous"),u.onload=function(){if(o=u.height/u.width,l=u.height,s=u.width,l<=a&&s<=n);else{n<s&&(l=(s=n)*o),a<l&&(s=(l=a)/o);var e=Math.max((a-l)/l,(n-s)/s);console.log("c, newHeight - height, newWidth - width",l,s,n,a),0<e&&(l*=e+1,s*=e+1),console.log("c, newHeight - height, newWidth - width",l,s,1-e)}c.width=s,c.height=l,d.drawImage(u,0,0,s,l);var t=c.toDataURL("image/"+r,.75);$(c).remove(),i(t)}},resize=function(e,t,n,a,i){var r,o,s,l=new Image,u=document.createElement("canvas"),c=u.getContext("2d");l.src=e,i||(i="jpeg"),l.setAttribute("crossOrigin","anonymous"),l.onload=function(){r=l.height/l.width,s=l.height,o=l.width,s<=n&&o<=t||(t<o&&(s=(o=t)*r),n<s&&(o=(s=n)/r)),u.width=o,u.height=s,c.drawImage(l,0,0,o,s);var e=u.toDataURL("image/"+i,.75);$(u).remove(),a(e)}},grayscaleImage=function(e,p){var v=new Image;v.src=e,v.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=v.width,a=v.height;e.width=n,e.height=a,t.drawImage(v,0,0);var i=t.getImageData(0,0,n,a),r=0,o=0;for(console.log("imgWidth",n,a),o=0;o<i.height;o++)for(r=0;r<i.width;r++){var s=4*o*i.width+4*r,l=i.data[s],u=i.data[s+1],c=i.data[s+2],d=i.data[s+3],f=(2*l+u+c)/3;i.data[s]=f,i.data[s+1]=f,i.data[s+2]=f,i.data[s+3]=d}t.putImageData(i,0,0,0,0,i.width,i.height),p&&p(e.toDataURL())}},colorFromGradient=function(n){n.gradient||(n.gradient=[{color:[0,0,0,0],image:"red",position:0},{color:[255,255,255,255],image:"green",position:100}]),void 0===n.value&&(n.value=50);var a=_.find(n.gradient,function(e,t){if(e.position<=n.value&&(!n.gradient[t+1]||n.gradient[t+1].position>n.value))return!0}),i=_.find(n.gradient,function(e,t){if(e.position>=n.value&&(!n.gradient[t-1]||n.gradient[t-1].position<n.value))return!0}),r=[0,0,0,0];if(i||(i=n.gradient[n.gradient.length-1]),a||(a=n.gradient[0]),i.position==a.position)r=a.color,a.image,a.opacity=255,i.opacity=255;else{var o=(n.value-a.position)/(i.position-a.position);_.each(r,function(e,t){r[t]=(a.color[t]*(1-o)+i.color[t]*o).toFixed(0)}),a.opacity=1-o,i.opacity=o}if(n.mode&&"pdf"==n.mode)return{left:a,right:i};var e,t="rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")";return n.toHex?(e=(e=t).match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):"":t},randomColor=function(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"},rgbaOpacity=function(e,t){var n=e.replace("rgba(","").replace(")","").split(",");return n[3]=t,e="rgba("+n.join(",")+")"},aviableFilters={values:function(n,e){var a=!0;return _.each(e,function(e,t){a&&0==e[n[t]]&&(a=!1)}),a},condition:{without:{name:"Without data",id:"without",filter:function(e,t,n){if(void 0===n||"-"==e[n.id]||null==n)return!0},type:"general",values:0},with:{name:"With data",id:"with",filter:function(e,t,n){if(void 0!==n&&"-"!=n&&null!=n)return!0},type:"general",values:0},beginwith:{name:"Begin with",id:"beginwith",filter:function(e,t,n){if(0==n.toLowerCase().indexOf(t.values[0].toLowerCase()))return!0},type:"string",values:1},endsat:{name:"Ends at",id:"endsat",filter:function(e,t,n){if(n.toLowerCase().indexOf(t.values[0].toLowerCase())==n.length-t.values[0].length)return!0},type:"string",values:1},contain:{name:"Contain",id:"contain",filter:function(e,t,n){if(-1<n.toLowerCase().indexOf(t.values[0].toLowerCase()))return!0},type:"string",values:1},equaltext:{name:"Equal",id:"equaltext",filter:function(e,t,n){if(n.toLowerCase()==t.values[0].toLowerCase())return!0},type:"string",values:1},more:{name:"More",id:"more",filter:function(e,t,n){if(Number(n)>Number(t.values[0]))return!0},type:"number",values:1},moreequal:{name:"More and Equal",id:"moreequal",filter:function(e,t,n){if(Number(n)>=Number(t.values[0]))return!0},type:"number",values:1},less:{name:"Less",id:"less",filter:function(e,t,n){if(Number(n)<Number(t.values[0]))return!0},type:"number",values:1},lessequal:{name:"Less and Equal",id:"lessequal",filter:function(e,t,n){if(Number(n)<=Number(t.values[0]))return!0},type:"number",values:1},equal:{name:"Equal",id:"equal",filter:function(e,t,n){if(Number(n)==Number(t.values[0]))return!0},type:"number",values:1},notequal:{name:"Not Equal",id:"notequal",filter:function(e,t,n){if(Number(n)!=Number(t.values[0]))return!0},type:"number",values:1}}},indexArray=function(e){e||(e=0);for(var t=[],n=0;n<e;n++)t.push(n);return t},b64_to_utf8=function(e){return decodeURIComponent(escape(window.atob(e)))},convertStringToArrayBuffer=function(e){for(var t=atob(e),n=t.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=t.charCodeAt(i);return a.buffer},convertArrayBufferToString=function(e){for(var t=new Uint8Array(e),n="",a=0;a<t.byteLength;a++)n+=String.fromCharCode(t[a]);return btoa(n)},objmap=function(e,t){var n={};return _.each(e,function(e){n[e.id]=e}),n},group=function(e,a){var i={};return _.each(e,function(e,t){var n=a(e,t);n&&(i[n]||(i[n]=[]),i[n].push(e))}),i},apply=function(n,a){_.isArray(n)?_.each(n,function(e,t){apply(n[t],a)}):a(n)},nextIndex=function(e,t){var n=_.indexOf(e,t);return-1<n&&(n==e.length-1?n=0:n++),n},findIndex=function(e,t){var n=-1;return _.find(e,function(e){if(n++,t(e))return!0})||(n=-1),n},addSuffixToValue=function(t){if(t.array&&t.field&&t.value){if(_.find(t.array,function(e){if(e[t.field]&&e[t.field]==t.value)return!0})){var e=new RegExp("[(]([0-9]+)[)]"),n=t.value.match(e);return n||((n=[])[1]="0"),n[1]=Number(n[1])+Number(1),t.value=trim(t.value.replace(n[0],"")),t.value+=" ("+n[1]+")",addSuffixToValue(t)}return t.value}},removeEqual=function(e,n){var a=-1,t=_.find(e,function(e,t){if(isEqual(e,n,!1))return a=t,e});return-1<a&&(e.splice(a,1),t)},instead=function(e,n){var a=-1;_.find(e,function(e,t){if(isEqual(e,n,!1))return a=t,!0});-1<a&&e.splice(a,1),e.unshift(n)},lazyEach=function(u){var c={after:["success","fail","after"]},d=!1,f=function(e){var t=n(u.array[e],u.each,e);t.item=u.array[e],u.action(t,e)},n=function(s,e,l){var t={};return _.each(e,function(r,o){t[o]="function"!=typeof r||"success"!=o&&"fail"!=o&&"after"!=o?r:function(){var i=arguments,e=function(){var n,a,e,t=function(){u.all.success&&!d&&u.all.success(u),u.all.fail&&d&&u.all.fail(u),u.all.after&&u.all.after(u)};"fail"==(n=o)&&(d=!0),_.find(c,function(e,t){if(-1<_.indexOf(e,n))return a=t,!0}),a&&(v[a]||(v[a]=0),v[a]++),e=v,h=_.reduce(e,function(e,t){return e+t},0),r(s,h,p,i,l),u.sync?u.array[l+1]?f(l+1):t():h==p&&t()};if(!u.syncCallbacks||l<=h||u.sync)e();else var t=setInterval(function(){l<=h&&(e(),clearInterval(t))},10)}}),t};if(u||(u={}),u.array||(u.array=[]),u.each||(u.each={}),u.all||(u.all={}),u.each.success||(u.each.success=function(){}),u.each.fail||(u.each.fail=function(){}),u.array&&0!=u.array.length){var p=u.array.length,v={},h=0;u.all.before&&u.all.before(u),u.sync?f(0):_.each(u.array,function(e,t){f(t)})}else u.all.success&&u.all.success()},lazyActions=function(e,t){lazyEach({array:e,action:function(e){e.item(e.success)},all:{success:t}})},primitiveToArray=function(e){return _.isArray(e)?e:[e]},actionsByType=function(e,t){if(isVal(e)){if(t.value)return t.value(e)}else if(_.isArray(e)){if(t.array)return t.array(e)}else if(t.object)return t.object(e);return null},isVal=function(e){return!_.isObject(e)||void 0!==e.v&&!_.isObject(e.v)||void 0!==e.c&&!_.isObject(e.c)},prevEl=function(e,t){var n=_.indexOf(e,t);return 0<n?e[n-1]:e[0]},nextEl=function(e,t){var n=_.indexOf(e,t);return-1<n&&n<e.length-1?e[n+1]:e[e.length-1]},lastEl=function(e){var t=deep(e,"length");return t?e[t-1]:null},lastEls=function(e,n){var a=e.length;return(n=Math.min(n,a))?_.filter(e,function(e,t){if(a-n<=t)return e}):[]},equalhash=function(e,t){return $.md5(JSON.stringify(e))===$.md5(JSON.stringify(t))},getMethods=function(e){var t={};for(prop in e)"function"==typeof e[prop]&&(t[prop]=e[prop]);return t},getVars=function(e){var t={};for(prop in e)e.hasOwnProperty(prop)&&(t[prop]=e[prop]);return t},toDeepKey=function(e){return _.toArray(e).sort().join(".")},deep=function(e,t){var n=t.split("."),a=n[0];if(void 0!==e&&e)return void 0!==e[a]?(n.splice(0,1),0==n.length?e[a]:deep(e[a],n.join("."))):void 0},deepInsert=function(e,t,n){if(t){var a=t.split("."),i=a[0];if(1!=a.length)return e[i]||(e[i]={}),a.splice(0,1),deepInsert(e[i],a.join("."),n);e[i]=n}},isEqual=function(a,e,i){void 0===i&&(i=!0);var r=!i;return void 0===a&&void 0===e||void 0!==a&&void 0!==e&&((typeof a==typeof e||"function"==typeof e)&&("function"==typeof e?e(a):_.isObject(e)?_.isArray(e)?(_.each(e,function(e,t){var n=isEqual(a[t],e,i);n=!!n,r=r||n}),r):!!_.isObject(e)&&(_.each(e,function(e,t){var n=isEqual(a[t],e,i);n=!!n,r=i?r||n:r&&n}),r):e==a))},clear=function(n){_.each(n,function(e,t){delete n[t]})},executeIfCan=function(e){return"function"==typeof e?e():e},convertBits=function(a,e){(a=_.toArray(Number(a).toString(2))).length;return _.filter(e,function(e,t){var n=_.toArray(Number(e.bit).toString(2));if(1==a[a.length-n.length])return!0})},convertBitsToMap=function(e,t){var n=convertBits(e,t);return _.map(n,function(e){return e.bit})},convertToBits=function(e){return _.reduce(e,function(e,t){return e+Number(t)},0)},boolnum=function(e){return!(0==e||"0"==e||!e)},"undefined"!=typeof FileReader&&void 0===FileReader.prototype.readAsBinaryString&&(FileReader.prototype.readAsBinaryString=function(e){var i="",r=this,o=new FileReader;o.onload=function(e){for(var t=new Uint8Array(o.result),n=t.byteLength,a=0;a<n;a++)i+=String.fromCharCode(t[a]);r.content=i,$(r).trigger("onload")},o.readAsArrayBuffer(e)}),ParametersLive=function(e,M,A){A||(A={}),_.each(e,function(u){if(u.type){var o=M.find('[pid="'+u.id+'"]');if(o){if((u.el=o).find(".operatorselect").off("change"),o.find(".operatorselect").on("change",function(){u.operator=$(this).val(),u.set("___nochange")}),"cash"==u.type)return o.find("input").on("change",function(){var e=$(this).val();u.isValid(e)?o.removeClass("error"):o.addClass("error"),u.set(e)}),void o.find("input").on("keyup",function(){var e=$(this).val();o.find(".convertValue").html(u.app.store.cash.toBTC(e,u.currency,!0))});if("cashrange"==u.type)return o.find("input").on("change",function(){var e=$(this).val(),t=$(this).attr("index");u.isValid(e)?o.removeClass("error"):o.addClass("error"),u.set(e,t)}),void o.find("input").on("keyup",function(){$(this).val(),$(this).attr("index")});if("numberrange"==u.type)return void o.find("input").on("change",function(){var e=$(this).val(),t=$(this).attr("index");u.isValid(e)?o.removeClass("error"):o.addClass("error"),u.set(e,t)});if("html"==u.type&&!_Node)return o.trumbowyg({btns:[["bold","italic"],["link"]]}),void o.on("tbwblur",function(){var e=o.trumbowyg("html");u.set(e)});if("image"==u.type){var e=o.find(".addImage"),s=o.find(".imagesContainer"),t=o.find(".imageContainer");u.upload.el=e,u.onLive&&u.onLive(t,u),u.upload.beforeUpload=function(e,t){u.previewTemplate&&s.append(u.previewTemplate({file:e,processId:t}))},u.upload.onUpload=function(e,t){if(u.previewTemplate){var n=deep(e,u.previewPath||""),a=s.find('[processId="'+t+'"]'),i=s,r="append";0<a.length&&(i=a,r="replaceWith"),i[r](u.previewTemplate({src:n,processId:t,options:u.upload})),a=s.find('[processId="'+t+'"]'),u.onLive(a,u)}u.set(n),u.upload._onUpload&&u.upload._onUpload(e)},initUpload(u.upload)}if("valuesmultitree"==u.type){var c=function(){o.find(".checkbox").prop("checked",!1);var e=_.map(u.value,function(e){return u.treemap[e]});u.every({group:function(e,t,n,a){o.find('[value="'+e.id+'"]').prop("checked",!0),e.active&&a()},value:function(e,t,n){o.find('[value="'+e.id+'"]').prop("checked",!0)}},e)},n=function(e,t){var n=u.treemap[e];a(n,t)},a=function(e,t){if(e){void 0===t&&(t=!e.active),e.active=t;var n=o.find('[groupid="'+e.id+'"]'),a=n.find(".vmt_group_params"),i=n.attr("level");e.active?(a.html(u.renderLevel(e.values,i+1)),n.removeClass("hidden"),n.addClass("active")):(a.html(""),n.removeClass("active"))}},l=function(){_.each(u.treemap,function(e){e.active=!1})};return o.find(".vmt_showMore").on("click",function(){o.addClass("showedMore")}),o.find(".vmt_hideMore").on("click",function(){o.removeClass("showedMore")}),o.find(".autoSearch").on("keyup",function(e){var t=$(this).val();if(t&&1<t.length)if(13==(e.keyCode||e.which)){var n=u.treemap[t];if(n){removeEqual(u.value,n.id),o.find('input[value="'+n.id+'"]').prop("checked",!0).change(),$(this).val(""),l();var a=u.renderLevel(null,0);o.find(".chinputsv").html(a),c()}}else{l();var i=u.searchValues(t),r={};_.each(i,function(e){_.each(e.parents,function(e){r[e.id]=!0})});a=u.renderLevel(null,0,{group:function(e){if(r[e.id])return e.active=!0},value:function(e){if(i[e.id])return!0}});o.find(".chinputsv").html(a),c()}else{l();a=u.renderLevel();o.find(".chinputsv").html(a),c()}}),o.on("click",".vmt_panel_wrapper",function(){var e=$(this).closest("[groupid]").attr("groupid");n(e),c()}),o.on("change",'input[type="checkbox"]',function(){var e,t=$(this).attr("value"),n=$(this).is(":checked")?1:0,a=u.treemap[t],i={},r={},o=function(){a.parent&&u.childselected(a.parent,i,r)&&(a=a.parent,(i={})[a.id]=!0,o())},s=function(e){e.parent&&(r[e.parent.id]=!0,s(e.parent))};n?(i[a.id]=!0,o(),a.values&&u.every({group:function(e,t,n,a){r[e.id]=!0,a()},value:function(e){r[e.id]=!0}},a.values)):(function(t){if(t.parent){var e=u.parentselected(t.parent,[],[]);e&&(r[e.id]=!0,_.each(t.parent.values,function(e){e.id!=t.id&&(i[e.id]=!0)}))}}(a),r[a.id]=!0,s(a));var l=u.composeValues(i,r);e=_.map(l,function(e,t){return t}),u.set(e),c()}),void c()}if("valuesmulti"==u.type)return o.find("input").on("change",function(){var e=$(this).attr("val"),t=$(this).is(":checked")?1:0;u.set(e,t),o.removeClass("error")}),o.find(".vm_showMore").on("click",function(){o.addClass("showedMore")}),void o.find(".vm_hideMore").on("click",function(){o.removeClass("showedMore")});if("valuescustom"==u.type||"values"==u.type||"valuesmultibig"==u.type){var i=null,r=o.find(".vc_inputWrapper input"),d=function(){return"valuesmultibig"==u.type?o.find(".vc_valuecustom"):o},f=function(){d().toggleClass("opened"),o.find(".vc_value").removeClass("hidden"),d().hasClass("opened")?($("html").on("click",v),window.addEventListener("scroll",p),o.find(".vc_selectInput").scrollTop(0)):p()},p=function(){i&&r.val(i),d().removeClass("opened"),$("html").off("click",v),window.removeEventListener("scroll",p)},v=function(e){0===o.has(e.target).length&&d().hasClass("opened")&&p()};("valuescustom"==u.type||u.autoSearch)&&(o.find(".vc_iconWrapper").on("click",function(){f(),u.autoSearch&&setTimeout(function(){r.focus(),i=r.val(),r.val("")},200)}),o.find("input").on("focus",function(){$(this).select()})),"values"!=u.type||u.autoSearch||o.find(".vc_textInput").on("click",function(){f()}),o.find(".vc_value").on("click",function(){i=null;var e=$(this).attr("value");r.val(e),r.change(),d().removeClass("opened"),d().removeClass("error")}),o.find(".vc_selected_value_icon").on("click",function(){var e=$(this).closest(".vc_selected_value").attr("value");u.set(e),o.parent().html(u.input()),ParametersLive([u],M,A)}),u.autoSearch&&(r.focus(function(){this.select()}),r.on("keyup",function(e){i=null;var a=$(this).val().toLowerCase();if(d().hasClass("opened")||f(),13==(e.keyCode||e.which)){var t=o.find(".vc_value:not(.hidden)");return 0<t.length&&(a=t.attr("value")),$(this).val(a),$(this).change(),!1}a?$.each(o.find(".vc_value"),function(){var e=$(this),t=e.attr("value").toLowerCase(),n=e.text().toLowerCase();-1<t.indexOf(a)||-1<n.indexOf(a)?e.removeClass("hidden"):e.addClass("hidden")}):o.find(".vc_value").removeClass("hidden")}));var h=function(){var e=$(this),t=e.val();if(u.autoSearch){var n=u.isValid(t);if(t&&!n)return void setTimeout(function(){e.val()==t&&u.require&&($(e).val(u.defaultValue),$(e).change())},150);n&&(t=n)}u.set(t),e.val(u.labelByValue(t)),"valuesmultibig"==u.type&&(o.parent().html(u.input()),ParametersLive([u],M,A)),o.removeClass("error")};return r.on("change",h),void(u.onType&&r.on("keyup",h))}if("location"==u.type)return u.options.inputBinding||(u.options.inputBinding={}),u.options.inputBinding.locationNameInput=o.find(".place input"),u.options.inputBinding.radiusInput=o.find(".radius select"),u.options.onchanged=function(e,t,n){var a=$(this).locationpicker("map"),i=a.location.addressComponents,r={};_.clone(e),r.latitude=e.latitude,r.longitude=e.longitude,r.radius=t,r.country=i.country,r.zip=i.postalCode,r.place=a.location.formattedAddress,u.set(r)},u.options.location={latitude:u.value.latitude,longitude:u.value.longitude},u.options.enableAutocomplete=!0,u.options.autocompleteOptions={types:["(regions)"],componentRestrictions:{country:"us"}},u.options.enableAutocompleteBlur=!0,u.options.radius=u.value.radius,5e3<u.options.radius&&(u.options.zoom=10),1e4<u.options.radius&&(u.options.zoom=9),2e4<u.options.radius&&(u.options.zoom=8),5e4<u.options.radius&&(u.options.zoom=7),1e5<u.options.radius&&(u.options.zoom=6),25e4<u.options.radius&&(u.options.zoom=5),5e5<=u.options.radius&&(u.options.zoom=4),o.find(".map").locationpicker(u.options),void o.find(".locationInputUse input").on("change",function(){var e=!!$(this).is(":checked");o.toggleClass("notused"),e?(o.find(".place input").removeAttr("disabled"),o.find(".radius select").removeAttr("disabled")):(o.find(".place input").attr("disabled","disabled"),o.find(".radius select").attr("disabled","disabled")),u.set({using:e})});if("color"==u.type&&o.simpleColor({boxWidth:60,cellWidth:30,cellHeight:30,columns:4,cellMargin:2,colors:u.possibleValues,onSelect:function(e){u.set(e)}}),"date"==u.type){o.pickadate({today:"",onSet:function(e){if(e.select){var t=dateToStrSmall(new Date(e.select));u.set(t)}else u.set()},selectYears:!0,selectMonths:!0,format:"dddd, dd mmm, yyyy",formatSubmit:"yyyymmdd",min:u.options.min||void 0,max:u.options.max||void 0});var m=o.pickadate("picker");u.value&&m.set("select",strToDateArr(u.value))}if("daterange"==u.type){var g,y,b=function(){u.value[0]?y.set("min",strToDateArr(u.value[0])):y.set("min",u.options.min||!1),u.value[1]?g.set("max",strToDateArr(u.value[1])):g.set("max",u.options.max||!1)},w={selectYears:!0,selectMonths:!0,today:"",format:"dddd, dd mmm, yyyy",formatSubmit:"yyyymmdd",min:u.options.min||void 0,max:u.options.max||void 0},k=_.clone(w),x=_.clone(w),C=function(e,t){var n="";e.select&&(n=dateToStrSmall(new Date(e.select))),void 0===e.select&&void 0===e.clear||(u.set(n,t),b())};return k.onSet=function(e){C(e,0)},x.onSet=function(e){C(e,1)},o.find(".from").pickadate(k),o.find(".to").pickadate(x),g=o.find(".from").pickadate("picker"),y=o.find(".to").pickadate("picker"),u.value[0]&&g.set("select",strToDateArr(u.value[0])),u.value[1]&&y.set("select",strToDateArr(u.value[1])),void b()}if("hours"==u.type)return void o.find(".dayrow select").on("change",function(){var e=$(this).val(),t=$(this).closest(".trange").attr("index"),n=$(this).closest(".dayrow").attr("day");"false"==e&&(e=null),u.set(e,n,t),o.removeClass("error")});if("category"==u.type)return void o.on("click",function(){u.app.nav.api.load({open:!0,id:"postSelectCategory",inWnd:!0,essenseData:{header:"Select Category",path:o.attr("parent"),validation:"canCreateItem",onSelectCategory:function(e){u.set(e.path())}}})});if("phone"==u.type&&o.mask("(999) 999-9999"),"string"==u.type&&u.autoSearch){var S=o.closest(".vc_autosearchInput").find(".placeholderghost"),T="&nbsp;";o.on("keydown",function(e){var t=$(this),n=t.val();39==(e.keyCode||e.which)?(n=S.html())!=T&&(S.html(T),t.val(S.attr("value")),t.change()):S.html(n||T)});var D=function(e){var t=$(this),n=t.val();S.html(n||T),n&&13!=(e.keyCode||e.which)&&u.autoSearch(n,u,function(e){t.val()==n&&(S.html(n||T),n&&e&&0==e.toLowerCase().indexOf(n.toLowerCase())&&S.html(n+e.substr(n.length)).attr("value",e))})};o.on("keyup",D),o.on("focus",D),o.on("blur",function(){S.html(T)})}h=function(){var e=$(this).val();"boolean"==u.type&&(e=$(this).is(":checked")?1:0),"email"==u.type&&"_@_._"==e&&(e=""),u.isValid(e)?o.removeClass("error"):o.addClass("error"),u.set(e)};o.on("change",h),u.onType&&o.on("keyup",h)}}}),M.find("input").inputmask&&$.each(M.find("input"),function(){var e=$(this);e.attr("notmasked")||e.inputmask({})})},Parameter=function(e){e||(e={});var p=this;return p.type=(e.type||"NUMBER").toLowerCase(),p.name=e.name||"",p.id=e.id||makeid(),p.defaultValue=e.defaultValue,p.order=e.order||0,p.require=e.require||!1,p.options=e.options||{},p.canClear=!0,p.patterns=e.patterns||[],!1===e.canClear&&(p.canClear=e.canClear),p.possibleValues=e.possibleValues||[],p.possibleValuesLabels=e.possibleValuesLabels||[],p.value=e.value||null,p.defaultValuesTemplate=e.defaultValuesTemplate||null,p.currency=e.currency||null,p.app=e.app,p.upload=e.upload,p.uploadTemplate=e.uploadTemplate,p.previewTemplate=e.previewTemplate,p.previewPath=e.previewPath,p.onLive=e.onLive,p.hidden=e.hidden||!1,p.groupId=e.groupId||0,p.dbId=e.dbId||null,p.convert=e.convert||null,p.dbConvert=e.dbConvert||null,p.dbType=e.dbType||null,p.dbFunc=e.dbFunc||"equal",p._onChange=e._onChange||null,p.onType=e.onType||null,p.description=e.description||"",p.format=e.format||{},p.placeholder=e.placeholder||"",p.autoSearch=e.autoSearch||!1,p.html=e.html||!1,p.operatorSelect=e.operatorSelect||null,p.operator=e.operator||null,p.if=e.if||null,-1<p.type.indexOf("range")&&(p.dbFunc="fromto"),p.removeImage=function(t){new Img({type:p.upload.data.essense,name:t.value,app:p.app,refId:p.upload.data.essense.RefID}).remove(function(e){removeEqual(p.value,t.value),t.clbk&&t.clbk(e)})},p.isValid=function(t){void 0===t&&(t=p.value);var e=p.mask();if("number"!=p.type&&"cash"!=p.type||(t=Number(t).toFixed(deep(p,"format.Precision")||0)),"hours"==p.type)return!0;if("color"==p.type)return!0;if("date"==p.type||"daterange"==p.type)return!0;if("html"==p.type||"text"==p.type)return!(p.require&&!t);var n=!0;if(_.each(p.patterns,function(e){e.test(t)||(n=!1)}),!n)return!1;if(("values"==p.type||"valuesmultibig"==p.type)&&p.autoSearch){var a=_.find(p.possibleValues,function(e){if(e.toLowerCase()==t.toLowerCase())return!0});return!!a&&a.toUpperCase()}if("boolean"==p.type)return!0;if(!(p.require||t&&0!=t))return!0;var i=Inputmask.isValid(t.toString(),e);return!p.require||t&&0!=t||(i=!1),"number"!=p.type&&"cash"!=p.type||_.isNumber(Number(t))||(i=!1),i},p.openGallery=function(e){e||(e={});var t=_.map(p.value,function(e){return new Img({type:p.upload.data.essense,name:e,app:p.app})});e=_.extend(e,{images:t,essense:p.upload.data.essense,size:"full",smallSize:"thumbnail",edit:!0}),p.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:e})},p.default=function(){var e={string:"",number:0,percent:0,dollars:0,text:"",category:0,html:"",location:{country:"US",latitude:40.73387539871257,longitude:-73.98949970898434,place:"New York, NY 10003, USA",radius:1e4,zip:"10003",using:!0},valuesmulti:[],values:"",boolean:!1,cash:0,image:[],numberrange:["",""],cashrange:["",""],hours:{},valuesmultibig:[],valuescustom:"",valuesmultitree:[],phone:"",color:"#1E3DF7",date:"",daterange:["",""],email:""};return void 0!==p.defaultValue?p.defaultValue:p.type&&void 0!==e[p.type]?e[p.type]:0},p.renders={category:function(e){var t=p.app.store.categories.find(p.value||"0");return t?t.htmlpath():""},boolean:function(e){var t="",n="";return p.value&&"0"!=p.value&&(n="checked"),t+='<input pid="'+p.id+'" type="checkbox" disabled id="checkbox_'+p.id+'"'+n+' class="checkbox nolabel '+p.type+'" />',t+='<label for="checkbox_'+p.id+'"></label>'},numberrange:function(e,t){return p.value[t]},cashrange:function(e,t){return p.value[t]}},p.mask=function(e){var t=!1,n={rightAlign:!1,autoUnmask:!0};if("number"!=p.type&&"cash"!=p.type||(n.alias="numeric",n.groupSeparator=",",n.radixPoint=".",n.digits=deep(p,"format.Precision"),n.digitsOptional=!1,n.autoGroup=!0,n.allowMinus=deep(p,"format.AllowMinus")||!1,0<n.digits&&(n.placeholder="0.00"),t=!0),"numberrange"!=p.type&&"cashrange"!=p.type||(n.alias="numeric",n.nullable=!0,n.groupSeparator=",",n.autoGroup=!0,n.digits=deep(p,"format.Precision"),t=!0),"email"==p.type&&(n.alias="email",t=!0),"string"==p.type){var a=[0,""];p.require&&(a[0]=1),p.format.Length&&(a[1]=p.format.Length),n.regex="[а-яА-Яa-zA-Z0-9 ,-.&]{"+a.join(",")+"}",t=!0}return t?(e&&(n='data-inputmask="'+(n=(n=(n=JSON.stringify(n)).substring(1)).substring(0,n.length-1).replace(/"/g,"'"))+'"'),n):e?"":null},p.labelByValue=function(e){var t=_.indexOf(p.possibleValues,e);return-1<t?p.possibleValuesLabels[t]:e},p.operatorInput=function(){if(!p.operatorSelect)return"";var n='<div class="operator"><select class="operatorselect">';return _.each(p.operatorSelect,function(e){var t="";e.id==p.operator&&(t="selected"),n+="<option "+t+' + value="'+e.id+'">'+e.name+"</option>"}),n+="</select></div>"},p.input=function(e){e||(e={});var t=p.mask(!0);if("image"==p.type&&p.uploadTemplate&&p.upload&&p.previewTemplate)return p.uploadTemplate(p);if("location"==p.type){var n="checked",a="",i="";return p.value.using||(n="",a="notused",i='disabled="disabled"'),'<div pid="'+p.id+'" class="locationInputWrapper '+a+'"><div class="table locationInputs"><div class="locationInputUse"><input type="checkbox" id="checkbox_'+p.id+'_location" '+n+' class="checkbox nolabel" /><label for="checkbox_'+p.id+'_location"></label></div><div class="locationInput place"><input type="text" notmasked="notmasked" placeholder="Name Of Place"></div><div class="locationInput radius"><select><option value="1000">1 mi</option><option value="5000">5 mi</option><option value="10000">10 mi</option><option value="20000">20 mi</option><option value="50000">50 mi</option><option value="100000">100 mi</option><option value="500000">500 mi</option></select></div></div><div class="mapwr"><div class="map"></div><div class="mapbwoverlay"></div></div></div>'}if("valuescustom"==p.type||"values"==p.type||"valuesmultibig"==p.type){i="";var r=p.value;"valuesmultibig"==p.type&&(r=""),"values"!=p.type||p.autoSearch||(i="disabled"),"values"!=p.type&&"valuescustom"!=p.type||(r=p.labelByValue(p.value));var o="";o+='<div class="vc_iconWrapper">',o+='<div class="vc_iconSpinWrapper">',o+='<i class="fa fa-caret-down" aria-hidden="true"></i>',o+="</div>",o+="</div>";var s="";return"valuesmultibig"==p.type?(s+='<div class="vc_valuecustom_multibig" pid="'+p.id+'">',s+='<div class="vc_valuecustom">'):s+='<div class="vc_valuecustom" pid="'+p.id+'">',s+='<div class="vc_textInput table">',p.format.right&&(s+=o),s+='<div class="vc_inputWrapper">',s+="<input "+i+' type="text" value="'+r+'" placeholder="'+p.placeholder+'">',s+="</div>",p.format.right||(s+=o),s+="</div>",s+='<div class="vc_selectInput">',p.defaultValuesTemplate?s+=p.defaultValuesTemplate(p):(p.defaultValue||(s+='<div class="vc_value" value="">',s+="&nbsp;",s+="</div>"),_.each(p.possibleValues,function(e,t){if(!("valuesmultibig"==p.type&&-1<_.indexOf(p.value,e.toUpperCase()))){var n=p.labelByValue(e);s+='<div class="vc_value" value="'+e+'">',s+=n,s+="</div>"}})),s+="</div>",s+="</div>","valuesmultibig"==p.type&&(s+='<div class="vc_selected_values">',_.each(p.value,function(e,t){var n=p.labelByValue(e);s+='<div class="vc_selected_value table" value="'+e+'">',s+='<div class="vc_selected_value_icon">',s+='<i class="fas fa-times-circle"></i>',s+="</div>",s+='<div class="vc_selected_value_value">',s+=n,s+="</div>",s+="</div>"}),s+="</div>",1<p.value.length&&(s+=p.operatorInput()),s+="</div>"),s}if("text"==p.type||"html"==p.type)return s='<textarea placeholder="'+p.placeholder+'" notmasked="notmasked" pid="'+p.id+'" class="'+p.type+' ">'+p.render(!0)+"</textarea>";if("category"==p.type){var l=p.app.store.categories.find(p.value||"0");if(l&&l.canCreateItem())var s='<div parent="'+l.parent.path()+'" pid="'+p.id+'" class="editCategoryPath">'+l.htmlpath()+"</div>";else var s='<button pid="'+p.id+'" class="selectCategoryPath">Select Category</button>';return s}if("valuesmulti"==p.type){var s='<div class="vm_valuesmulti" pid="'+p.id+'">';return _.each(p.possibleValues,function(e,t){var n="",a=e;p.possibleValuesLabels[t]&&(a=p.possibleValuesLabels[t]),p.options.valueTemplate&&(a=p.options.valueTemplate(e,a)),-1<_.indexOf(p.value,e)&&(n="checked"),5==t&&(s+='<div class="vm_showMore">Show More</div>',s+='<div class="vm_hidden">',s+='<div class="vm_hideMore">Hide</div>'),s+='<div class="vm_value">',s+='<input val="'+e+'" type="checkbox" id="checkbox_'+p.id+"_"+e+'"'+n+' class="checkbox nolabel '+p.type+'" />',s+='<label for="checkbox_'+p.id+"_"+e+'">'+a+"</label>",s+="</div>"}),6<=p.possibleValues.length&&(s+='<div class="vm_hideMore">Hide</div>',s+="</div>"),s+="</div>"}if("valuesmultitree"==p.type){var u=null,s='<div class="vmt_valuesmultitree" pid="'+p.id+'">';if(p.autoSearch&&(s+='<div class="autoSearchWrapper"><input type="text" class="autoSearch" placeholder="Search Code"></div>'),e.init){var c={},d={};_.each(p.value,function(e){var t=p.treemap[e];t&&(d[e]=t,_.each(t.parents,function(e){c[e.id]=!0}))}),u={group:function(e){if(c[e.id])return e.active=!0},value:function(e){return!0}}}p.renderLevel=function(e,t,o){var s="";s+='<div class="nextlevel">';return p.every({group:function(e,t,n,a){var i=e.name,r=e.active||o&&o.group(e);p.options.valueTemplate&&(i=p.options.valueTemplate(e)),(r||!o||o.value(e))&&(s+='<div class="vmt_group " level="'+t+'" groupid="'+e.id+'">',s+='<div class="vmt_name table">',s+='<div class="vmt_checkbox">',s+='<input type="checkbox" value="'+e.id+'" id="checkbox_'+p.id+e.id+'" class="checkbox" />',s+='<label for="checkbox_'+p.id+e.id+'">'+i+"</label>",s+="</div>",s+='<div class="vmt_panel">',s+='<div class="vmt_panel_wrapper">',s+='<i class="fa fa-angle-up" aria-hidden="true"></i>',s+="</div>",s+="</div>",s+="</div>",s+='<div class="vmt_group_params">',r&&(s+='<div class="nextlevel">',a(),s+="</div>"),s+="</div>",s+="</div>")},value:function(e,t,n){if(!o||o.value(e)){var a=e.name;p.options.valueTemplate&&(a=p.options.valueTemplate(e)),s+='<div class="vmt_value" level="'+t+'" groupid="'+e.id+'">',s+='<div class="vmt_checkbox">',s+='<input type="checkbox" value="'+e.id+'" id="checkbox_'+p.id+e.id+'" class="checkbox" />',s+='<label for="checkbox_'+p.id+e.id+'">'+a+"</label>",s+="</div>",s+="</div>"}}},e,t),[s+="</div>",!1]};var f=p.renderLevel(null,0,u);return s+='<div class="chinputsv">',s+=f[0],s+="</div>",s+="</div>"}if("boolean"==p.type){var s="";n="";return p.value&&"0"!=p.value&&(n="checked"),s+='<input pid="'+p.id+'" type="checkbox" id="checkbox_'+p.id+'"'+n+' class="checkbox nolabel '+p.type+'" />',s+='<label for="checkbox_'+p.id+'"></label>'}if("cash"==p.type){s='<div class="cashWrapper" pid="'+p.id+'">';return s+='<div class="inputCashWrapper">',s+="<input "+t+' class="'+p.type+' input" value="'+p.render(!0)+'">',s+="</div>",p.currency&&(s+='<div class="convertCashWrapper">',s+='<div class="convertValue">'+p.app.store.cash.toBTC(p.value,p.currency,!0)+"</div>",s+="</div>"),s+="</div>"}if("cashrange"==p.type){s='<div class="cashrangeWrapper" pid="'+p.id+'">';return s+='<div class="inputsCashrangeWrapper">',s+='<div class="inputCashrangeWrapper">',s+='<input index="0" '+t+' class="'+p.type+' input" placeholder="From" value="'+p.render(!0,0)+'">',s+="</div>",s+='<div class="inputCashrangeWrapper">',s+='<input index="1" '+t+' class="'+p.type+' input" placeholder="To" value="'+p.render(!0,1)+'">',s+="</div>",s+="</div>",p.currency&&(s+='<div class="convertsCashrangeWrapper">',s+='<div class="convertCashrangeWrapper">',s+='<div class="convertValue" index="0">'+p.app.store.cash.toBTC(p.value[0],p.currency,!0)+"</div>",s+="</div>",s+='<div class="convertCashrangeWrapper">',s+='<div class="convertValue" index="1">'+p.app.store.cash.toBTC(p.value[1],p.currency,!0)+"</div>",s+="</div>",s+="</div>"),s+="</div>"}if("numberrange"==p.type){s='<div class="numberrangeWrapper" pid="'+p.id+'">';return s+='<div class="inputNumberrangeWrapperFrom">',s+='<input index="0" '+t+' class="'+p.type+' input" placeholder="From" value="'+p.render(!0,0)+'">',s+="</div>",s+='<div class="inputNumberrangeWrapperTo">',s+='<input index="1" '+t+' class="'+p.type+' input" placeholder="To" value="'+p.render(!0,1)+'">',s+="</div>",s+="</div>"}if("color"==p.type)return s='<input notmasked="notmasked" pid="'+p.id+'" class="simpleColor input" value="'+p.value+'">';if("daterange"!=p.type)return s="daterange"==p.type?'<input notmasked="notmasked" pid="'+p.id+'" class="datePicker input">':"phone"==p.type?'<input notmasked="notmasked" pid="'+p.id+'" class="'+p.type+' input" value="'+p.render(!0)+'" type="text">':p.autoSearch?'<div class="vc_autosearchInput">\t\t\t\t<div class="placeholder"><div class="placeholderghost">&nbsp;</div></div>\t\t\t\t<div class="autosearchInputCnt">\t\t\t\t<input notmasked="notmasked" '+t+' pid="'+p.id+'" class="'+p.type+' input" placeholder="'+(p.placeholder||"")+'" value="'+p.render(!0)+'" type="text">\t\t\t\t</div></div>':"<input "+t+' pid="'+p.id+'" class="'+p.type+' input" value="'+p.render(!0)+'" type="text">';s='<div class="numberrangeWrapper" pid="'+p.id+'">';return s+='<div class="inputNumberrangeWrapperFrom">',s+='<input notmasked="notmasked" pid="'+p.id+'" class="datePicker input from" placeholder="From">',s+="</div>",s+='<div class="inputNumberrangeWrapperTo">',s+='<input notmasked="notmasked" pid="'+p.id+'" class="datePicker input to" placeholder="To">',s+="</div>",s+="</div>"},p.render=function(e,t){return p.renders[p.type]?p.renders[p.type](e,t):_.isArray(p.value)&&void 0!==t?p.value[t]||"":p.value},p.sets={hours:function(e,t,n){p.value[t]||(p.value[t]={start:null,end:null}),p.value[t][n]=e},location:function(e){e?(e.country&&(p.value.country=e.country),e.latitude&&(p.value.latitude=e.latitude),e.longitude&&(p.value.longitude=e.longitude),e.place&&(p.value.place=e.place),e.radius&&(p.value.radius=e.radius),e.zip&&(p.value.zip=e.zip),void 0!==e.using&&(p.value.using=e.using)):p.value=p.default()},number:function(e){e=Number(e),p.value=e},numberrange:function(e,t){""!==e&&(e=Number(e)),_.isNumber(e)||(e=""),p.value[t]=e},cash:function(e){e=Number(e),_.isNumber(e)||(e=null),p.value=e},cashrange:function(e,t){""!==e&&(e=Number(e)),_.isNumber(e)||(e=""),p.value[t]=e},daterange:function(e,t){p.value[t]=e},image:function(e){"array"!=typeof e&&e?p.value.push(e):p.value=e},valuesmulti:function(e){-1<_.indexOf(p.value,e)?removeEqual(p.value,e):p.value.push(e)},valuesmultibig:function(e){-1<_.indexOf(p.value,e)?removeEqual(p.value,e):p.value.push(e)},valuesmultitree:function(e){p.value=e}},p.set=function(e,t,n){"___nochange"==e||(void 0===e?p.value=p.default():(p.calculation&&(e=p.calculation(e)),p.sets[p.type]?p.sets[p.type](e,t,n):p.value=e)),p._onChange&&p._onChange(p.value,p),p.onChange&&p.onChange(p.value,p)},p.get=function(){return p.dbConvert?p.dbConvert(p.value):p.value},"valuesmultitree"==p.type&&(p.clear=function(){_.each(p.treemap,function(e){e.active=!1})},p.convertValuesToAll=function(i,r){i||(i="id"),"names"==i&&(i="name");var e=_.map(p.value,function(e){return p.treemap[e]}),o=[];return p.every({group:function(e,t,n,a){r&&o.push(e[i]),a()},value:function(e){o.push(e[i])}},e),o},p.convertValues=function(t){return t||(t="id"),"names"==t&&(t="name"),_.map(p.value,function(e){return p.treemap[e][t]})},p.composeValues=function(e,n){var a={};return _.each(p.value,function(e,t){n[e]||(a[e]=!0)}),_.each(e,function(e,t){n[t]||(a[t]=!0)}),a},p.childselected=function(e,t,n){var a=p.composeValues(t,n),i=_.filter(e.values,function(e){if(a[e.id])return!0});return e.values.length==i.length},p.parentselected=function(e,t,n){var a=p.composeValues(t,n),i=function(e){return a[e.id]?e:e.parent?i(e.parent):null};return e?i(e):null},p.every=function(i,e,t){var r=function(e,t){for(var n=e.length,a=0;a<n;a++)value=e[a],value&&(value.values?i.group(value,t,a,function(){r(value.values,t+1)},a):i.value(value,t,a))};e||(e=p.possibleValues),t||(t=0),r(e,0)},p.preparemap=function(){p.treemap={},p.every({value:function(e,t){e.active=!1,p.treemap[e.id]=e},group:function(e,t,n,a){p.treemap[e.id]=e,_.each(e.values,function(t){t.parent=e,t.parents||(t.parents=[e]),_.each(e.parents||[],function(e){t.parents.push(e)})}),a()}})},p.preparemap()),p.searchValues=function(t){t=t.toLowerCase();var n={},i=function(e){(e.id==t||-1<e.name.toLowerCase().indexOf(t))&&(n[e.id]=e)};return p.every({group:function(e,t,n,a){i(e),a()},value:i}),n},null===p.value&&(p.value=p.default()),p},Composite=function(e){e||(e={}),e.type="composite";var i=new Parameter(e);return i.content={},i.template=e.template,i.add=function(e,t){(i.content[e]=t)._onChange=function(){i.collectValues()}},_.each(e.parameters,function(e,t){i.add(t,e)}),i.collectValues=function(){var n={};_.each(i.content,function(e,t){e.value&&(n[t]=e.value)}),i.set(n)},i.applyValues=function(){_.each(i.content,function(e,t){var n=i.value[t];void 0!==n&&(e.value=n,e.applyValues&&e.applyValues())})},i.isValid=function(e,n){var a=!0;return _.each(i.content,function(e){var t=e.isValid(void 0,n);a=a&&t,t||console.log("ADDERROR",e),!t&&"composite"!=t.type&&n&&e.require?e.el.addClass("error"):e.el.removeClass("error")}),a},i.input=function(){var e='<div class="composite" pid="'+i.id+'">';return e+=i.template({content:i.content}),e+="</div>"},i.render=i.input,i},makeid=function(e){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}if(!e)return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t();for(var n="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=0;i<32;i++)n+=a.charAt(Math.floor(Math.random()*a.length));return n},makesystemid=function(e){var t=makeid(e);return t=("afafafaf"+t.substr(8)).replace(/-/g,"")},MD5=function(e){return result=M(V(Y(X(e),8*e.length))),result.toLowerCase()},flb=function(e){return e?e[0].toUpperCase()+e.substr(1):""},emptyFunction=function(){return!0},isMobile=function(){return $("html").hasClass("mobile")},isTablet=function(){return $("html").hasClass("mobile")||$("html").hasClass("tablet")},convertToBase64=function(e){var t=";base64,",n=e.indexOf(t)+t.length,a=e.substring(n);return window.atob(a)},parameters=function(e,t){if(e||"undefined"==typeof window){if(t){var n=e.split("?");n[1]&&(e=n[1])}}else e=_SEO?_SEOuri.split("?")[1]:window.location.search.substr(1);if(/^([A-Za-z0-9]*)$/.test(e))return e||{};var a={};for(p in uParts=e.split("&"),uParts){uParts[p]=uParts[p].split("=");var i=_.clone(uParts[p]);i.splice(0,1),a[uParts[p][0]]=decodeURI(i.join("=").replace(/!!/g,"&"))}return a},collectParameters=function(e,n){var a="?";return _.each(e,function(e,t){n&&-1!=_.indexOf(n,t)||!e||(a+=t+"="+e+"&")}),a=a.slice(0,-1)},rand=function(e,t){return e=parseInt(e),t=parseInt(t),Math.floor(Math.random()*(t-e+1))+e},trim=function(e){return rtrim(ltrim(e))},ltrim=function(e){return e.replace(/^\s+/,"")},rtrim=function(e){return e.replace(/\s+$/,"")},returnDaysInRange=function(e){var t;if("ytd"==e){var n=new Date,a=new Date(dateUtc(n).y,0,1);t=((n.getTime()-a.getTime())/1e3/60/60/24).toFixed(0)}return"5d"==e&&(t=5),"1m"==e&&(t=31),"2m"==e&&(t=62),"3m"==e&&(t=93),"6m"==e&&(t=186),"1y"==e&&(t=365),"2y"==e&&(t=730),"3y"==e&&(t=1096),"5y"==e&&(t=1825),"10y"==e&&(t=3652),"max"==e&&(t=1e5),t},maskValue=function(e){e||(e={}),e.decimal||(e.decimal="."),e.allowNegative||(e.allowNegative=!0),e.precision||(e.precision=0),e.thousands||(e.thousands=","),e.prefix||(e.prefix=""),e.suffix||(e.suffix=""),e.value&&(e.value=""+e.value);var t,n,a,i=e.value||"0",r=-1<i.indexOf("-")&&e.allowNegative?"-":"",o=i.replace(/[^0-9]/g,""),s=o.slice(0,o.length-e.precision);""===(s=(s=s.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,e.thousands))&&(s="0"),t=s,0<e.precision&&(n=o.slice(o.length-e.precision),a=new Array(e.precision+1-n.length).join(0),t+=e.decimal+a+n);return-1<i.indexOf("-")&&(i=i.replace("-",""),"-"),r+e.prefix+t+e.suffix},Math.log2=Math.log2||function(e){return Math.log(e)/Math.LN2},progressBar=function(e){(e||e.el)&&(100<=e.progress&&(e.progress=0),100<=e.progress&&(e.status=""),100<=e.progress&&(e.addStatus=""),null!=typeof e.progress&&e.el.find(".bar").width(e.progress+"%"),null!=typeof e.status&&e.el.find(".status").html(e.status),null!=typeof e.addStatus&&e.el.find(".addStatus").html(e.addStatus))},importScripts=function(e,t,n,a,i,r){void 0===i||null==i?i=0:i++,i==e.length?n():t[e[i].src]?importScripts(e,t,n,a,i,r):importScript(e[i].src,function(){t[e[i].src]=!0,importScripts(e,t,n,a,i,r)},a,r,e[i].module)},importScript=function(e,t,n,a,i){if(_Node||"undefined"!=typeof _Electron&&1==_Electron){e=e.split("?")[0];var r="../";if(_Electron&&(r="./"),i){delete require.cache[require.resolve(r+e)];var o=require(r+e);a.modules[i]={module:o},a.modules[i].module.app=a}else require(r+e);t()}else{o=document.createElement("script");n||(n=document.getElementsByTagName("head")[0]),o.readyState&&!o.onload?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,t())}:o.onload=t,o.src=e,n.appendChild(o)}},importCss=function(e){var t=document.createElement("link");t.rel="stylesheet",t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)},GetBrowser=function(){var e,t=navigator.appName,n=navigator.userAgent,a=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return a&&null!=(e=n.match(/version\/([\.\d]+)/i))&&(a[2]=e[1]),(a=a?[a[1],a[2]]:[t,navigator.appVersion,"-?"])[0]},_saveAs=function(e){if(window.navigator.msSaveOrOpenBlob){var t=new Blob([decodeURIComponent(e.file)],{type:"text/"+e.format+";charset=utf-8;"});window.navigator.msSaveOrOpenBlob(t,e.name+"."+e.format)}else saveAs(e)},saveAs=function(e){if("msie"==GetBrowser().toLowerCase())return message("Internet Explorer does not support this operation."),!1;e||(e={});var t=document.createElement("a");return document.body.appendChild(t),t.download=e.download||(e.name||"unknown")+"."+e.format.toLowerCase(),t.target="_blank",e.noA||("xlsx"==e.format.toLowerCase()&&(e.file="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+e.file),"csv"==e.format.toLowerCase()&&(e.file="data:text/csv;charset=utf-8,"+e.file),"pdf"==e.format.toLowerCase()&&(e.file="data:application/pdf;base64,"+e.file),"txt"==e.format.toLowerCase()&&(e.file="data:text;charset=utf-8,"+e.file)),t.href=e.file,t.click(),!0},initUp=function(e,t){t||(t={});var n=this,a=$(window),i={up:{up:function(){t.scrollTop?t.scrollTop():_scrollTop(0)}}.up,view:function(){200<a.scrollTop()?e.fadeIn(100):e.fadeOut(100)}};return n.destroy=function(){e.off("click",i.up),window.removeEventListener("scroll",i.view)},n.init=function(){return e.on("click",i.up),window.addEventListener("scroll",i.view),n},n},_scrollTop=function(e,t,n){t||(t=$("body,html")),n||(n=200),t.animate({scrollTop:e},n)},_scrollTo=function(e,t,n){e||(e=$(this));var a=e.offset(),i=(e.height()-$(window).height())/2;if(a){var r=a.top+i;_scrollTop(r,t,n)}},_scrollToTop=function(e,t,n,a){e||(e=$(this)),a||(a=0);var i=e.offset();if(i){var r=i.top+a;_scrollTop(r,t,n)}},offScroll=function(){if("undefined"!=typeof window){var e=$(window).scrollTop();$(window).bind("scroll",function(){$(window).scrollTop(e)})}},onScroll=function(){"undefined"!=typeof window&&$(window).unbind("scroll")},inView=function(e,r){r||(r={}),r.inel||(r.inel=window),r.offset||(r.offset=0),r.elOffset=0;try{r.elOffset=r.inel.offset().top}catch(e){r.elOffset=0}r.mode||(r.mode="part");var t=$(r.inel),o={top:t.scrollTop()-r.offset,bottom:t.scrollTop()+t.height()+r.offset},n=e.filter(function(){var e=$(this),t=e.offset().top,n=t+e.height(),a=o.top<=t&&t<o.bottom||n<=o.bottom&&o.top<n,i=o.top<=t&&n<=o.bottom;if(r.debug&&console.log("range.top, range.bottom, offsetTop, bottom",o.top,o.bottom,t,n),"partall"==r.mode){if(i)return e.data("inView","all"),!0;if(a)return e.data("inView","part"),!0}return!("part"!=r.mode||!a)||(!("all"!=r.mode||!i)||void 0)});return"partall"==r.mode&&(n=n.sort(function(e,t){return e=$(e),t=$(t),e.data("inView")==t.data("inView")?0:"all"==e.data("inView")?-1:"part"==e.data("inView")?1:void 0})),n},Roller=function(e){e||(e={});var f=this;f.inner=e.inner||".cnt",f.selector=e.selector||".roller",f.elements=e.elements,f.offset=e.offset||0;var t=e.cnt,a={},p={},v=$(window),h={},n=function(){var n,u=i(),c=(u.offset().top,u.height()),d=v.height(),e=(n=[],_.each(a,function(e,t){n.push({id:t,e:e})}),n=_.sortBy(n,function(e){return-e.e.find(f.inner).height()}));_.each(e,function(e){var t,n,a=e.e,i=e.id;if(a!=u){var r=a.find(f.inner),o=(t=a.offset().top,0<(n=v.scrollTop()-t+f.offset)?n:0),s=r.height(),l=s-(d-f.offset);0<l&&(o-=l),o+s<=c||(o=c-s),o<0&&(o=0),p[i].height(o),h[i]=o}else p[i].height(0)})},i=function(){return _.max(a,function(e){return e.find(f.inner).height()})};return f.clear=function(){_.each(p,function(e){e.height(0)})},f.init=function(){return f.elements||(f.elements=t.find(f.selector)),f.elements.each(function(){var e=$(this),t=e.find(f.inner),n=e.attr("roller");a[n]=e,p[n]=$("<div>",{class:"pre"}),t.before(p[n])}),window.addEventListener("scroll",n),f},f.apply=function(){return f.clear(),n(),f},f.destroy=function(){f.clear(),window.removeEventListener("scroll",n)},f},Caption=function(i){var r=i.container,o=i.caption,s=i.offset||[0,0],l=!1,u=$(window),c=null,d=makeid(!0),f=i.pos||"top",p="cf_spacer",v="cf_caption",e=this,h=function(){c&&c.remove(),c=null,r.find("."+p+"."+d).remove(),o.removeClass(v),o.width("auto"),o.css(f,"0"),l=!1},m=function(){l&&o.width(r.width())},t=function(){if(r.is(":visible")){var e=u.scrollTop(),t=r.offset().top-s[0],n=r.offset().top+r.height()-s[0]+s[1]-o.height(),a=e+u.height();i.calculations&&(i.calculations.bottom&&(n=i.calculations.bottom(o,s)),i.calculations.top&&(t=i.calculations.top(o,s))),"top"==f&&t<e&&e<n||"bottom"==f&&t<a&&a<n+o.height()?l?m():(h(),l=!0,c=$("<div>",{class:p+" "+d,height:o.height(),width:o.width()}),o.before(c),o.addClass(v),o.css(f,s[0]+"px"),o.css("z-index","100"),o.width(c.width())):h()}};return e.destroy=function(){h(),window.removeEventListener("scroll",t),window.removeEventListener("resize",m)},e.init=function(){return r||(r=o.parent()),window.addEventListener("scroll",t),window.addEventListener("resize",m),e},e.setOffset=function(e){s=e,h(),t()},e.action=t,e.clear=h,e},AJAX=function(e){var v=this,h=e.user||!1,m=e.server||!1,g=e,y={};return _Node||$.ajaxSetup({cache:!1}),v.set={user:function(e){h=e}},v.clearCashe=function(){y={}},v.run=function(i){i||(i={});var e=i.url||m,a=i.dataType||"json",t=i.type||"POST",r=i.dataCashe||!1,n=i.data||{},o=i.action+"."+toDeepKey(n);if(!1===h||!h.extendAjaxData||i.anon&&!0===i.anon||i.imgur||h.extendAjaxData(n,e),g.fingerPrint&&(n.fingerPrint=g.fingerPrint),r){var s=deep(y,o);if(s)return void(i.success&&i.success(_.clone(s)))}if("undefined"!=typeof performance)var l=performance.now();var u=function(e){if(g.errorHandler&&g.errorHandler(e))return;if(!1!==h&&(!i.anon||!0!==i.anon)){JSON.stringify(n,null,4);!_Node&&window.design}},c={json:function(e){var t,n=e;n.root&&(n=n.root),i.imgur?n.success&&(t="success"):t=(n.Result||n.status||"").toLowerCase(),t?"success"!=t&&"ok"!=t?(void 0!==i.errors&&1!=i.errors||u(t),"wrong token"==t&&g.unathorizated&&g.unathorizated(),i.fail&&i.fail(n)):(r&&deepInsert(y,o,_.clone(n)),i.success&&(!1!==h&&!i.noExtend&&h.extendFromAjaxData&&h.extendFromAjaxData(n),i.success(n))):(u("noResult"),i.fail&&i.fail())},html:function(e){i.success&&i.success(e)}};if(i.before&&i.before(),i.preloader&&preloader(!0),_Node){var d={method:t,uri:e,rejectUnauthorized:!1};n&&(d.body=collectParameters(n).substr(1)),request(d,function(e,t,n){if(console.log(e),e){if(u(e),_SEO)return void v.run(i);i.fail&&i.fail(null)}else if("json"==a){try{n=JSON.parse(n)}catch(e){u("Unexpected end of input TE"),i.fail&&i.fail(null)}c.json(n)}else c.html(n)})}else{var f,p={type:t,url:e,data:n,dataType:a,success:function(e){var t;i.preloader&&preloader(!1),t=function(){c[a](e)},"undefined"!=typeof performance?(l=performance.now()-l,i.timeout&&i.timeout>l?setTimeout(function(){t()},i.timeout-l):t()):t()},error:function(e,t,n){var a=null;i.preloader&&preloader(!1),e.responseText?(a=JSON.parse(e.responseText),void 0!==i.errors&&1!=i.errors||u(a.status)):u(null),i.fail&&i.fail(a)}};if(i.imgur)if(p.url=g.imageServer+n.Action,delete n.Action,h)f=h.imgur.token?"Bearer "+h.imgur.token:"Client-ID "+h.imgur.clientId,p.headers={Authorization:f,Accept:"application/json"};$.ajax(p)}},v.api=function(e){e.url=g.apiproxy+"/"+(e.action||""),v.run(e)},v.rpc=function(e){e.action="rpc",e.data={method:e.method,parameters:hexEncode(JSON.stringify(e.parameters||"")),node:g.platform.nodeid};var t=e.success;e.success=function(e){t(deep(e,"data.result")||e)},v.api(e)},v},jsonrpc={CallStack:function(e,t,n,a){this._counter=0,this._enterFn=e,this._exitFn=n,this._enterScope=t,this._exitScope=a}},jsonrpc.CallStack.prototype={enter:function(){this._counter=this._counter<0?1:this._counter+1,1===this._counter&&this._enterFn.apply(this._enterScope,arguments)},exit:function(e){this._counter-=1,0===this._counter&&this._exitFn.apply(this._exitScope,arguments)}},jsonrpc.DelayedTask=function(e,t,n){this._fn=e||function(){},this._scope=t||void 0,this._args=n||[],this._id=null},jsonrpc.DelayedTask.prototype={delay:function(e,t,n,a){var i=this;this._fn=t||this._fn,this._scope=n||this._scope,this._args=a||this._args,this.cancel(),this._id=window.setInterval(function(){window.clearInterval(i._id),i._id=null,i._fn.apply(i._scope,i._args)},e)},cancel:function(){this._id&&(window.clearInterval(this._id),this._id=null)}},jsonrpc.JsonRpc=function(e){this._url=e,this.loading=new jsonrpc.Observable,this.loaded=new jsonrpc.Observable,this.unhandledFailure=new jsonrpc.Observable,this._loadingState=new jsonrpc.CallStack(this.loading.trigger,this.loading,this.loaded.trigger,this.loaded),this._requests=[],this._batchingMilliseconds=10,this._delayedTask=new jsonrpc.DelayedTask},jsonrpc.JsonRpc.prototype={setBatchingMilliseconds:function(e){this._batchingMilliseconds=e},call:function(){var e=this._getParams.apply(this,arguments);this._loadingState.enter(),this._requests.push(e),this._batchingMilliseconds?this._delayedTask.delay(this._batchingMilliseconds,this._sendRequests,this):this._sendRequests()},_sendRequests:function(){var a,i=this,r=this._requests,e=[];for(this._requests=[],a=0;a<r.length;a+=1)r[a].request.id=a,e.push(r[a].request);1===e.length&&(e=e[0]),i._doJsonPost(i._url,e,function(e,t){var n;if(e)n=i._isArray(t)?t:[t];else for(n=[],a=0;a<r.length;a+=1)n[a]={id:a,error:{message:t}};i._handleResponses(r,n)})},_handleResponses:function(e,t){var n,a,i;for(n=0;n<t.length;n+=1)i=e[(a=t[n]).id],this._handleResponse(i,a)},_handleResponse:function(e,t){var n=!t.error,a=n?t.result:t.error.message;this._loadingState.exit(),n?e.success.call(e.scope,a):e.failure.call(e.scope,a),e.callback.call(e.scope,n,a)},_getParams:function(){var e=this,t=Array.prototype.slice.call(arguments),n={request:{jsonrpc:"2.0",method:t.shift()}};for(n.request.params=[];1<t.length&&!this._isFunction(t[0]);){var a=t.shift();a&&n.request.params.push(a)}return this._isFunction(t[0])?(n.success=t[0],n.scope=t[1]):(n.success=t[0].success,n.failure=t[0].failure,n.callback=t[0].callback,n.scope=t[0].scope),n.success=n.success||function(){},n.failure=n.failure||function(){e.unhandledFailure.trigger.apply(e.unhandledFailure,arguments)},n.callback=n.callback||function(){},n},_isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},_isFunction:function(e){return"[object Function]"===Object.prototype.toString.apply(e)},_doJsonPost:function(e,t,n){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=function(){if(4===a.readyState){var e=a.getResponseHeader("Content-Type");200!==a.status?n(!1,'Expected HTTP response "200 OK", found "'+a.status+" "+a.statusText+'"'):0!==e.indexOf("application/json")?n(!1,'Expected JSON encoded response, found "'+e+'"'):n(!0,JSON.parse(this.responseText))}},a.send(JSON.stringify(t))}},jsonrpc.Observable=function(){this._listeners=[]},jsonrpc.Observable.prototype={bind:function(e,t){var n={fn:e,scope:t||this};return this._listeners.push(n),n},unbind:function(e){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)},trigger:function(){var e;for(e=0;e<this._listeners.length;e+=1)this._listeners[e].fn.apply(this._listeners[e].scope,arguments)}},before=function(e,t){$(e).before(t)},after=function(e,t){$(e).after(t)},html=function(e,t){$(e).html(t)},append=function(e,t){$(e).append(t)},replaceWith=function(e,t){$(e).replaceWith(t)},prepend=function(e,t){$(e).prepend(t)},offsetElement=function(e){for(var t=0,n=0;e;)t+=parseFloat(e.offsetTop),n+=parseFloat(e.offsetLeft),e=e.offsetParent;return{top:Math.round(t),left:Math.round(n)}},getXPathForElement=function(e,t){for(var n,a,i="";e!==t.documentElement;){for(n=0,a=e;a;)1===a.nodeType&&a.nodeName===e.nodeName&&(n+=1),a=a.previousSibling;i="#"!=e.nodeName[0]?e.nodeName+"[position() = "+n+"]/"+i:e.nodeName.substr(1)+"()/"+i,e=e.parentNode}return i=(i="./"+t.documentElement.nodeName+"/"+i).replace(/\/$/,"")},decodeSeoLinks=function(e){return e=(e=e.replace(/;equal;/g,"=")).replace(/;ques;/g,"?")},encodeSeoLinks=function(e){return e=(e=e.replace(/=/g,";equal;")).replace(/\?/g,";ques;")};var copyText=function(e){var t=trim(e.text());if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(n)}}};function swipedetect(e,t,n){var a,i,r,o,s,l,u,c=e,d=t||function(e){};c.addEventListener("touchstart",function(e){var t=e.changedTouches[0];a="none",dist=0,i=t.pageX,r=t.pageY,u=(new Date).getTime()},!1),c.addEventListener("touchmove",function(e){},!1),c.addEventListener("touchend",function(e){var t=e.changedTouches[0];o=t.pageX-i,s=t.pageY-r,(l=(new Date).getTime()-u)<=300&&(150<=Math.abs(o)&&Math.abs(s)<=100?a=o<0?"left":"right":150<=Math.abs(s)&&Math.abs(o)<=100&&(a=s<0?"up":"down")),d(a,o,s,l)},!1)}fastars=function(e){$.each(e,function(){var t=$(this);t.find("i").on("mouseenter",function(){if(!t.attr("value")){var e=$(this).attr("value");t.attr("tempValue",e)}}),t.find("i").on("mouseleave",function(){t.removeAttr("tempValue")})})},sQuestion=function(e){var i=this;i.question=e.question,i.answers=e.answers;e.ajax;return i.value=null,i.user=null,i.id=e.id||makeid(),i.results=[],i.save=function(){i.user?(localStorage.sQuestionUser=i.user,localStorage.sQuestionValue=i.value||""):(localStorage.sQuestionUser="",localStorage.sQuestionValue="")},i.summary=function(){return _.reduce(i.results||[],function(e,t){return e+t.count},0)},i.findResult=function(t){return _.find(i.results,function(e){return e.v==t})},i.send=function(n,a){i.user?app.ajax.run({data:{Action:"ADDSURVEY",ID:i.id,UserID:i.user,OptionID:n},success:function(e){i.value=n,i.save();var t=i.findResult(i.value);t?t.count++:i.results.push({v:i.value,count:1}),a&&a()}}):a&&a(!1)},i.results=function(t){app.ajax.run({data:{Action:"GETSURVEY",ID:i.id},success:function(e){i.results=_.map(e.Survey||[],function(e){return{v:e.OptionID,count:Number(e.count)}}),t&&t()}})},i.init=function(e){i.user=localStorage.sQuestionUser||makeid(),i.value=localStorage.sQuestionValue||null,i.save(),i.results(e)},i},search=function(e,i){i||(i={}),i.events||(i.events={});var t,n,r=null,o=null,s=!1,l=!1,u="0",c={openResults:function(){r.hasClass("fastSearchShow")||(r.addClass("fastSearchShow"),$("html").on("click",c.closeclickResults))},closeResults:function(){$("html").off("click",c.closeclickResults),r.removeClass("fastSearchShow")},closeclickResults:function(e){0===r.has(e.target).length&&r.hasClass("fastSearchShow")&&c.closeResults()},clear:function(){r.find("input").val(""),r.removeClass("searchActive"),r.removeClass("searchFilled")}},d={clear:function(e){r.find("input").val(""),r.removeClass("searchActive"),r.removeClass("searchFilled"),c.closeResults(),i.events.clear&&i.events.clear()},search:function(e){var t=e.val();c.closeResults(),i.events.search&&t&&(s=!0,r.addClass("searchActive"),i.events.search(t,function(e){s=!1,l||r.removeClass("searchActive")},d))},showlast:function(e){var t=i.last.get();t.length&&i.last.tpl(t,function(e,t){o.html(e),c.openResults(),t&&t(o,c)})},fastsearch:function(n){var e=n.val();if(e&&i.events.fastsearch){r.addClass("searchActive"),l=!0;var a=u=makeid();i.events.fastsearch(e,function(e,t){a==u&&n.val()&&(l=!1,s||r.removeClass("searchActive"),e&&(o.html(e),c.openResults(),t&&t(o,c)))})}e?r.addClass("searchFilled"):(c.closeResults(),r.removeClass("searchFilled"),l&&r.removeClass("searchActive"),i.last&&d.showlast(n),i.events.clear&&i.events.clear())}};e.html(function(){i.class||(i.class="");var e=['<div class="searchIconLabel"><i class="fa fa-search" aria-hidden="true"></i><i class="fas fa-circle-notch fa-spin"></i></div>','<div class="searchInputWrapper"><input tabindex="2" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="text" maxlength="400" type="text" placeholder="'+(i.placeholder||"Search")+'"></div>','<div class="searchPanel"><div class="searchPanelWrapper"><div class="searchPanelItem" event="clear"><i class="fa fa-times-circle" aria-hidden="true"></i></div></div></div>'];return i.right&&(e.reverse(),i.class+=" right"),'<div class="search '+(i.class||"")+'"><div class="searchInput"><div class="searchInputIcon">'+e.join(" ")+'</div></div><div class="searchFastResultWrapper">'}()),r=e.find(".search"),o=e.find(".searchFastResultWrapper"),(n=r.find("input")).on("keyup",function(e){13!=(e.keyCode||e.which)&&(t=slowMade(function(){d.fastsearch(n)},t,100))}),n.on("focus",function(){$(this).val()?d.fastsearch(n):i.last&&d.showlast(n)}),n.on("keypress",function(e){13==(e.keyCode||e.which)&&d.search(n)}),r.find(".searchIconLabel").on("click",function(){!n.val()&&i.events.blank?i.events.blank():d.search(n)}),r.find(".searchPanelItem").on("click",function(){var e=$(this),t=e.attr("event");d[t]&&d[t](e)}),i.clbk&&i.clbk(r)},thinput=function(e){$.each(e,function(){var e=$(this),t={"-1":"1",1:"0",0:"-1"};e.on("click",function(){var e=$(this).attr("value");$(this).attr("value",t[e])})})},editable=function(a){var i;a||(a={}),a.el&&$.each(a.el,function(){var t=$(this);t.wrap("<div class='editable "+a.class+"'></div>"),t.addClass("editEl");var n=t.closest(".editable");n.append("<div class='editForm'><input type='text' value='"+a.el.text()+"'></div>\t\t\t\t\t\t <label><div class='lwr'><div class='editButton edt'><i class='fa fa-pencil'></i></div>\t\t\t\t\t\t <div class='editButton success'><i class='fa fa-check'></i></div>\t\t\t\t\t\t <div class='editButton fail'><i class='fa fa-times'></i></div></div></label>");var e=a.mmoneyparam||null;e&&n.find("input").maskMoney(e),n.find(".edt").on("click",function(){i=t.text(),a.synk?(a.el.closest(".editable").find("input").val(i),a.el.closest(".editable").addClass("editNow")):(n.find("input").val(i),n.addClass("editNow"))}),n.find(".success").on("click",function(){var e=n.find("input").val();a.synk?(a.el.text(e),a.el.closest(".editable").removeClass("editNow")):(t.text(e),n.removeClass("editNow")),a.success&&a.success(e)}),n.find(".fail").on("click",function(){t.text(i),a.fail&&a.fail(i,a),n.removeClass("editNow")}),n.find("input")[0].addEventListener("keyup",function(){a.input&&(e?a.input(n.find("input").maskMoney("unmasked",e)[0].value):a.input(n.find("input").val()))}),n.find("input").on("input",function(){a.synk&&a.el.closest(".editable").find("input").val(n.find("input").val())})})},initUpload=function(c){c||(c={});var i,t,n=c.el,a=c.multiple||!1,d=1024*(c.maxFileSize||10)*1024;c.mode;c.data||(c.data={});var r=function(e,t){e.size>d?t("filesize"):!function(e){var t=e.name.split("."),n=t[t.length-1].toLowerCase();if(c.ext)if(_.isArray(c.ext)){if(-1==_.indexOf(c.ext,n))return!1}else if(c.ext!=n)return!1;return!0}(e)?t("fileext"):t(!1)},o=function(e){var n,t=$(this);e.stopPropagation(),e.preventDefault(),i.removeClass("hover"),i.addClass("loading"),n=void 0===e.dataTransfer?this.files:e.dataTransfer.files;var a=function(){i.removeClass("loading"),i.removeClass("hover"),i.removeClass("focus"),t.val("")};_.each(n,function(e){e.id=makeid()}),c.onStartUpload&&(n=c.onStartUpload(n)),lazyEach({sync:!0,array:n,all:{success:function(){a(),c.onSuccess&&c.onSuccess()},fail:function(){a(),c.onFail&&c.onFail()}},action:function(s){var l=s.item,u=makeid();r(l,function(r){var e,a,i,o,t=new FileReader;e=l,a=n,i=function(a){var e=(d/1024/1024).toFixed(0),t={filesize:"Your photo has size greater than "+e+"MB. Please upload a photo under "+e+"MB in size.",fileext:"Invalid format of picture. Only png and jpeg are allowed"};if(r)c.onError&&c.onError(r,a,l,t[r]),s.fail();else{var n=new FormData;if(n.append("file",l),_.each(c.data,function(e,t){"function"==typeof e&&(e=e()),"data"==t&&c.user&&c.user.extendAjaxData(e),(_.isArray(e)||_.isObject(e))&&(e=JSON.stringify(e)),n.append(t,e)}),c.beforeUpload&&c.beforeUpload(a,u),c.server){var i=new XMLHttpRequest;i.onreadystatechange=function(e){var t,n;n=function(e){(e=deep(e,"root"))&&"Success"==e.Result?(s.success(e),c.onUpload&&c.onUpload(e,u)):(c.onError&&c.onError("serverError",a,l),s.fail())},4==(t=e).target.readyState&&(200==t.target.status?n(JSON.parse(t.target.response)):n())},i.open("POST",c.server),i.send(n)}else c.action?c.action(a,s.success):s.success()}},t.onload=(o=e,function(e){var t=o.name.split("."),n=t[t.length-1];i&&i({base64:e.target.result,file:o,ext:n,filesCount:a.length})}),t.readAsDataURL(l)})}})};!function(){var e="";a&&(e="multiple");n.html();n.addClass("upload dropZone"),n.wrapInner('<div class="fileUploader"><div class="elContent"></div></div>'),n.find(".fileUploader").append('<div class="spinner"></div><div class="inputWrapper"><input type="file" '+e+"></div>"),i=c.dropZone||n,t=n.find("input"),void 0===window.FileReader&&(i.text("Не поддерживается браузером!"),i.addClass("error")),n.find("input").focus(function(){n.addClass("focus")}).blur(function(){n.removeClass("focus")}),i[0]&&(i[0].ondragover=function(){return i.addClass("hover"),!1},i.on("dragout",function(e){return i.removeClass("hover"),!1}),i[0].ondrop=o,t.on("change",o),t.on("click",function(){c.onStart&&c.onStart()}))}()},checkboxValue=function(e,t){t?e.prop("checked",!0):e.prop("checked",!1)},topPreloader=function(e){if(!_Node){var t=$(".topPreloader"),n=t.find("div");0==n.length&&(n=$("<div>"),t.append(n)),t.removeClass("complete");var a=t.attr("percent")||0;t.attr("percent",e),n.width(e-a+"%"),e<=0||100<=e?(t.addClass("complete"),t.attr("percent",0),setTimeout(function(){t.fadeOut(300),setTimeout(function(){t.html("")},300)},500)):t.fadeIn(1)}},onlyNumbers=function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||110==e.keyCode||190==e.keyCode||189==e.keyCode||109==e.keyCode||188==e.keyCode||35<=e.keyCode&&e.keyCode<=39||(e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault()},settingsLocalstorage=function(e){var t=this,n=e.options.localStoragePrefix,i={},a=function(e){return"undefined"!=typeof localStorage&&localStorage[n+e]?i[e]=JSON.parse(localStorage[n+e]):i[e]={},this},r=function(e){return"undefined"!=typeof localStorage&&i[e]&&(localStorage[n+e]=JSON.stringify(i[e])),this};return t.get=function(e,t){if(0==e&&(e="general"),a(e),void 0===t){if(i[e])return i[e]}else if(null!=typeof i[e][t])return i[e][t]},t.setAll=function(n,a){return 0==n&&(n="general"),_.each(i[n],function(e,t){i[n][t]=a}),r(n),this},t.set=function(e,t,n){return 0==e&&(e="general"),void 0!==t?(i[e]||(i[e]={}),i[e][t]=n):i[e]=n,r(e),this},t.clear=function(){_.each(getVars(localStorage),function(e,t){-1<t.indexOf(n)&&localStorage.removeItem(t)})},_.each(e.map,function(e){a(e.uri)}),t.prefix=n,t},retry=function(e,t,n,a){n||(n=20);var i=setInterval(function(){e()&&(a||clearInterval(i),t&&t())},n);return i},retryLazy=function(e,t,n){n||(n=200);var a=function(){e(function(e){e?t&&t():setTimeout(a,n)})};a()},slowMade=function(e,t,n){return n||(n=20),t&&clearTimeout(t),t=setTimeout(e,n)},mouse={getX:function(e){return e.pageX?e.pageX:e.clientX?e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)-document.documentElement.clientLeft:0},getY:function(e){return e.pageY?e.pageY:e.clientY?e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop:0}},fixWhich=function(e){!e.which&&e.button&&(1&e.button?e.which=1:4&e.button?e.which=2:2&e.button&&(e.which=3))},fakeClick=function(e,t){var n=document.getElementById(t);if(n.click)n.click();else if(document.createEvent&&e.target!==n){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);n.dispatchEvent(a)}},addToFunction=function(n,a){return function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);n&&n.apply(this,arguments),a&&a(this,arguments)}},"undefined"!=typeof window&&function(a){var i=a.event.special.dragout={current_elem:!1,setup:function(e,t,n){a("body").on("dragover.dragout",i.update_elem)},teardown:function(e){a("body").off("dragover.dragout")},update_elem:function(e){e.target!=i.current_elem&&(i.current_elem&&a(i.current_elem).parents().andSelf().each(function(){0==a(this).find(e.target).size()&&a(this).triggerHandler("dragout")}),i.current_elem=e.target,e.stopPropagation())}};a.browser||(a.browser={},a.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),a.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()))}(window.jQuery),parseVideo=function(e){var t=e.match(/(http:\/\/|https:\/\/|)(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),n=null;return t&&t[3]&&(-1<t[3].indexOf("youtu")?n="youtube":-1<t[3].indexOf("vimeo")&&(n="vimeo")),{type:n,url:e}},nl2br=function(e){return e.replace(/([^>])\n/g,"$1<br/>")},trimHtml=function(e,t){for(var n,a,i=[],r=e.length,o=e,s=0,l=0,u=!1,c=!1,d=!1,f="",p=0;p<r&&s<t;p++){var v=e[p];"<"==v?(u=e[p+1]&&"/"==e[p+1]?d=!0:c=!0,f=""):">"==v?(d&&(console.log("REMOVE",f),n=f,void 0,-1<(a=_.indexOf(i,n))&&i.splice(a,1)),c&u&&(console.log("push1",f),i.push(f)),u=c=d=!1,f=""):d||c?" "!=v&"/"!=v&u?f+=v:c&u&&(console.log("push2",f),i.push(f),u=!1):u||s++,l++}return console.log("tr, num",l,s,t),e.length>l&&(o=e.substr(0,l)+"&hellip;",_.each(i,function(e){o=o+"</"+e+">"})),o},extMessageForL2=function(e){return e.length%2!=0&&(e+="0"),e},vis=function(e,t,n,a){n||(n=0);var i={thousands:",",decimal:".",allowZero:!0,precision:0,prefix:"$ ",input:!1,allowNegative:!0};if(a||(a="&mdash;"),t){if(void 0===e)return a;if("percent"==t)return(100*e).toFixed(n)+" %";if("dollars"==t)return i.value=Number(e).toFixed(n).toString(),maskValue(i);if("dollarshtml"==t)return i.prefix="$&nbsp;",i.value=Number(e).toFixed(n).toString(),maskValue(i);if("dollarslight"==t)return i.prefix="",i.value=Number(e).toFixed(n).toString(),maskValue(i);if("range0-100"==t){return{0:"0",1:"<25%",26:"<50%",51:"<75%",76:">75%"}[e]}if("yesno"==t){if("yes"==e||1==e)return"Yes";if("no"==e||0==e)return"No";if(!e)return""}if("yesno12"==t){if("yes"==e||1==e)return"Yes";if("no"==e||2==e)return"No";if(!e)return""}if("number"==t)return _.isNumber(Number(e))&&"NaN"!=e.toString()&&"undefined"!=e.toString()&&"null"!=e.toString()?(e=Number(e).toFixed(n),i.prefix="",i.precision=n,i.value=e,maskValue(i)):a;if("date"==t)return convertDate(e)}return e},hexEncode=function(e){for(var t=0,n="",a=0;a<e.length;a++){for(255<(t=e.charCodeAt(a))&&(t-=848),t=t.toString(16);t.length<2;)t="0"+t;n+=t}return n},hexDecode=function(e){var t=0,n="";e=trim(e);for(var a=2;a<=e.length;a+=2)128<=(t=parseInt(e.substring(a-2,a),16))&&(t+=848),n+=t=String.fromCharCode("0x"+t.toString(16));return n},checkUrlForImage=function(t){if(t=t.split("?")[0].toLowerCase(),_.find([".jpg",".gif",".png",".jpeg"],function(e){if(-1<t.indexOf(e))return!0}))return!0},donottrustLink=function(e){return e.replace(/<a /g,'<a donottrust="donottrust" ')},clearScripts=function(e){return e.replace(/<script[^>]*?>[^<]*<\/script[^>]*?>/gim,"")},findAndReplaceLink=function(e){function u(e){return(r="<textarea>"+(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+"</textarea>",(t="div",n={innerHTML:r},i=document.createElement(t),n&&function e(){var t,n=arguments,a=n[0]||{},i=1,r=n.length,o=!1;for("boolean"==typeof a&&(o=a,a=n[1]||{},i=2),"object"==typeof a||isFunction(a)||(a={});i<r;++i)if(null!=(t=n[i]))for(var s in t){var l=a[s],u=t[s];a!==u&&(o&&u&&"object"==typeof u&&!u.nodeType?a[s]=e(o,l||(null!=u.length?[]:{}),u):void 0!==u&&(a[s]=u))}return a}(i,n),a&&function n(a,t,i){if(a=ge(a)){if("object"==typeof t)return each(t,function(e,t){n(a,e,t)});if("opacity"==t)browser.msie&&((i+"").length?a.style.filter=1!==i?"alpha(opacity="+100*i+")":"":a.style.cssText=a.style.cssText.replace(/filter\s*:[^;]*/gi,""),a.style.zoom=1),a.style.opacity=i;else try{var e="number"==typeof i;e&&/height|width/i.test(t)&&(i=Math.abs(i)),a.style[t]=e&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?i+"px":i}catch(e){debugLog("setStyle error: ",[t,i],e)}}}(i,a),i).firstChild).value;var t,n,a,i,r}return(e||"").replace(/(^|[^A-Za-z0-9А-Яа-яёЁ\-\_])(https?:\/\/)?((?:[A-Za-z\$0-9А-Яа-яёЁ](?:[A-Za-z\$0-9\-\_А-Яа-яёЁ]*[A-Za-z\$0-9А-Яа-яёЁ])?\.){1,5}[A-Za-z\$рфуконлайнстРФУКОНЛАЙНСТ\-\d]{2,22}(?::\d{2,5})?)((?:\/(?:(?:\&amp;|\&#33;|,[_%]|[A-Za-z0-9А-Яа-яёЁ\-\_#%&?+\/\$.~=;:]+|\[[A-Za-z0-9А-Яа-яёЁ\-\_#%&?+\/\$.,~=;:]*\]|\([A-Za-z0-9А-Яа-яёЁ\-\_#%&?+\/\$.,~=;:]*\))*(?:,[_%]|[A-Za-z0-9А-Яа-яёЁ\-\_#%&?+\/\$.~=;:]*[A-Za-z0-9А-Яа-яёЁ\_#%&?+\/\$~=]|\[[A-Za-z0-9А-Яа-яёЁ\-\_#%&?+\/\$.,~=;:]*\]|\([A-Za-z0-9А-Яа-яёЁ\-\_#%&?+\/\$.,~=;:]*\)))?)?)/gi,function(){var e=Array.prototype.slice.apply(arguments),t=e[1]||"",n=e[2]||"http://",a=e[3]||"",i=a+(e[4]||""),r=(e[2]||"")+e[3]+e[4];if(-1==a.indexOf(".")||-1!=a.indexOf(".."))return e[0];var o,s=a.split(".").pop();if((6<s.length||-1==function(e,t,n){for(var a=n||0,i=(e||[]).length;a<i;a++)if(e[a]==t)return a;return-1}("info,name,aero,arpa,coop,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,ss,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,рф,укр,сайт,онлайн,срб,cat,pro,local".split(","),s))&&(!/^[a-zA-Z]+$/.test(s)||!e[2]))return e[0];if(-1!=e[0].indexOf("@"))return e[0];try{r=decodeURIComponent(r)}catch(e){}55<r.length&&(r=r.substr(0,53)+".."),r=(o=r,o?o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):"").replace(/&amp;/g,"&");i=u(i).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,encodeURIComponent);var l=i.indexOf("#/");return 0<=l?i.substr(l+1):0<=(l=i.indexOf("#!"))&&"/"+i.substr(l+2).replace(/^\//,""),t+'<a href="'+(n+i).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'" target="_blank">'+r+"</a>"})},checkAddress=function(e){var i=function(e){var t,n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",a=new Array;for(t=0;t<58;t++)a[n[t]]=int2bigInt(t,8,0);var i,r=e.length,o=int2bigInt(0,1,0),s=int2bigInt(58,8,0);for(t=0;t<r;t++)i=e[r-t-1],o=add(o,mult(a[i],p(s,t)));var l,u=bigInt2str(o,16),c=f(u);for(l=0;e[l]==n[0];l++);var d=c;return 0<l&&(d=v("\0",l)+c),d},f=function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},p=function(e,t){if(0==t)return int2bigInt(1,1,0);var n,a=e;for(n=1;n<t;n++)a=mult(a,e);return a},v=function(e,t){for(var n=[];n.length<t;)n.push(e);return n.join("")};return function(e){var t=i(e);if(25!=t.length)return!1;var n=t.substr(t.length-4),a=t.substr(0,t.length-4);return n==f(sha256_digest(f(sha256_digest(a)))).substr(0,4)}(e)};
 /*_____*/ 
User=function(i,n){n||(n={});var r=this,e=(i.ajax,i.options.name,i.settings||null),t=null,a=0;r.imgur={clientId:"61175058f8e21f4",secret:"ea4020d8024dfb78d372d1cd21c2f3215c72ead4"};var o={private:{set:function(e){this.value=e||null},value:null},public:{set:function(e){this.value=e||null},value:null}};return r.address={set:function(e){this.value=e||null},value:null},r.data={},r.tokenExpired=function(){r.isState(function(e){if(e){tokenInterval=setInterval(function(){r.isState(function(e){if(e);else clearInterval(tokenInterval)})},20)}})},r.prepare=function(e){r.tokenExpired(),i.platform.clear(),i.platform.prepareUser(function(){e&&e(a)})},r.signin=function(e,t){var n=function(){r.isState(function(e){e?r.prepare(t):t&&t(e)})};r.stay?localStorage.mnemonic=e:localStorage.mnemonic="",bitcoin.bip39.validateMnemonic(e)?r.setKeys(e,function(){n()}):r.setKeysPairFromPrivate(e,function(e){e?n():(a=0,t&&t(a))})},r.signout=function(){t&&t.destroy(),localStorage.mnemonic="",o.private.set(),o.public.set(),e.clear(),i.platform.clear(),i.platform.ws&&i.platform.ws.destroy(),r.data={},a=0},r.isState=function(e){if(n||(n={}),2!==a){if(o.private.value&&o.public.value)a=1;else{if(localStorage.mnemonic&&r.stay){var t=localStorage.mnemonic;return void(bitcoin.bip39.validateMnemonic(t)?r.setKeys(t,function(){r.isState(e)}):r.setKeysPairFromPrivate(t,function(){r.isState(e)}))}a=0}e(a)}else retry(function(){return 2!=a},function(){r.isState(e)})},r.validate=function(){return!r.address.value||deep(i,"platform.sdk.user.storage.me.name")},r.isItMe=function(e){return r.address.value&&r.address.value.toString("hex")==e},r.keysFromMnemo=function(e){var t=bitcoin.bip39.mnemonicToSeed(e);return r.keysFromSeed(t)},r.keysFromSeed=function(e){bitcoin.crypto.sha256(Buffer.from(e));var t=bitcoin.bip32.fromSeed(e).derivePath(i.platform.sdk.address.path(0)).toWIF();return bitcoin.ECPair.fromWIF(t)},r.setKeysPair=function(e,t){o.private.set(e.privateKey),o.public.set(e.publicKey);var n=i.platform.sdk.address.pnet();r.address.set(n.address),topPreloader(20),t&&t()},r.setKeysPairFromPrivate=function(e,t){var n=bitcoin.ECPair.fromPrivateKey(Buffer.from(e,"hex"));r.setKeysPair(n,function(){t&&t(!0)})},r.setKeys=function(e,t){var n=r.keysFromMnemo(e);r.setKeysPair(n,t)},r.key=o.public,r.private=o.private,r.keys=function(){return bitcoin.ECPair.fromPrivateKey(o.private.value)},r.stay=Number(localStorage.stay||0),r},topPreloader(25);
 /*_____*/ 
nModule=function(){var l=this;l.storage={els:{},templates:{}},l.options={},l.api={},l.map={},l.inserts={wnd:{obj:wnd,storageKey:"wnd",after:!0},tooltip:{obj:tooltip,storageKey:"tooltip",after:!0}},l.anonimus=function(t,i){l.map.anonimus?t(!0):l.user.isState(function(e){if(e)t(!0);else{var n=deep(l,"map.redirect.auth");n&&l.redirect(i,n),t(!1)}})},l.shell=function(o,n,t){o||(o={});var s=function(e){t||l.nav.api.links(),e.el&&(e.el.find("[data-jdenticon-value]").each(function(){var e=$(this),n=e.data("jdenticon-value");e.html(jdenticon.toSvg(n,e.width()))}),bgImages(e.el,e.bgImages)),"function"==typeof n&&n(e)};o.completeClbk=s,l.loadTemplate(o,function(e){l.renderTemplate(e,function(e){var n=!1;if(!_.isObject(o.el)||o.insert){var t=l.inserts[o.insert];if(t){var i=o[t.storageKey]||{};if(i.content=e,i.el=o.el,i.app=l.app,t.after&&(i.clbk=function(e){e||(e={}),o=_.extend(o,e),s(o)},i.destroy=o.destroy),l.container=t.obj(i),o.container=l.container,l.container.module=l,t.after)return void topPreloader(100);(a=deep(l,"container.el"))&&(o.el=a),n=!0}else{var a;(a=l.app.el[o.el])&&(o.el=a)}}"function"==typeof o.el&&(o.el=o.el()),n||o.el&&l.insertTemplate(o,e),o.animation||s(o)},o)})},l.insertTemplate=function(m,c){var u="<div class='animation'></div>",p=function(){m.completeClbk&&m.completeClbk(m)},f=function(e){m.el.find(".animation").contents().unwrap(),m.el.css("position",e.position),m.el.height(""),m.el.width(""),m.el.css("overflow",e.overflow)};if(m.inner||(m.inner=html),m.animation){if(m.animation.timeouts||(m.animation.timeouts=100),"fadeIn"==m.animation)return m.el.fadeOut(100),void setTimeout(function(){m.inner(m.el,c),m.el.fadeIn(200),p(),setTimeout(function(){m.postAnimation&&m.postAnimation(m)},200)},100);_.isObject(m.animation)&&(m.animation.hideOnAnimationPeriod&&m.animation.hideOnAnimationPeriod.fadeOut(m.animation.timeouts),setTimeout(function(){var e,n,t,i,a,o,s=(e=m.el.css("position"),n=m.el.css("overflow"),t=m.el.css("height"),i=m.el.css("width"),a=m.el.height(),o=m.el.width(),m.el.height(a),m.el.width(o),m.el.wrapInner(u),m.el.find(".animation").height(a+"px"),m.el.find(".animation").width(o+"px"),m.el.css("overflow","hidden"),"absolute"!=e&&"fixed"!=e&&m.el.css("position","relative"),{height:a,width:o,position:e,overflow:n,cssheight:t,csswidth:i}),l=m.el.find(".animation");if("slide"==m.animation.id&&(m.inner=html,m.animation.direction||(m.animation.direction="onright"),l.addClass([m.animation.direction,m.animation.id,"leave"].join(" ")),l.on("transitionend",function(){m.el.html(u),(l=m.el.find(".animation")).addClass([m.animation.direction,m.animation.id,"enter"].join(" ")),m.inner(l,c),p(),m.el.height(l.height()+"px"),m.el.width(l.width()+"px"),setTimeout(function(){l.addClass("original"),l[0].addEventListener("transitionend",function(){f(s),m.animation.hideOnAnimationPeriod&&m.animation.hideOnAnimationPeriod.fadeIn(2*m.animation.timeouts),m.postAnimation&&m.postAnimation()})},m.animation.timeouts)})),"fadeInByElement"==m.animation.id){m.inner=html,m.animation.selector||(m.animation.selector=".fadeInByElement");var r=[];l.find(m.animation.selector).each(function(){r.unshift($(this))});var d=1;lazyEach({array:r,sync:!0,action:function(e){e.item.fadeOut(m.animation.timeouts/d),d+=.333,setTimeout(function(){e.success()},m.animation.timeouts/d)},all:{success:function(){m.el.html(u),(l=m.el.find(".animation")).addClass([m.animation.direction,m.animation.id,"enter"].join(" ")),m.inner(l,c),l.find(m.animation.selector).fadeOut(1),p(),m.el.height(l.height()+"px"),m.el.width(l.width()+"px");var e=[];l.find(m.animation.selector).each(function(){e.push($(this))});var n=0;lazyEach({array:e,sync:!0,action:function(e){e.item.fadeIn(m.animation.timeouts/n),n+=.333,setTimeout(function(){e.success()},m.animation.timeouts/n)},all:{success:function(){l.addClass("original"),f(s),m.postAnimation&&m.postAnimation()}}})}}})}},m.animation.timeouts))}else m.inner(m.el,c),m.display||(m.display="block"),m.el.css("display",m.display),m.postAnimation&&m.postAnimation()},l.renderTemplate=function(n,t,i){i||(i={}),l.user.isState(function(e){i.data||(i.data={}),i.data.app=l.app,i.data.e=l.app.localization.e,i.data.state=e,i.data.module=l,i.data.user=l.user,i.data.essenseData=i.essenseData||{},i.rendered=n(i.data),i.clear&&(i.rendered=""),t&&t(i.rendered)})},l.loadTemplate=function(n,t){if(n||(n={}),n.name||(n.name="index"),l.storage.templates[n.name]||n.clear)t&&t(l.storage.templates[n.name]);else{var e,i=l.map.pathtpl||l.map.path||"";_Node&&(i="https://getbitcoins.io/"),e=n.common?i+"common":i+l.componentsPath+(n.turi||l.map.uri),e+="/templates/"+n.name+".html",l.ajax.run({url:e,type:"GET",dataType:"html",success:function(e){l.storage.templates[n.name]=_.template(e),t&&t(l.storage.templates[n.name])}})}},l.fastTemplate=function(e,n,t){l.loadTemplate({name:e},function(e){l.renderTemplate(e,function(e){n&&n(e)},{data:t||null})})};return l.add=function(e,n){topPreloader(10);var t=_.clone(e),i=l.map.add;"function"==typeof i&&(i=i(t,n)),t=_.extend(t,i),t=_.extend(t,n),l.user.isState(function(e){t.getdata(function(e){topPreloader(45),t.data=e||{},n.preshell&&n.preshell(),l.shell(t,function(n){topPreloader(100),n.clbk=addToFunction(n.clbk,function(){var e;(e=n).history&&e.el&&_scrollTop(0,null,50)}),t.init&&t.init(n)},!0)},{state:e,settings:t})})},l.init=function(n,t){t||(t={}),n||(n={}),l.anonimus(function(e){e?(l.inited=!0,l.add(n,t)):t.clbk&&t.clbk("anonimus")},t)},l.redirect=function(e,n){var t={};t.href=n,t.history=!0,t.open=!0,t.preshell=e.preshell,t.clbk=e.clbk,l.nav.api.load(t)},l.restart=function(e){e||(e={}),l.stop(e),l.run(e)},l.addEssense=function(e,n,t){var i=new n(t),a=i.id||"secondary";return t.primary&&(i.primary=!0),i.primary&&(a="primary"),e[a]?delete i:e[a]=i,e[a]},l.removeEssense=function(e,n){e[n]&&(e[n].destroy(),delete e[n])},l.closeContainer=function(){var e=deep(l,"container.close");if(e)return l.stop(),e(),!0},l.clearCanvas=function(e){e.clear=!0,l.shell(e)},l},"undefined"!=typeof module&&(module.exports=nModule);
 /*_____*/ 
Nav=function(i){var r=this,l={navPrefix:"/",path:"components/",cashe:!0,history:!0,links:!0},o=window.location.protocol.replace(":","");"http"!=o&&"https"!=o||(o="web");var c={href:null},s={},f={},d={},e=function(t){return _.find(i.map,function(e,n){return e.href==t})},a=function(e){e.clbk=addToFunction(e.clbk,function(){p.links()}),e.module.nav=r,e.module.app=i,e.module.sdk=i.platform.sdk,e.module.user=i.user,e.module.ajax=i.ajax,e.module.componentsPath=l.path,e.module.data=e.data||{},e.module.essenseData=e.essenseData||{},e.module.run(e)},u={addParameters:function(e){r.get.pathname();var n=parameters(),t=parameters();if(n=_.extend(n,e),!_.isEqual(t,n)){delete n.back;var a=c.href+collectParameters(n);this.add(a)}},removeParameters:function(e){_.isArray(e)||(e=[e]);r.get.pathname();var n=parameters();_.each(e,function(e){delete n[e]});var t=c.href+collectParameters(n);this.add(t)},add:function(e){!0!==l.history||_Node||history.pushState({href:e,lfox:!0},null,e)},openCurrent:function(){history.state&&history.state.lfox&&r.api.load({href:history.state.href,open:!0,history:!0,loadDefault:!0})}},p={open:function(e){e||(e={}),e.clbk||(e.clbk=emptyFunction);c.href;var n=!0;if((e.history||e.loadDefault)&&l.history){if(e.href==c.href&&c.module&&c.module.parametersHandler)return n=!1,u.add(e.completeHref),void c.module.parametersHandler(function(){e.clbk(null,e)});if(e.completeHref!=c.completeHref||e.loadDefault){if(e.loadDefault&&!e.reload||u.add(e.completeHref),c.module){var t=c.module.stop();if(t&&_.isObject(t))return void(t.action&&t.action(function(){p.open(e)}));t&&"function"==typeof t&&(e.preshell=t)}c.href=e.href,c.completeHref=e.completeHref,c.module=e.module,e.module.active=!0,_.each(r.clbks.history,function(e){e()})}else n=!1}e.restart&&(n=!0),n?a(e):e.clbk(null,e)},loadSource:function(e,n){var t=i.module(e.id),a=function(){topPreloader(50),p.loadTemplates(e,function(){topPreloader(100),s[e.id]=!1,n(i.module(e.id))})};if(s[e.id])retry(function(){return!s[e.id]},function(){p.loadSource(e,n)});else{s[e.id]=!0;var o=e.path||"",r=o+l.path+e.uri+"/index.js";topPreloader(20),p.loadRelations(e,function(){topPreloader(40),window.design&&(f[e.uri]||(importCss((e.uri.csspath||o)+l.path+e.uri+"/index.css"),f[e.uri]=!0)),l.cashe&&t?a():importScript(r,function(){a()},null,i,e.id)})}},loadTemplates:function(n,e){lazyEach({array:n.templates,action:function(e){i.module(n.id).loadTemplate({name:e.item},e.success)},all:{success:e}})},loadRelations:function(e,n){var t=_.filter(e.relations,function(e){if(!e.if||e.if())return!0});if(e.relationsSunc){var a=_.filter(t,function(e){if("css"==e.f)return!0});_.each(a,function(e){importCss(e.src)});var o=_.filter(t,function(e){return(!_Node||!e.nodeIgnore)&&("js"==e.f||void 0)});o=_.map(o,function(e){return{src:e.src}}),importScripts(o,d,function(){n()},null,null,i)}else lazyEach({array:t,action:function(e){var n=e.item;d[n.src]||_Node&&n.nodeIgnore?e.success():("js"==n.f&&importScript(n.src,function(){d[n.src]=!0,e.success()},null,i),"css"==n.f&&(importCss(n.src),e.success()))},all:{success:function(){n()}}})},openInitialModules:function(e,n){var t=_.filter(n||i.map,function(e){if(!0===e.now)return!0});lazyEach({array:t,sync:!1,action:function(n){var e=n.item;p.load({href:e.href,open:!0,clbk:function(e){n.success&&n.success()}})},all:{success:e}})},load:function(t){t||(t={}),t.href||t.id?(t.clbk||(t.clbk=emptyFunction),void 0===t.animation&&(t.animation="fadeIn"),t.href&&(t.completeHref=t.href,t.href=t.href.split("?")[0],t.map=e(t.href)),t.id&&(t.map=i.map[t.id]),t.map||(t.clbk("map for module isn't exist"),t.href="page404",t.map=e(t.href)),p.loadSource(t.map,function(e){if(e){t.module=e,t.module.map=t.map;var n=parameters();i.localization.set(n.loc,function(){t.open?p.open(t):t.clbk(null,t)})}else t.clbk("module haven't been loaded")})):t.clbk("href and id aren't exist")},externalLink:function(e){var n=e.attr("href"),t=e.attr("external");if(!(!n||t||-1<n.indexOf("mailto")||-1<n.indexOf("skype:")||-1<n.indexOf("/")||-1<n.indexOf(".")||"#"==n))return!0},externalTarget:function(e){var n=e.attr("href");n&&(-1<n.indexOf("/")||-1<n.indexOf("."))&&e.attr("target","_blank")},links:function(a,e,o){if(l.links){(e?e.find("a"):$("a")).each(function(){var e=$(this);if(p.externalLink(e)){if(_SEO){var n=e.attr("href");n=decodeSeoLinks(n).replace("#!","");var t=parameters(n,!0);t.loc||(t.loc=i.localization.key),n=n.split("?")[0],n="#!"+(n+=collectParameters(t)),e.attr("href",encodeSeoLinks(n))}e.off("click").on("click",function(){var e=$(this).attr("href");return p.go({action:a,href:e,history:!0,open:!0}),o&&o(),!1})}else e.attr("donottrust")?e.off("click").on("click",function(){var e=$(this).attr("href");return-1==e.indexOf("http")&&(e="http://"+e),r.api.load({open:!0,id:"anothersite",inWnd:!0,essenseData:{link:e}}),!1}):p.externalTarget(e)});$(this).attr("href")}},go:function(e){if(e||(e={}),e.href){if(e.action||(e.action=p.load),"?"==e.href[0]){var n=parameters(),t=parameters(e.href.substr(1));n=_.extend(n,t),e.href=c.href+collectParameters(n,e.exclude)}e.action(e)}}},h={file:{prefix:function(){var e=window.location.pathname;-1<e.indexOf("android")?l.navPrefix="/android_asset/www/":l.navPrefix=e},pathname:function(){return window.location.pathname.replace(l.navPrefix,"").replace(".html","")}},web:{pathname:function(){return window.location.pathname.replace(l.navPrefix,"")},seoRedirect:function(){var e=window.location,n=decodeSeoLinks(e.href.replace("#!","").replace(/&amp;/g,"&"));n!=e.href&&u.add(n)}}},t=function(e){for(var n=deep(h,o+"."+e),t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);return n?n.apply(this,t):1==t.length?t[0]:void 0};return r.api={history:u,links:p.links,go:p.go,ini:p.openInitialModules,load:function(a){var o=a.clbk;a.clbk=function(e,n){var t=!1;e&&(console.log(a,e),t=!0),o&&o(t,n)},p.load(a)},loadDefault:function(e){e||(e={}),e.href||(e.href=r.get.pathname()||"index"),"blank"==e.href&&(e.href="index"),r.api.load(e)},loadSameThis:function(e,n){n.container&&n.container.close();var t={open:!0,href:e,essenseData:n.essenseData,history:n.history,inWnd:n.inWnd,inTooltip:n.inTooltip,animation:n.animation};this.load(t)},loadRelations:p.loadRelations},r.get={href:function(){var e=window.location,n=t("pathname",e.pathname);return decodeSeoLinks(n+e.search).replace("#!","")},pathname:function(){var e=window.location,n=t("pathname",e.pathname);return"blank"==n&&(n="index"),decodeSeoLinks(n.replace(l.navPrefix,"")).replace("#!","")}},r.init=function(e){e||(e={}),"undefined"!=typeof window&&(t("prefix"),t("seoRedirect"),!0===l.history&&(window.onpopstate=function(e){u.openCurrent()}),p.openInitialModules(function(){e.open=!0,e.history=!0,e.loadDefault=!0,r.api.loadDefault(e)}))},r.clbks={history:{}},i.options.nav&&(l=_.extend(l,i.options.nav)),r.relations=d,r},"undefined"!=typeof module&&(module.exports=Nav),topPreloader(45);
 /*_____*/ 
Validation=function(f){var u,l,i,t=f.form,c=[],e=this,n=f.errorPath||"",a=f.errorPathKey||"after",s={rpass:function(e){return t.find(".password").val()==$(e).val()},freeemaillist:function(e){var t=!0,i="@"+e.split("@")[1];return-1<FreeEmails.indexOf(i)&&(t=!1),t},checked:function(e){return e.is(":checked")}},d={"0001":"Fill in this field please","0002":"The email address for the recipient is invalid","0003":"Password must be minimum of 6 characters, with at least one number","0004":"Passwords do not match","0005":"The Name is invalid","0006":"The Name of Bank is invalid","0007":"The Phone Number Format is (XXX) XXX-XXXX","0008":"Please enter your work email","0011":"Please agree with it"},o={email:{r:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,f:"0002"},pass:{r:/((?=.*\d)(?=.*[a-zA-Z]).{6,})/,f:"0003"},rpass:{r:/((?=.*\d)(?=.*[a-zA-Z]).{6,})/,f:"0003",a:s.rpass,fa:"0004"},name:{r:/^[a-zA-Zа-яА-Я0-9 .\-_@#&]{1,30}$/,f:"0005"},bank:{r:/^[a-zA-Z .,&]{3,30}$/,f:"0006"},phone:{r:/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/,f:"0007"},date:{r:"empty",f:"0001"},time:{r:"empty",f:"0001"},number:{r:/[0-9]+/,f:"0009"},vendorcode:{r:/[0-9]{14}/,f:"0010"},empty:{r:"empty",f:"0001"},checkbox:{fa:"0011",a:s.checked}},h=function(){$(this).val()&&$(this).addClass("initedInput")},v=function(){for(var e=0;e<=this.nmbr;e++)c[e]=!0;L()?p():b()},m=function(){for(var e=0;e<=this.nmbr;e++)c[e]=!0;$(this).closest(".inputLabel").hasClass("novalidate")?this.addEventListener("keyup",v,!1):this.removeEventListener("keyup",v),this.getAttribute("norelax")&&L("noshow")},p=f.success||function(){},b=f.fail||function(){},g=function(e,t){i||(i=$("<div>",{text:d[e],class:"validationFail"}),t&&(n&&(t=n(t)),t[a](i)))},y=function(){i&&(i.remove(),i=null)},L=function(t,e){e||(e={});var i,n,a,s,d,l=0,o=0,h="";return u.each(function(e){l++,"all"!=t&&0==c[e]||($(this).closest(".inputLabel").removeClass("validate"),$(this).closest(".inputLabel").removeClass("novalidate"),r=k($(this)),1==r[0]?(o++,$(this).closest(".inputLabel").addClass("validate")):""==h&&($(this).closest(".inputLabel").addClass("novalidate"),h=r[1],n=$(this)))}),i=o==l,f.afterEach&&f.afterEach(o),"noshow"==t||e.noerrors||(a=i,s=h,d=n,y(),0==a?d&&(d.hasClass("initedInput")||""!=d.val())&&g(s,d):p()),i},k=function(e){var t=e.data("validate")||"name",i=e.val(),n=!0,a="0000";if("hidden"!=e.attr("type"))return""!=i||"checkbox"==e.attr("type")?t&&t in o&&(1==n&&("r"in o[t]&&("empty"==o[t].r?""===i?(n=!1,a=o[t].f):n=!0:o[t].r.test(i)?n=!0:(n=!1,a=o[t].f)),!0===n&&"fu"in o[t]&&(!0===o[t].fu(i)?n=!0:(n=!1,a=o[t].fuerror))),1==n&&"a"in o[t]&&(o[t].a(e)||(n=!1,a=o[t].fa))):(n=!1,a="0001"),[n,a]},w=function(){for(var e=$(this).val(),t=!1,i=!1,n=!1,a=!1,s=0;s<e.length;s++)t||-1=="qwertyuiopasdfghjklzxcvbnm".indexOf(e[s])?i||-1=="QWERTYUIOPLKJHGFDSAZXCVBNM".indexOf(e[s])?n||-1=="0123456789".indexOf(e[s])?a||-1=="!@#$%^&*()_-+=|/.,:;[]{}".indexOf(e[s])||(a=!0):n=!0:i=!0:t=!0;var r=0,d="";t&&r++,i&&r++,n&&r++,a&&r++,e.length<6&&r<3&&(d="simple"),e.length<6&&3<=r&&(d="medium"),8<=e.length&&r<3&&(d="medium"),8<=e.length&&3<=r&&(d="strong"),6<=e.length&&1==r&&(d="simple"),6<=e.length&&1<r&&r<4&&(d="medium"),6<=e.length&&4==r&&(d="strong"),8<=e.length&&4==r&&(d="super"),0==e.length&&(d=""),l.find("div").removeClass().addClass(d)};return e.init=function(){t&&((u=f.inputsSelector?t.find(f.inputsSelector):t.find('input[type!="hidden"][data-validate!="none"]')).each(function(e){this.nmbr=e,c[e]=!1}),l=$("<div>",{class:"pwdDiff",html:"<div class='indicator'></div>"}),t.find(".password").after(l),u.each(function(){this.addEventListener?(this.addEventListener("blur",v,!1),this.addEventListener("change",v,!1),this.addEventListener("change",h,!1),this.addEventListener("keyup",m,!1),this.addEventListener("change",m,!1),$(this).hasClass("password")&&$(this).on("keyup",w)):this.onfocusout=v}))},e.validation=function(e){return L("all",e)},e.inputValidation=k,e.init(),e},"undefined"!=typeof module&&(module.exports=Validation);
 /*_____*/ 
__map={__sources:["js/functions.js","js/user.js","js/module.js","js/navn.js","js/validation.js","js/_map.js","js/localization.js","js/kit.js","js/satolist.js","js/app.js","js/main.js"],__css:["css/tooltipster.core.min.css","css/tooltipster.bundle.min.css","css/main.css"],about:{uri:"about",href:"about",add:function(n,e){return e.inWnd?{insert:"wnd"}:{el:"content"}},anonimus:!0},terms:{uri:"terms",href:"terms",add:function(n,e){return e.inWnd?{insert:"wnd"}:{el:"content"}},anonimus:!0},page404:{uri:"page404",href:"page404",add:{el:"content"},anonimus:!0,relationsSunc:!0},registration:{uri:"registration",href:"registration",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},anonimus:!0,relations:[{src:"js/vendor/qrscanner.js",f:"js"},{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"},{src:"js/validation.js",f:"js"},{src:"js/vendor/qrcode.min.js",f:"js"}]},anothersite:{uri:"anothersite",href:"anothersite",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},anonimus:!0,relationsSunc:!0,relations:[]},token:{uri:"token",href:"token",add:{el:"content"},anonimus:!0},filluser:{uri:"filluser",href:"filluser",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},redirect:{auth:"index"},relationsSunc:!0,relations:[{src:"js/vendor/circular-progress.js",f:"js"}]},usersettings:{uri:"usersettings",href:"usersettings",add:{el:"content"},redirect:{auth:"index"}},test:{uri:"test",href:"test",add:{el:"content"},redirect:{auth:"index"},relationsSunc:!0,relations:[{src:"js/vendor/picker.js",f:"js",if:function(){return"undefined"==typeof _Electron||0==_Electron}},{src:"js/vendor/picker.date.js",f:"js",if:function(){return"undefined"==typeof _Electron||0==_Electron}},{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"}]},accounts:{uri:"accounts",href:"accounts",add:{el:"content"},redirect:{auth:"index"}},articles:{uri:"articles",href:"articles",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}}},article:{uri:"article",href:"article",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},relations:[{src:"js/vendor/medium-editor.js",f:"js"},{src:"js/vendor/mediuminsert/handlebars.runtime.min.js",f:"js"},{src:"js/vendor/mediuminsert/jquery-sortable-min.js",f:"js"},{src:"js/vendor/mediuminsert/jquery.ui.widget.js",f:"js"},{src:"js/vendor/mediuminsert/jquery.iframe-transport.js",f:"js"},{src:"js/vendor/mediuminsert/jquery.fileupload.js",f:"js"},{src:"js/vendor/mediuminsert/medium-editor-insert-plugin.js",f:"js"}],relationsSunc:!0},embeding20:{uri:"embeding20",href:"embeding20",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},relations:[{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"}]},embeding:{uri:"embeding",href:"embeding",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},relations:[{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"}]},userpage:{uri:"userpage",href:"userpage",add:{el:"content"},redirect:{auth:"index"}},wallet:{uri:"wallet",href:"wallet",add:{el:"content"},relations:[{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"},{src:"js/vendor/chart.min.js",f:"js",if:function(){return"undefined"==typeof _Electron||0==_Electron}}],relationsSunc:!0},share:{uri:"share",href:"share",add:{el:"content"},relations:[{src:"js/vendor/Sortable.min.js",f:"js"},{src:"js/vendor/isotope.pkgd.js",f:"js",if:function(){return"undefined"==typeof _Electron||0==_Electron}},{src:"js/vendor/emojionearea.min.js",f:"js"},{src:"js/vendor/emojionearea.min.css",f:"css"}]},lenta:{uri:"lenta",href:"lenta",add:{el:"content"},relations:[{src:"js/vendor/isotope.pkgd.js",f:"js",if:function(){return"undefined"==typeof _Electron||0==_Electron}}],anonimus:!0},send:{uri:"send",href:"send",add:{el:"content"},relations:[{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"}],anonimus:!0},imageGalleryEdit:{uri:"imageGalleryEdit",href:"imagesEdit",add:function(n,e){return e.inWnd?{insert:"wnd"}:{el:"content"}},anonimus:!0},imageGallery:{uri:"imageGallery",href:"images",add:function(n,e){return e.inWnd?{insert:"wnd"}:{el:"content"}},anonimus:!0,relationsSunc:!0},aboutus:{uri:"aboutus",href:"aboutus",add:{el:"content"},anonimus:!0},menu:{uri:"menu",href:"menu",add:{el:"menu"},now:!0,anonimus:!0,renew:!0,reload:!0},navigation:{uri:"navigation",href:"navigation",add:{el:"navigation"},now:!0,renew:!0},footer:{uri:"footer",href:"footer",add:{el:"footer"},now:!0,anonimus:!0,reload:!0},support:{uri:"support",href:"support",add:{el:"content"},relations:[{src:"js/validation.js",f:"js"}],anonimus:!0,reload:!0},notifications:{uri:"notifications",href:"notifications",add:function(n,e){return e.inTooltip?{insert:"tooltip"}:{el:"content"}}},panel:{uri:"panel",href:"panel",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}}},discussions:{uri:"discussions",href:"discussions",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}}},authorization:{uri:"authorization",href:"authorization",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},relations:[{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"},{src:"js/validation.js",f:"js"},{src:"js/vendor/qrscanner.js",f:"js"}],anonimus:!0},addaccount:{uri:"addaccount",href:"addaccount",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},relations:[{src:"js/vendor/jquery.inputmask.bundle.min.js",f:"js"},{src:"js/validation.js",f:"js"},{src:"js/vendor/qrscanner.js",f:"js"}]},scheduler:{uri:"scheduler",href:"scheduler",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}}},main:{uri:"main",href:"index",add:{el:"content"},anonimus:!0},author:{uri:"author",href:"author",add:{el:"content"},anonimus:!0},post:{uri:"post",href:"post",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},anonimus:!0},userslist:{uri:"userslist",href:"userslist",add:function(n,e){return e.inWnd?{insert:"wnd"}:e.inTooltip?{insert:"tooltip"}:{el:"content"}},anonimus:!0},ustate:{uri:"ustate",href:"ustate",add:function(n,e){return e.inTooltip?{insert:"tooltip"}:{el:"content"}}}},"undefined"!=typeof module&&(module.exports=__map);
 /*_____*/ 
Localization=function(e){var i=this;i.key=(window.navigator.userLanguage||window.navigator.language||"en").split("-")[0],i.available={en:{name:"English",key:"en"},ru:{name:"Русский",key:"ru"}},i.loaded={};var o={};return i.current=function(){return i.available[i.key]||{}},i.locLinks=function(){return _.reduce(i.available,function(n,a){return n+'<a href="?loc='+a.key+'">'+a.name+"</a>"},"")},i.availableMap=function(a){return _.map(i.available,function(n){return n[a]})},i.findByName=function(a){return _.find(i.available,function(n){return n.name==a})},i.lightSet=function(n,a){n&&i.available[n]&&i.key!=n?(i.key=n,i.locSave(),i.import(function(){a&&a()})):a&&a()},i.set=function(n,a){i.available[n]&&i.key!=n?(e.nav&&e.nav.api.history.removeParameters(["loc"]),i.key=n,i.locSave(),i.import(function(){e?e.reload({clbk:a,current:!0}):a&&a()})):a&&a()},i.locSave=function(){localStorage.loc=i.key||(window.navigator.userLanguage||window.navigator.language||"en").split("-")[0]},i.init=function(n){"undefined"!=typeof loclib&&loclib||(loclib={});var a=parameters();i.key=a.loc||localStorage.loc||(window.navigator.userLanguage||window.navigator.language||"en").split("-")[0],i.locSave(),i.import(n)},i.import=function(n){if(i.loaded[i.key])n&&n();else{var a="localization/"+i.key+".js";importScript(a,function(){i.loaded[i.key],o=loclib[i.key]||{},n&&n()})}},i.e=function(n,a){var e=o[n]||deep(window.loclib,i.key+"."+n)||"";return"function"==typeof e&&(e=e(a)),e},i};
 /*_____*/ 
SubscribePrivate=function(){var e=this;return e.address={set:function(e){this.v=e},v:""},e.encrypted={set:function(e){this.v=e},v:""},e.opreturn=function(){return e.encrypted.v},e.validation=function(){return e.address.v?e.encrypted.v?void 0:"encrypted":"address"},e.serialize=function(){return e.address.v},e.export=function(){return{address:e.encrypted.v}},e.type="subscribePrivate",e},Subscribe=function(){var e=this;return e.address={set:function(e){this.v=e},v:""},e.validation=function(){if(!e.address.v)return"address"},e.serialize=function(){return e.address.v},e.export=function(){return{address:e.address.v}},e.type="subscribe",e},Unsubscribe=function(){var e=this;return e.address={set:function(e){this.v=e},v:""},e.validation=function(){if(!e.address.v)return"address"},e.serialize=function(){return e.address.v},e.export=function(){return{address:e.address.v}},e.type="unsubscribe",e},CommentShare=function(){var n=this;return n.share={set:function(e){this.v=e||"",n.on.change&&n.on.change("share",this.v)},v:""},n.message={set:function(e){this.v=e||"",n.on.change&&n.on.change("message",this.v)},v:""},n.images={set:function(e){if(e)if(_.isArray(e)){if(10<e.length)return!1;this.v=e}else{if(!e)return;if(9<this.v.images)return!1;this.v.push(e)}else this.v=[];return n.on.change&&n.on.change("images",this.v),!0},remove:function(e){e?removeEqual(this.v,e):this.v=[]},get:function(){return _.map(this.v,function(e){return e})},v:[]},n.url={set:function(e){this.v=e||"",n.on.change&&n.on.change("url",this.v)},v:""},n.clear=function(){n.message.set(),n.images.set(),n.share.set(),n.url.set()},n.on={},n.off=function(e){delete n.on[e]},n.validation=function(){return n.share.v?n.images.v.length||n.url.v||n.message.v?n.message.v&&140<n.message.v.length?"messagelength":null:"content":"share"},n.serialize=function(){return n.share.v+n.message.v+n.images.v.join(",")+n.message.url},n.export=function(e){return e?{share:n.share.v,message:n.message.v,url:n.url.v,images:n.images.v}:{s:n.share.v,m:n.message.v,u:n.url.v,i:n.images.v}},n.import=function(e){n.share.set(e.s||e.share),n.url.set(e.u||e.url),n.message.set(e.m||e.message),n.images.set(e.i||e.images)},n.alias=function(e){var t=new pCommentShare;return t.time=new Date,t._import(n.export()),t.txid=e,t},n.type="commentShare",n},UpvoteShare=function(){var e=this;return e.share={set:function(e){this.v=e},v:""},e.value={set:function(e){this.v=e},v:""},e.ustate="score",e.validation=function(){if(!e.share.v||!e.value.v)return"share"},e.serialize=function(){return e.share.v+e.value.v},e.export=function(){return{share:e.share.v,value:e.value.v}},e.type="upvoteShare",e},ComplainShare=function(){var e=this;return e.share={set:function(e){this.v=e},v:""},e.validation=function(){if(!e.share.v)return"share"},e.serialize=function(){return e.share.v},e.export=function(){return{share:e.share.v}},e.type="complainShare",e},Share=function(){var a=this;return a.clear=function(){a.message.set(),a.images.set(),a.tags.set(),a.url.set(),a.caption.set(),_.each(a.settings,function(e,t){a.settings[t]=null})},a.caption={set:function(e){this.v=e||"",_.each(a.on.change||{},function(e){e("caption",this.v)})},v:"",drag:!1},a.message={set:function(e){this.v=e||"",_.each(a.on.change||{},function(e){e("message",this.v)})},v:"",drag:!0},a.ustate="post",a.tags={have:function(e){return-1<this.v.indexOf(e)},set:function(e){if(void 0===e)this.v=[];else if(_.isArray(e)){if(30<e.length)return!1;this.v=e}else{if(!e)return;if(29<this.v.length)return!1;removeEqual(this.v,e),this.v.push(e)}return _.each(a.on.change||{},function(e){e("tags",this.v)}),!0},remove:function(e){e?(removeEqual(this.v,e),_.each(a.on.change||{},function(e){e("tags",this.v)})):this.v=[]},get:function(){return _.map(this.v,function(e){return e})},v:[]},a.images={set:function(e){if(e)if(_.isArray(e)){if(10<e.length)return!1;this.v=e}else{if(!e)return;if(9<this.v.length)return!1;this.v.push(e)}else this.v=[];return _.each(a.on.change||{},function(e){e("images",this.v)}),!0},remove:function(e){e?removeEqual(this.v,e):this.v=[],_.each(a.on.change||{},function(e){e("images",this.v)})},get:function(){return _.map(this.v,function(e){return e})},v:[],drag:!0},a.url={set:function(e){return this.v=e||"",_.each(a.on.change||{},function(e){e("url",this.v)}),!0},v:"",drag:!0},a.on={change:{}},a.off=function(e){delete a.on[e]},a.default={a:["cm","i","u"],v:"p"},a.settings={a:"",v:""},a.uploadImages=function(i,e){lazyEach({array:a.images.v,action:function(t,n){var e=t.item;if(-1<e.indexOf("data:image")){var s=e.split(",");s[1]&&i.ajax.run({type:"POST",imgur:!0,data:{Action:"image",image:s[1]},success:function(e){a.images.v[n]=deep(e,"data.link"),t.success()}})}else n++,t.success()},all:{success:function(){e&&e()}}})},a.validation=function(){return a.message.v||a.caption.v?!a.tags.v.length&&"a"!=a.settings.v&&"tags":"message"},a.serialize=function(){return a.url.v+a.caption.v+a.message.v+a.tags.v.join(",")+a.images.v.join(",")},a.export=function(e){return e?{caption:a.caption.v,message:a.message.v,url:a.url.v,tags:a.tags.v,images:a.images.v,settings:_.clone(a.settings)}:{c:encodeURIComponent(a.caption.v),m:encodeURIComponent(a.message.v),u:a.url.v,t:_.map(a.tags.v,function(e){return encodeURIComponent(e)}),i:a.images.v,s:_.clone(a.settings)}},a.import=function(e){if(a.caption.set(e.c||e.caption),a.url.set(e.u||e.url),a.tags.set(e.t||e.tags),a.message.set(e.m||e.message),a.images.set(e.i||e.images),e.s)try{a.settings=e.s}catch(e){}else e.settings&&(a.settings=e.settings)},a.alias=function(e){var t=new pShare;return t.time=new Date,t._import(a.export()),t.txid=e,t},a.type="share",a},UserInfo=function(){var s=this;return s.clear=function(){s.image.set(),s.name.set(),s.language.set(),s.about.set(),s.site.set(),s.addresses.set()},s.addresses={set:function(e){var t=this.v;e?_.isArray(e)?_.each(e,function(e){t.push(e)}):this.v.push(e):this.v=[],s.on.change&&s.on.change("addresses",this.v)},v:[]},s.image={set:function(e){this.v=e||"",s.on.change&&s.on.change("image",this.v)},v:""},s.name={set:function(e){this.v=e||"",s.on.change&&s.on.change("name",this.v)},v:""},s.language={set:function(e){this.v=e||"",s.on.change&&s.on.change("language",this.v)},v:""},s.about={set:function(e){this.v=e||"",s.on.change&&s.on.change("about",this.v)},v:""},s.site={set:function(e){this.v=e||"",s.on.change&&s.on.change("site",this.v)},v:""},s.uploadImage=function(t){var e=s.image.v;if(-1<e.indexOf("data:image")){var n=e.split(",");n[1]&&app.ajax.run({type:"POST",imgur:!0,data:{Action:"image",image:n[1]},success:function(e){s.image.v=deep(e,"data.link"),t&&t()}})}else t&&t()},s.on={},s.off=function(e){delete s.on[e]},s.validation=function(){return!1},s.serialize=function(){return s.name.v+s.site.v+s.language.v+s.about.v+s.image.v+JSON.stringify(s.addresses.v)},s.alias=function(e){var t=new pUserInfo;return t._import(s.export()),t.txid=e,t},s.export=function(e){return e?{name:s.name.v,about:s.about.v,site:s.site.v,language:s.language.v,image:s.image.v,addresses:JSON.stringify(s.addresses.v||[])}:{n:encodeURIComponent(s.name.v),l:s.language.v,a:s.about.v,s:s.site.v,i:s.image.v,b:JSON.stringify(s.addresses.v||[])}},s.import=function(e){s.name.set(e.c||e.name),s.language.set(e.l||e.language),s.about.set(e.a||e.about),s.site.set(e.s||e.site),s.image.set(e.i||e.image),s.addresses.set(JSON.parse(e.b||e.addresses||"[]"))},s.type="userInfo",s},pUserInfo=function(){var n=this;return n.name="",n.image="",n.language="",n.about="",n.site="",n.txid="",n.subscribes=[],n._import=function(e){n.name=decodeURIComponent(e.n||e.name),n.image=e.i||e.image,n.about=e.a||e.about,n.language=e.l||e.language,n.site=e.s||e.site,e.subscribes&&(n.subscribes=e.subscribes),e.txid&&(n.txid=e.txid),n.addresses=JSON.parse(e.b||e.addresses||"[]"),n.temp=e.temp||null},n.import=function(e){e=JSON.parse(e),n._import(e)},n.relation=function(t,e){return e||(e="subscribes"),_.find(n[e],function(e){return e.adddress==t||e.address==t})},n.addRelation=function(e,t){t||(t="subscribes"),n[t].push(e)},n.removeRelation=function(e,t){t||(t="subscribes"),removeEqual(n[t],e)},n.type="userInfo",n},pShare=function(){var n=this;return n.url="",n.tags=[],n.message="",n.caption="",n.images=[],n.txid="",n.time=null,n.comments=[],n.on={},n.off=function(e){delete n.on[e]},n.default={a:["cm","i","u"],v:"p"},n.settings={a:"",v:""},n.comment=function(e){_.isArray(e)?n.comments=n.comments.concat(e):n.comments.push(e),n.on.comment&&n.on.comment(e)},n.findComment=function(t){return _.find(n.comments,function(e){return e.txid==t})},n._import=function(e,t){if(n.url=e.u||e.url,e.i&&!_.isArray(e.i)&&(e.i=[e.i]),e.t&&!_.isArray(e.t)&&(e.t=[e.t]),n.tags=t?(n.message=e.m||e.message||"",n.caption=e.c||e.caption||"",e.t||e.tags||[]):(n.message=decodeURIComponent((e.m||e.message||"").replace(/\+/g," ")),n.caption=decodeURIComponent((e.c||e.caption||"").replace(/\+/g," ")),_.map(e.t||e.tags||[],function(e){return decodeURIComponent(e)})),e.myVal&&(n.myVal=Number(e.myVal)),n.images=e.i||e.images||[],e.txid&&(n.txid=e.txid),n.temp=e.temp||null,e._time&&(n._time=e._time),e.s)try{n.settings=e.s}catch(e){}else e.settings&&(n.settings=e.settings)},n.import=function(e){e=JSON.parse(e),n._import(e)},n.renders={caption:function(){return n.caption?n.caption:n.message.length<100?n.message:""},message:function(){return!n.caption&&n.message.length<100?"":n.message}},n.upvote=function(e){var t=new UpvoteShare;return t.share.set(n.txid),t.value.set(e),n.myVal=e,t},n.complain=function(){var e=new ComplainShare;return e.share.set(n.txid),e},n.type="share",n},pCommentShare=function(){var t=this;return t.url="",t.message="",t.caption="",t.images=[],t.txid="",t.time=null,t.share="",t._import=function(e){t.url=e.u||e.url,t.message=(e.m||e.message||"").replace(/\+/g," "),t.images=e.i||e.images||[],t.share=e.s||e.share||""},t.import=function(e){e=JSON.parse(e),t._import(e)},t.upvote=function(){var e=new UpvoteShare;return e.share.set(t.txid),e},t.type="commentShare",t},Img=function(e){e||(e={});var t=this;return t.type=e.type,t.name=e.name,t.app=e.app,t.refId=e.refId,t};
 /*_____*/ 
Platform=function(u){var k=this;k.app=u,k.focus=!0,k.salt="vd45dzxcsOBWjLe2p4jmSMmMDSp90o01lkxvSl34MspyHG9sbu1092";var o=1e4;return k.mp={dollars:function(e,t){return t||(t={}),void 0===t.precision&&(t.precision=2),t.allowNegative=!1,void 0===t.prefix&&(t.prefix="$&nbsp;"),t.value=Number(e).toFixed(t.precision),maskValue(t)},coin:function(e,t){return t||(t={}),void 0===t.precision&&(t.precision=6,10<e&&(t.precision=5),100<e&&(t.precision=4),1e3<e&&(t.precision=3),1e4<e&&(t.precision=2),1e5<e&&(t.precision=1),1e6<e&&(t.precision=0)),t.allowNegative=!1,t.value=Number(e).toFixed(t.precision),maskValue(t)},coinwithsmall:function(e,t){t||(t={}),void 0===t.precision&&(t.precision=2),void 0===t.dprecision&&(t.dprecision=6),void 0===t.suffix&&(t.suffix="POC");var n=t.suffix;delete t.suffix,e=Number(Number(e).toFixed(t.dprecision));var s=Math.pow(10,t.precision);return t.allowNegative=!1,t.value=(Math.floor(e*s)/s).toFixed(t.precision),e=(e-t.value).toFixed(t.dprecision).substr(2+t.precision),'<div class="table coinwithsmall"><div class="bignum">'+maskValue(t)+'</div><div class="svlwr"><div><div div class="smallvalue">'+e+'</div><div class="suffix">'+n+"</div></div></div></div>"}},k.addressType="p2pkh",k.addressTypes=["p2pkh","p2sh"],k.values={alph:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]},k.errorHandler=function(e,t,n){var s=k.errors[e]||k.errors.network;if(s){var a=s.message;if(a){if("function"==typeof a&&(a=a(n)),!a)return;sitemessage(a)}var r=s.action;return t&&r&&r(),(s.text||function(){return""})()}return!1},k.errors={money:{action:function(e){var t=k.app.platform.sdk.address.pnet().address;topPreloader(10),k.sdk.node.transactions.get.balance(function(e){topPreloader(30),0<e?k.sdk.node.transactions.get.canSpend([t],function(e){topPreloader(100),e?sitemessage(k.errors.network.message()):dialog({html:k.app.localization.e("canSpendError"),btn1text:k.app.localization.e("daccept"),class:"one"})}):k.app.user.validate()?(topPreloader(100),dialog({html:k.app.localization.e("noMoneyError"),btn1text:k.app.localization.e("daccept"),class:"one"})):k.app.platform.sdk.ustate.me(function(e){topPreloader(40),e?k.app.platform.sdk.users.checkFreeMoney(t,function(e){topPreloader(100),e?k.errors[1].action():dialog({html:k.app.localization.e("noMoneyError"),btn1text:k.app.localization.e("daccept"),class:"one"})}):(topPreloader(100),sitemessage(k.errors.network.message()))})},t)}},network:{message:function(){return k.app.localization.e("networkerror")}},9:{message:function(){return k.app.localization.e("SelfSubscribeError")}},8:{message:function(){return k.app.localization.e("DoubleSubscribeError")}},7:{message:function(){return k.app.localization.e("InvalideSubscribeError")}},6:{message:function(){return k.app.localization.e("ChangeInfoLimitError")}},5:{message:function(){return k.app.localization.e("SelfScoreError")}},4:{message:function(){return k.app.localization.e("doubleLimitLight")}},3:{message:function(){return k.app.localization.e("scoreLimitLight")}},2:{text:function(){return k.app.localization.e("postLimitLight")}},1:{text:function(){return k.app.localization.e("checkScoreErrorLight")},action:function(e){dialog({html:k.app.localization.e("checkScoreError"),btn1text:k.app.localization.e("dyes"),btn2text:k.app.localization.e("dno"),success:function(){k.app.nav.api.load({open:!0,href:"filluser",history:!0})},fail:function(){}})}},"-26":{message:function(){return k.app.localization.e("timestamperror")}}},k.parseUrl=function(e){var t=parseVideo(e),n=null;if(t.type){var s;if(n=e,"youtube"==t.type)if(-1<e.indexOf("watch"))if((s=e.split("?"))[1]){var a=parameters(s[1]);a.v&&(n="https://www.youtube.com/embed/"+a.v,t.id=a.v)}if("vimeo"==t.type&&-1==e.indexOf("player"))s=(s=e.split("/"))[s.length-1],/[0-9]+/.test(s)&&(n="https://player.vimeo.com/video/"+s+"?portrait=0",t.id=s);t.url=n}return t},k.clbks={_focus:{},focus:function(){isTablet()&&u.user.isState(function(e){}),_.each(this._focus,function(e){e()})}},k.sdk={articles:{storage:[],empty:function(){return{id:makeid(),caption:{value:""},images:[],content:null}},echo:function(e){return _.reduce(e.content||{},function(e,t){return e+t.value},"")},save:function(){var e=k.sdk.address.pnet().address;localStorage[e+"articles"]=JSON.stringify(k.sdk.articles.storage||[])},load:function(){var e={},t=k.sdk.address.pnet().address,n=localStorage[t+"articles"];if(console.log("local",n),n)try{e=JSON.parse(n)}catch(e){console.log("ERR",e)}return e},init:function(e){var t=k.sdk.articles.load();console.log("INITAR"),k.sdk.articles.storage=t,e&&e()}},usersettings:{meta:{win:{name:"Coinstake win",id:"win",type:"BOOLEAN",value:!0},transactions:{name:"Transactions recieve",id:"transactions",type:"BOOLEAN",value:!1}},create:function(e){var t=k.sdk.usersettings.meta;return new Parameter(t[e])},createall:function(){var n=k.sdk.usersettings.create,e=k.sdk.usersettings.meta,s={};return _.each(e,function(e,t){s[t]=n(t)}),s},compose:function(){var n=k.sdk.usersettings,e=n.createall(),s=n.meta,t={notifications:{name:"Notifications",options:{win:e.win,transactions:e.transactions}}};return _.each(e,function(e,t){e.onChange=function(e){s[t].value=boolnum(e),n.save()}}),{c:t,o:e}},save:function(){var n={};_.each(k.sdk.usersettings.meta,function(e,t){n[t]=e.value}),localStorage.usersettings=JSON.stringify(n)},load:function(){var e={},t=localStorage.usersettings;if(t)try{e=JSON.parse(t)}catch(e){}return e},init:function(e){var t=k.sdk.usersettings.load(),n=k.sdk.usersettings.meta;_.each(t,function(e,t){console.log(n,t),n[t].value=e}),e&&e()}},user:{storage:{},get:function(e){var t=this.storage;if(t.me)e&&e(t.me);else{var n=!(t.me={}),s=deep(k,"sdk.node.transactions.temp.userInfo");if(s&&!_.isEmpty(s)){n=!0;var a=new pUserInfo;a._import(_.toArray(s)[0]),t.me=a,e&&e(t.me,n)}else{var r=k.sdk.address.pnet().address;k.sdk.users.get(r,function(){t.me=k.sdk.users.storage[r]||{},e&&e(t.me,n)})}}}},ustate:{storage:{},clbks:{},validationcurrent:function(e,t,n){var s=k.sdk.ustate.storage;!e&&state&&(e=k.sdk.address.pnet().address);var a=s[e],r=!0,o=!1;return a?(a.trial?(r=!1,o="trial"):("postunspent"==t&&a.post_unspent<=0&&(r=!1),"scoreunspent"==t&&a.score_unspent<=0&&(r=!1)),r||(o=t)):(r=!1,o="info"),o},attention:function(s,a){var r=k.sdk.ustate.storage,o=k.sdk.address.pnet().address;k.app.user.isState(function(e){if(e){var t=r[o],n=k.sdk.user.storage.me;if(!n||!n.image||!n.name)return void(a&&a("notuserinfo"));if(!t)return void(a&&a("notinfo"));if(t.post_unspent<=s)return void(a&&a("postunspent"));if(t.score_unspent<=s)return void(a&&a("scoreunspent"))}a&&a(!1)})},me:function(e){var t=k.sdk.ustate.storage,n=k.sdk.address.pnet().address;k.sdk.ustate.get(n,function(){e&&e(t[n])})},get:function(e,t){_.isArray(e)||(e=[e]);var n=this.storage;k.sdk.node.transactions.temp;e=_.filter(e,function(e){if(!n[e])return!0}),(e=_.uniq(e)).length?k.app.ajax.rpc({method:"getuserstate",parameters:[(e||[]).join(",")],success:function(e){e&&!_.isArray(e)&&(e=[e]),_.each(e||[],function(e){n[e.address]=e}),t&&t(e)},fail:function(){t&&t([])}}):t&&t()}},usersl:{storage:{}},users:{storage:{},get:function(t,s,a){_.isArray(t)||(t=[t]);var r=this.storage,o=k.sdk.node.transactions.temp;a&&(r=k.sdk.usersl.storage),t=_.filter(t,function(e){return!!e&&(!r[e]||void 0)}),(t=_.uniq(t)).length?k.app.user.isState(function(n){var e=[t||[]];a&&e.push("1"),k.app.ajax.rpc({method:"getuserprofile",parameters:e,success:function(e){"undefined"!=typeof pUserInfo&&_.each(e||[],function(e){var t=new pUserInfo;t._import(e),t.regdate=new Date,t.regdate.setTime(1e3*e.regdate),r[e.address]=t,k.sdk.usersl.storage[e.address]=t,n&&o.userInfo&&!a&&delete o.userInfo}),s&&s()},fail:function(){s&&s()}})}):s&&s()},requestFreeMoney:function(t){var n=k.sdk.address.pnet();n?(n=n.address,this.checkFreeMoney(n,function(e){e?k.app.ajax.api({action:"freeMoney",data:{address:n},success:function(e){t&&t(!0)},fail:function(){t&&t(null)}}):t&&t(null)})):t&&t(null)},giveFreeMoney:function(s,a,c){this.checkFreeMoney(s,function(e){if(e){var r=[{address:s,amount:.01}],t=bitcoin.bip39.mnemonicToSeed(a),n=(bitcoin.crypto.sha256(Buffer.from(t)),bitcoin.bip32.fromSeed(t).derivePath(u.platform.sdk.address.path(0)).toWIF()),o=bitcoin.ECPair.fromWIF(n),i=k.sdk.address.pnet(o.publicKey,"p2pkh").address;k.sdk.wallet.txbase([i],_.clone(r),null,null,function(e,t,n){if(e)c&&c(e);else{var s=k.app.platform.sdk.node.transactions.create.wallet(t,n,o),a=Math.min(1e-6*s.virtualSize(),.0999);k.app.platform.sdk.wallet.txbase([i],_.clone(r),a,null,function(e,s,t){if(e)c&&c(e);else{var n=k.app.platform.sdk.node.transactions.create.wallet(s,t,o);k.app.platform.sdk.node.transactions.send(n,function(e,t){if(t)c&&c(t);else{var n=_.map(s,function(e){return e.txid});k.app.platform.sdk.node.transactions.clearUnspents(n),c&&c(null,e)}})}})}},!0)}else c&&c("nofree")})},checkFreeMoney:function(t,n){k.sdk.users.get(t,function(){deep(k,"sdk.users.storage2."+t+".name")?n&&n(!1):k.sdk.address.registration(t,function(e){e?n&&n(!1):k.sdk.node.transactions.get.balance(function(e){0<e?n&&n(!1):n&&n(!0)},t,!0)})})}},wallet:{txbase:function(e,o,i,c,d,t){i||(i=0),c||(c="include");var u=_.reduce(o,function(e,t){return e+Number(t.amount)},0);"include"!=c&&(u+=i),u<=0?d&&d("total"):k.sdk.node.transactions.get.unspents(function(e){var n=[];_.each(e,function(e,t){e=_.filter(e,k.sdk.node.transactions.canSpend),_.each(e,function(e){e.amount&&n.push(e)})});var t=_.reduce(n,function(e,t){return e+Number(t.amount)},0);if(n.length)if(t<u)d&&d("money");else{var s=_.sortBy(n,function(e){return Math.abs(e.amount-u)}),a=[],r=0;_.each(s,function(e){r<u&&(a.push(e),r+=e.amount)}),u<r&&o.push({address:a[0].address,amount:r-u}),"include"==c&&(o[0].amount=o[0].amount-i,o[0].amount<=0)?d&&d("fee"):d&&d(null,a,o)}else d&&d("unspents")},e,t)},drawSpendLine:function(a,r,e){k.app.platform.sdk.node.transactions.get.canSpend(e||null,function(e,t){if(0<t&&e<t){a.css("position","relative"),a.find(".spendLine").length||a.append('<div class="spendLine"><div class="line"></div></div>');var n=a.find(".spendLine .line"),s=a.find(".spendLine .line");0==e?s.addClass("bad"):s.removeClass("bad"),n.animate({width:100*e/t+"%"},140)}else a.find(".spendLine").remove();r&&r()})}},addresses:{storage:{},init:function(e){k.sdk.addresses.storage.addresses||(k.sdk.addresses.storage.addresses=[]),k.sdk.addresses.storage.addressesobj||(k.sdk.addresses.storage.addressesobj=[]);for(var t=localStorage[k.sdk.address.pnet().address+"addressesNum"]||1,n=0;n<t;n++)k.sdk.addresses.addWalletAddress(n);k.sdk.addresses.save(),e&&e()},save:function(){k.sdk.addresses.storage.addresses.length&&(localStorage[k.sdk.address.pnet().address+"addressesNum"]=k.sdk.addresses.storage.addresses.length)},addWalletAddress:function(e){void 0===e&&(e=k.sdk.addresses.storage.addresses.length);var t=k.sdk.address.wallet(e);return k.sdk.addresses.storage.addresses[e]=t.address,(k.sdk.addresses.storage.addressesobj[e]=t).address},addNewWalletAddress:function(e){if(k.sdk.addresses.storage.addresses.length){var s=null;lazyEach({array:k.sdk.addresses.storage.addresses,action:function(t){if(s)t.success();else{var n=t.item;k.sdk.node.transactions.get.unspent(function(e){e.length||(s=n),t.success()},n)}},all:{success:function(){s||(s=k.sdk.addresses.addWalletAddress()),e&&e(s)}}})}else{var t=k.sdk.addresses.addWalletAddress();e&&e(t)}}},address:{storage:{},path:function(e){return"m/44'/0'/0'/"+e+"'"},pnetsimple:function(e){var t="p2pkh";return bitcoin.payments[t]({pubkey:e})},pnet:function(e,t){t||(t=k.addressType);var n=!1;if(e?n=!0:e=k.app.user.key.value,!e)return null;var s,a=this.storage[t];if(a&&!n)return a;if("p2pkh"==t||"p2wpkh"==t)return s=bitcoin.payments[t]({pubkey:e}),this.storage[t]=s;if("p2sh"==t){s=bitcoin.payments.p2wpkh({pubkey:e});var r=bitcoin.payments.p2sh({redeem:s});return this.storage[t]=r}},wallet:function(e,t){var n=bitcoin.bip32.fromSeed(t||k.app.user.private.value).derivePath(u.platform.sdk.address.path(e)).toWIF(),s=bitcoin.ECPair.fromWIF(n).publicKey,a=bitcoin.payments.p2wpkh({pubkey:s});return bitcoin.payments.p2sh({redeem:a})},dumpKeys:function(e){var t=bitcoin.bip32.fromSeed(k.app.user.private.value).derivePath(u.platform.sdk.address.path(e)).toWIF();return bitcoin.ECPair.fromWIF(t)},dumpPrivKey:function(e){var t=bitcoin.bip32.fromSeed(k.app.user.private.value).derivePath(u.platform.sdk.address.path(e)).toWIF();return bitcoin.ECPair.fromWIF(t).privateKey},registration:function(e,n){k.app.ajax.rpc({method:"getaddressregistration",parameters:[[e]],success:function(e){var t=deep(e,"0.date")||0;n&&n(0<t)},fail:function(){n&&n(null,"network")}})}},remote:{storage:{},failed:{},get:function(n,s){var a=this.storage,r=this.failed;r[n]?s&&s(null):a[n]?s&&s(a[n]):(a[n]={},k.app.ajax.api({action:"urlPreview",data:{url:hexEncode(n)},success:function(e){var t=deep(e,"data.og");a[n]=t,a[n]||(r[n]=!0),s&&s(a[n])},fail:function(){r[n]=!0,s&&s(null)}}))}},tags:{storage:{all:["love","followback","instagramers","socialsteeze","tweegram","photooftheday","20likes","amazing","smile","follow4follow","like4like","look","instalike","igers","picoftheday","food","instadaily","instafollow","followme","girl","instagood","bestoftheday","instacool","carryme","follow","colorful","style","swag","fun","instagramers","model","socialsteeze","food","smile","pretty","followme","nature","lol","dog","hair","sunset","swag","throwbackthursday","instagood","beach","friends","hot","funny","blue","life","art","photo","cool","carryme","bestoftheday","clouds","amazing","socialsteeze","fitness","followme","all_shots","textgram","family","instago","igaddict","awesome","girls","instagood","my","bored","baby","music","red","green","water","bestoftheday","black","party","white","yum","flower","carryme","night","instalove","photo","photos","pic","pics","socialsteeze","picture","pictures","snapshot","art","beautiful","instagood","picoftheday","photooftheday","color","all_shots","exposure","composition","focus","capture","moment","hdr","hdrspotters","hdrstyles_gf","hdri","hdroftheday","hdriphonegraphy","hdr_lovers","awesome_hdr"]},search:function(t,e){t=t.toLowerCase().replace(/[^a-z0-9_]/g,"");var n=_.filter(this.storage.all,function(e){if(-1<e.indexOf(t))return!0});n=_.uniq(n),e&&e(lastEls(n,7))}},icons:{fromKey:function(e){var t=e.substring(e.length-1);return["fas fa-grimace","far fa-grimace","fas fa-grin","far fa-grin","fas fa-grin-alt","far fa-grin-alt","fas fa-grin-beam","far fa-grin-beam","fas fa-grin-beam-sweat","far fa-grin-beam-sweat","fas fa-grin-hearts","far fa-grin-hearts","fas fa-grin-squint","far fa-grin-squint","fas fa-grin-squint-tear","far fa-grin-squint-tear"][parseInt(t,16)]}},node:{storage:{balance:{}},loading:{},updating:null,update:function(){var e=["get.lastBlockHeader"],t=function(){k.sdk.node.loading.update=!0,lazyEach({array:e,action:function(e){var t=deep(k.sdk.node,e.item);t?t(e.success):e.success()},all:{success:function(){k.sdk.node.loading.update=!1}}})};t(),this.updating=retry(function(){return!k.sdk.node.loading.update},function(){t()},4e4,!0)},get:{time:function(t){k.app.ajax.rpc({method:"gettime",parameters:[],success:function(e){console.log(e.Result),e.Result&&(k.timeDifference=e.result-Math.floor((new Date).getTime()/1e3)),t&&t()},fail:function(){t&&t()}})},address:function(){return k.nodes[1]},callNode:function(e,t,n){n&&k.sdk.node.loading[n]?retry(function(){return!k.sdk.node.loading[n]},function(){t&&t(k.sdk.node.loading[n])}):(n&&(k.sdk.node.loading[n]=!0),k.app.ajax.rpc({method:e,success:function(e){n&&(k.sdk.node.storage[n]=e,k.sdk.node.loading[n]=!1),t&&t(e)},fail:function(){t&&t(null)}}))},blockNumber:function(e){this.callNode("getbestblockhash",e,"blocknumber")},balance:function(t,n){var s=k.sdk.node.storage.balance;k.app.ajax.rpc({method:"getBalance",parameters:["*",6],success:function(e){s[t]=e.result,n&&n(s[email])},fail:function(){n&&n(s[email])}})}},account:{import:function(e,t){k.app.ajax.rpc({method:"importAddress",parameters:[e,e,1],success:function(e){t&&t()},fail:function(){t&&t()}})},get:function(e,t){k.app.ajax.rpc({method:"getAccount",parameters:[e,1],success:function(e){t&&t(e.result)},fail:function(){t&&t()}})},getset:function(t,n,s){k.sdk.node.account.get(n,function(e){e?s&&s():k.sdk.node.account.import(t,n,s)})}},shares:{storage:{},clbks:{added:{}},users:function(e,t){var n=_.map(e||[],function(e){return e.address});k.sdk.users.get(n,t,!0)},add:function(t){this.storage[t.txid]=t,_.each(this.clbks.added,function(e){e(t)})},getbyid:function(e,s){var a=this.storage;a.trx||(a.trx={}),_.isArray(e)||(e=[e]);var t=[e],r=k.sdk.node.transactions.temp,n=k.sdk.address.pnet();n&&t.push(n.address),k.app.user.isState(function(n){k.app.ajax.rpc({method:"getrawtransactionwithmessagebyid",parameters:t||[],success:function(e){e&&!_.isArray(e)&&(e=[e]),e=_.filter(e||[],function(e){if(e.address)return!0});var t=_.map(e||[],function(e){var t=new pShare;return t._import(e),t.txid=e.txid,t.time=new Date,t.address=e.address,t.time.setTime(1e3*e.time),t.score=e.scoreSum,t.scnt=e.scoreCnt,a.trx[t.txid]=t,n&&r.share&&r.share[t.txid]&&delete r.share[t.txid],t});s&&s(t)},fail:function(){s&&s(null,"network")}})})},get:function(e,s,t){t||(t="getrawtransactionwithmessage");var a=this.storage,r=k.sdk.node.transactions.temp;a.trx||(a.trx={}),k.app.user.isState(function(n){k.app.ajax.rpc({method:t,parameters:e||[],success:function(e){e=_.filter(e||[],function(e){if(e.address)return!0});var t=_.map(e||[],function(e){var t=new pShare;return t._import(e),t.txid=e.txid,t.time=new Date,t.address=e.address,t.time.setTime(1e3*e.time),t.score=e.scoreSum,t.scnt=e.scoreCnt,n&&r.share&&r.share[t.txid]&&delete r.share[t.txid],a.trx[t.txid]=t});s&&s(t)},fail:function(){s&&s([],"network")}})})},recomended:function(a,r){k.app.user.isState(function(e){if(e){a||(a={}),a.count||(a.count="10"),a.address=k.sdk.address.pnet().address;var t=(a.address||"")+"_recomended",n=k.sdk.node.shares.storage,s=k.sdk.node.shares;n[t]?r&&r(n[t]):s.get([a.address,a.count],function(e){n[t]=e||[],r&&r(n[t])},"getrecommendedposts")}else r&&r([])})},common:function(d,u,p){k.app.user.isState(function(t){d||(d={}),d.count||(d.count=10),t&&(d.address=k.sdk.address.pnet().address);var s=(d.address||"")+"_"+(d.author||"")+"_"+(d.begin||""),a=k.sdk.node.transactions.temp,r=k.sdk.node.shares.storage;r[s]||(r[s]=[]);var e=k.sdk.node.shares;if("cache"==p&&r[s]){var n=null,o=0;d.txid||(n=!0);_.filter(r[s],function(e,t){if(n&&o<d.count)return o++,!0;e.txid==d.txid&&(n=!0)});u&&u(r[s])}else{if("clear"==p&&(r[s]=[]),!d.txid&&r[s].length)if(0<d.count){var i=r[s][r[s].length-1];d.txid=i.txid}else{i=r[s][0];d.txid=i.txid}d.txid||(d.txid=d.begin||"");var c=[d.address,d.author||"",d.txid||"",d.count];e.get(c,function(n,e){n?(t&&_.each(a.share,function(e){var t=new pShare;t._import(e),t.temp=!0,t.address=e.address,n.unshift(t)}),_.each(n||[],function(e){0<d.count?r[s].push(e):r[s].unshift(e)}),k.sdk.node.transactions.saveTemp(),u&&u(n,null,d)):u&&u(n,e,d)})}})}},transactions:{unspent:null,unspentLoading:{},temp:{},clbks:{},tempOptions:{userInfo:{count:"one"}},addressFromScryptSig:function(e){if(!e)return"";var t=e.split(" ")[1];if(!t)return"";var n=bitcoin.ECPair.fromPublicKey(Buffer.from(t,"hex"));return k.sdk.address.pnetsimple(n.publicKey).address},toUT:function(e,t){var n=_.find(e.vout,function(e){return _.find(e.scriptPubKey.addresses,function(e){return e==t})}),s=deep(e,"vin.0.coinbase")||"nonstandard"==deep(e,"vout.0.scriptPubKey.type")||!1;return{txid:e.txid,vout:n.n,address:t,confirmations:e.confirmations,coinbase:s,amount:n.value,scriptPubKey:n.scriptPubKey.hex}},canSpend:function(e){return 0<e.confirmations&&!e.coinbase||(100<e.confirmations||void 0)},sign:function(e,t){var n=e.toHex();k.app.ajax.rpc({method:"signrawtransactionwithkey",parameters:[n,["5x4PRe8jsgQNRykfmvqBbTNzBJZw4P2r5gD4zn1VksE8HRCz1sbE"]],success:function(e){t&&t(e)},fail:function(){t&&t(null,"network")}})},send:function(e,t){var n=e.toHex();k.app.ajax.rpc({method:"sendrawtransaction",parameters:[n],success:function(e){t&&t(e)},fail:function(){t&&t(null,"network")}})},saveTemp:function(e){k.sdk.address.pnet()&&k.app.settings.set(k.sdk.address.pnet().address,"temp",JSON.stringify(k.sdk.node.transactions.temp)),e&&e()},loadTemp:function(e){k.sdk.address.pnet()&&(k.sdk.node.transactions.temp=JSON.parse(k.app.settings.get(k.sdk.address.pnet().address,"temp")||"{}")),e&&e()},checkTemps:function(e){var n=this.checkTemp,s=this.temp,t=[];_.each(s,function(e){_.each(e,function(e){t.push(e)})}),lazyEach({array:t,action:function(t){n(t.item,function(e){e&&_.each(s,function(e){e[t.item.txid]&&delete e[t.item.txid]}),k.sdk.node.transactions.saveTemp(),t.success()})},all:{success:e}})},checkTemp:function(e,n){e&&e.txid?k.sdk.node.transactions.get.tx(e.txid,function(e,t){n&&n(!t&&(e&&0<e.confirmations||!e))}):n&&n(null)},clearUnspents:function(e){var a=!1,t=k.sdk.node.transactions,r=0,o=k.sdk.address.pnet();_.each(e,function(s){_.each(t.unspent,function(e,t){var n=removeEqual(e,{txid:s});n&&(a=!0,o&&t==o.address&&(r+=Number(n.amount)))})}),a&&_.each(t.clbks,function(e){e(-r)})},get:{lenta:{common:function(){}},balanceAr:function(t,e,n,a){this.unspents(function(e){var n=0,s=[];_.each(e,function(e){a&&(e=_.filter(e,k.sdk.node.transactions.canSpend));var t=_.reduce(e,function(e,t){return e+Number(t.amount)},0);s=s.concat(e),n+=t}),t&&t(n,s)},e,n)},allBalance:function(e,t){var n=[k.sdk.address.pnet().address].concat(k.sdk.addresses.storage.addresses||[]);this.balanceAr(e,n,t)},canSpend:function(e,a){e||(e=[k.sdk.address.pnet().address].concat(k.sdk.addresses.storage.addresses||[])),_.isArray(e)||(e=[e]),this.balance(function(e,t){var n=_.filter(t,k.sdk.node.transactions.canSpend),s=_.reduce(n,function(e,t){return e+Number(t.amount)},0);a&&a(s,e)},e)},balance:function(n,e,t,s){_.isArray(e)?this.balanceAr(n,e,t,s):this.unspent(function(e){s&&(e=_.filter(e,k.sdk.node.transactions.canSpend));var t=_.reduce(e,function(e,t){return e+Number(t.amount)},0);n&&n(t,e)},e,t)},_unspent:function(t){k.sdk.node.transactions;var e=k.sdk.address.pnet();k.app.ajax.rpc({method:"listUnspent",parameters:[1,9999999,[e.address]],success:function(e){t&&t(e||[])},fail:function(){t&&t([])}})},_unspents:function(e,t,s){var a={};lazyEach({array:t,action:function(t){var n=t.item;k.sdk.node.transactions.get.unspent(function(e){a[n]=e,t.success()},n,s)},all:{success:function(){e&&e(a)}}})},unspents:function(t,n,s){var a=k.sdk.node.transactions;a.unspent||(a.unspent={});var r={};(n=_.filter(n,function(e){return a.unspent[e]&&!s?(r[e]=a.unspent[e],!1):a.unspentLoading[e]=!0})).length?k.app.ajax.rpc({method:"txunspent",parameters:[n,1,9999999],success:function(e){_.each(n,function(e){a.unspentLoading[e]=!1,a.unspent[e]=[],r[e]=[]}),_.each(e||[],function(e){var t=e.address;a.unspent[t].push(e),r[t].push(e)}),_.each(k.sdk.node.transactions.clbks,function(e){e()}),t&&t(r)},fail:function(){_.each(n,function(e){a.unspent[e]=[],a.unspentLoading[e]=!1,r[e]=[]}),t&&t(r)}}):t&&t(r)},unspent:function(t,n,e){var s=k.sdk.node.transactions;s.unspent||(s.unspent={}),n||(n=k.sdk.address.pnet().address),s.unspentLoading[n]?retry(function(){if(!s.unspentLoading[n])return!0},function(){t&&t(s.unspent[n])},10):s.unspent[n]&&!e?t&&t(s.unspent[n]):(s.unspentLoading[n]=!0,k.app.ajax.rpc({method:"txunspent",parameters:[[n],1,9999999],success:function(e){s.unspent[n]=e||[],s.unspentLoading[n]=!1,t&&t(s.unspent[n])},fail:function(){s.unspent[n]=[],s.unspentLoading[n]=!1,t&&t(s.unspent[n])}}))},tx:function(e,t){k.app.ajax.rpc({method:"getrawtransaction",parameters:[e,1],success:function(e){t&&t(e)},fail:function(){t&&t(null,"network")}})}},create:{commonFromUnspent:function(n,s,a){a||(a={}),k.sdk.node.transactions.get.unspent(function(e){if((e=_.filter(e,k.sdk.node.transactions.canSpend)).length){var t=[{txId:e[e.length-1].txid,vout:e[e.length-1].vout,amount:e[e.length-1].amount}];k.sdk.node.transactions.create[n.type](t,n,s,a)}else s&&s(null,"money")},deep(a,"address.address"))},wallet:function(e,t,n){var r=n||k.app.user.keys(),o=new bitcoin.TransactionBuilder;o.addNTime(k.timeDifference||0);return _.each(e,function(e){if(e.address.indexOf(!1))o.addInput(e.txid,e.vout);else{var t=_.indexOf(k.sdk.addresses.storage.addresses,e.address);if(!(-1<t))return;k.sdk.addresses.storage.addressesobj[t];o.addInput(e.txid,e.vout)}Number(e.amount)}),_.each(t,function(e){o.addOutput(e.address,Number((1e8*e.amount).toFixed(0)))}),_.each(e,function(e,t){if(0==e.address.indexOf("P"))o.sign(t,r);else{var n=_.indexOf(k.sdk.addresses.storage.addresses,e.address);if(!(-1<n))return;var s=k.sdk.addresses.storage.addressesobj[n],a=k.sdk.address.dumpKeys(n);o.sign(t,a,s.redeem.output,null,Number(1e8*e.amount).toFixed(0))}}),o.build()},common:function(r,o,e,i,t){t||(t={});var c=k.sdk.node.transactions.temp,d=k.sdk.node.transactions.tempOptions,n=o.validation();if(n)i&&i(null,n);else{var s=t.keys||k.app.user.keys(),u=t.address||k.sdk.address.pnet(),a=new bitcoin.TransactionBuilder;a.addNTime(k.timeDifference||0);var p=0;_.each(r,function(e){"p2pkh"!=k.addressType&&"p2sh"!=k.addressType||a.addInput(e.txId,e.vout),"p2wpkh"==k.addressType&&a.addInput(e.txId,e.vout,null,u.output),p+=Number(e.amount)}),p*=1e8;var f=Buffer.from(bitcoin.crypto.hash256(o.serialize()),"utf8"),l=[Buffer.from(o.type,"utf8"),f];o.opreturn&&l.push(Buffer.from(o.opreturn()));var m=bitcoin.payments.embed({data:l});a.addOutput(m.output,0),"p2pkh"==k.addressType&&(a.addOutput(u.address,Number((p-(e||0)).toFixed(0))),a.sign(0,s)),"p2wpkh"==k.addressType&&(a.addOutput(u.address,2e4),a.sign(0,s,null,null)),"p2sh"==k.addressType&&(a.addOutput(u.address,Number((p-(e||0)).toFixed(0))),a.sign(0,s,u.redeem.output,null,""));var h=a.build(),v=h.toHex();if(console.log("tx",h,o.export()),t.pseudo){var g=o.export(!0);g.txid=makeid(),i&&i(g,null)}else console.log(o.export()),k.app.ajax.rpc({method:"sendrawtransactionwithmessage",parameters:[v,o.export(),o.type],success:function(e){var t=o.export(!0);t.txid=e,t.address=u.address;var n=deep(d,o.type+".count")||"many";c[o.type]&&"one"!=n||(c[o.type]={}),c[o.type][e]=t,k.sdk.node.transactions.saveTemp();var s=_.map(r,function(e){return e.txId});if(k.app.platform.sdk.node.transactions.clearUnspents(s),o.ustate){var a=k.sdk.ustate.storage;a[u.address]&&(a[u.address][o.ustate+"_spent"]++,a[u.address][o.ustate+"_unspent"]--),_.each(k.sdk.ustate.clbks,function(e){e()})}i&&i(t)},fail:function(e){i&&i(null,(deep(e,"data.code")||deep(e,"data.message")||"network").toString(),e)}})}},share:function(e,t,n,s){this.common(e,t,o,n,s)},userInfo:function(e,t,n,s){this.common(e,t,o,n,s)},upvoteShare:function(e,t,n,s){this.common(e,t,o,n,s)},complainShare:function(e,t,n,s){this.common(e,t,o,n,s)},commentShare:function(e,t,n,s){this.common(e,t,o,n,s)},unsubscribe:function(e,t,n,s){this.common(e,t,o,n,s)},subscribe:function(e,t,n,s){this.common(e,t,o,n,s)},subscribePrivate:function(t,n,s,a){var r=this.common;k.cryptography.api.aeswc.pwd.encryption(n.address.v,{},function(e){n.encrypted.set(e),r(t,n,o,s,a)})}}},fee:{estimate:function(t){k.app.ajax.rpc({method:"estimateSmartFee",parameters:[1],success:function(e){e.feerate=1e-5,t&&t(e)},fail:function(){t&&t(null)}})}}},pool:{current:null,info:function(e,t){k.sdk.users.get(e.addresses,t)},dumpKey:function(e,n,s){this.expand(e,function(e){var t=_.indexOf(e.addresses,n);-1==t?s&&s(null):s&&s(e.private[t])})},expand:function(o,i){k.app.user.isState(function(e){if(e){var t=k.sdk.address.pnet().address,n=_.indexOf(o.addresses,t);if(-1<n){var a=null,s=o.aes[n],r=k.app.user.private.value.toString("hex");k.cryptography.api.aeswc.decryption(s,r,{},function(e){a=e;var s={addresses:o.addresses,private:[],aes:o.aes,_key:a};lazyEach({array:o.keys,action:function(t,n){var e=t.item;k.cryptography.api.aeswc.decryption(e,a,{},function(e){s.private[n]=e,t.success()})},sync:!0,all:{success:function(){i&&i(s)}}})})}else i&&i(null,"address")}else i&&i(null,"state")})},export:function(s,e){var a={addresses:s.addresses,keys:[],aes:s.aes};lazyEach({array:s.private,action:function(t,n){var e=t.item;k.cryptography.api.aeswc.encryption(e,s._key,{},function(e){a.keys[n]=e,t.success()})},sync:!0,all:{success:function(){e&&e(a)}}})},push:function(t,e,n,s,a){t.addresses.push(e),t.private.push(n),k.cryptography.api.aeswc.encryption(s,n,{},function(e){t.aes.push(e),a&&a(t)})},remove:function(e,t){var n=k.sdk.pool.get(),s=_.indexOf(e.addresses,t);return-1<s&&(e.addresses.splice(s,1),e.private&&e.private.splice(s,1),e.keys&&e.keys.splice(s,1),e.aes&&e.aes.splice(s,1),delete n.map[t],!0)},add:function(e,t,n){var s=k.sdk.pool,a=s.get(),r=k.app.user.keysFromMnemo(t),o=k.sdk.address.pnetsimple(r.publicKey).address,i=r.privateKey.toString("hex");if(a.map[o]){var c=a.map[o];if(1<a.packs[c].addresses.length)return void(n&&n(null,"hasinanotherpack"));delete a.map[o],delete a.packs[c]}this.push(e,o,i,e._key,function(){s.currentMap(),n&&n(e)})},new:function(a){var r=k.sdk.pool,o={addresses:[],private:[],aes:[],_key:null},i=[null,null];k.app.user.isState(function(e){if(e){var t=u.user.private.value;if(t){var n=t.toString("hex"),s=k.sdk.address.pnet().address;return o._key=k.cryptography.api.random.crypto(),void r.push(o,s,n,o._key,function(e){r.export(e,function(e){i[0]=e,a&&a(i[0],i[1])})})}i[1]="key"}else i[1]="state";a&&a(i[0],i[1])})},init:function(r){var o=k.sdk.pool;k.app.user.isState(function(e){if(e){var s=o.get(),a=k.sdk.address.pnet().address,t=s.map[a];o.current=s,t?r&&r(s.packs[t],t):o.new(function(e,t){if(e){var n=makeid();s.map[a]=n,s.packs[n]=e,o.save()}else sitemessage(t);r&&r(e,n)})}else r&&r()})},get:function(){var e=k.sdk.pool.current;return e||(e=localStorage.pool)&&(e=JSON.parse(e)),e||(e={map:{},packs:{}}),e},getPack:function(e){var t=k.sdk.pool.get(),n=t.map[e];if(n)return[t.packs[n],n]},currentMap:function(){var n=k.sdk.pool.current;n.map={},_.each(n.packs,function(e,t){_.each(e.addresses,function(e){n.map[e]=t})})},save:function(e){var t=k.sdk.pool;k.app.user.isState(function(e){e&&t.current&&(t.currentMap(),localStorage.pool=JSON.stringify(t.current))})}}},k.Cryptography=function(e){var s,o,i=this,r=[19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34];return o="undefined"!=typeof window?window.crypto||window.msCrypto:_crypto,i.helpers={keyFromString:function(e,t,n){new PBKDF2(e,"helper",1,t).deriveKey(null,function(e){n(e)})},keyForAes:function(e,t){var n=function(e){window.crypto.subtle.importKey("raw",aesjs.utils.utf8.toBytes(e),{name:"AES-CBC"},!1,["encrypt","decrypt"]).then(function(e){t&&t(e)}).catch(function(e){console.log(e)})};128<=e.length?n(e):i.helpers.keyFromString(e,16,function(e){n(e)})}},i.api={random:{crypto:function(e,t){t||(t=256);var n=new Uint8Array(t/8);o.getRandomValues(n);var s=aesjs.utils.hex.fromBytes(n);return e&&e(s),s}},rsa:{settings:{hashL:"256",name:"RSA-OAEP",length:4096},createKeys:function(t){var e=this.settings;o.subtle.generateKey({name:e.name,modulusLength:e.length,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-"+e.hashL}},!0,["encrypt","decrypt"]).then(function(e){t&&t(e)}).catch(function(e){console.error(e)})},exportKeys:function(e,t){var n={},s=this.exportKey;lazyEach({array:["public","private"],synk:!0,action:function(t){s(e[t.item+"Key"],t.item,function(e){n[t.item]=e,t.success()})},all:{success:function(){t&&t(n)}}})},exportKey:function(e,t,n){var s="jwk";"public"==t&&(s="spki"),"private"==t&&(s="pkcs8"),o.subtle.exportKey(s,e).then(function(e){n&&n(convertArrayBufferToString(e))}).catch(function(e){console.error(e)})},importKeys:function(e,t){var n=this.importKey,s={};lazyEach({array:["public","private"],action:function(t){n(e[t.item],t.item,function(e){s[t.item+"Key"]=e,t.success()})},all:{success:function(){t&&t(s)}}})},importKey:function(e,t,n){var s=i.api.rsa.settings,a=[],r="jwk";"public"==t&&(a=["encrypt"],r="spki"),"private"==t&&(a=["decrypt"],r="pkcs8"),o.subtle.importKey(r,convertStringToArrayBuffer(e),{name:s.name,hash:{name:"SHA-"+s.hashL}},!0,a).then(function(e){n&&n(e)}).catch(function(e){console.error(e)})},encrypt:function(e,t,n){var s=convertStringToArrayBuffer(t);o.subtle.encrypt({name:"RSA-OAEP"},e,s).then(function(e){n&&n(convertArrayBufferToString(e))}).catch(function(e){console.error(e)})},decrypt:function(e,t,n){var s=convertStringToArrayBuffer(t);o.subtle.decrypt({name:"RSA-OAEP"},e,s).then(function(e){n&&n(convertArrayBufferToString(e))}).catch(function(e){console.error(e),n&&n("")})}},aeswc:{pwd:{encryption:function(e,t,n){i.api.aeswc.encryption(e,s,t,n)},decryption:function(e,t,n){i.api.aeswc.decryption(e,s,t,n)}},cryptoPair:function(t,n){t.privateEncrypted?n&&n(t):i.api.aeswc.pwd.encryption(t.private,{},function(e){t.privateEncrypted=e,n&&n(t)})},uncryptoPair:function(t,n){return t.private?n&&n(t):i.api.aeswc.pwd.decryption(t.privateEncrypted,{},function(e){t.private=e,n&&n(t)}),t},encryption:function(e,t,n,s){n||(n={}),n.charsetEnc=n.charsetEnc||"utf8",n.charsetDec=n.charsetDec||"hex";var a=aesjs.utils[n.charsetEnc].toBytes(e);i.helpers.keyForAes(t,function(e){o.subtle.encrypt({name:"AES-CBC",iv:new Uint8Array(r)},e,a).then(function(e){var t=aesjs.utils[n.charsetDec].fromBytes(new Uint8Array(e));s&&s(t)}).catch(function(e){console.error(e)})})},decryption:function(t,e,n,s){n||(n={}),n.charsetEnc=n.charsetEnc||"utf8",n.charsetDec=n.charsetDec||"hex";var a=new Uint8Array(aesjs.utils[n.charsetDec].toBytes(t));i.helpers.keyForAes(e,function(e){o.subtle.decrypt({name:"AES-CBC",iv:new Uint8Array(r)},e,a).then(function(e){var t=aesjs.utils[n.charsetEnc].fromBytes(new Uint8Array(e));s&&s(t)}).catch(function(e){console.error(e,t),s&&s("")})})}}},i.messages={chat:{encryptions:function(e,t,n){n&&n()},encryption:function(e,t,n,s){n&&n()},decryptions:function(a,e,t){var n=[],r=_.map(e,function(e,t){return n.push(e),t}),o={};lazyEach({array:n,synk:!0,action:function(t,e){var n=t.item,s=r[e];n?i.messages.chat.decryption(a,n,function(e){o[s]=e,t.success()}):(o[s]=n,t.success())},all:{success:function(){t(o)}}})},decryption:function(e,t,n){n&&n("")}},decryption:function(e,t,n,s){var a=function(e){i.api.rsa.decrypt(e,t,function(e){i.api.aeswc.decryption(n,e,{},s)})};_.isObject(e)?a(e):i.api.rsa.importKey(e,"private",function(e){a(e)})},encryption:function(e,t,n,a){a||(a=i.api.random.crypto());var r=[];lazyEach({array:e,action:function(t,n){var e=t.item.key,s=function(e){i.api.rsa.encrypt(e,a,function(e){r[n]={key:e,user:t.item.user},t.success()})};_.isObject(e)?s(e):i.api.rsa.importKey(e,"public",function(e){s(e)})},all:{success:function(){i.api.aeswc.encryption(t,a,{},function(e){n&&n({keys:r,message:e})})}}})}},i.prepare=function(n){u.user.isState(function(e){if(e){var t=u.user.private.value;t?(s=t.toString("hex"),n&&n(!1)):n&&n("key")}else n&&n("state")})},i},k.currentTime=function(){var e=new Date;return k.timeDifference&&(e=e.addSeconds(k.timeDifference)),e},k.WS=function(c){var n,d=this,i=null,s=function(){d.onlineCheck&&retry(function(){var e=deep(window,"navigator.onLine");if(d.online!=e)return d.online=e,!0;d.online=e},function(){d.online?d.reconnected&&d.getUnreaded(s):(d.reconnected||(d.reconnected=dateToStrUtcS(c.currentTime())),s())},50)};return d.isopen=!1,d.fastMessages=[],d.reconnected=!1,d.connected={},d.tempates={user:function(e,t){var n="",s=deep(e,"image");return n+='<div class="cwrapper table">\t\t\t\t\t<div class="cell cellforimage">\t\t\t\t\t\t<div class="icon">\t\t\t\t\t\t\t<div class="usericon" image="'+(s||"")+'">',s||(n+='<svg width="30" height="30" data-jdenticon-value="'+e.address+'"></svg>'),n+='</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="ccell">\t\t\t\t\t\t<div class="infomain">\t\t\t\t\t\t\t<div class="caption">\t\t\t\t\t\t\t\t<b class="adr">'+(deep(e,"name")||e.address)+'</b>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="tips">'+t+"\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>"}},d.messages={transaction:{loadMore:function(s,a){c.sdk.node.transactions.get.tx(s.txid,function(e){if(e){s.tx=c.sdk.node.transactions.toUT(e,s.addr),s.btx=e;var t=s.addr;c.sdk.node.transactions.unspent||(c.sdk.node.transactions.unspent={});var n=c.sdk.node.transactions.unspent;n[t]||(n[t]=[]),removeEqual(n[t],{txid:s.tx.txid}),n[t].push(s.tx),s.address=c.sdk.node.transactions.addressFromScryptSig(deep(s.btx,"vin.0.scriptSig.asm")),c.sdk.users.get(s.address||"",function(){s.address&&(s.user=c.sdk.usersl.storage[s.address]||{address:s.address}),a&&a(s)},!0)}})},refs:{},fastMessage:function(e){var t="";return e.tx&&(e.tx.coinbase?c.sdk.usersettings.meta.win.value&&(t+='<div class="text">'+c.app.localization.e("coinbaseSuccess",c.mp.coin(e.tx.amount))+"</div>"):e.address!=c.sdk.address.pnet().address&&c.sdk.usersettings.meta.transactions.value&&(t+=d.tempates.user(e.user,'<div class="text">'+c.app.localization.e("userSent",c.mp.coin(e.tx.amount))+"</div>"))),t},audio:{unfocus:"water_droplet",if:function(e){if(e.tx)if(e.tx.coinbase){if(!c.sdk.usersettings.meta.win.value)return!1}else if(e.address!=c.sdk.address.pnet().address&&!c.sdk.usersettings.meta.transactions.value)return!1;return!0}},clbks:{transactions:function(t){_.each(c.sdk.node.transactions.clbks,function(e){e(t.tx.amount)})}}},"new block":{loadMore:function(e,t){var n=c.sdk.node.transactions;_.each(n.unspent,function(e,t){_.each(e,function(e){e.confirmations++})}),t()},refs:{},fastMessage:function(e){return""},clbks:{transactions:function(){_.each(c.sdk.node.transactions.clbks,function(e){e()})}}}},d.destroy=function(e){d.isopen=!1,d.removeAddresses(d.connected),d.connected={},n&&!e&&n.close(),n=i=null},d.fastMessage=function(e){var t=makeid(!0);e='<div class="fastMessage" id="'+t+'"><div class="fmCnt">'+e+'</div><div class="close"><i class="fa fa-times" aria-hidden="true"></i></div></div>',$("body").append(e);var n=$("#"+t),s={id:t,el:n};bgImages(n),n.find("[data-jdenticon-value]").each(function(){var e=$(this),t=e.data("jdenticon-value");e.html(jdenticon.toSvg(t,e.width()))}),d.fastMessages.push(s),c.app.nav.api.links(null,n,function(){a(s,1)});var a=function(e,t,n){e.timeout&&clearTimeout(e.timeout),c.focus?e.timeout=setTimeout(function(){e.el.fadeOut(300),setTimeout(function(){e.el.remove(),removeEqual(d.fastMessages,{id:e.id}),n||r()},300)},t):setTimeout(function(){a(e,t,n)},100)},r=function(){var n=0,e=4;isMobile()&&(e=1);var s=d.fastMessages.length-e;_.each(d.fastMessages,function(e,t){t<s?a(e,1,!0):(isMobile()||(n+=10),e.el.css("bottom",n+"px"),n+=e.el.outerHeight())})};a(s,5e3),s.el.on("mouseenter",function(){clearTimeout(s.timeout)}),s.el.on("mouseleave",function(){a(s,5e3)}),s.el.find(".close").on("click",function(){a(s,1)}),r()},d.connect=function(t){if(!n){var e=c.app.options.ws;if("undefined"!=typeof WebSocket)try{n=new WebSocket(e)}catch(e){}else try{n=new MozWebSocket(e)}catch(e){}n.onclose=function(e){d.destroy(!0),d.reconnect()},n.onerror=function(e){d.destroy(),t&&t(!1)},n.onopen=function(e){d.isopen=!0,d.reconnected,d.connected={},d.auth(t)},n.onmessage=function(e){var t=e=e.data;try{-1<t.indexOf("registered")&&(e=(e=e.replace("msg",'"msg"')).replace("addr",'"addr"')),t=JSON.parse(e||"{}")}catch(e){}t&&d.messageHandler(t)}}},d.addBlock=function(){d.blockHandler=!0},d.removeBlock=function(){d.blockHandler=!1},d.messageHandler=function(a){if(a.msg)if(a&&"registered"==a.msg)d.connected[a.addr]=!0;else if(!a.msg||d.blockHandler);else{var r=deep(d.messages,a.msg)||{};if(r.checkHandler&&!r.checkHandler(a,r))return;var e=function(t){var e=deep(r,"audio");if(e&&(e.if&&!e.if(a,t)||(e.focus&&c.focus&&ion.sound.play(e.focus),e.unfocus&&!c.focus&&ion.sound.play(e.unfocus))),_.each(r.clbks,function(e){e(a,t)}),r.fastMessage&&!r.refs.all&&!r.refs[a.RefID]){var n=r.fastMessage(a,t);n&&d.fastMessage(n)}if(r.header&&!c.focus&&c.titleManager){var s=r.header(a);s&&c.titleManager.add(s)}};r.loadMore?r.loadMore(a,e):e()}},d.auth=function(t){u.user.isState(function(e){e?d.addAccount(null,t):t&&t(!1)})},d.authConnect=function(t){u.user.isState(function(e){e?d.connect(t):t&&t(!1)})},d.reconnect=function(e){d.reconnected=dateToStrUtcS(c.currentTime()),retryLazy(function(t){d.authConnect(function(e){t(e)})},e,1500)},d.send=function(e){if(n)try{n.send(e)}catch(e){}},d.tryInit=function(){var t=function(){u.user.isState(function(e){e&&(d.onlineCheck=deep(window,"navigator.onLine")||!1,d.online=d.onlineCheck,n||(d.reconnected=dateToStrUtcS(c.currentTime())),s())})};_break=!1,d.connected={},d.authConnect(function(e){n?t():d.reconnect(t)})},d.wait=function(e,t){retry(function(){return!i||!i[e]||(Math.floor((new Date).getTime()/1e3)>i[e]+1||(!!d.connected[e]||void 0))},t)},d.addAccount=function(e,t){e||(e=c.app.user.keys());for(var n=c.sdk.address.pnet(e.publicKey).address+"addressesNum",s=localStorage[n]||1,a=[{kp:e,n:0}],r=1;r<=s;r++){var o=bitcoin.bip32.fromSeed(e.privateKey).derivePath(u.platform.sdk.address.path(r)).toWIF(),i=bitcoin.ECPair.fromWIF(o);a.push({kp:i,n:r})}d.addAddresses(a,t)},d.addAddresses=function(e,t){var n=0;lazyEach({array:e,sync:!0,action:function(t){d.addAddress(t.item.kp,t.item.n,function(e){e&&n++,t.success()})},all:{success:function(){t(0!=n)}}})},d.addAddress=function(e,t,n){var s="";if(s=t?c.sdk.address.wallet(t,e.privateKey).address:c.sdk.address.pnet(e.publicKey).address,d.connected[s])n&&n(!0);else{for(var a=Math.round((new Date).getTime()/1e3);(a=a.toString()+""+rand(0,9).toString()).length<32;);var r=e.sign(Buffer.from(a)),o={addr:s,nonce:a,sgn:r.toString("hex"),pub:e.publicKey.toString("hex")};i||(i={}),i[s]=Math.floor((new Date).getTime()/1e3),d.wait(s,function(){d.connected[s]?n&&n(!0):n&&n(!1)}),d.send(JSON.stringify(o))}},d.removeAddresses=function(e){_.each(e,function(e,t){d.removeAddress(t)})},d.removeAccount=function(){d.destroy()},d.removeAddress=function(e){var t={msg:"unsubscribe",addr:e};delete d.connected[e],delete i[e],d.send(JSON.stringify(t))},d},k.nodes=[{full:"71af0799d943.sn.mynetname.net:38081",host:"71af0799d943.sn.mynetname.net",port:38081,ws:8080,path:"",user:"user",pass:"secret-password"},{full:"185.148.147.15:38081",host:"185.148.147.15",port:38081,ws:8080,path:"",user:"user",pass:"secret-password"},{full:"188.134.3.162:38081",host:"188.134.3.162",port:38081,ws:8080,path:"",user:"user",pass:"secret-password"},{full:"37.144.82.161:38081",host:"37.144.82.161",port:38081,ws:8080,path:"",user:"user",pass:"secret-password"}],k.clear=function(){_.each(k.sdk,function(e,t){e.storage&&(e.storage={})}),k.ws&&k.ws.destroy()},k.update=function(e){var n=10;topPreloader(n),lazyEach({array:[],action:function(e){var t=e.item;deep(k.sdk,t)(function(){n+=15,topPreloader(n),e.success()})},all:{success:function(){topPreloader(100),e&&e()}}})},k.prepare=function(e,t){k.state.load(),k.focusListener(),k.initSounds(),_Node||(k.ws=new k.WS(k),k.ws.tryInit(),k.sdk.node.update()),k.titleManager=new k.TitleManager,k.sdk.node.get.time(function(){k.prepareUser(e,t)})},k.prepareUser=function(t,e){var n=function(e){e?(k.cryptography=new k.Cryptography,lazyActions([k.sdk.node.transactions.loadTemp,k.sdk.addresses.init,k.cryptography.prepare,k.sdk.pool.init,k.sdk.ustate.me,k.sdk.usersettings.init,k.sdk.articles.init],function(){k.sdk.node.transactions.checkTemps(function(){k.sdk.user.get(function(){t&&t()})})})):t&&t()};void 0!==e?n(e):u.user.isState(function(e){n(e)})},k.prepareApi=function(e){k.rpc={},_.each(k.nodes,function(e,t){var n={protocol:"http",user:e.user,pass:e.pass,host:e.host,port:e.port};k.rpc[t]=new RpcClient(n)}),e&&e()},k.initSounds=function(){"undefined"!=typeof ion&&ion.sound({sounds:[{name:"water_droplet"}],volume:.5,path:"js/vendor/ion.sound/sounds/",preload:!0})},k.focusListener=function(){window.focus(),k.focus=!0,$(window).bind("focus",function(){k.focus=!0,k.clbks.focus(),k.titleManager&&k.titleManager.clear()}),$(window).bind("blur",function(){k.focus=!1})},k.TitleManager=function(){var n="",s=null;return this.add=function(e){e=$("<div>").html(e).text(),s&&clearInterval(s),n||(n=document.title);var t=0;s=setInterval(function(){t++,document.title=t%2?e:n},700)},this.clear=function(){s&&clearInterval(s),s=null,n&&(document.title=n),n=""},document.title,this},k.state={save:function(){localStorage.nodeid=k.nodeid||"1",k.addressType&&(localStorage.addressType=k.addressType)},load:function(){k.nodeid=localStorage.nodeid||"1",k.addressType=localStorage.addressType||"p2pkh"}},k.app=u,k},topPreloader(65);
 /*_____*/ 
if("undefined"!=typeof require&&void 0===__map)var __map=require("./_map.js");"undefined"!=typeof _Electron&&_Electron&&(imagesLoaded=require("imagesloaded"),jdenticon=require("jdenticon"),Isotope=require("isotope-layout"),require("isotope-packery"),pickadate=require("pickadate/lib/picker.js"),require("pickadate/lib/picker.date.js"),jQueryBridget=require("jquery-bridget"),jQueryBridget("isotope",Isotope,$),jQueryBridget("pickadate",pickadate,$)),"undefined"==typeof _Node&&(_Node=!1),chrsz=8,Application=function(e){var t=this;t.options={nav:{navPrefix:"/"},name:"PCRB",fullName:"Pocketrepbtc",localStoragePrefix:"pocketrepbtc",apiproxy:"https://pocketnet.app:8888",server:"https://pocketnet.app/Shop/AJAXMain.aspx",imageServer:"https://api.imgur.com/3/",imageStorage:"https://api.imgur.com/3/images/",ws:"wss://pocketnet.app:8088",fingerPrint:null,unathorizated:function(o){t.user.isState(function(e){e&&(t.user.signout(),t.reload({href:"authorization"}),o||dialog({html:t.localization.e("id189_1"),class:"accepting one",btn1text:"Okay",btn2text:t.localization.e("dcancel")}))})}},t.el={content:$("#content"),app:$("#application"),header:$("#headerWrapper"),menu:$("#menuWrapper"),navigation:$("#navigationWrapper"),footer:$("#footerWrapper"),chats:$(".chats")},t.id=makeid(),t.map=__map,t.modules={},t.relations={};"undefined"!=typeof window&&(t.options.address=window.location.protocol+"//"+window.location.host);return t.module=function(e){var o=deep(t,"map."+e+".id"),n=null;return o&&(n=deep(t,"modules."+o+".module")||null),n},t.init=function(o){"undefined"==typeof localStorage&&(localStorage={}),o||(o={}),o.nav||(o.nav={}),o.nav.clbk||(o.nav.clbk=t.initClbk||null),_.each(t.map,function(e,o){e.id=o}),t.localization=new Localization(t),t.settings=new settingsLocalstorage(t),t.nav=new Nav(t),t.ajax=new AJAX(t.options),t.user=new User(t),t.ajax.set.user(t.user),t.platform=new Platform(t),t.options.platform=t.platform,_Node||function(){if("undefined"!=typeof window){var e=function(e){e.error&&window.design};window.removeEventListener("error",e),window.addEventListener("error",e)}}();var n=function(){t.localization.init(function(){t.user.isState(function(e){t.platform.prepare(function(){t.nav.init(o.nav),o.clbk&&o.clbk()},e)})})};"undefined"!=typeof Fingerprint2?(new Fingerprint2).get(function(e,o){t.options.fingerPrint=e,n()}):(t.options.fingerPrint="",n())},t.reload=function(o){o||(o={}),o.nav||(o.nav={}),o.nav.reload=!0,o.href&&(o.nav.href=o.href),o.current&&(o.nav.href=t.nav.get.href()),t.destroyModules(),t.user.isState(function(e){o.nav.clbk=o.clbk,"function"==typeof o.nav.href&&(o.nav.href=o.nav.href()),t.nav.init(o.nav)})},t.reloadModules=function(e){t.destroyModules(),t.user.isState(function(){_.filter(t.map,function(e,o){var n=t.modules[o];if(n&&n.module.inited&&n.module.authclbk&&n.module.authclbk(),n&&n.module.inited&&n.module.restart&&e.reload)return n.module.restart(),!0});e&&e()})},t.reloadLight=function(o){t.user.isState(function(e){t.reloadModules(function(){o&&o()})})},t.deviceReadyInit=function(e){void 0!==window.cordova?document.addEventListener("deviceready",function(){navigator.splashscreen.hide(),t.init(e)},!1):t.init(e)},t.destroyModules=function(){_.each(t.modules,function(e){e.module.inited&&e.module.destroy&&e.module.destroy()})},t.destroy=function(){t.destroyModules(),t.modules={},t.ajax=null,t.nav=null},t.logger=function(e,o){},t.geolocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){console.log("position",e)},function(e){},{enableHighAccuracy:!0,maximumAge:6e4})},t.actions={up:_scrollTop,offScroll:function(e){if(e){if("undefined"!=typeof window){var o=$(window).scrollTop();$(window).bind("scroll",function(){$(window).scrollTop(o)})}}else $("html").addClass("nooverflow")},onScroll:function(){$("html").removeClass("nooverflow"),"undefined"!=typeof window&&$(window).unbind("scroll")}},t.loadModules=function(e){lazyEach({array:e.modules,action:function(e){t.nav.p.open({nohistory:!0,load:!0,uri:e.item,success:e.success,psname:!0})},each:{after:e.after},all:{success:function(){e.success(e.modules)}}})},t.renewModules=function(e){},t.name=t.options.name,t},"undefined"!=typeof module&&(module.exports=Application),topPreloader(85);
 /*_____*/ 
"undefined"==typeof _Node&&(_Node=!1),"undefined"==typeof _SEO&&(_SEO=!1),_Node||(app=new Application,app.deviceReadyInit()),topPreloader(100);
 /*_____*/ 

 /*_____*/ 
var about=function(){var p=new nModule,n={},a=function(t){var n,e,a,i=deep(t,"history"),o=null,s=null,c={time:function(){today=new Date,today=Math.floor((e-today)/1e3),tsec=today%60,today=Math.floor(today/60),tsec<0?tsec="00":tsec<10&&(tsec="0"+tsec),tmin=today%60,today=Math.floor(today/60),tmin<0?tmin="00":tmin<10&&(tmin="0"+tmin),thour=today%24,today=Math.floor(today/24),thour<0&&(thour="00"),today<0&&(today="00"),n.days.html(today),n.seconds.html(tsec),n.minutes.html(tmin),n.hours.html(thour)},fixed:function(){var t=$(window).scrollTop();n.main.offset().top+n.main.height()<t?n.fixed.addClass("active"):n.fixed.removeClass("active")},explore:function(){var t=n.c.find(".faq");console.log("SD"),_scrollToTop(t)},validateEmail:function(t){return!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t)},saveEmail:function(t,e,n){n||(n="4");var a={Email:t,Name:""};a.Action||(a.Action="ADDTOMAILLIST"),a.TemplateID||(a.TemplateID=n),$.ajax({type:"POST",url:"https://pocketnet.app/Shop/AJAXMain.aspx",data:a,dataType:"json",success:function(){e&&e()}})},joinSuccess:function(t){p.fastTemplate("joinSuccess",function(t){dialog({html:t,class:"one joinbeta",btn1text:"Okay"})},{email:t})},whitepaperSuccess:function(){p.fastTemplate("whitepaperSuccess",function(t){dialog({html:t,class:"one joinbeta",btn1text:"Okay"})})},whitepaper:function(){p.fastTemplate("whitepaper",function(t){dialog({html:t,wrap:!0,success:function(t){var e=t.el.find("input").val();if(c.validateEmail(e))return c.saveEmail(e,null,"5"),c.whitepaperSuccess(),!0},clbk:function(t){var e=function(){var t=$(this).val();return c.validateEmail(t)?(n.removeClass("disabled"),!0):(n.addClass("disabled"),!1)},n=t.find(".btn1");n.addClass("disabled"),n.on("click",function(){});var a=t.find("input");a.focus(),a.on("change",e),a.on("keyup",e)},class:"one joinbeta"})})},join:function(t){p.fastTemplate("join",function(t){dialog({html:t,wrap:!0,success:function(t){var e=t.el.find("input").val();if(c.validateEmail(e))return c.saveEmail(e),c.joinSuccess(e),!0},clbk:function(t){var e=function(){var t=$(this).val();return c.validateEmail(t)?(n.removeClass("disabled"),!0):(n.addClass("disabled"),!1)},n=t.find(".btn1");n.addClass("disabled"),n.on("click",function(){});var a=t.find("input");a.focus(),a.on("change",e),a.on("keyup",e)},class:"one joinbeta"})},{action:t})}},l=function(){c.whitepaper()},d=function(){c.join()},r=function(){var t=$(this).attr("answer");t&&s.send(t,function(){f.survey()})},u=[{name:"Twitter",icon:'<i class="fab fa-twitter"></i>',href:"hhttps://twitter.com/Pocket_Net"},{name:"Telegram",icon:'<i class="fab fa-telegram"></i>',href:"https://t.me/PocketRep"},{name:"Facebook",icon:'<i class="fab fa-facebook"></i>',href:"https://www.facebook.com/PocketNet"},{name:"Minds",image:"https://cdn-assets.minds.com/front/dist/assets/logos/bulb.svg",href:"https://www.minds.com/PocketNet"},{name:"Linkedin",icon:'<i class="fab fa-linkedin"></i>',href:"https://www.linkedin.com/company/cryptolo-io"},{name:"Mastodon",icon:'<i class="fab fa-mastodon"></i>',href:"https://mastodon.social/@PocketRep"},{name:"Gab",image:"https://gab.com/assets/img/logo-dec.png",href:"https://gab.com/PocketNet"},{name:"Sola",image:"https://web.solacore.net/img/logo_medium-3_mNF.png",href:"https://sola.ai/cryptolo_io"},{name:"Medium",icon:'<i class="fab fa-medium"></i>',href:"https://medium.com/@cryptolo.io"}],f={survey:function(e){console.log("survey",s),p.shell({name:"survey",el:n.survey,data:{survey:s},animation:"fadeIn"},function(t){t.el.find(".sendanswer").on("click",r),t.el.find(".resultpercent").each(function(){var t=$(this);t.animate({width:t.attr("w")+"%"},130)}),e&&e()})},tes:function(){var t=n.c.find(".tes");lazyEach({array:t,sync:!0,action:function(t){var e=$(t.item),n=e.attr("time")||600;e.addClass("show"),setTimeout(function(){t.success()},n)}})},lenta:function(){p.nav.api.load({open:!0,id:"lenta",el:n.lenta,animation:!1,mid:"about",essenseData:{author:"PEj7QNjKdDPqE9kMDRboKoCtp8V6vZeZPd",byauthor:!0,authAction:function(t){c.join(t)},notscrollloading:!0},clbk:function(t,e){o=e}})}},m=function(){};return{primary:i,getdata:function(t){o=null,s=new sQuestion({id:"pocketnetlanding",ajax:p.app.ajax,question:"Are you fed up with traditional social media like Facebook, Twitter and others?",answers:[{t:"Yes, very",v:1},{t:"Yes, somewhat",v:2},{t:"Facebook and Twitter are just great",v:3}]}),t({socials:u,survey:s})},destroy:function(){a&&clearInterval(a),o&&(o.destroy(),o=null),window.removeEventListener("scroll",c.fixed),n={}},init:function(t){m(),(n={}).c=t.el.find("#"+p.map.id),n.lenta=t.el.find(".lenta"),n.main=n.c.find(".main"),n.fixed=n.c.find(".fixedButton"),n.join=n.c.find(".ejoin"),n.whitepaper=n.c.find(".whitepaper"),n.days=t.el.find(".days"),n.seconds=t.el.find(".seconds"),n.minutes=t.el.find(".minutes"),n.hours=t.el.find(".hours"),n.survey=t.el.find(".survey"),e=new Date(2019,0,13,23,59),a=setInterval(c.time,1e3),n.join.on("click",d),n.whitepaper.on("click",l),n.c.find(".exploremore").on("click",c.explore),window.addEventListener("scroll",c.fixed),f.tes(),f.lenta(),s.init(function(){f.survey()}),t.clbk(null,t)}}};return p.run=function(t){var e=p.addEssense(n,a,t);p.init(e,t)},p.stop=function(){_.each(n,function(t){t.destroy()})},p}();"undefined"!=typeof module?module.exports=about:(app.modules.about={},app.modules.about.module=about);
 /*_____*/ 
var terms=function(){var i=new nModule,e={},o=function(n){var t,e=deep(n,"history"),o=function(){i.shell({name:i.app.localization.key,el:t.c,data:{}},function(n){})},u=function(){};return{primary:e,getdata:function(n){n({})},destroy:function(){t={}},init:function(n){u(),(t={}).c=n.el.find("#"+i.map.id),o(),n.clbk(null,n)},wnd:{class:"withoutButtons allscreen black a100"}}};return i.run=function(n){var t=i.addEssense(e,o,n);i.init(t,n)},i.stop=function(){_.each(e,function(n){n.destroy()})},i}();"undefined"!=typeof module?module.exports=terms:(app.modules.terms={},app.modules.terms.module=terms);
 /*_____*/ 
var page404=function(){var t=new nModule,o={},u=function(n){var e=deep(n,"history"),o=function(){};return{primary:e,getdata:function(n){n({})},destroy:function(){({})},init:function(n){o(),{}.c=n.el.find("#"+t.map.id),n.clbk(null,n)}}};return t.run=function(n){var e=t.addEssense(o,u,n);t.init(e,n)},t.stop=function(){_.each(o,function(n){n.destroy()})},t}();"undefined"!=typeof module?module.exports=page404:(app.modules.page404={},app.modules.page404.module=page404);
 /*_____*/ 
var registration=function(){var v=new nModule,i={},t=function(n){var a,i,t,o=deep(n,"history"),c={last:!1,end:!1},l=null;console.log("scrollel=null");var s=new Parameter({type:"STRING",name:"keyInput",id:"keyInput",placeholder:v.app.localization.e("confirmkey"),autoSearch:function(e,n,i){if(0==c.mnemonicKey.indexOf(e)&&(console.log("v[v.length - 1]",e[e.length-1])," "!=e[e.length-1])){var t=e.split(" "),o=t.length-1;t[o];i(_.filter(c.mnemonicContent,function(e,n){if(n<=o)return!0}).join(" "))}}}),r={validation:function(){return trim(s.value)!=c.mnemonicKey?(a.c.find(".note").html(v.app.localization.e("keysnotmatch")),a.c.addClass("error"),!1):(a.c.removeClass("error"),a.c.find(".note").html(""),!0)},registration:function(){r.validation()&&v.user.signin(c.mnemonicKey,function(e){if(!e)return a.c.find.note.html(v.app.localization.e("id98")),void a.c.addClass("error");c.end=!0,p.confirm(function(){p.success(function(){setTimeout(function(){if("_this"==deep(i,"successHref"))if(v.app.user.validate()){var e=deep(t,"container.close");e&&e(),i.signInClbk&&i.signInClbk()}else v.nav.api.loadSameThis("filluser",n);else v.app.reload({href:i.successHref||"filluser",nav:i.nav})},2e3)})})})},generate:function(){a.c.removeClass("begin"),c.mnemonicKey=bitcoin.bip39.generateMnemonic(),c.mnemonicMask=_.shuffle(indexArray(c.mnemonicKey.length)),c.mnemonicContent=c.mnemonicKey.split(" ");var e=v.app.user.keysFromMnemo(c.mnemonicKey);c.mainAddress=app.platform.sdk.address.pnet(e.publicKey).address,p.key()},repeat:function(){c.last=!1,p.confirm(function(){p.tips(function(){setTimeout(function(){a.c.removeClass("last"),setTimeout(function(){r.generate()},300)},300)})})},continue:function(){var e=a.c.find(".mnemonicKey");a.c.find(".keyStep").removeClass("showedPanel"),p.mnemonicEffect(e,!0,function(){c.last=!0,p.key(function(){setTimeout(function(){p.tips(),a.c.addClass("last"),setTimeout(function(){p.confirm()},300)},300)})})},removeDisabled:function(e){e.find(".continue").removeClass("disabled"),e.find(".preloader").remove(),e.find(".save").addClass("black"),e.find(".copy").addClass("black")}},f=function(){r.registration()},u=function(){r.generate()},d=function(){$(this).hasClass("disabled")||r.continue()},m=function(){r.repeat()},p={step:function(e,n){v.shell({name:e,el:a.c.find("."+e+"Step"),data:c,animation:{id:"slide"}},function(e){n&&n(e)})},success:function(n){p.step("success",function(e){n&&n()})},tips:function(n){p.step("tips",function(e){e.el.find(".generate").on("click",u),n&&n()})},confirm:function(e){s.value="",c.keyInput=s,p.step("confirm",function(n){n.el.find(".repeat").on("click",m),n.el.find(".registrationButton").on("click",f),e?e():(ParametersLive([s],n.el),_scrollTo(n.el,l),initUpload({el:n.el.find(".uploadFile"),ext:["txt","png"],dropZone:a.c.find(".confirm"),action:function(e,n){if("png"==e.ext)grayscaleImage(e.base64,function(e){qrscanner.q.callback=function(e){"error decoding QR Code"==e?a.c.find(".note").html(v.app.localization.e("filedamaged")):(s.value=trim(e),s.el.val(s.value),r.registration())},qrscanner.q.decode(e)});else{var i=e.base64.split(",")[1],t=b64_to_utf8(i).split("/");t[1]?(s.value=trim(t[1]),s.el.val(s.value),r.registration()):a.c.find(".note").html(v.app.localization.e("filedamaged"))}}}),setTimeout(function(){n.el.find("input").bind("paste",function(e){n.el.find(".note").html(v.app.localization.e("removepaste")),e.preventDefault()}),n.el.find("input").on("focus",function(){n.el.find(".inputTable").addClass("typeactive")}),n.el.find("input").on("blur",function(){n.el.find(".inputTable").removeClass("typeactive")}),isMobile()||n.el.find(".autosearchInputCnt input").focus()},600))})},qrcode:function(e,n){console.log(n);new QRCode(e[0],{text:n,width:256,height:256})},key:function(o){p.step("key",function(n){var e=n.el.find(".mnemonicKey"),i=a.c.find(".keyStep");i.removeClass("showedPanel");var t=n.el.find(".hiddenMnemonicKey").html();t&&p.qrcode(n.el.find(".qrcode"),trim(t)),p.mnemonicEffect(e,!1,function(){i.addClass("showedPanel")}),n.el.find(".continue").on("click",d),setTimeout(function(){r.removeDisabled(n.el)},1e4),v.app.platform.clbks._focus.registration=function(){r.removeDisabled(n.el)},n.el.find(".copy").on("click",function(){copyText(n.el.find(".hiddenMnemonicKey")),sitemessage(v.app.localization.e("successfullycopied")),r.removeDisabled(n.el)}),n.el.find(".save").on("click",function(){var e=n.el.find(".qrcode img").attr("src");saveAs({file:e,format:"png",name:"pocketnetkey"})}),o?o():_scrollTo(n.el,l)})},mnemonicEffect:function(i,e,n){var t=indexArray(101);e&&t.reverse();var o=i.height();i.css("min-height",o+"px"),lazyEach({array:t,sync:!0,action:function(e){var n=e.item;i.html(p.mnemonic(n)),o=i.height(),i.css("min-height",o+"px"),setTimeout(e.success,rand(1,5))},all:{success:function(){i.css("min-height","0px"),n&&n()}}})},mnemonic:function(e){var t="",o=(c.mnemonicMask.length*e/100).toFixed(0);return _.each(c.mnemonicKey,function(e,n){var i=_.indexOf(c.mnemonicMask,n);t+=i<o||" "==e?e:v.app.platform.values.alph[rand(0,v.app.platform.values.alph.length-1)]}),t}};return{primary:o,getdata:function(e,n){if(n.state&&o)v.nav.api.load({open:!0,id:"index",history:!0});else{c={last:!1,end:!1};e({})}},destroy:function(){delete v.app.platform.clbks._focus.registration,a={}},init:function(e){var n;(a={}).c=e.el.find("#"+v.map.id),a.registrationButton=a.c.find(".registrationButton"),a.toAuthorization=a.c.find(".toAuthorization"),a.login=a.c.find(".loginValue"),a.ler=a.c.find(".ler"),a.key=a.c.find(".key"),i=e.essenseData||{},t=e,(l=a.c.closest(".wndcontent")).length||(l=null),p.tips(),n=e,a.toAuthorization.on("click",function(){v.nav.api.loadSameThis("authorization",n)}),e.clbk(null,e)},wnd:{class:"withoutButtons allscreen"}}};return v.run=function(e){var n=v.addEssense(i,t,e);v.init(n,e)},v.stop=function(){_.each(i,function(e){e.destroy()})},v}();"undefined"!=typeof module?module.exports=registration:(app.modules.registration={},app.modules.registration.module=registration);
 /*_____*/ 
var anothersite=function(){var i=new nModule,t={},o=function(n){var e=deep(n,"history"),t=function(){};return{primary:e,getdata:function(n,e){n({link:e.settings.essenseData.link})},destroy:function(){({})},init:function(n){t(),{}.c=n.el.find("#"+i.map.id),n.clbk(null,n)},wnd:{header:"Another site",class:"transparent small anothersite"}}};return i.run=function(n){var e=i.addEssense(t,o,n);i.init(e,n)},i.stop=function(){_.each(t,function(n){n.destroy()})},i}();"undefined"!=typeof module?module.exports=anothersite:(app.modules.anothersite={},app.modules.anothersite.module=anothersite);
 /*_____*/ 
var token=function(){var a=new nModule,n={},o=function(e){var t=deep(e,"history"),o=function(){var e=parameters().token||null;return{type:parameters().type||null,token:e}};return{primary:t,getdata:function(t){var n=o();if("activate"!=n.type)a.app.platform.ws.addBlock();else{var e=a.app.platform.ws.messages.CUSTOMER.ACTIVE;delete e.clbks.successDialog,e.clbks.success=function(){var e=deep(a,"app.modules.menu.module");e&&e.restart()}}a.app.platform.sdk.tokens.check(n.token,function(e){n.result=e,t(n)})},destroy:function(){a.app.platform.ws.removeBlock(),{}},init:function(e){o(),{}.c=e.el.find("#"+a.map.id),e.clbk(null,e)}}};return a.run=function(e){var t=a.addEssense(n,o,e);a.init(t,e)},a.stop=function(){_.each(n,function(e){e.destroy()})},a}();"undefined"!=typeof module?module.exports=token:(app.modules.token={},app.modules.token.module=token);
 /*_____*/ 
var filluser=function(){var m=new nModule,t={},i=function(e){var a,o,i,n,t=deep(e,"history"),s=null,l={money:{id:"money",prev:function(n){m.app.platform.sdk.ustate.me(function(e){e?m.sdk.users.requestFreeMoney(function(e){e?(m.app.platform.sdk.node.transactions.clbks.filluser=function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){0<e&&0==r&&f.next()})},n()):m.app.platform.sdk.node.transactions.get.allBalance(function(e){0<e?f.next():f.to(4)})}):f.to(3)})},ret:!1,render:"money",after:function(n,t,e){f.timer(n.find(".time"),e||59,function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){0!=r&&4!=r||(1<e?f.to(1):(n.find(".subcaption").html(m.app.localization.e("wesentmoneydelay")),l.money.after(n,t,30)))},!0)})}},settings:{id:"settings",prev:function(n){m.app.platform.sdk.ustate.me(function(e){e?n():f.to(3)})},render:"settings",after:function(e,n){},next:!0},welcome:{id:"welcome",prev:function(e){e()},render:"welcome",after:function(e){e.find(".welcome").on("click",function(){if("_this"==deep(i,"successHref")){var e=deep(n,"container.close");e&&e(),i.signInClbk&&i.signInClbk()}else m.nav.api.go({href:"index",history:!0,open:!0})})}},network:{id:"network",prev:function(e){e()},render:"network",after:function(e){console.log("AFTER"),n&&clearInterval(n);var n=setInterval(function(){m.app.platform.sdk.ustate.me(function(e){e&&(clearInterval(n),f.to(0))})},2e3)}}};l.moneym={id:"moneym",prev:function(e){m.app.platform.sdk.node.transactions.clbks.filluserm=function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){0<e&&4==r&&f.to(1)})},e()},ret:l.money.ret,render:"moneym",after:l.money.after};var r=-1,c=["money","settings","welcome","network","moneym"],f={to:function(e,n){r=e,f.makeStep(n)},next:function(e){r++,f.makeStep(e)},makeStep:function(e){var t=l[c[r]];t&&t.prev(function(){a.c.attr("step",t.id),d.panel(t,function(n){d.step(t,function(e){_scrollTo(e,s),n.find(".elpanel").addClass("active"),t.after(e,n)})})})},timer:function(i,o,e){var a=new CircularProgress({radius:120,strokeStyle:"#ff1975",lineCap:"round",lineWidth:1,font:"100 56px 'Segoe UI',SegoeUI,'Helvetica Neue',Helvetica,Arial,sans-serif",fillStyle:"#5D5D5D",text:{value:""},initial:{strokeStyle:"#fff",lineWidth:1}});i.find(".circle").html(a.el);var n=function(e){var n=secInTime(e/1e3).split(":");i.find(".t .min").html(n[0]),i.find(".t .sec").html(n[1]),a.options.text={value:""};var t=100*(1-e/(1e3*o));t<0&&(t=0),a.update(t)};timer=new Timer({ontick:function(){n(timer.getDuration())},onend:function(){e&&e()}}),timer.start(o),n(timer.getDuration())}},p=function(){if(!(r<0)){var e=l[c[r]],n=a.c.find('.step[step="'+e.id+'"] .stepBody').closest(".step"),t=a.c.find(".stepsWrapperLine"),i=n.closest(".stepsWrapper").width();a.c.find(".step").width(i),t.css("margin-left","-"+r*i+"px"),t.width(i*c.length)}},d={step:function(e,t){a.c.find(".step").removeClass("active");var n=a.c.find('.step[step="'+e.id+'"] .stepBody'),i=n.closest(".step"),o=a.c.find(".stepsWrapperLine");d[e.render](n,function(e){var n=i.closest(".stepsWrapper").width();a.c.find(".step").width(n),o.css("margin-left","-"+r*n+"px"),o.width(n*c.length),i.closest(".step").addClass("active"),t&&t(e)})},panel:function(e,n){m.shell({name:"panel",el:a.panel,data:{step:e}},function(e){n&&n(e.el)})},welcome:function(e,n){m.shell({name:"welcome",el:e,data:{}},function(e){n&&n(e.el)})},network:function(e,n){m.shell({name:"network",el:e,data:{}},function(e){n&&n(e.el)})},money:function(e,n){m.shell({name:"money",el:e,data:{}},function(e){n&&n(e.el)})},moneym:function(e,n){m.shell({name:"moneym",el:e,data:{}},function(e){n&&n(e.el)})},settings:function(t,i,e){m.nav.api.load({open:!0,id:"test",el:t,essenseData:{wizard:!0,panel:a.panel,success:function(){f.next()}},clbk:function(e,n){o=n,i&&i(t)}})}},u=function(){};return{primary:t,getdata:function(e,n){i=n.settings.essenseData||{},r=-1;var t={steps:l};m.app.user.validate()?m.app.nav.api.load({open:!0,href:"index"}):e(t)},destroy:function(){window.removeEventListener("resize",p),o&&o.destroy(),o=null,a={}},init:function(e){u(),(a={}).c=e.el.find("#"+m.map.id),a.panel=a.c.find(".panelWrapper"),window.addEventListener("resize",p),n=e,f.next(),(s=a.c.closest(".wndcontent")).length||(s=null),e.clbk(null,e)}}};return m.run=function(e){var n=m.addEssense(t,i,e);m.init(n,e)},m.stop=function(){_.each(t,function(e){e.destroy()})},m}();"undefined"!=typeof module?module.exports=filluser:(app.modules.filluser={},app.modules.filluser.module=filluser);
 /*_____*/ 
var usersettings=function(){var u=new nModule,t={},o=function(n){var e,t,o=deep(n,"history"),s=function(){u.shell({name:"options",el:e.options,data:{composed:t.c}},function(n){ParametersLive(t.o,n.el)})},i=function(){};return{primary:o,getdata:function(n){t=u.app.platform.sdk.usersettings.compose();n({})},destroy:function(){e={}},init:function(n){i(),(e={}).c=n.el.find("#"+u.map.id),e.options=e.c.find(".options"),s(),n.clbk(null,n)}}};return u.run=function(n){var e=u.addEssense(t,o,n);u.init(e,n)},u.stop=function(){_.each(t,function(n){n.destroy()})},u}();"undefined"!=typeof module?module.exports=usersettings:(app.modules.usersettings={},app.modules.usersettings.module=usersettings);
 /*_____*/ 
var test = (function(){

	var self = new nModule();

	var mdl = self;

	var essenses = {};

	var Essense = function(p){

		var primary = deep(p, 'history');

		var el, lastTransaction, ed; 

		var tempInfo = {
			language : self.app.localization.key || 'en'
		}

		var changedLoc = false;

		var actions = {		

			valid : function(v1, v2){
				if(!actions.equal(v1, v2)){

					if(v1.name && v1.image) return true

				}
			},

			equal : function(v1, v2){

				var a = function(o){
					return 'name:' + (o.name || "") + 'image:' + (o.image || "") + 'about:' + (o.about || "") + 'site:' + (o.site || "")  + 'language:' + (o.language || "") + "addresses:" + JSON.stringify(o.addresses || [])
				}

				return a(v1) == a(v2)
			},
			cancel : function(){
				actions.userOptions()

				actions.upanel();

				renders.icon();

				renders.options();
			},
			save : function(clbk){

				if(actions.equal(tempInfo, self.app.platform.sdk.user.storage.me)){
					sitemessage(self.app.localization.e('uchanges'))

					return
				}

				if(!actions.valid(tempInfo, self.app.platform.sdk.user.storage.me)){
					sitemessage(self.app.localization.e('uchangesvalid'))

					return
				}

				var userInfo = new UserInfo();

					userInfo.name.set(tempInfo.name);
					userInfo.language.set(tempInfo.language);
					userInfo.about.set(tempInfo.about);
					userInfo.site.set(tempInfo.site);
					userInfo.image.set(tempInfo.image);
					userInfo.addresses.set(tempInfo.addresses);

				topPreloader(40)

				el.c.find('.userPanel').addClass('loading')

				userInfo.uploadImage(function(){


					self.sdk.node.transactions.create.commonFromUnspent(

						userInfo,

						function(tx, error){

							el.c.find('.userPanel').removeClass('loading')

							topPreloader(100)

							if(!tx){

								self.app.platform.errorHandler(error, true)	
							}
							else
							{

								self.app.platform.sdk.user.storage.me = tx
								
								tempInfo = _.clone(self.app.platform.sdk.user.storage.me)
								
								actions.upanel()

								self.app.reloadModules(function(){


									if (primary){

										self.nav.api.go({
											href : 'index',
											history : true,
											open : true
										})	

									}
									else
									{

										if (ed.success){
											ed.success()
										}
										else
										{
											if (clbk)
												clbk()
										}

										

									}

									

								})

								
							}

						},

						/*{
							pseudo : true
						}*/
					
					)
				})
				
		
			},
			upload	: function(file, clbk){

				topPreloader(20);

				var images = [{
					original : file.base64,
					index : 0
				}]

				self.nav.api.load({
					open : true,
					id : 'imageGalleryEdit',
					inWnd : true,

					essenseData : {
						edit : true,
						initialValue : 0,
						images : images,

						apply : true,

						crop : {
							aspectRatio : 1 / 1,
							style : 'round apply',
							autoCropArea : 0.9,
						},

						success : function(i, editclbk){

							images[0].original

							resize(images[0].original, 100, 100, function(resized){
								var r = resized.split(',');

								editclbk();

								if (r[1]){

									tempInfo.image = resized;

									renders.icon()

									actions.upanel()

									

								}
								else
								{
									topPreloader(100);
								}
							})

						}
					}
				})


				
			},
			upanel : function(){

				if(_.toArray((self.app.platform.sdk.node.transactions.temp.userInfo || {})).length > 0){

					el.upanel.addClass('wait')

				}
				else{
					el.upanel.removeClass('wait')

					if(actions.equal(tempInfo, self.app.platform.sdk.user.storage.me) || !actions.valid(tempInfo, self.app.platform.sdk.user.storage.me)){
						
						el.upanel.removeClass('changes')
					}
					else
					{
						el.upanel.addClass('changes')
					}
				}

				
				
			},

			clear : function(){
				actions.userOptions();
				renders.caption();
			},

			userOptions : function(){
				tempInfo = _.clone(self.app.platform.sdk.user.storage.me)

				_.each(userOptions, function(parameter, id){
					var value = self.app.platform.sdk.user.storage.me[parameter.id];
					
					parameter.value = value || parameter.defaultValue || ''
				

					parameter._onChange = function(value){
						tempInfo[parameter.id] = value;

						actions.upanel()

						if (id == 'language'){
							var a = self.app.localization.available[value];

							if (a && a.key != self.app.localization.key)
							{
								self.app.localization.lightSet(a.key);
							}
						}
					}
				})
			},

			signout : function(){
				self.app.user.signout();

				self.app.reload({
					href : 'authorization'
				});
			}
		}

		var userOptions = {
			name : new Parameter({
				name : self.app.localization.e('uname'),
				id : 'name',
				type : "STRING",
				onType : true
			}),

			language : new Parameter({
				name : self.app.localization.e('ulanguage'),
				id : 'language',
				type : "VALUES",
				defaultValue : self.app.localization.key || 'en',
				possibleValues : ['en', 'ru'],
				possibleValuesLabels : ['English', 'Русский'],
			}),

			about : new Parameter({
				name : self.app.localization.e('uabout'),
				id : 'about',
				type : "TEXT",
				onType : true
			}),

			site : new Parameter({
				name : self.app.localization.e('uwebsite'),
				id : 'site',
				type : "STRING",
				onType : true,
				value : ''
			}),

			addresses : new function(){

				var _self = this;

				_self.id = 'addresses';
				_self.name = self.app.localization.e('uaddresesd')
				_self.value = [];

				_self.defaultValue = [];

				_self.remove = function(currency, address){
					removeEqual(_self.value, {
						currency : currency,
						address : address
					})

					if (_self._onChange)
						_self._onChange(_self.value)

					_self.addedAddresses();
				}

				_self.add = function(v){


					_self.value.push(v)

					if (_self._onChange)
						_self._onChange(_self.value)

					_self.addedAddresses();

				}

				_self.addDialog = function(){

					var validate = function(cur, address){

						if(address.length > 0){
							return true
						}
						else
						{
							return false
						}

						
					}

					mdl.fastTemplate('addaddress', function(rendered){

						dialog({
							html : rendered,

							wrap : true,

							success : function(d){

								var currency = d.el.find('.currency').val();
								var address = d.el.find('.address').val();

								if(validate(currency, address)){


									_self.add({
										currency : currency,
										address : address
									})

									return true;

								}
							},

							clbk : function(_el){

								var currency = _el.find('.currency');
								var address = _el.find('.address');
								var b = _el.find('.btn1');


								var vl = function(){
									var c = currency.val();
									var a = address.val();

									if(validate(c, a)){
										b.removeClass('disabled')

										return true;
									}
									else
									{
										b.addClass('disabled')
										return false;
									}
								}

								address.focus()
								address.on('change', vl)
								address.on('keyup', vl)

								currency.on('change', vl)
								currency.on('keyup', vl)

								vl()
							},

							class : "one addaddressDialog"
						})

					}, {
					})
				}

				_self.removeEvent = function(){
					var currency = $(this).closest('.addedAddress').attr('currency')
					var address = $(this).closest('.addedAddress').attr('address')

					_self.remove(currency, address)
				}

				_self.addedAddresses = function(){

					/* 1F1tAaz5x1HUXrCNLbtMDqcw6o5GNn4xqX */

					var h = '';

					_.each(_self.value, function(v){
					
						if(!v || !v.currency) return

						h += '<div class="addedAddressWrapper">'
							h += '<div class="addedAddress table" currency="'+v.currency+'" address="'+v.address+'">'

							h += 	'<div class="currencyWrapper">'	
							h += 		v.currency.toUpperCase()
							h += 	'</div>'

							h += 	'<div class="addressWrapper">'	
							h += 		v.address
							h += 	'</div>'

							h += 	'<div class="panelWrapper">'	
							h += 		'<div class="item remove">'	
							h += 			'<i class="far fa-times-circle"></i>'	
							h += 		'</div>'
							h += 	'</div>'

							h += '</div>'
						h += '</div>'
					})
					
					_self.el.find('.addedAddressesWrapper').html(h)

					_self.el.find('.addedAddressesWrapper .remove').on('click', _self.removeEvent)
				}



				_self.init = function(_el){

					_self.defaultValue = [];

					_self.el = _el.find('.adressesInput')

					_self.addedAddresses();

					_self.el.find('.addaddress').on('click', _self.addDialog)
				}	

				_self.input = function(){
					var h = ''

					h += '<div class="adressesInput">'
					h += 	'<div class="addaddressWrapper">'
					h += 		'<div class="addaddress">'
					h += 			'<i class="fas fa-plus"></i>'
					h += 		'</div>'
					h += 	'</div>'
					h += 	'<div class="addedAddressesWrapper">'
					h += 	'</div>'
					h += '</div>'

					return h;
				}

				return _self
			}

			/*birthday : new Parameter({
				name : "Date of Birthday",
				id : 'birthday',
				type : "DATE"
			}), */

			
		}

		var privateInformation = {
			/*sex : new Parameter({
				name : "Sex",
				id : 'sex',
				type : "VALUES",
				defaultValue : 'notspecified',
				possibleValues : ['men', 'woman', 'notspecified'],
				possibleValuesLabels : ['Not Specified', 'Man', 'Woman'],
			})*/
		}

		var events = {
			signout : function(){
				actions.signout()
			},
			save : function(){
				actions.save()
			},
			cancel : function(){
				actions.cancel()
			},
			importAddress : function(){

				var address = self.app.platform.sdk.address.pnet()
				
				topPreloader(30);

				self.app.platform.sdk.node.account.import(address.address, function(){

					topPreloader(100);

					sitemessage("Address " + address.address + " was successfully imported")

				})
			}
		}

		var setNode = null;
		var setAddressType = null;

		var renders = {
			options : function(clbk){

				self.shell({

					name :  'options',
					el :   el.options,
					data : {
						tempInfo : tempInfo,
						userOptions : userOptions
					},

				}, function(_p){

					ParametersLive(_.toArray(userOptions), _p.el)

					userOptions.addresses.init(_p.el)

					if (clbk)
						clbk();

				})
			},
			icon : function(clbk){
				self.shell({

					name :  'icon',
					el :   el.icon,
					data : {
						tempInfo : tempInfo
					},

				}, function(_p){

					initUpload({
						el : _p.el.find('.uploadPhoto'),
			
						ext : ['png', 'jpeg', 'jpg'],

						dropZone : el.c,

						multiple : false,

						action : function(file, clbk){

							actions.upload(file, function(){								

								if (clbk)
									clbk();

							})
							
						}
					})

					if (clbk)
						clbk();

				})
			},
			unspent : function(unspent, unspentOld, clbk){
				self.shell({

					name :  'unspent',
					el :   el.unspent,
					data : {
						unspent : unspent,
						unspentOld : unspentOld
					},

				}, function(_p){

					if (clbk)
						clbk();

				})
			},

			caption : function(unspent, clbk){

				return

				self.shell({

					name :  'caption',
					el :   el.caption,
					data : {
						p2pkh : self.app.platform.sdk.address.pnet(),
						tempInfo : tempInfo
					},

				}, function(_p){					

					if (clbk)
						clbk();

				})
			},

			address : function(){
				el.c.find('.adr').html(bitcoin.payments[self.app.platform.addressType]({ pubkey: self.app.user.key.value}))
			}
			
		}

		var state = {
			save : function(){

			},
			load : function(){
				
			}
		}

		var initEvents = function(){
			el.import.on('click', events.importAddress)
			el.showhidetestpanel.on('click', function(){
				$(this).closest('.testPanel').toggleClass('active')
			})

			el.upanel.find('.cancel').on('click', events.cancel)
			el.upanel.find('.save').on('click', events.save)

			ParametersLive([setNode, setAddressType], el.c)			

			el.signout.on('click', events.signout)

			
		}

		var make = function(){

			renders.caption()

			renders.icon();

			renders.options();

			self.sdk.node.transactions.get.unspent(function(unspent){
				self.sdk.node.transactions.get._unspent(function(unspentOld){
					renders.unspent(unspent, unspentOld)
				})
			})
		}

		var prepare = function(){

			var pv = _.map(self.app.platform.nodes, function(n, i){
				return i.toString()
			})

			var pvl = _.map(self.app.platform.nodes, function(n, i){
				return n.full
			})

			setNode = new Parameter({
				type : "VALUES",
				name : "setNode",
				id : 'setNode',
				possibleValues : pv,
				possibleValuesLabels : pvl,
				defaultValue : "1",
			}),

			setNode.value = self.app.platform.nodeid

			setNode._onChange = function(value){
				self.app.platform.nodeid = value;

				self.app.platform.state.save()
			}

			setAddressType = new Parameter({
				type : "VALUES",
				name : "setAddressType",
				id : 'setAddressType',
				possibleValues : self.app.platform.addressTypes,
				possibleValuesLabels : ['P2PKH', 'P2SH'/*, 'P2WPKH'*/],

				defaultValue : "p2sh"
			}),

			setAddressType.value = self.app.platform.addressType
			

			setAddressType._onChange = function(value){

				self.app.platform.addressType = value;

				self.app.platform.state.save()

				self.user.address.set(self.app.platform.sdk.address.pnet().address)

				self.app.reload();

			}

			actions.userOptions()

		}

		var freeMoney = function(){			

			self.app.platform.sdk.users.checkFreeMoney(self.app.platform.sdk.address.pnet().address, function(res){
				
			})
		}

		
		return {
			primary : primary,

			getdata : function(clbk, p){

				changedLoc = true;

				ed = p.settings.essenseData;

				self.app.platform.sdk.user.get(function(){

					prepare();

					var data = {};

						data.p2pkh = self.app.platform.sdk.address.pnet()

						data.setNode = setNode;
						data.setAddressType = setAddressType;
						data.userOptions = userOptions;
						data.tempInfo = tempInfo

					clbk(data);

				})

			},

			destroy : function(){
				el = {};

				if(self.app.platform.sdk.user.storage.me && !actions.equal(tempInfo, self.app.platform.sdk.user.storage.me)){
					
					return function(clbk){


						/*var locF = function(){

							if(changedLoc){
								self.app.reloadModules(clbk)
							}
							else
							{
								clbk()
							}

						}*/

						dialog({
							html : self.app.localization.e('usavechanges'),
							btn1text : self.app.localization.e('dyes'),
							btn2text : self.app.localization.e('dno'),
							success : function(){
								actions.save(clbk)
							},

							fail : function(){

								tempInfo = _.clone(self.app.platform.sdk.user.storage.me)
								
								clbk()
							}
						})

					}

				}

				return null;
			},
			
			init : function(p){

			
				state.load();

				el = {};
				el.c = p.el.find('#' + self.map.id);
				el.transaction = p.el.find('.transactionInfo');
				el.unspent = p.el.find('.unspentlist');
				el.showhidetestpanel = p.el.find('.showhidetestpanel')
				el.import = p.el.find('.import');
				el.caption = el.c.find('.bgCaption');
				el.icon = el.c.find('.iconParameters');

				el.usericon = el.c.find('.usericon');
				el.options = el.c.find('.optionsParameters');
				el.upanel = ed.panel || el.c.find('.upanel');

				el.signout = el.c.find('.signout')

				initEvents();

				actions.upanel();

				make();

				p.clbk(null, p);
			}
		}
	};



	self.run = function(p){

		var essense = self.addEssense(essenses, Essense, p);

		self.init(essense, p);

	};

	self.stop = function(){

		var s = null

		_.each(essenses, function(essense){

			var d = essense.destroy();

			if (d){
				s = d;
			}

		})

		if(!s) return;

		return {
			action : s
		};

	}

	return self;
})();


if(typeof module != "undefined")
{
	module.exports = test;
}
else{

	app.modules.test = {};
	app.modules.test.module = test;

}
 /*_____*/ 
var accounts=function(){var u=new nModule,n={},e=function(a){var e,d,o,s=deep(a,"history"),n=function(o){u.app.platform.sdk.pool.expand(d,function(a){var s=_.indexOf(a.addresses,o);if(-1<s){var n=a.private[s],e=u.app.user.stay;u.app.user.signout(),u.app.user.stay=e,u.user.signin(n,function(a){u.app.reloadLight(function(){var a="userpage?id=accounts&s="+makeid();u.app.user.validate()||(a="filluser"),u.app.nav.api.load({open:!0,href:a})})})}})},p=function(a){u.app.platform.sdk.pool.remove(d,a),u.app.platform.sdk.pool.save(),c.addresses()},t=function(){u.app.nav.api.load({open:!0,id:"addaccount",inWnd:!0,essenseData:{success:function(s){u.app.platform.sdk.pool.expand(d,function(a){u.app.platform.sdk.pool.add(a,s,function(a,s){s?dialog({html:u.app.localization.e("aused"),class:"one"}):u.app.platform.sdk.pool.export(a,function(a){u.app.platform.sdk.pool.current.packs[o]=a,u.app.platform.sdk.pool.save(),d=a,c.addresses()})})})}}})},r=function(){var a=$(this).closest(".addressTable").attr("address");p(a)},i=function(){var a=$(this).closest(".addressTable").attr("address");n(a)},c={addresses:function(s){u.shell({name:"addresses",el:e.addresses,data:{current:u.app.platform.sdk.address.pnet().address,pack:d},animation:"fadeIn"},function(a){a.el.find(".remove").on("click",r),a.el.find(".ncurrent .label").on("click",i),s&&s()})}},l=function(){};return{primary:s,getdata:function(a){o=d=null;a({})},destroy:function(){e={}},init:function(a){var s,n;l(),(e={}).c=a.el.find("#"+u.map.id),e.addresses=e.c.find(".addresses"),e.c.find(".add").on("click",t),s=u.app.platform.sdk.address.pnet().address,(n=u.app.platform.sdk.pool.getPack(s))?(d=n[0],o=n[1],u.app.platform.sdk.pool.info(d,function(){c.addresses()})):sitemessage("ERROR"),a.clbk(null,a)}}};return u.run=function(a){var s=u.addEssense(n,e,a);u.init(s,a)},u.stop=function(){_.each(n,function(a){a.destroy()})},u}();"undefined"!=typeof module?module.exports=accounts:(app.modules.accounts={},app.modules.accounts.module=accounts);
 /*_____*/ 
var articles=function(){var f=new nModule,n={},e=function(t){var a,n=deep(t,"history"),e=function(){f.nav.api.load({open:!0,id:"article",inWnd:!0,essenseData:{save:function(a){_.find(f.app.platform.sdk.articles.storage,function(t){if(a.id==t.id)return!0})||f.app.platform.sdk.articles.storage.unshift(a),f.app.platform.sdk.articles.save()},close:function(){l.articles()},complete:function(){f.closeContainer()},closeContainer:function(){f.closeContainer()}}})},i=function(t){f.nav.api.load({open:!0,id:"article",inWnd:!0,essenseData:{art:t,save:function(t){f.app.platform.sdk.articles.save()},close:function(){l.articles()},complete:function(){f.closeContainer()},closeContainer:function(){f.closeContainer()}}})},o=function(t){removeEqual(f.app.platform.sdk.articles.storage,{id:t}),a.c.find('.art[art="'+t+'"]').remove(),f.app.platform.sdk.articles.save(),l.ini()},c=function(){var t=$(this).closest(".art").attr("art");dialog({html:"Do You really want to remove this article?",btn1text:f.app.localization.e("dyes"),btn2text:f.app.localization.e("dno"),class:"zindex",success:function(){o(t)}})},r=function(){e()},s=function(){var a=$(this).closest(".art").attr("art"),t=_.find(f.app.platform.sdk.articles.storage,function(t){return t.id==a});i(t)},l={ini:function(){f.app.platform.sdk.articles.storage.length?a.c.removeClass("initial"):a.c.addClass("initial")},articles:function(){l.ini(),f.shell({name:"articles",el:a.articles.find(".artwrapper"),data:{articles:f.app.platform.sdk.articles.storage}},function(t){t.el.find(".artcnt").on("click",s),t.el.find(".remove").on("click",c)})}},d=function(){};return{primary:n,getdata:function(t){t({})},destroy:function(){a={}},init:function(t){d(),(a={}).c=t.el.find("#"+f.map.id),a.articles=a.c.find(".articles"),a.add=a.c.find(".add"),a.add.on("click",r),l.articles(),t.clbk(null,t)},wnd:{class:"allscreen a100 article "}}};return f.run=function(t){var a=f.addEssense(n,e,t);f.init(a,t)},f.stop=function(){_.each(n,function(t){t.destroy()})},f}();"undefined"!=typeof module?module.exports=articles:(app.modules.articles={},app.modules.articles.module=articles);
 /*_____*/ 
var article=function(){var u=new nModule,t={},n=function(a){var i,o,t,n,e,s=deep(a,"history"),c=/[,.!?;:() \n\r]/g,l={message:u.app.localization.e("emptymessage")},r={newart:function(){return u.app.platform.sdk.articles.empty()},complete:function(){t.save&&t.save(o),d.close(),t.complete&&t.complete(o)},change:function(e){o.content=e,o.time=Math.floor((new Date).getTime()/1e3),t.save&&t.save(o)},changecaption:function(e){o.caption.value=e,o.time=Math.floor((new Date).getTime()/1e3),t.save&&t.save(o)},trx:function(e){i.c.addClass("loading"),u.sdk.node.transactions.create.commonFromUnspent(e,function(e,a){if(topPreloader(100),i.c.removeClass("loading"),e)try{var t=new pShare;t._import(e,!0),t.temp=!0,t.address=e.address,u.app.platform.sdk.node.shares.add(t),o.txid=t.txid,o.ptime=Math.floor((new Date).getTime()/1e3),r.complete()}catch(e){console.log(e)}else if(clbk)clbk(!1,l[a]);else{var n=u.app.platform.errorHandler(a,!0);n&&sitemessage(n)}},a)},add:function(){var e=new Share,a=u.app.platform.sdk.articles.echo(o);e.message.set(a),e.caption.set(o.caption.value),e.images.set(o.images),e.tags.set(r.tagsFromText(a)),e.settings.v="a";var t=e.validation();t?l[t]&&sitemessage(l[t]):dialog({html:"Do you really want to publish this article?",btn1text:u.app.localization.e("dyes"),btn2text:u.app.localization.e("dno"),class:"zindex",success:function(){r.trx(e)}})},tagsFromText:function(e){var a=e.split(c),t=_.filter(a,function(e){if("#"==e[0])return!!(e=e.replace(/#/g,""))});return _.each(t,function(e){e=e.replace(/\#/g,"")}),t}},d={changecaption:function(){var e=$(this).html();r.changecaption(e)},change:function(){e=slowMade(function(){r.change(n.serialize())},e,300)},close:function(){t.close&&t.close(),u.closeContainer()},add:function(){r.add()},goto:function(){o.txid&&(u.closeContainer(),t.closeContainer&&t.closeContainer(),u.nav.api.load({open:!0,href:"index?s="+o.txid,history:!0}))}},p=function(e,a){i.caption.html(e.caption.value)},f=function(){};return{primary:s,getdata:function(e,a){t=a.settings.essenseData||{},e({art:o=t.art||r.newart()})},destroy:function(){i={}},init:function(e){var a;f(),(i={}).c=e.el.find("#"+u.map.id),i.caption=i.c.find(".caption"),i.content=i.c.find(".content"),i.back=i.c.find(".back"),i.add=i.c.find(".add"),i.goto=i.c.find(".goto"),i.back.on("click",d.close),i.caption.on("keyup",d.changecaption),i.add.on("click",d.add),i.goto.on("click",d.goto),n=new MediumEditor(".edt",{delay:500,targetBlank:!0,toolbar:{buttons:["bold","italic","underline","anchor","quote"],diffLeft:25,diffTop:10},anchor:{placeholderText:"Type a link",customClassOption:"btn",customClassOptionText:"Create Button"},paste:{cleanPastedHTML:!0,cleanAttrs:["style","dir"],cleanTags:["label","meta"]},anchorPreview:{hideDelay:300},placeholder:{text:"Text",hideOnClick:!1}}),$(function(){$(".edt").mediumInsert({editor:n,addons:{images:{label:'<span class="fas fa-camera"></span>',fileDeleteOptions:{},preview:!0,captions:!0,captionPlaceholder:"Type caption for image (optional)",autoGrid:3,formData:{},upload:function(e,t){resize(e,1080,1080,function(e){var a=e.split(",");a[1]&&u.ajax.run({type:"POST",imgur:!0,data:{Action:"image",image:a[1]},success:function(e){var a=deep(e,"data.link");a&&o.images.push(a),console.log(o),t&&t(a)}})})},fileUploadOptions:{acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i},styles:{wide:{label:'<span class="fa fa-align-justify"></span>',added:function(e){},removed:function(e){}},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'},grid:{label:'<span class="fa fa-th"></span>'}},actions:{remove:{label:'<span class="fa fa-times"></span>',clicked:function(e){var a=$.Event("keydown");a.which=8,$(document).trigger(a)}}},messages:{acceptFileTypesError:"This file is not in a supported format: ",maxFileSizeError:"This file is too big: "},uploadCompleted:function(e,a){d.change()},uploadFailed:function(e,a){}},embeds:{label:'<span class="fab fa-youtube"></span>',placeholder:"Paste a YouTube, Vimeo link and press Enter",oembedProxy:"https://medium.iframe.ly/api/oembed?iframe=1",styles:{wide:{label:'<span class="fa fa-align-justify"></span>',added:function(e){},removed:function(e){}},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'}},actions:{remove:{label:'<span class="fa fa-times"></span>',clicked:function(e){var a=$.Event("keydown");a.which=8,$(document).trigger(a)}}}}}}),n.subscribe("editableKeyup",function(){d.change()}),n.subscribe("editablePaste",function(){d.change()}),n.subscribe("editableBlur",function(){d.change()}),p(o),a&&a()}),e.clbk(null,e)},wnd:{class:"allscreen a100 article articlebtn"}}};return u.run=function(e){var a=u.addEssense(t,n,e);u.init(a,e)},u.stop=function(){_.each(t,function(e){e.destroy()})},u}();"undefined"!=typeof module?module.exports=article:(app.modules.article={},app.modules.article.module=article);
 /*_____*/ 
var embeding20=function(){var f=new nModule,a={},i=function(e){var t,n=deep(e,"history"),i={},l="Max 6 Images Allowed",a=function(e,n){if(t.c){var a=t.c.find("."+e+"Part .partPreloader");n?a.fadeIn(200):a.fadeOut(200)}},u=function(e,n){var a={};5<i.images.value.length?sitemessage(l):(a.id=makeid(),a.src=e,i.images.value.push(a),c.images()),n&&n()},o=function(e,n){var a={};resize(e,1080,1080,function(e){if(e.split(",")[1]){5<i.images.value.length?sitemessage(l):(a.id=makeid(),a.base64=e,i.images.value.push(a),c.images())}n&&n()})},r=function(e){removeEqual(i.images.value,{id:e}),c.images()},s=function(){var e=$(this).closest(".imageContainer").attr("value");r(e)},c={url:function(n,a){var i=f.app.platform.parseUrl(n),l=f.app.platform.sdk.remote.storage[n];f.shell({name:"url",inner:html,el:t.url,data:{url:n,og:l,remove:!0},turi:"share"},function(e){if(n&&!l)if("youtube"==i.type||"vimeo"==i.type)Plyr.setup(".js-player");else f.app.platform.sdk.remote.get(i.url,function(e){e&&c.url(n)});a&&a()})},images:function(e,n){e||(e=i.images.value),e.length&&f.shell({name:"images",el:t.images,data:{images:e}},function(e){e.el.find(".remove").on("click",s),e.el.find(".image").each(function(){}),n&&n()})}},d=function(){};return{primary:n,getdata:function(e){(i={url:new Parameter({type:"URL",id:"url",placeholder:"Add link to external site",value:""}),images:{isValid:function(){return!0},value:[]}}).url._onChange=function(e){a("left",!0),checkUrlForImage(e)?u(e,function(){a("left",!1),i.url.value="",i.url.el.val("")}):c.url(e,function(){a("left",!1)})},i.images.value=[],i.url.value="",e({options:i})},destroy:function(){t={}},init:function(e){d(),(t={}).c=e.el.find("#"+f.map.id),t.upload=t.c.find(".upload"),t.images=t.c.find(".images"),t.error=t.c.find(".error"),t.url=t.c.find(".url"),ParametersLive([i.url],t.c),initUpload({el:t.upload,ext:["png","jpeg","jpg"],dropZone:t.c.closest(".wnd"),multiple:!0,action:function(e,n){o(e.base64,n)},onSuccess:function(){t.c.addClass("right"),t.c.removeClass("left")}}),e.clbk(null,e)},wnd:{header:"",buttons:{close:{class:"close",html:'<i class="fa fa-times"></i> Close',fn:function(e,n){}}},close:function(){},success:function(e,n){wndObj=n,wnd=e},noInnerScroll:!0,class:"embeding20"}}};return f.run=function(e){var n=f.addEssense(a,i,e);f.init(n,e)},f.stop=function(){_.each(a,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=embeding20:(app.modules.embeding20={},app.modules.embeding20.module=embeding20);
 /*_____*/ 
var embeding=function(){var g=new nModule,a={},i=function(e){var s,i,n,a=deep(e,"history"),t=null,o={url:new Parameter({type:"URL",id:"url",placeholder:"Add link to external site",onType:!0}),images:{isValid:function(){return!0},value:[]}},l={url:"Url doesn't valid",imagesLength:"Max 6 Images Allowed"},u={check:function(e){if(o[e].isValid(o[e].value))return s.error.html(""),!0;s.error.html(l[e])},removeImage:function(e){removeEqual(o.images.value,{id:e}),r.images(),s.error.html("")},add:{url:function(){u.check("url")&&(i.added(o.url.value),g.closeContainer())},images:function(){if(u.check("images")){var n=[];_.each(o.images.value,function(e){e.base64&&n.push(e.base64)}),i.added(n),g.closeContainer()}}},slowUploadGif:function(e,n){e.id=makeid(),e.slow=!0,e.base64=e.base64,o.images.value.push(e),n&&n()},slowUpload:function(n,a){resize(n.base64,1080,1080,function(e){e.split(",")[1]&&(n.id=makeid(),n.slow=!0,n.base64=e,o.images.value.push(n)),a&&a()})},upload:function(a,i){resize(a.base64,1080,1080,function(e){var n=e.split(",");if(n[1]){5<o.images.value.length?s.error.html(l.imagesLength):(s.error.html(""),a.id=makeid(),a.loading=!0,o.images.value.push(a),r.images(),g.ajax.run({type:"POST",imgur:!0,data:{Action:"image",image:n[1]},success:function(e){a.loading=!1,a.src=deep(e,"data.link"),r.images(),i&&i()}}))}})}},c=function(){var e=$(this).attr("action")||t;u.add[e]()},d=function(){var e=$(this).closest(".imageContainer").attr("value");u.removeImage(e)},r={images:function(e,n){e||(e=o.images.value),e.length&&g.shell({name:"images",el:s.images,data:{images:e}},function(e){e.el.find(".remove").on("click",d),e.el.find(".image").each(function(){$(this)}),n&&n()})}},m=function(){};return{primary:a,getdata:function(e,a){t=a.settings.essenseData.type,i=a.settings.essenseData.on,n=a.settings.essenseData,a.settings.essenseData.subtype||null,a.settings.essenseData.storage&&_.each(o,function(e,n){e.value=a.settings.essenseData.storage[n],"images"==n&&(e.value=[])}),e({type:t,options:o})},destroy:function(){s={}},init:function(e){m(),(s={}).c=e.el.find("#"+g.map.id),s.error=s.c.find(".error"),s.action=s.c.find(".action"),s.upload=s.c.find(".upload"),s.images=s.c.find(".imagesMi"),function(){if(s.c.find("input").focus().on("change",c),s.action.on("click",c),"images"==t){if(r.images(),n.value){var e={base64:n.value};u.slowUpload(e)}initUpload({el:s.upload,ext:["png","jpeg","jpg","gif"],dropZone:s.c.closest(".wnd"),multiple:!0,action:function(e,n){console.log(e),"gif"==e.ext?u.slowUploadGif(e,n):u.slowUpload(e,n)},onSuccess:function(){u.add.images()}})}else ParametersLive([o[t]],s.c)}(),e.clbk(null,e)},wnd:{header:"",buttons:{close:{class:"close",html:'<i class="fa fa-check"></i> Finish',fn:function(e,n){u.add[t]()}}},close:function(){},success:function(e,n){wndObj=n,wnd=e},offScroll:!0,noInnerScroll:!0,class:"embeding"}}};return g.run=function(e){var n=g.addEssense(a,i,e);g.init(n,e)},g.stop=function(){_.each(a,function(e){e.destroy()})},g}();"undefined"!=typeof module?module.exports=embeding:(app.modules.embeding={},app.modules.embeding.module=embeding);
 /*_____*/ 
var userpage=function(){var f=new nModule,t={},o=function(e){var i,n=deep(e,"history"),o=null,a=null,r=null,p=[],s={eachReport:function(r,e,n){e||(e=p);var i=function(e,o,a){o||(o=0),a||(a=""),_.each(e,function(e,n){var t=a;t&&(t+="_"),t+=e.id,e.reports?r.group(e,o,t,function(){i(e.reports,o+1,t)},n):r.report(e,o,t)})};i(e,0,n)},findReport:function(e){var a=function(e,n){var t=n.split("_");if(!t.length)return null;n=t[0];var o=_.find(e||[],function(e){return e.id==n});return o?(t.splice(0,1),(n=t.join("_"))&&o.reports?a(o.reports,n):o):null};return a(p,e)},mobileReports:function(){var a=[];return s.eachReport({group:function(e,n,t,o){e.mobile&&a.push(e),o()},report:function(e){e.mobile&&a.push(e)}}),a.push({name:f.app.localization.e("signout"),id:"signout"}),a},selector:function(){var e=s.mobileReports(),n=_.map(e,function(e){return e.id}),t=_.map(e,function(e){return e.text||e.name}),o=new Parameter({type:"VALUES",name:"Contents",id:"contents",possibleValues:n,possibleValuesLabels:t,defaultValue:n[0]});return o.value=parameters().id||"summary",o._onChange=function(e){if("signout"==e)c.signout();else{var n=s.findReport(e),t=parameters();t.report=n.report,t.id=n.id;var o="userpage"+collectParameters(t);f.nav.api.load({open:!0,href:o,history:!0})}},o}},c={closeGroup:function(e){var n=s.findReport(e);if(n){n.active=!n.active;var t=i.c.find('[levelid="'+e+'"]');n.active?t.addClass("active"):t.removeClass("active")}},openTree:function(r){s.eachReport({group:function(e,n,t,o){var a=i.c.find('[levelid="'+t+'"]');0==r.indexOf(t)?(e.active=!0,a.addClass("active"),o()):(e.active=!1,a.find(".openReport").removeClass("active"))},report:function(e,n,t){var o=i.c.find('[id="'+t+'"]');r==t?(e.active=!0,o.addClass("active")):(e.active=!1,o.removeClass("active"))}})},openReport:function(e,n){i.c.find(".openReport").removeClass("active"),i.c.find('[rid="'+e+'"]').addClass("active"),c.openTree(e),t.report(e),n&&f.nav.api.history.addParameters({id:e})},signout:function(){f.app.user.signout(),f.app.reload({href:"authorization"})}},l=function(){var e=$(this).closest("[levelid]").attr("levelid");c.closeGroup(e)},u=function(){var e=$(this).attr("rid");c.openReport(e,!0)},t={bgcaption:function(e){s.selector();i&&i.bgcaption&&f.shell({name:"bgcaption",el:i.bgcaption.find(".bgCaptionInner"),data:{}},function(e){})},contents:function(n){var t=s.selector();f.shell({name:"contents",el:i.contents,data:{reports:p,each:s.eachReport,selector:t}},function(e){e.el.find(".groupNamePanelWrapper").on("click",l),e.el.find(".openReport").on("click",u),ParametersLive([t],e.el),n&&n()})},report:function(e,t){o&&o.destroy();var n=s.findReport(e);f.shell({name:"report",el:i.report,data:{}},function(e){f.nav.api.load({open:!0,id:n.report,el:e.el.find(".reportCnt"),animation:!1,primary:!0,essenseData:{sub:n.sub},clbk:function(e,n){o=n,a&&a.apply(),t&&t()}})})}},d=function(){};f.authclbk=function(){t.bgcaption()};return{primary:n,getdata:function(n){(p=[]).push({name:f.app.localization.e("rstate"),id:"ustate",report:"ustate",mobile:!0,if:function(){if(r)return!0}}),p.push({name:f.app.localization.e("rwallet"),id:"wallet",report:"wallet",mobile:!0}),p.push({name:f.app.localization.e("rprofile"),id:"test",report:"test",mobile:!0}),p.push({name:f.app.localization.e("rsettings"),id:"usersettings",report:"usersettings",mobile:!0}),p.push({name:f.app.localization.e("raccounts"),id:"accounts",report:"accounts",mobile:!0});var t={};parameters();t.p2pkh=f.app.platform.sdk.address.pnet(),f.app.platform.sdk.ustate.me(function(e){r=e,n(t)})},destroy:function(){o&&o.destroy(),o=null,a&&a.destroy(),a=null,$("#menu").removeClass("abs"),i={}},init:function(e){d(),(i={}).c=e.el.find("#"+f.map.id),i.contents=i.c.find(".contents"),i.report=i.c.find(".report"),i.bgcaption=i.c.find(".bgCaption"),$("#menu").addClass("abs"),new Caption({container:i.c,caption:i.c.find(".captionfwrapper"),offset:[0,0]}).init(),i.c.on("click",".signout",function(){c.signout()}),function(e){t.bgcaption();var n=parameters().id||"ustate";t.contents(function(){c.openReport(n),e&&e()}),isMobile()||(a=new Roller({selector:".roller",inner:".cnt",cnt:i.c.find(".maketsWrapper"),offset:65}).init().apply())}(function(){e.clbk(null,e)})}}};return f.run=function(e){var n=f.addEssense(t,o,e);f.init(n,e)},f.stop=function(){_.each(t,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=userpage:(app.modules.userpage={},app.modules.userpage.module=userpage);
 /*_____*/ 
var wallet=function(){var k=new nModule,t={},s=function(e){var o,a=deep(e,"history"),n={},d={pnetwallet:{label:k.app.localization.e("tacaddress"),alabel:k.app.localization.e("tacaddress"),id:"pnetwallet",addresses:function(){return[k.app.platform.sdk.address.pnet().address]}},wallet:{label:k.app.localization.e("twallet"),id:"wallet",addresses:function(){return k.app.platform.sdk.addresses.storage.addresses||[]},caption:k.app.localization.e("twalletaddresses")},total:{label:k.app.localization.e("tTotal"),id:"total",addresses:function(){return[k.app.platform.sdk.address.pnet().address].concat(k.app.platform.sdk.addresses.storage.addresses||[])}}},l={parameters:{source:new Parameter({name:"Source",type:"VALUES",id:"source",defaultValue:"pnetwallet",possibleValuesLabels:[k.app.localization.e("twallet"),k.app.localization.e("tacaddress"),k.app.localization.e("tTotal")],possibleValues:["wallet","pnetwallet","total"],placeholder:k.app.localization.e("wsselect")}),reciever:new Parameter({name:k.app.localization.e("wsreciever"),type:"VALUESCUSTOM",id:"reciever",possibleValuesLabels:[],possibleValues:[],placeholder:k.app.localization.e("wsenter"),onType:!0}),amount:new Parameter({name:k.app.localization.e("wsamount"),id:"amount",type:"NUMBER",placeholder:k.app.localization.e("wsamountof"),format:{Precision:6}}),fees:new Parameter({name:k.app.localization.e("wsincludefees"),type:"VALUES",id:"fees",defaultValue:"include",possibleValuesLabels:[k.app.localization.e("wsrecieverpay"),k.app.localization.e("wssenderpay")],possibleValues:["include","exclude"]})}},s={wallet:k.app.localization.e("twallet"),pnetwallet:k.app.localization.e("tacaddress")},r={active:!1,parameters:{deposit:new Parameter({name:k.app.localization.e("wrecieveon"),type:"VALUES",id:"deposit",defaultValue:"wallet",possibleValuesLabels:[k.app.localization.e("twallet"),k.app.localization.e("tacaddress")],possibleValues:["wallet","pnetwallet"],placeholder:k.app.localization.e("wdselectfrom")}),depositamount:new Parameter({name:k.app.localization.e("wdamount"),id:"depositamount",type:"NUMBER",placeholder:k.app.localization.e("wdenteramount"),onType:!0,format:{Precision:6}}),message:new Parameter({name:k.app.localization.e("wdmessage"),id:"message",type:"TEXT",placeholder:k.app.localization.e("wdmessageplaceholder"),onType:!0}),label:new Parameter({name:k.app.localization.e("wdlabel"),id:"label",type:"STRING",onType:!0})}},i=[],p=[],c=0,u={sendAddresses:function(){var e=l.parameters.source.value;return d[e].addresses()},canChangeSend:function(){if(l.parameters.reciever.value){var t=null;if(_.find(s,function(e,a){return t=a,l.parameters.reciever.value==e||l.parameters.reciever.value==a}))return t}return null},sendParameters:function(){var t=l.parameters.source.value;(l.parameters.reciever.possibleValues=[],l.parameters.reciever.possibleValuesLabels=[],_.each(s,function(e,a){a!=t&&"total"!=t&&(l.parameters.reciever.possibleValues.push(a),l.parameters.reciever.possibleValuesLabels.push(e))}),"total"==t)&&(_.find(s,function(e,a){return l.parameters.reciever.value==e||l.parameters.reciever.value==a})&&(l.parameters.reciever.value=""));l.parameters.reciever.value!=t&&l.parameters.reciever.value!=s[t]||(l.parameters.reciever.value=l.parameters.reciever.possibleValuesLabels[0]),l.parameters.reciever.possibleValues.length?l.parameters.reciever.placeholder=k.app.localization.e("wrenteraddressselect"):l.parameters.reciever.placeholder=k.app.localization.e("wrenteraddress");var e=u.sendAddresses();k.app.platform.sdk.node.transactions.get.balance(function(e){l.parameters.amount.value>e&&(l.parameters.amount.value=e)},e,null,!0)},addaddress:function(){var e=k.app.platform.sdk.addresses.storage.addresses.length;k.app.platform.sdk.addresses.addWalletAddress(e),k.app.platform.sdk.addresses.save(),topPreloader(0),w(function(){topPreloader(100)})},linkValidation:function(){return 0<r.parameters.depositamount.value&&trim(r.parameters.message.value)},linkValidationQr:function(){return 0<r.parameters.depositamount.value},showDepositInStep:function(a,e,t){v.step(function(e){v.deposit(function(e){u[a](e),v.stepB(e,t)},e)},e,{class:"deposit"})},showQrResult:function(e){r.address&&u.linkValidationQr()&&v.qrResultForDeposit(r.address,e.find(".actionbody"))},showLinkResult:function(e){r.address&&u.linkValidation()&&v.linkResultForDeposit(r.address,e.find(".actionbody"))},showLinkMaker:function(e){r.address&&v.linkMakerForDeposit(r.address,e.find(".actionbody"))},showQrMaker:function(e){r.address&&v.qrMakerForDeposit(r.address,e.find(".actionbody"))},showDeposit:function(a){r.address="";var e=r.parameters.deposit.value,t="";if(r.active=!0,"pnetwallet"==e)return t=k.app.platform.sdk.address.pnet().address,r.address=t,void v.addressForDeposit(t,a.find(".actionbody"));"wallet"!=e||k.app.platform.sdk.addresses.addNewWalletAddress(function(e){k.app.platform.sdk.addresses.save(),t=e,r.address=t,v.addresses(),v.addressForDeposit(t,a.find(".actionbody"))})},showSendInStep:function(a,e,t){v.step(function(e){v.send(function(e){u[a](e),v.stepB(e,t)},e)},e,{class:"send"})},calculateFee:function(a){k.app.platform.sdk.node.fee.estimate(function(e){v.sendFees(a.find(".actionbody"),e)})},validSend:function(){var e=l.parameters.amount.value,a=l.parameters.reciever.value;return!!(0<e&&a)},prepareTransaction:function(i,d){var a=function(r,l,o){k.app.platform.sdk.wallet.txbase(r,_.clone(l),0,o,function(e,a,t){if(e)sitemessage(e);else{var s=k.app.platform.sdk.node.transactions.create.wallet(a,t),n=Math.min(s.virtualSize()*i,.0999);d&&d(r,l,n,o)}})},t=l.parameters.amount.value,s=l.parameters.fees.value,n=u.sendAddresses(),r=[],e=l.parameters.reciever.value;if("pnetwallet"==e||e==k.app.localization.e("tacaddress"))return r.push({address:k.app.platform.sdk.address.pnet().address,amount:t}),void a(n,r,s);"wallet"!=e&&e!=k.app.localization.e("twallet")?(r.push({address:e,amount:t}),a(n,r,s)):k.app.platform.sdk.addresses.addNewWalletAddress(function(e){r.push({address:e,amount:t}),k.app.platform.sdk.addresses.save(),a(n,r,s)})}},m=function(){u.addaddress()},f=function(){$(this).closest(".actionbody").html("")},v={clearMain:function(e){k.shell({animation:{id:"fadeInByElement",selector:".fadeInByElement",timeouts:150},clear:!0,el:o.c.find(".animationWrapper")},e)},clearStep:function(e){k.shell({animation:{id:"fadeInByElement",selector:".fadeInByElementStep",timeouts:150},clear:!0,el:o.step},e)},mainWithClear:function(e){i=[],p=[],v.clearStep(function(){v.main(function(){w()})})},main:function(e){k.shell({name:"main",el:o.main,data:{},animation:"fadeIn"},function(){o.total=o.c.find(".total"),o.addresses=o.c.find(".addresses"),o.send=o.c.find(".send"),o.deposit=o.c.find(".deposit"),e&&e()})},stepB:function(e,a){e.find("._stepback").html('<div class="backWrapper"><div class="back"><i class="fas fa-arrow-left"></i></div></div>'),e.find("._stepclose").html('<div class="closeAdditional"><span><i class="fas fa-undo"></i> '+k.app.localization.e("wreturntoeallet")+"</span></div>"),e.find("._subcaptionlevel span").html(a||"")},step:function(t,e,s){s||(s={}),c==e?t&&t(o.c.find(".step")):(i[c=e]=t,p[e]=s,v.clearMain(function(){_scrollToTop(o.step,0,200,-70),setTimeout(function(){k.shell({name:"step",el:o.step,data:{},animation:"fadeIn"},function(e){var a=e.el.find(".step");s.class&&a.addClass(s.class),t&&t(a)})},200)}))},qrResultForDeposit:function(e,a,t){k.shell({name:"depositqrresult",el:a,data:{address:e,d:r}},function(e){})},linkResultForDeposit:function(e,a,t){k.shell({name:"depositlinkresult",el:a,data:{address:e,d:r}},function(e){e.el.find(".copylink").on("click",function(){copyText(e.el.find(".linkInTextArea")),sitemessage(k.app.localization.e("waddresswascop"))})})},linkMakerForDeposit:function(e,a,t){k.shell({name:"depositlinkmaker",el:a,data:{address:e,d:r}},function(e){var a=e.el.find(".getlink"),t=[r.parameters.depositamount,r.parameters.message,r.parameters.label];ParametersLive(t,e.el),_.each(t,function(e){e._onChange=function(){u.linkValidation()?a.removeClass("disabled"):a.addClass("disabled")}}),u.linkValidation()&&a.removeClass("disabled"),a.on("click",function(){u.linkValidation()&&u.showDepositInStep("showLinkResult",3,k.app.localization.e("linkCreated"))})})},qrMakerForDeposit:function(e,a,t){k.shell({name:"depositqrmaker",el:a,data:{address:e,d:r}},function(e){var a=e.el.find(".getlink"),t=[r.parameters.depositamount,r.parameters.message,r.parameters.label];ParametersLive(t,e.el),_.each(t,function(e){e._onChange=function(){u.linkValidationQr()?a.removeClass("disabled"):a.addClass("disabled")}}),u.linkValidationQr()&&a.removeClass("disabled"),a.on("click",function(){u.linkValidationQr()&&u.showDepositInStep("showQrResult",3,k.app.localization.e("wqrcodecreated"))})})},addressForDeposit:function(e,a,t){k.shell({name:"depositaddress",el:a,data:{address:e,d:r}},function(e){e.el.find(".getlink").on("click",function(){u.showDepositInStep("showLinkMaker",2,k.app.localization.e("wlinkcreating"))}),e.el.find(".qrcode").on("click",function(){u.showDepositInStep("showQrMaker",2,k.app.localization.e("wqrcodecreating"))}),e.el.find(".copyaddress").on("click",function(){copyText(e.el.find(".adr")),sitemessage(k.app.localization.e("waddresswascop"))})})},deposit:function(e,a){k.shell({name:"deposit",el:a||o.deposit,data:{d:r}},function(t){ParametersLive([r.parameters.deposit],t.el),r.parameters.deposit._onChange=function(e){k.app.settings.set(k.map.uri,"deposit",e);var a=r.parameters.deposit.labelByValue(e);t.el.find(".type").html(a),u.showDepositInStep("showDeposit",1,k.app.localization.e("wdoptions"))},t.el.find(".recieveaddress").on("click",function(){u.showDepositInStep("showDeposit",1,k.app.localization.e("wdoptions"))}),t.el.on("click",".closeAdditional",f),e&&e(t.el)})},sendFees:function(n,e,a){if(u.validSend()){var r=e.feerate||1e-6;u.prepareTransaction(r,function(e,a,t,s){k.shell({name:"sendfees",el:n,data:{fees:t,d:l}},function(e){ParametersLive([l.parameters.fees],e.el),l.parameters.fees._onChange=function(e){k.app.settings.set(k.map.uri,"feesMode",e)},e.el.find(".sendtransaction").on("click",function(){u.prepareTransaction(r,function(e,n,a,t){k.app.platform.sdk.wallet.txbase(e,_.clone(n),a,t,function(e,s,a){if(e)sitemessage(e);else{var t=k.app.platform.sdk.node.transactions.create.wallet(s,a);console.log(t,n),k.app.platform.sdk.node.transactions.send(t,function(e,a){if(a)sitemessage(a);else{var t=_.map(s,function(e){return e.txid});k.app.platform.sdk.node.transactions.clearUnspents(t),c=0,v.mainWithClear(),sitemessage(k.app.localization.e("wssuccessfully"))}})}})})})})})}},send:function(a,e){u.sendParameters(),k.shell({name:"send",el:e||o.send,data:{d:l}},function(t){ParametersLive(_.toArray(l.parameters),t.el);var e=t.el.find(".change"),s=function(){u.canChangeSend()?e.removeClass("hidden"):e.addClass("hidden")};l.parameters.amount._onChange=function(e){var a=u.sendAddresses();k.app.platform.sdk.node.transactions.get.balance(function(e){l.parameters.amount.value<0&&(l.parameters.amount.value=0),l.parameters.amount.value>e&&(l.parameters.amount.value=e),l.parameters.amount.el.closest(".inputWrapper").html(l.parameters.amount.input()),ParametersLive([l.parameters.amount],t.el),1==c&&u.showSendInStep("calculateFee",1,k.app.localization.e("wscalculatefees"))},a,null,!0)},l.parameters.source._onChange=function(e){u.sendParameters(),l.parameters.reciever.el.closest(".inputWrapper").html(l.parameters.reciever.input()),l.parameters.amount.el.closest(".inputWrapper").html(l.parameters.amount.input()),ParametersLive([l.parameters.reciever,l.parameters.amount],t.el),s(),1==c&&u.showSendInStep("calculateFee",1,k.app.localization.e("wscalculatefees"))},l.parameters.reciever._onChange=function(e){if(s(),!u.canChangeSend()&&e){var a=!0;try{bitcoin.address.fromBase58Check(e)}catch(e){a=!1}if(!a)return void t.el.find(".notvalidaddress").html(k.app.localization.e("wsaddressnotv"));t.el.find(".notvalidaddress").html(""),e[0]}else t.el.find(".notvalidaddress").html("")},e.on("click",function(){var e=u.canChangeSend();e&&(l.parameters.source.value=e,l.parameters.source._onChange(),l.parameters.source.el.closest(".inputWrapper").html(l.parameters.source.input()),ParametersLive([l.parameters.source],t.el))}),t.el.find(".calculateFee").on("click",function(){u.validSend()?(u.showSendInStep("calculateFee",1,k.app.localization.e("wscalculatefees")),t.el.find(".required").addClass("hidden")):t.el.find(".required").removeClass("hidden")}),s(),a&&a(t.el)})},addresses:function(n){var r=d.total.addresses(),l={};k.app.platform.sdk.node.transactions.get.unspents(function(s){k.app.platform.sdk.node.transactions.get.balance(function(e){_.each(s,function(e,a){l[a]=_.reduce(e,function(e,a){return e+Number(a.amount)},0)});var a=[d.pnetwallet,d.wallet],t=_.map(a,function(e){var a=_.map(e.addresses(),function(e){return{balance:l[e],address:e}});return{caption:e.caption,details:a,label:e.alabel}},r);k.shell({name:"addresses",el:o.addresses,data:{addressesGroup:t,total:e}},function(e){e.el.find(".addaddress").on("click",m),n&&n()})},r)},r)},updateTotal:function(e,a){v.datasets(e,n[e.id].data.datasets),n[e.id].update(),o.total.find('.totalItem[item="'+e.id+'"] .balanceWrapper').html(k.app.platform.mp.coinwithsmall(e.balance)),a&&a()},datasets:function(e,a){var t=[],s=_.map(e.move,function(e){return t.push(e.color),Number(e.summary||0)}),n=[],r=[],l=[],o=[],i="#F1F1F1";_.each(e.move,function(e){_.each(e.items,function(e){n.push(Number(e.value)),r.push(e.color),l.push(i),o.push(8)})});var d=[{data:s,backgroundColor:t,borderColor:[i,i],borderWidth:[8,8]},{data:n,backgroundColor:r,borderColor:l,borderWidth:o}];return _.each(a,function(e,a){e.data=d[a].data}),d},total:function(t,s){t.update?v.updateTotal(t,s):k.shell({name:"total",el:o.total,inner:append,data:{item:t}},function(e){var a=e.el.find("#chart"+t.id)[0].getContext("2d");n[t.id]=new Chart(a,{type:"doughnut",data:{datasets:v.datasets(t)},options:{rotation:.5*Math.PI,cutoutPercentage:85}}),s&&s()})}},t=function(){},h=function(e,i){lazyEach({array:_.toArray(d),sync:!0,action:function(l){var o=l.item,e=o.addresses();k.app.platform.sdk.node.transactions.get.balance(function(r){k.app.platform.sdk.node.transactions.get.canSpend(e,function(e,a){var t="#414244",s=100;a&&(s=100*e/a,t="#0F8623");var n={positive:{summary:s,color:t}};e<a&&(n.neutral={summary:100-s,color:"#414244"}),v.total({label:o.label,id:o.id,balance:r,move:n,update:i},l.success)})},e)},all:{success:function(){e&&e()}}})},w=function(e){o.total.html(""),h(function(){lazyActions([v.send,v.deposit,v.addresses],e),k.app.platform.sdk.node.transactions.clbks.circles=function(){h(null,!0)},k.app.platform.sdk.node.transactions.clbks.walletaddresses=function(){v.addresses()}})};return{primary:a,getdata:function(e){var a={};a.p2pkh=k.app.platform.sdk.address.pnet(),r.parameters.deposit.value=k.app.settings.get(k.map.uri,"deposit")||r.parameters.deposit.defaultValue,l.parameters.source.value=k.app.settings.get(k.map.uri,"source")||l.parameters.source.defaultValue,l.parameters.reciever.value="",l.parameters.fees.value=k.app.settings.get(k.map.uri,"feesMode")||l.parameters.fees.defaultValue,r.active=!1,c=0,i=[],p=[],e(a)},destroy:function(){delete k.app.platform.sdk.node.transactions.clbks.circles,delete k.app.platform.sdk.node.transactions.clbks.walletaddresses,o={}},init:function(a){n={},t(),(o={}).c=a.el.find("#"+k.map.id),o.step=o.c.find(".actionstep"),o.main=o.c.find(".mainstep"),o.c.on("click","._stepclose",function(){c=0,v.mainWithClear()}),o.c.on("click","._stepback",function(){1<c?v.step(i[c-1],c-1,p[c-1]):(c=0,v.mainWithClear())}),v.main(function(){w(function(){var e=parameters();e.action&&"send"==e.action&&(l.parameters.amount.value=Number(e.amount.replace(/,/g,"")),l.parameters.reciever.value=e.address,l.parameters.amount._onChange(),u.showSendInStep("calculateFee",1,k.app.localization.e("wscalculatefees"))),a.clbk(null,a)})})}}};return k.run=function(e){var a=k.addEssense(t,s,e);k.init(a,e)},k.stop=function(){_.each(t,function(e){e.destroy()})},k}();"undefined"!=typeof module?module.exports=wallet:(app.modules.wallet={},app.modules.wallet.module=wallet);
 /*_____*/ 
var share=function(){var u=new nModule,t={},n=function(e){var s,o,i=/[,.!?;:() \n\r]/g,a=deep(e,"history"),r=null,l={autoFilled:function(){l.filled("i",0!=r.images.v.length),l.filled("u",r.url.v),l.filled("t",0!=r.tags.v.length),l.filled("cm",r.message.v||r.caption.v)},filled:function(e,a){var t=s.c.find('.draggablepart[part="'+e+'"]');a?t.addClass("filled"):t.removeClass("filled")},checkUrlForImage:function(a){if(a=a.split("?")[0].toLowerCase(),_.find([".jpg",".gif",".png",".jpeg"],function(e){if(-1<a.indexOf(e))return!0}))return!0},embeding20:function(e){var a=r.export(!0);u.nav.api.load({open:!0,id:"embeding20",inWnd:!0,essenseData:{storage:a,value:e,on:{added:function(e){"url"==type&&e&&l.checkUrlForImage(e)&&(type="images",e=e),r[type].set(e),g[type]&&g[type]()}}}})},embeding:function(n,e){var a=r.export(!0);"article"==n?u.nav.api.load({open:!0,id:"articles",inWnd:!0,essenseData:{storage:a,value:e,on:{added:function(e){}}}}):u.nav.api.load({open:!0,id:"embeding",inWnd:!0,essenseData:{type:n,storage:a,value:e,on:{added:function(e){var t=!0;"url"==n&&e&&l.checkUrlForImage(e)&&(n="images",e=e),_.isArray(e)||(e=[e]),_.each(e,function(e,a){t=r[n].set(e),o.share||p.save()}),!t&&c[n]&&sitemessage(c[n]),g[n]&&g[n]()}}}})},addTag:function(e){r.tags.set(e)?o.share||p.save():dialog({html:" < 30",class:"one"})},editImage:function(e){var a=_.map(r.images.v,function(e,a){return{original:e,index:a}}),n=_.filter(a,function(e){if(-1<e.original.indexOf("data:image"))return!0});u.nav.api.load({open:!0,id:"imageGalleryEdit",inWnd:!0,essenseData:{edit:!0,initialValue:e,images:n,success:function(e,a){_.each(r.images.v,function(e,a){var t=_.find(n,function(e){if(e.index==a)return!0});t&&(r.images.v[a]=t.original)}),o.share||p.save(),g.images(a)}}})},removeImage:function(t){var e=r.images.v.splice(t,1)[0];s.c.find(".imageContainer").each(function(){var e=$(this),a=e.attr("value");t<a&&e.attr("value",a-1),a==t&&e.remove()}),s.c.find(".imagesEmbWr").isotope();var a=s.eMessage[0].emojioneArea.getText();a=a.split(e).join(""),s.eMessage[0].emojioneArea.setText(a),o.share||p.save()},removelink:function(){var e=r.url.v;r.url.set();var a=s.eMessage[0].emojioneArea.getText();a=a.split(e).join(""),s.eMessage[0].emojioneArea.setText(a),o.share||p.save()},removeTag:function(e){r.tags.remove(e);var a=s.eMessage[0].emojioneArea.getText();a=a.split("#"+e).join(e),s.eMessage[0].emojioneArea.setText(a),o.share||p.save()},applyText:function(e){r.message.set(e)},caption:function(e){r.caption.set(e)},linksFromText:function(e){if(!r.url.v){var a=e.match(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%|_\+.~#/?&//=]*)?/gi);a&&0<a.length&&_.each(a,function(e){if(l.checkUrlForImage(e))-1==r.images.v.indexOf(e)&&(r.images.set(e),g.images());else{if(r.url.v)return;r.url.set(e),g.url()}})}},tagsFromText:function(e){var a=e.split(i),t=_.filter(a,function(e){if("#"==e[0])return!!(e=e.replace(/#/g,""))&&!r.tags.have(e)});t.length&&(_.each(t,function(e){e=e.replace(/\#/g,""),r.tags.set(e)}),g.tags())},post:function(i,e){topPreloader(50),r.uploadImages(u.app,function(){u.sdk.node.transactions.create.commonFromUnspent(r,function(e,a){if(topPreloader(100),s.c.removeClass("loading"),e){try{var t=new pShare;t._import(e,!0),t.temp=!0,t.address=e.address,u.app.platform.sdk.node.shares.add(t),o.notClear||(r.clear(),o.share||p.save(),m())}catch(e){console.log(e)}i&&i(!0)}else if(i)i(!1,c[a]);else{s.postWrapper.addClass("showError");var n=u.app.platform.errorHandler(a,!0);n&&s.error.html(n)}},e)})},error:function(e){var a=r.validation();return a&&!e?(s.postWrapper.addClass("showError"),s.error.html(c[a]),"message"==a&&s.c.find(".emojionearea-editor").focus(),"tags"==a&&s.c.find(".tgs input").focus(),!0):(s.postWrapper.removeClass("showError"),s.error.html(""),!1)},eTextChange:function(e){var a=e.getText();l.tagsFromText(a),l.applyText(a),l.linksFromText(a),g.caption(),console.log(a),o.share||p.save()}},c={message:u.app.localization.e("emptymessage"),tags:u.app.localization.e("emptytags"),images:u.app.localization.e("maximages")},d={selectTime:function(){var e=new Date,a={day:null,hour:(e=e.addMinutes(10)).getHours(),minutes:e.getMinutes()};o.time&&(a.day=o.time.yyyymmdd(),a.hour=o.time.getHours(),a.minutes=o.time.getMinutes()),u.fastTemplate("sharedate",function(e){dialog({html:e,btn1text:u.app.localization.e("daccept"),class:"one sharedate",clbk:function(e){},wrap:!0,success:function(e){var a=e.el.find(".day").val(),t=e.el.find(".hours").val(),n=e.el.find(".minutes").val(),i=strToDateSmall(a);return i=(i=i.addHours(t)).addMinutes(n),new Date<i?(o.time=i,s.selectTime.find(".selectedTime").html(convertDate(dateToStr(i))),o.selectTime&&o.selectTime(i),!0):(sitemessage(u.app.localization.e("pastdate")),!1)}})},{date:a})},changePostTime:function(){var e=$(this),a=$(this).val();if("p"!=a){if("t"==a)l.error()?e.val("w"):o.time&&o.time<new Date&&(o.time=null,s.selectTime.find(".selectedTime").html(u.app.localization.e("timenotselected")),o.selectTime&&o.selectTime(null));a=$(this).val(),o.type&&o.type(a)}else dialog({html:u.app.localization.e("sharenow"),btn1text:u.app.localization.e("dyes"),btn2text:u.app.localization.e("dno"),success:function(){o.type&&o.type(a)},fail:function(){e.val("w")}})},changeAddress:function(){var e=$(this).val(),a=s.c.find(".usericon"),t=deep(app,"platform.sdk.users.storage."+e+".image")||"";t?(a.html(""),a.attr("image",t),bgImages(s.c.find(".icon"))):(a.html('<svg width="30" height="30" data-jdenticon-value="'+e+'"></svg>'),a.attr("image",""),a.css("background","#F9F6F6"),a.css("background-image",""),a.css("background-size",""),a.css("background-position",""),a.css("background-repeat",""),s.c.find("[data-jdenticon-value]").each(function(){var e=$(this),a=e.data("jdenticon-value");e.html(jdenticon.toSvg(a,e.width()))})),o.address&&o.address(e)},change:function(){l.error(!0),l.autoFilled()},post:function(){l.error()||l.post()},embeding:function(){var e=$(this).attr("embeding");"embeding20"==e?l.embeding20():l.embeding(e)},addTag:function(e){l.addTag(e),g.tags()},caption:function(){var e=$(this).val();l.caption(e)},eTextChange:function(e,a){l.eTextChange(this)},textChange:function(){var e=$(this).val();l.tagsFromText(e),l.applyText(e),l.linksFromText(e),g.caption()},eText:function(e,a){var t=String.fromCharCode(a.keyCode||a.which),n=this.getText();i.test(t)&&(l.tagsFromText(n),l.linksFromText(n)),l.applyText(n),g.caption(),o.share||p.save()},text:function(e){var a=String.fromCharCode(e.keyCode||e.which),t=$(this).val();i.test(a)&&(l.tagsFromText(t),l.linksFromText(t)),l.applyText(t),g.caption()},removeTag:function(){var e=$(this).closest(".tag").attr("tag");l.removeTag(e),$(this).closest(".tag").remove()},removelink:function(){l.removelink(),g.url()}},g={tags:function(a){s.tags.find(".tag").remove(),u.shell({name:"tags",inner:append,el:s.tags,data:{tags:r.tags.get()}},function(e){e.el.find(".remove").on("click",d.removeTag),a&&a()})},tagsResults:function(e,a){u.shell({name:"tagsResult",data:{results:e}},function(e){a&&a(e.rendered)})},all:function(){s.eMessage[0].emojioneArea.setText(r.message.v),g.tags(),g.url(),g.caption(),g.images()},caption:function(){r.caption.v||100<r.message.v.length?s.cpt.hasClass("active")||s.cpt.addClass("active"):s.cpt.removeClass("active")},url:function(a){var e=r.url.v,n=u.app.platform.parseUrl(e),i=u.app.platform.sdk.remote.storage[e];u.shell({name:"url",inner:html,el:s.urlWrapper,data:{url:r.url.v,og:i,remove:!0}},function(e){if(r.url.v&&!i)if("youtube"==n.type||"vimeo"==n.type)Plyr.setup(".js-player");else u.app.platform.sdk.remote.get(n.url,function(e){e&&g.url()});else if(i){var t=e.el.find("img");e.el.find("img").imagesLoaded({background:!0},function(e){_.each(e.images,function(e,a){e.isLoaded?$(t[a]).addClass("active"):$(t[a]).closest(".image").css("display","none")})})}e.el.find(".removelink").on("click",d.removelink),a&&a()})},images:function(t){u.shell({name:"images",turi:"embeding",inner:html,el:s.images,data:{images:_.map(r.images.v||[],function(e,a){return{src:e,id:a}})}},function(e){e.el.find(".remove").on("click",function(){var e=$(this).closest(".imageContainer").attr("value");l.removeImage(e)}),e.el.find(".edit").on("click",function(){var e=$(this).closest(".imageContainer").attr("value");l.editImage(e)}),e.el.find(".image").on("click",function(){var e=$(this).attr("i");if(e){var a=_.map(r.images,function(e){return{src:e}});u.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:{initialValue:e,idName:"src",images:a}})}}),e.el.find(".image").imagesLoaded({background:!0},function(e){if(isMobile())t&&t(),s.images.addClass("active");else{var a=s.images.find(".imagesEmbWr");a.isotope({layoutMode:"packery",itemSelector:".imageContainer",packery:{gutter:20},initLayout:!1}),a.on("arrangeComplete",function(){t&&t(),s.images.addClass("active")}),a.isotope()}})})}},p={save:function(){r?u.app.settings.set(u.map.id,"currentShare",r.export(!0)):u.app.settings.set(u.map.id,"currentShare","")},load:function(){var e=u.app.settings.get(u.map.id,"currentShare");e&&r.import(e)}},m=function(){g.all()};return{primary:a,post:l.post,getdata:function(e,a){console.log("GETDATA",a),r=deep(a,"settings.essenseData.share")||new Share,(o=deep(a,"settings.essenseData")||{}).share||p.load(),e({share:r})},destroy:function(){s.c.find(".emojionearea-editor").off("pasteImage"),s={},Sortable&&Sortable.destroy&&Sortable.destroy()},init:function(e){(s={}).c=e.el.find("#"+u.map.id),s.tagSearch=s.c.find(".searchWrapper"),s.tags=s.c.find(".tagsCont"),s.message=s.c.find(".message"),s.eMessage=s.c.find("#emjcontainer"),s.panel=s.c.find(".panel .item"),s.error=s.c.find(".error"),s.postWrapper=s.c.find(".postWrapper"),s.post=s.c.find(".post"),s.urlWrapper=s.c.find(".urlWrapper"),s.caption=s.c.find(".captionshare"),s.cpt=s.c.find(".cpt"),s.images=s.c.find(".imagesWrapper"),s.changeAddress=s.c.find(".changeAddress"),s.changePostTime=s.c.find(".postTime"),s.selectTime=s.c.find(".selectedTimeWrapper"),function(){s.changeAddress.on("change",d.changeAddress),s.changePostTime.on("change",d.changePostTime),s.selectTime.on("click",d.selectTime),s.panel.on("click",d.embeding),s.post.on("click",d.post),console.log("initEvents"),s.eMessage.emojioneArea({pickerPosition:"bottom",search:!1,tones:!1,events:{change:d.eTextChange,click:d.eTextChange,keyup:d.eText,onLoad:function(e,a){parameters().newshare&&s.c.find(".emojionearea-editor").focus(),s.c.find(".emojionearea-editor").pastableContenteditable(),s.c.find(".emojionearea-editor").on("pasteImage",function(e,a){topPreloader(100),r.images.set(a.dataURL)?g.images&&g.images():sitemessage(c.images)}).on("pasteImageStart",function(){topPreloader(30)}).on("pasteImageError",function(e,a){topPreloader(100)}).on("pasteText",function(e,a){l.eTextChange(s.eMessage[0].emojioneArea)})}}}),s.caption.on("keyup",d.caption),r.on.change.edit=d.change,isMobile()||s.c.find(".tooltip").tooltipster({theme:"tooltipster-light",maxWidth:600,zIndex:20}),search(s.tagSearch,{placeholder:u.app.localization.e("addtags"),clbk:function(e){},events:{fastsearch:function(e,a,t){if(t){var n=String.fromCharCode(t.keyCode||t.which);if(/[,.!?;:() ]/.test(n))return d.addTag(e),void a(null)}u.app.platform.sdk.tags.search(e,function(e){g.tagsResults(e,function(e){a(e,function(e,a){e.find(".result").on("click",function(){var e=$(this).attr("result");a.closeResults(),a.clear(),d.addTag(e)})})})})},search:function(e,a,t){d.addTag(e),t.clear(),a&&a()}},last:{get:function(){return[u.app.localization.e("tnews"),u.app.localization.e("timages"),u.app.localization.e("tvideos"),u.app.localization.e("tmarket"),u.app.localization.e("tsport")]},tpl:function(e,a){g.tagsResults(e,function(e){a(e,function(e,a){e.find(".result").on("click",function(){var e=$(this).attr("result");a.closeResults(),a.clear(),d.addTag(e)})})})}}});var e={animation:150,swapThreshold:.5,draggable:".draggablepart",onUpdate:function(e){var a=[],t=$(n).find(".draggablepart");$.each(t,function(){a.push($(this).attr("part"))}),r.settings.a=a,o.share||p.save(),o.changeArrange&&o.changeArrange()},forceFallback:!0,handle:".marker"},n=document.getElementById("sortableBody");n&&Sortable.create(n,e),l.autoFilled()}(),m(),e.clbk(null,e)},id:e._id}};return u.run=function(e){var a=u.addEssense(t,n,e);u.init(a,e)},u.stop=function(){_.each(t,function(e){e.destroy()})},u}();"undefined"!=typeof module?module.exports=share:(app.modules.share={},app.modules.share.module=share);
 /*_____*/ 
var lenta=function(){var J=new nModule,t={},a=function(e){var c,i,d,n,t=deep(e,"history"),a=e.mid,s={},o=[],r={},u={},f={},l=!1,p=!1,h={},m=[],v=0,g=null,b=0,k=null,w=!1,x={comments:{content:"message empty",share:"hasn't share",messagelength:">140",money:"hasn't money",network:"network error"},upvote:{share:"hasn't share",network:"network error"},complain:{share:"hasn't share",network:"network error"}},y={clear:function(){o=[],s={},u={},p=l=!(f={}),h={},v=b=0,k=g=n=null,p=w=!(m=[]),loaded=!1},loadmore:function(){j.shares(function(e,n){e&&R.shares(e,function(){R.sharesInview(e,function(){})},{index:m.length})})},removeAdditionalByScroll:function(){if(g){var e=$(window).scrollTop();150<Math.abs(e-v)&&y.additional(g,!1)}},additional:function(e,n){n?(e.addClass("showAdditional"),e.find(".subscribeWrapper").fadeIn(),v=$(window).scrollTop(),g=e,window.addEventListener("scroll",y.removeAdditionalByScroll)):(e.removeClass("showAdditional"),e.find(".subscribeWrapper").fadeOut(),window.removeEventListener("scroll",y.removeAdditionalByScroll))},applyheight:function(e,n,t){},applyheightEl:function(e,n,t){if(c&&c.shares&&e&&n.length){var a=n.height();return n.length&&i.scrollTop()>n.offset().top?(y.applyheight(e,a,t),c.shares.css("height","auto")):c.shares&&c.shares.css("height","auto"),a}},stateAction:function(n,t){J.app.user.isState(function(e){e?t():J.nav.api.load({open:!0,id:"authorization",inWnd:!0,essenseData:{loginText:J.app.localization.e("llogin"),successHref:n,signInClbk:function(){t&&t()}}})})},initVideo:function(e,n){var t=e.find(".js-player"),a=e.find(".videoWrapper");if(t.length){var i=e.height(),s=new Plyr(t[0],{muted:!0,autoplay:!0,resetOnEnd:!0});h[n.txid]||(h[n.txid]={}),h[n.txid].p=s,h[n.txid].initing=!0,h[n.txid].el=a,h[n.txid].id=a.attr("pid"),s.on("ready",function(){h[n.txid].inited=!0,h[n.txid].inited=!0,i=y.applyheightEl(i,e,"video")})}},linksFromText:function(e){var n=e.match(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);if(n&&0<n.length)return n[0]},sendComment:function(e,t){var n=e.share.v,a=c.c.find("#"+n).find(".error");J.sdk.node.transactions.create.commonFromUnspent(e,function(e,n){topPreloader(100),e?t&&t(e):(a.html(x.comments[n]),t&&t(!1))})},initCommentProcess:function(t){r[t]=!0,s[t]||(s[t]=new CommentShare,s[t].share.set(t));var a=c.c.find("#"+t),n=a.find(".error"),i=a.find("textarea");i.off("keyup"),i.on("keyup",function(){var e=$(this).val();if(s[t].message.set(e),!s[t].url.v){var n=y.linksFromText(e);n&&(s[t].url.set(n),R.newCommentAttachement(t,"url"))}}),i.off("change"),i.on("change",function(){var e=$(this).val();if(!s[t].url.v){var n=y.linksFromText(e);n&&(s[t].url.set(n),R.newCommentAttachement(t,"url"))}}),a.find(".leaveCommentCnt .panel .item").off("click").on("click",function(){var e=$(this).attr("embeding");y.embeding(t,e)}),a.find(".leaveCommentCnt .post").off("click").on("click",function(){var e=s[t].validation();e?n.html(x.comments[e]):(a.find(".leaveCommentCnt").addClass("loading"),n.html(""),y.sendComment(s[t],function(e){if(a.find(".leaveCommentCnt").removeClass("loading"),e){var n=s[t].alias(e);J.app.platform.sdk.node.shares.storage.trx[t].comment(n),delete s[t],i.blur(),i.val(""),a.find(".att").html(""),y.initCommentProcess(t)}}))})},embeding:function(n,t){var e=s[n].export(!0);J.nav.api.load({open:!0,id:"embeding",inWnd:!0,essenseData:{type:t,storage:e,on:{added:function(e){s[n][t].set(e),R.newCommentAttachement(n,t)}}}})},openPost:function(e,n){J.nav.api.load({open:!0,id:"post",inWnd:!0,clbk:function(){n&&n()},essenseData:{share:e}})},donate:function(e,n){var t=J.app.platform.sdk.node.shares.storage.trx[e];if(t){var a=deep(app,"platform.sdk.usersl.storage."+t.address)||{address:t.address,addresses:[]},i="send?address="+t.address+"&amount=1&message="+hexEncode(J.app.localization.e("postlabel")+" &mdash; "+(t.caption||t.message).substr(0,20)+"...")+"&label="+(a.name||a.address)+"&setammount=true";J.fastTemplate("donation",function(e){dialog({html:e,class:"one donation",btn1text:J.app.localization.e("dcancel"),clbk:function(e,n){e.find(".pnetdnt").on("click",function(){J.nav.api.load({open:!0,href:i,history:!0}),n.destroy()}),e.find(".copy").on("click",function(){var e=$(this).closest(".address").find(".addr");copyText(e),sitemessage(J.app.localization.e("successfullycopiedaddress"))})}})},{userinfo:a})}},videoPosition:function(e){var n=e.find(".work");if(e.hasClass("fullScreenVideo")){var t=($(window).height()-(e.find(".videoWrapper").height()+100))/2;0<t?n.css("margin-top",t+"px"):n.css("margin-top","0px")}else n.css("margin-top","0px")},fullScreenVideo:function(e,n){if(h[e]){var t=c.c.find("#"+e);t.addClass("fullScreenVideo"),y.videoPosition(t),J.app.nav.api.history.addParameters({v:e});var a=h[e];a.p.playing||a.p.play(),a.p.muted=!1,J.app.actions.offScroll(),n&&n()}},exitFullScreenVideo:function(e){var n=c.c.find("#"+e);n.removeClass("fullScreenVideo"),y.videoPosition(n),h[e].p.muted=!0,J.app.nav.api.history.removeParameters(["v"]),J.app.actions.onScroll()},like:function(e,n,t){var a=e.upvote(n);J.sdk.node.transactions.create.commonFromUnspent(a,function(e,n){topPreloader(100),e?t&&t(!0):(a.myVal=null,J.app.platform.errorHandler(n,!0),t&&t(!1))})},complain:function(e,t){var n=e.complain();J.sdk.node.transactions.create.commonFromUnspent(n,function(e,n){topPreloader(100),e?(dialog({html:"<b>TXID:</b> "+e.txid,class:"one"}),t&&t(!0)):(c.postWrapper.addClass("showError"),J.app.platform.errorHandler(n,!0),t&&t())})},unsubscribe:function(a,i){var e=new Unsubscribe;e.address.set(a),topPreloader(10),J.sdk.node.transactions.create.commonFromUnspent(e,function(e,n){if(e){var t=deep(app,"platform.sdk.users.storage."+J.user.address.value.toString("hex"));t&&t.removeRelation({adddress:a})}topPreloader(100),i(e,n)})},subscribe:function(a,i){var e=new Subscribe;e.address.set(a),topPreloader(10),J.sdk.node.transactions.create.commonFromUnspent(e,function(e,n){if(e){var t=deep(app,"platform.sdk.users.storage."+J.user.address.value.toString("hex"));t&&t.addRelation({adddress:a,private:!1})}topPreloader(100),i(e,n)})},subscribePrivate:function(a,i){var e=new SubscribePrivate;e.address.set(a),topPreloader(10),J.sdk.node.transactions.create.commonFromUnspent(e,function(e,n){if(e){var t=deep(app,"platform.sdk.users.storage."+J.user.address.value.toString("hex"));t&&t.addRelation({adddress:a,private:!0})}topPreloader(100),i(e,n)})},openGallery:function(e,n,t){var a=_.map(e.images,function(e){return{src:e}});J.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:{initialValue:n,idName:"src",images:a,gid:e.txid},clbk:function(){t&&t()}})},videosInview:function(e,s,o){var r=_.filter(e,function(e){if(e.inited&&!e.playing&&!e.stopped&&e.el)return!0});r.length&&(n=slowMade(function(){r=_.filter(r,function(e){return e.el});_.map(r,function(e){return e.el[0]});var e=inView(c.c.find(".videoWrapper"),{offset:$(window).height()/10,mode:"all"}),n=null;if(0<e.length){var t=$(e[0]);n=t.attr("pid");var a=_.find(r,function(e){return e.id==n});if(!n||!a)return;a&&setTimeout(function(){inView(t,{offset:-100,mode:"all"}).length&&s(a,t)},320)}var i=_.filter(r,function(e){return e.id!=n});i.length&&o(i)},n,30))},scrollToPost:function(e){_scrollTo($("#"+e))}},C=function(){var e=c.c.find(".fullScreenVideo");0<e.length&&y.videoPosition(e)},P=function(){$(window).scrollTop()+$(window).height()>$(document).height()-400&&!l&&!p&&y.loadmore()},S=function(e){y.videosInview(h,function(e,n,t){n.closest(".share").hasClass("showAdditional")||e.p.play()},function(e){_.each(e,function(e){e.p.muted=!0,e.p.playing&&e.p.stop()})})},E=function(){var e=$(this).closest(".comment").attr("id"),n=$(this).closest(".share").attr("id");y.like(J.app.platform.sdk.node.shares.storage.trx[n].findComment(e)),$(this).addClass("active")},A=function(){var e=$(this).closest(".share"),n=e.attr("id");s[n]||(e.find(".leavewrapper").addClass("active"),y.initCommentProcess(n))},T=function(){var e=$(this).closest(".share").attr("id");J.app.platform.sdk.node.transactions.get.tx(e)},z=function(){if(d.authAction)d.authAction("like");else{var t=$(this).closest(".stars");if(!t.attr("value")){var e=$(this).closest(".share").attr("id"),a=$(this).attr("value"),i=J.app.platform.sdk.node.shares.storage.trx[e];y.stateAction("_this",function(){y.like(i,a,function(e){if(e){t.attr("value",a),t.addClass("liked"),i.scnt||(i.scnt=0),i.score||(i.score=0),i.scnt++,i.score=Number(i.score||0)+Number(a);var n=Number(i.score)/Number(i.scnt);t.find(".tstarsov").css("width",n/5*100+"%"),t.closest(".itemwr").find(".count span").html(n.toFixed(1))}})})}}},V=function(){var n=$(this).closest(".share"),e=n.attr("id");dialog({html:J.app.localization.e("lcomlaindialog"),btn1text:J.app.localization.e("dyes"),btn2text:J.app.localization.e("dno"),success:function(){n.addClass("hidden"),topPreloader(30),y.complain(J.app.platform.sdk.node.shares.storage.trx[e],function(e){topPreloader(100),e||n.removeClass("hidden")})}})},L=function(){var e=$(this).closest(".share");y.additional(e,!e.hasClass("showAdditional"))},W=function(){var n=$(this).closest(".share").attr("id"),e=$(this).attr("i"),t=J.app.platform.sdk.node.shares.storage.trx[n];if(!t){var a=_.find(J.sdk.node.transactions.temp.share,function(e){return e.txid==n});(t=new pShare)._import(a),t.temp=!0,t.address=J.app.platform.sdk.address.pnet().address}y.openGallery(t,e)},F=function(){var e=$(this).closest(".shareTable").attr("address"),t=$(this).closest(".share");y.subscribePrivate(e,function(e,n){e?t.find(".shareTable").addClass("subscribed"):J.app.platform.errorHandler(n,!0)})},H=function(){var e=$(this).closest(".shareTable").attr("address"),t=$(this).closest(".share");y.subscribe(e,function(e,n){e?t.find(".shareTable").addClass("subscribed"):J.app.platform.errorHandler(n,!0)})},I=function(){var e=$(this).closest(".shareTable").attr("address"),t=$(this).closest(".share");y.unsubscribe(e,function(e,n){e?t.find(".shareTable").removeClass("subscribed"):J.app.platform.errorHandler(n,!0)})},M=function(){var t=$(this),e=t.attr("address");if(t.addClass("loading"),t.hasClass("subscription")){var n=function(e,n){t.removeClass("loading"),e?t.removeClass("subscription"):sitemessage(n)};dialog({html:J.app.localization.e("lunsubscribe"),btn1text:J.app.localization.e("dyes"),btn2text:J.app.localization.e("dno"),success:function(){y.unsubscribe(e,n)}})}else{var a=function(e,n){t.removeClass("loading"),e?t.addClass("subscription"):sitemessage(n)};dialog({class:"bigbuttons big centertext",html:J.app.localization.e("lprivatepublic"),btn1text:'<i class="far fa-eye-slash"></i> '+J.app.localization.e("lprivate"),btn2text:'<i class="far fa-eye"></i> '+J.app.localization.e("lpublic"),success:function(){y.subscribePrivate(e,a)},fail:function(){y.subscribe(e,a)}})}},U=function(){var e=$(this).closest(".share").attr("id");y.exitFullScreenVideo(e)},D=function(){var e=$(this).closest(".share").attr("id");y.fullScreenVideo(e)},N=function(){if(d.authAction)d.authAction("like");else if(!isMobile()){var e=$(this).closest(".share").attr("id");y.openPost(e)}},G=function(){if(d.authAction)d.authAction("donate");else{var e=$(this).closest(".share").attr("id");y.donate(e)}},O=function(){d.authAction&&d.authAction("discussion")},Z=function(){y.loadmore()},B=function(){c.c.find(".shares").html('<div class="bspacer"></div>'),c.c.find(".loadprev").remove(),c.c.removeClass("loading"),c.c.removeClass("sharesEnded"),c.c.removeClass("sharesZero"),y.clear(),q()},R={newCommentAttachement:function(e,n){c.c.find("#"+e+" ."+n+"Wrapper")},shareSpacers:function(e){_.each(e,function(e){R.shareSpacer(e)})},shareSpacer:function(e){if(u[e.txid]&&!f[e.txid]){var n=c.shares.find("#"+e.txid),t=n.height(),a=n.find(".work").outerHeight();h[e.txid]&&h[e.txid].inited&&(h[e.txid].p.destroy(),h[e.txid].el=null,h[e.txid].inited=!1),u[e.txid]=!1,c.shares.css("height",c.shares.outerHeight()),n.html('<div class="shareSpacer added"></div>'),n.find(".shareSpacer").outerHeight(a),t=y.applyheightEl(t,n,"space")}},share:function(i,s){var o=c.shares.find("#"+i.txid),r=o.height();c.shares.css("height",c.shares.outerHeight());var e=o.find(".added"),l=0;e.length&&(l=e.outerHeight()),f[i.txid]=!0,J.shell({name:"share",el:o,data:{share:i,ed:d}},function(e){var n=o.find(".work");l&&n.outerHeight(l),u[i.txid]=!0,r=y.applyheightEl(r,o,"share");var t=function(e){u[i.txid]?e():a()},a=function(){n.css("height","auto"),f[i.txid]=!1,s&&s()};t(function(){R.url(e.el.find(".url"),i.url,i,function(){t(function(){R.urlContent(i,function(){y.initVideo(e.el,i),a(),t(function(){R.images(i,function(){})})})})})}),fastars(e.el.find(".stars"))})},sharesInview:function(e,n){lazyEach({array:e,action:function(e){var n=e.item;u[n.txid]?e.success():(u[n.txid]=!0,R.share(n,e.success))},all:{success:function(){n()}}})},shares:function(n,t,e){e||(e={}),e.inner||(e.inner=append),J.shell({name:"shares",inner:e.inner,el:c.shares,data:{shares:n||[],index:e.index||0},animation:!1},function(e){m=e.inner==append?m.concat(n):n.concat(m),t&&t()})},images:function(n,t){if(c.c){var a=c.c.find("#"+n.txid),i=a.find(".image"),s=a.find(".images");if(!s.hasClass("active")&&i.length&&s.length){var r=a.height();i.imagesLoaded({background:!0},function(o){"a"!=n.settings.v&&_.each(o.images,function(e,n){var t=e.img,a=$(o.elements[n]).closest(".imagesWrapper"),i="",s=a.width();a.height();if(t.width>1.2*t.height&&!isMobile()){i="w2";t.width,t.height;a.width(s*(t.width/t.height))}(t.height>1.2*t.width||isMobile())&&(i="h2",a.height(s*(t.height/t.width))),i&&a.addClass(i)}),r=y.applyheightEl(r,a);var e=function(){s.addClass("active"),i.addClass("active"),r=y.applyheightEl(r,a),t&&t()};isMobile()||"a"==n.settings.v?e():(s.isotope({layoutMode:"packery",itemSelector:".imagesWrapper",packery:{gutter:20},initLayout:!1}),s.on("arrangeComplete",function(){e()}),s.isotope())})}else t&&t()}},leavecomment:function(e,t){J.shell({name:"leavecomment",el:c.shares.find("#"+e+" .leaveCommentCnt"),data:{}},function(e){var n=e.el.find("textarea");n.on("focus",A),autosize(n),t&&t(n)})},commentslist:function(e,n,t){n||(n={}),J.shell({name:"commentslist",el:c.shares.find("#"+e+" .commentsCnt"),inner:n.inner||append,data:{comments:n.comments||[]}},function(e){e.el.find(".commentLikeAction").on("click",E),e.el.find(".usericoncmt").off("click").on("click",M),t&&t()})},comments:function(n,t,a){t||(t={}),t.comments||(t.comments=lastEls(J.app.platform.sdk.node.shares.storage.trx[n].comments||[])),t.init||(t.init=!1),J.shell({name:"comments",el:c.shares.find("#"+n+" .commentsWrapper"),data:{}},function(e){t.init?(R.leavecomment(n,a),R.commentslist(n,t)):a&&a()})},url:function(e,n,t,a){if(d.nourlload)a&&a();else{var i=J.app.platform.sdk.remote.storage[n],s=e.closest(".share"),o=s.height();J.shell({turi:"share",name:"url",el:e,data:{url:n,og:i,share:t}},function(e){o=y.applyheightEl(o,s,"url");var t=e.el.find("img");e.el.find("img").imagesLoaded({background:!0},function(e){_.each(e.images,function(e,n){e.isLoaded?$(t[n]).addClass("active"):$(t[n]).closest(".image").css("display","none")}),o=y.applyheightEl(o,s,"url"),a&&a()})})}},urlContent:function(n,t){var a=n.url;if(a){var i=c.c.find("#"+n.txid+" .url"),e=J.app.platform.parseUrl(a),s=J.app.platform.sdk.remote.storage[a];a&&!s?"youtube"==e.type||"vimeo"==e.type?t&&t():J.app.platform.sdk.remote.get(a,function(e){e?R.url(i,a,n,t):t&&t()}):t&&t()}else t&&t()},urlsContent:function(e){_.each(e,function(e){R.urlContent(e)})},urls:function(e,n){lazyEach({array:e,sync:!0,action:function(e){R.url(e.item.el,e.item.url,e.item.share,e.success)},all:{success:function(){n&&n()}}})}},j={recomended:function(n,t){c.loader.fadeIn(),c.c.addClass("loading"),o=[],d.author||k?n&&n(o):J.app.platform.sdk.node.shares.recomended({},function(e){o=_.filter(e,function(n){if(!_.find(t,function(e){if(e.txid==n)return!0}))return!0}),J.app.platform.sdk.node.shares.users(e,function(){n&&n(o)})})},begin:function(n){k&&!w?J.app.platform.sdk.node.shares.getbyid(k,function(e){w=!0,n(e)}):n([])},shares:function(i,e){l||p||(c.loader.fadeIn(),c.c.addClass("loading"),l=!0,j.begin(function(a){J.app.platform.sdk.node.shares.common({author:d.author,begin:k||""},function(n,e,t){_.each(a,function(e){e&&n.unshift(e)}),d.filter&&(n=_.filter(n,d.filter)),J.app.platform.sdk.node.shares.users(n,function(){b+=n.length,l=!1,c.c&&((!n||!n.length||n.length<t.count)&&(k||b?c.c.addClass("sharesEnded"):c.c.addClass("sharesZero"),p=!0),c.loader.fadeOut(),i&&i(n,e))})},e)}))}},X=function(){},q=function(){j.shares(function(e,n){e&&R.shares(e,function(){R.sharesInview(e,function(){var e=parameters();if(e.s&&y.openPost(e.s,function(){y.scrollToPost(e.p)}),e.i){var n=deep(J.app.platform,"sdk.node.shares.storage.trx."+e.i),t=null;n&&(e.num&&(t=deep(n,"images."+e.num)),y.openGallery(n,t))}e.v&&(y.scrollToPost(e.v),y.fullScreenVideo(e.v,function(){}))})})},"clear")};return{id:a,primary:t,getdata:function(e,n){delete J.app.platform.sdk.node.shares.clbks.added.lenta,d=n.settings.essenseData||{},y.clear();var t=parameters(),a={beginmaterial:k=t.s||t.i||t.v||null,author:d.author};J.loadTemplate({name:"share"},function(){e(a)})},destroy:function(){window.removeEventListener("scroll",S),window.removeEventListener("scroll",P),window.removeEventListener("resize",C),c={}},init:function(e){i=$(window),X(),(c={}).c=e.el.find("#"+J.map.id),c.shares=c.c.find(".shares"),c.loader=c.c.find(".loader"),console.log("initEventsLENTA"),window.addEventListener("scroll",S),window.addEventListener("resize",C),d.notscrollloading||window.addEventListener("scroll",P),c.c.on("click",".stars i",z),c.c.on("click",".complain",V),c.c.on("click",".imageOpen",W),c.c.on("click",".txid",T),c.c.on("click",".sharecaption",N),c.c.on("click",".message",N),c.c.on("click",".showMore",N),c.c.on("click",".videoTips",D),c.c.on("click",".exitFull",U),c.c.on("click",".subscribe",M),c.c.on("click",".additional",L),c.c.on("click",".asubscribe",H),c.c.on("click",".asubscribePrivate",F),c.c.on("click",".aunsubscribe",I),c.c.on("click",".donate",G),c.c.on("click",".discussion",O),c.c.find(".loadmore button").on("click",Z),c.c.find(".loadprev button").on("click",B),J.app.platform.sdk.node.shares.clbks.added.lenta=function(e){R.shares([e],function(){R.sharesInview([e],function(){})},{inner:prepend})},q(),e.clbk(null,e)}}};return J.run=function(e){var n=J.addEssense(t,a,e);J.init(n,e)},J.stop=function(){_.each(t,function(e){e.destroy()})},J}();"undefined"!=typeof module?module.exports=lenta:(app.modules.lenta={},app.modules.lenta.module=lenta);
 /*_____*/ 
var send=function(){var d=new nModule,a={},t=function(n){var e,a,t=deep(n,"history"),i={stateAction:function(e,a){d.app.user.isState(function(n){n?a():d.nav.api.load({open:!0,id:"authorization",inWnd:!0,essenseData:{loginText:d.app.localization.e("llogin"),successHref:e,signInClbk:function(){a&&a()}}})})},send:function(){i.stateAction("_this",function(){d.nav.api.load({open:!0,history:!0,href:"userpage?id=wallet&action=send&address="+a.address+"&amount="+a.amount})})}},s=function(){},o=function(){var n;e.c.find(".send").on("click",i.send),e.am.on("change",function(){var n=$(this).val();a.amount=n}),0<(n={alias:"numeric",groupSeparator:",",radixPoint:".",digits:6,digitsOptional:!1,autoGroup:!0,allowMinus:!1}).digits&&(n.placeholder="0.000000"),e.am.inputmask(n),parameters().setammount||e.am.blur()};return{primary:t,getdata:function(n){var e=parameters();a={},e.address&&bitcoin.address.fromBase58Check(e.address)&&(a.address=e.address),e.amount&&(a.amount=Number(e.amount)),e.label&&(a.label=clearScripts(donottrustLink(findAndReplaceLink(e.label,!0)))),e.message&&(a.message=clearScripts(donottrustLink(findAndReplaceLink(hexDecode(e.message,!0))))),a.amount&&a.address&&a.message?n(a):d.nav.api.load({open:!0,href:"page404",history:!0})},destroy:function(){e={}},init:function(n){s(),(e={}).c=n.el.find("#"+d.map.id),e.am=e.c.find(".amredit"),o(),n.clbk(null,n)}}};return d.run=function(n){var e=d.addEssense(a,t,n);d.init(e,n)},d.stop=function(){_.each(a,function(n){n.destroy()})},d}();"undefined"!=typeof module?module.exports=send:(app.modules.send={},app.modules.send.module=send);
 /*_____*/ 
var imageGalleryEdit=function(){var P=new nModule,a={},n=function(e){var a,n,i=deep(e,"history"),t=null,r=0,l=!1,p=null,o=null,s=null,c={normal:{name:"Normal"},vintage:{name:"Vintage"},oldBoot:{name:"Old Boot"},clarity:{name:"Clarity"},sunrise:{name:"Sunrise"},crossProcess:{name:"Cross Process"},orangePeel:{name:"Orange Peel"},love:{name:"Love"},jarques:{name:"Jarques"},pinhole:{name:"Pinhole"}},d={},f={back:function(){--r<0&&(r=n.images.length-1),y()},next:function(){++r>=n.images.length&&(r=0),y()},initialValue:function(){n.initialValue&&(r=n.initialValue)},filters:function(){return(l=!l)?(a.c.addClass("filters"),h.filters()):a.c.removeClass("filters"),m.resize(),l},caman:function(e,i){var a="#galleryImage";i&&(a=i),o&&!i?e&&e(o):Caman(a,function(){i||(o=this),e&&e(this)})},crop:function(){return p?(p.destroy(),p=null,!1):(f.caman(function(){var e=a.imagesWrapper.find("#galleryImage"),i=e.parent();t=o,n.crop||(n.crop={}),p=new Cropper(e[0],{aspectRatio:n.crop.aspectRatio||null,autoCropArea:n.crop.autoCropArea||.9,crop:function(e){var i=o.width,a=o.height,n={x:e.detail.x/i,y:e.detail.y/a,w:e.detail.width/i,h:e.detail.height/a};d.crop=n},ready:function(){i.find(".cropper-container").addClass(n.crop.style||""),i.find(".cropper-crop-box").append('<div class="applyCrop center" action="apply">\t\t\t\t\t\t\t\t\t<span class="fa fa-check" aria-hidden="true"></span>\t\t\t\t\t\t\t\t</div>'),i.find(".applyCrop").on("click",function(){f.apply("crop"),h.savePanel()})}})}),!0)},camanFilter:function(e,i,a){e.revert(!1),"normal"!=i&&e.newLayer(function(){this.opacity(50),this.copyParent(),this.filter[i]()}),e.render(a)},previewFilter:function(e,i){var a=e.attr("filter"),n=e.attr("imageId");Caman("#"+n,function(){f.camanFilter(this,a,function(){e.animate({opacity:1})})}),e.on("click",function(){f.caman(function(){f.camanFilter(o,a,function(){t=o,d.filter=a,h.savePanel(),m.resize()})})})},applyFilters:function(t,e,r,l){"crop"!=e?"filter"==e&&f.caman(function(e){f.camanFilter(e,t,function(){l&&l()})},r):f.caman(function(e){var i=e.canvas.width,a=e.canvas.height,n={x:t.x*i,y:t.y*a,width:t.w*i,height:t.h*a};e.crop(n.width,n.height,n.x,n.y),e.resize({width:n.width,height:n.height}),e.render(function(){e.resetOriginalPixelData(),e.cropped=!1,e.cropCoordinates={x:0,y:0},e.originalHeight=n.height,e.originalWidth=n.width,e.preScaledHeight=n.height,e.preScaledWidth=n.width,e.resized=!1,r||m.resize(),l&&l()})},r)},apply:function(e,i){e&&d[e]&&(f.applyFilters(d[e],e,i),f[e](),a.c.find('[action="'+e+'"]').removeClass("active"))},close:function(){n.success?(topPreloader(20),n.success(n.images,function(){topPreloader(100),P.closeContainer()})):P.closeContainer()},exit:function(){n.apply&&(f.apply("crop"),f.save(!0)),f.close()},cancel:function(){d={},h.savePanel(),h.image({image:s})},save:function(e){f.checkUpdates()&&(s.original=o.toBase64(),d={},e||(h.savePanel(),h.image({image:s})))},checkUpdates:function(){return!!(d.filter&&"normal"!=d.filter||d.crop)}},m={resize:function(){m.bestFit(a.imagesWrapper.find(".image"),t)},bestFit:function(e,i){var a=e.closest(".imagesAbsWrapper"),n=e.find(".imgWrapper"),t=i.naturalWidth||i.width,r=i.naturalHeight||i.height,l=r/t;console.log("w, h",t,r),e.css("padding-top","0px");var o=e.width(),s=e.height(),c=a.width(),d=a.height();c<o&&(o=c),d<s&&(s=d),o<t&&(r=(t=o)*l),s<=r&&(t=(r=s)/l),console.log(t,r,o,s,e.height(),a.height());var f=(s-r)/2;e.css("padding-top",f+"px"),i.canvas?(console.log(t,r),i.resize({width:t,height:r}),i.render()):(i.width=t,i.height=r,$(i).attr("data-camanwidth",t),$(i).attr("data-camanheight",r),$(i).css("opacity","1")),n.width(t),n.height(r),p&&p.resize({width:t,height:r})},nFormat:function(e){return e<10&&(e="0"+e),e}},u=function(){var e=$(this).attr("action");f[e]()},g=function(){var e=$(this).attr("action"),i=$(this);f[e]()?i.addClass("active"):i.removeClass("active")},h={savePanel:function(){(d.filter&&"normal"!=d.filter||d.crop)&&!n.apply?a.exitPanel.fadeOut(200,function(){a.savePanel.fadeIn(200)}):a.savePanel.fadeOut(200,function(){a.exitPanel.fadeIn(200)})},image:function(i){o=t=null,d={},h.savePanel(),p&&(p.destroy(),p=null,a.editPanel.find('.eitem[action="crop"]').removeClass("active")),a.imageNavigation.find(".number").html(m.nFormat(Number(r)+1)),$(window).off("resize",m.resize),i||(i={}),P.shell({name:"image",el:a.images,inner:html,display:"table",animation:!1,data:{data:n,image:i.image}},function(e){e.el.find("img").imagesLoaded(function(e){t=deep(e,"images.0.img"),s=i.image,m.resize(),$(window).on("resize",m.resize),l&&(l=!l,f.filters()),i.clbk&&i.clbk()})})},filters:function(i){i||(i={}),i.image||(i.image=n.images[r]),a.filters.html(""),resizeFit(i.image.original,80,80,function(e){P.shell({name:"filters",el:a.filters,data:{data:n,image:e,filters:c}},function(e){e.el.find(".preview").each(function(){f.previewFilter($(this),i.image)});var l=e.el.find(".filtersSwipe");swipedetect(l[0],function(e,i,a,n){console.log(l.css("margin-left").replace("px",""));var t=Number(l.css("margin-left").replace("px",""))+Number(1.7*i),r=-l.find(".filtersList").width()+l.closest(".filtersWrapperOvf").width();0<t&&(t=0),t<r&&(t=r),l.css("margin-left",t+"px")})})})}},v=function(){},y=function(){h.image({image:n.images[r],clbk:function(){n.apply&&(f.filters(),f.crop())}})},w=function(e){n.edit?P.nav.api.loadRelations({relations:[{src:"js/vendor/caman.full.min.js",f:"js"},{src:"js/vendor/cropper.js",f:"js"},{src:"css/cropper.min.css",f:"css"}]},e):e&&e()};return{primary:i,getdata:function(e){e({})},destroy:function(){console.log("destroy"),$(window).off("resize",m.resize),a={}},init:function(e){s=t=o=null,l=!1,d={},n=e.essenseData||{},v(),f.initialValue(),(a={}).c=e.el.find("#"+P.map.id),a.imagesWrapper=e.el.find(".imagesWrapper"),a.images=e.el.find(".images"),a.imageNavigation=e.el.find(".imageNavigation"),a.arrows=a.imageNavigation.find(".arrow"),a.editPanel=a.c.find(".editPanel"),a.savePanel=a.c.find(".panel .savePanel"),a.exitPanel=a.c.find(".panel .exitPanel"),a.filters=a.c.find(".filters"),w(function(){y(),a.arrows.on("click",u),a.editPanel.find(".eitem").on("click",g),a.savePanel.find(".sitem").on("click",g),a.exitPanel.find(".sitem").on("click",g),e.clbk(null,e)})},wnd:{class:"allscreen black withoutButtons imageGalleryEdit"}}};return P.run=function(e){var i=P.addEssense(a,n,e);P.init(i,e)},P.stop=function(){_.each(a,function(e){e.destroy()})},P}();"undefined"!=typeof module?module.exports=imageGalleryEdit:(app.modules.imageGalleryEdit={},app.modules.imageGalleryEdit.module=imageGalleryEdit);
 /*_____*/ 
var imageGallery=function(){var u=new nModule,i={},n=function(e){var a,i,n,t=deep(e,"history"),r=null,o=0,s={back:function(){s.prepareImages(),--o<0&&(o=i.images.length-1),p()},next:function(){s.prepareImages(),++o>=i.images.length&&(o=0),p()},initialValue:function(){s.prepareImages(),i.initialValue&&(o=findIndex(i.images,function(e){var a="name";if(i.idName&&(a=i.idName),e[a]==i.initialValue)return!0}))},prepareImages:function(){i.getImages&&(i.images=i.getImages())},prepareImage:function(e,a){i.getImage?i.getImage(e,function(e){a&&a(e)}):a&&a(e)}},m={resize:function(){m.bestFit(a.imagesWrapper.find(".image"),r)},bestFit:function(e,a){var i=e.closest(".imagesAbsWrapper"),n=e.find(".imgWrapper"),t=a.naturalWidth||a.width,r=a.naturalHeight||a.height,o=r/t;e.css("padding-top","0px");var s=e.width(),m=e.height(),g=i.width(),l=i.height();g<s&&(s=g),l<m&&(m=l),s<t&&(r=(t=s)*o),m<=r&&(t=(r=m)/o);var d=(m-r)/2;e.css("padding-top",d+"px"),a.width=t,a.height=r,$(a).attr("data-camanwidth",t),$(a).attr("data-camanheight",r),$(a).animate({opacity:1}),n.width(t),n.height(r)},nFormat:function(e){return e<10&&(e="0"+e),e}},g=function(){if(!n){var e=$(this).attr("action");s[e]()}},l=function(e){a.imageNavigation.find(".number").html(m.nFormat(o+1)),$(window).off("resize",m.resize),e||(e={}),u.shell({name:"image",el:a.images,inner:html,display:"table",data:{data:i,image:e.image}},function(e){e.el.find("img").imagesLoaded(function(e){a.c.removeClass("loading"),n=!1,(r=deep(e,"images.0.img"))&&(m.resize(),$(window).on("resize",m.resize))})})},d=function(){},p=function(){a.c.addClass("loading"),n=!0;var e=i.images[o];u.app.nav.api.history.addParameters({num:o.toString()}),s.prepareImage(e,function(e){l({image:e})})};return{primary:t,getdata:function(e){e({})},destroy:function(){r=null,$(window).off("resize",m.resize),n=!1,console.log("DESTROY"),u.app.nav.api.history.removeParameters(["i"]),u.app.nav.api.history.removeParameters(["num"]),a={}},init:function(e){r=null,n=!1,i=e.essenseData||{},d(),s.initialValue(),(a={}).c=e.el.find("#"+u.map.id),a.imagesWrapper=e.el.find(".imagesWrapper"),a.images=e.el.find(".images"),a.imageNavigation=e.el.find(".imageNavigation"),a.arrows=a.imageNavigation.find(".arrow"),i.gid&&u.app.nav.api.history.addParameters({i:i.gid}),p(),a.arrows.on("click",g),e.clbk(null,e)},wnd:{class:"allscreen black withoutButtons imageGallery"}}};return u.run=function(e){var a=u.addEssense(i,n,e);u.init(a,e)},u.stop=function(){_.each(i,function(e){e.destroy()})},u}();"undefined"!=typeof module?module.exports=imageGallery:(app.modules.imageGallery={},app.modules.imageGallery.module=imageGallery);
 /*_____*/ 
var aboutus=function(){var t=new nModule,o={},e=function(n){var u=deep(n,"history"),o=function(){};return{primary:u,getdata:function(n){n({})},destroy:function(){({})},init:function(n){o(),{}.c=n.el.find("#"+t.map.id),n.clbk(null,n)}}};return t.run=function(n){var u=t.addEssense(o,e,n);t.init(u,n)},t.stop=function(){_.each(o,function(n){n.destroy()})},t}();"undefined"!=typeof module?module.exports=aboutus:(app.modules.aboutus={},app.modules.aboutus.module=aboutus);
 /*_____*/ 
var menu=function(){var r=new nModule,t={},i=function(){var i,a=null,t=null,e=new Parameter({type:"VALUES",name:"Localization",id:"localization",defaultValue:app.localization.current().name,possibleValues:app.localization.availableMap("name"),format:{right:!0},_onChange:function(n){var a=app.localization.findByName(n);a&&a.key!=app.localization.key&&app.localization.set(a.key)}}),o=function(){r.app.nav.clbks.history.menu=l.hambclose.click},c=function(){r.app.user.isState(function(n){})},s=function(){if(i.postssearch.offset()){var n=i.postssearch.offset().left,a=i.postssearch.width(),t=n-(i.c.width()-n-a);i.postssearch.width(a+t)}},l={activate:{click:function(){dialog({header:r.app.localization.e("id167"),html:r.app.localization.e("id168"),class:"one",btn1text:r.app.localization.e("id169"),success:function(){r.app.platform.sdk.user.activateWithDialogs(function(n){})}})}},search:{click:function(){i.c.toggleClass("searchactive"),i.c.hasClass("searchactive")&&(i.postssearch.find("input").focus(),s(),a&&(clearTimeout(a),a=null))}},searchinit:{init:function(n){search(i.postssearch,{placeholder:"SEARCH ON POCKETNET...",clbk:function(n){n.find("input").on("blur",function(){a=slowMade(function(){i.c.removeClass("searchactive")},a,200)})},last:{get:function(){return[]},tpl:function(n,a){}},events:{fastsearch:function(n,a){a(null)},search:function(n,a){}}})}},newaccount:{click:function(){r.nav.api.go({href:"registration",history:!0,open:!0})}},ustate:{click:function(){isMobile()&&r.nav.api.go({href:"userpage?id=ustate&report=ustate",history:!0,open:!0})},init:function(a){isMobile()||r.nav.api.load({open:!0,id:"ustate",el:a,inTooltip:!0});var n=function(){r.app.platform.sdk.ustate.attention(1,function(n){n||!r.app.user.validate()?a.removeClass("hidden"):a.addClass("hidden"),r.app.platform.sdk.ustate.me(function(n){n?a.removeClass("disconected"):a.addClass("disconected")})})};n(),r.app.platform.sdk.ustate.clbks.menu=n}},wallets:{click:function(){r.nav.api.go({open:!0,href:"userpage?id=wallet",history:!0})},init:function(o){var a=o.find(".number"),t=!0,i=0,e=function(i,n){var e="good";o.removeClass("hidden"),n<0&&(e="bad"),a.animateNumber({number:n,numberStep:function(n,a){s(),o.addClass(e);var t=Number(i+n).toFixed(8);$(a.elem).text(r.app.platform.mp.coin(t))}},rand(400,1200),function(){o.removeClass(e)})},c=function(a){var n=i;t||void 0===a?(t=!1,r.app.platform.sdk.node.transactions.get.allBalance(function(n){e(n,a),i=n,r.app.platform.sdk.wallet.drawSpendLine(o.find(".numberWrp"))})):(e(n,a),i=n+a)},n=function(n){c(n)};(r.app.platform.sdk.node.transactions.clbks.menu=n)(0)}},signout:{click:function(){r.app.user.signout(),r.app.reload({href:"authorization"})}},signin:{init:function(n){},click:function(){r.nav.api.go({href:"authorization",history:!0,open:!0})}},signup:{init:function(n){},click:function(){r.nav.api.go({href:"registration",history:!0,open:!0})}},hamb:{click:function(){i.c.hasClass("active")?(i.c.removeClass("active"),r.app.actions.onScroll()):(i.c.addClass("active"),r.app.actions.offScroll())}},hambclose:{click:function(){i.c.removeClass("active"),r.app.actions.onScroll()}}};return{getdata:function(n,a){var t={};e.value=app.localization.current().name,t.loc=e,t._SEO=_SEO,a.state,n(t)},destroy:function(){$(window).off("resize",s),delete r.app.platform.sdk.node.transactions.clbks.menu,t&&clearInterval(t),i={}},init:function(n){(i={}).c=n.el.find("#"+r.map.id),i.a=n.el.find(".additionalbar"),i.cart=i.c.find(".cart"),i.likes=i.c.find(".favorites"),i.messagesCount=i.c.find(".dialogs .count"),i.notificationsCount=i.c.find(".notifications .count"),i.walletsAmount=i.c.find(".wallets .amount"),i.notactive=i.c.find(".notactive"),i.currency=i.c.find(".currencyWrapper"),i.postssearch=i.c.find(".postssearch"),console.log("initEventsMENU"),o(),r.app.user.isState(function(n){}),i.c.find("[events]").each(function(){var t=$(this),n=t.attr("events");l[n]&&_.each(l[n],function(n,a){"init"==a?n(t):t.on(a,n)})}),$(window).on("resize",s),ParametersLive([e],i.c),t=setInterval(c,100),n.clbk(null,n)}}};return r.run=function(n){var a=r.addEssense(t,i,n);r.init(a,n)},r.stop=function(){_.each(t,function(n){n.destroy()})},r}();"undefined"!=typeof module?module.exports=menu:(app.modules.menu={},app.modules.menu.module=menu);
 /*_____*/ 
var navigation=function(){var t=new nModule,o={},a=function(n){var i=deep(n,"history"),o=function(){};return{primary:i,getdata:function(n,i){n({})},destroy:function(){({})},init:function(n){o(),{}.c=n.el.find("#"+t.map.id),n.clbk(null,n)}}};return t.run=function(n){var i=t.addEssense(o,a,n);t.init(i,n)},t.stop=function(){_.each(o,function(n){n.destroy()})},t}();"undefined"!=typeof module?module.exports=navigation:(app.modules.navigation={},app.modules.navigation.module=navigation);
 /*_____*/ 
var footer=function(){var t=new nModule,o={},n=function(a){var e,o=deep(a,"history"),n=new Parameter({type:"VALUES",name:"Localization",id:"localization",defaultValue:app.localization.current().name,possibleValues:app.localization.availableMap("name"),possibleValuesLabels:app.localization.availableMap("name"),format:{right:!0},_onChange:function(a){var e=app.localization.findByName(a);e&&e.key!=app.localization.key&&app.localization.set(e.key)}}),i=function(){};return{primary:o,getdata:function(a){var e={};e._SEO=_SEO,e.loc=n,a(e)},destroy:function(){e={}},init:function(a){i(),(e={}).c=a.el.find("#"+t.map.id),ParametersLive([n],e.c),a.clbk(null,a)}}};return t.run=function(a){var e=t.addEssense(o,n,a);t.init(e,a)},t.stop=function(){_.each(o,function(a){a.destroy()})},t}();"undefined"!=typeof module?module.exports=footer:(app.modules.footer={},app.modules.footer.module=footer);
 /*_____*/ 
var support=function(){var r=new nModule,t={},e=function(n){var o,t=deep(n,"history"),e={send:function(){var n=e.values();n?(o.c.removeClass("showError"),topPreloader(20),r.app.platform.sdk.user.support(n,function(){topPreloader(100),dialog({html:r.app.localization.e("contactSuccess"),class:"one"}),$.each(o.inputs,function(){$(this).val("")})})):o.c.addClass("showError")},values:function(){var e={},s=!0;return $.each(o.inputs,function(){var n=$(this),o=n.val(),t=n.attr("systemId");o?e[t]=o:s=!1}),s?e:null}},s=function(){e.send()},u=function(){};return{primary:t,getdata:function(n){n({})},destroy:function(){o={}},init:function(n){u(),(o={}).c=n.el.find("#"+r.map.id),o.send=o.c.find(".send"),o.inputs=o.c.find(".forminput"),o.send.on("click",s),n.clbk(null,n)}}};return r.run=function(n){var o=r.addEssense(t,e,n);r.init(o,n)},r.stop=function(){_.each(t,function(n){n.destroy()})},r}();"undefined"!=typeof module?module.exports=support:(app.modules.support={},app.modules.support.module=support);
 /*_____*/ 
var notifications=function(){var f=new nModule,t={},o=function(n){var o,i=deep(n,"history"),t=function(n,i){"invoice"==i&&f.nav.api.load({open:!0,href:"connection?id="+n+"&invoice=true",history:!0}),"deal"==i&&f.nav.api.load({open:!0,href:"deal?id="+n,history:!0}),f.closeContainer()},e=function(){var n=$(this).attr("type"),i=$(this).attr("id");t(i,n)},a=function(n,i){n||(n={});var t=[];n.seen?n.el=o.seen:n.el=o.new,t=f.app.platform.sdk.notifications.filter("INVOICE",n.seen),console.log(t),t=_.sortBy(t,function(n){return-n.Created}),f.shell({name:"notifications",el:n.el,data:{notifications:t,sdk:f.app.platform.sdk.deals,users:f.app.platform.sdk.users.storage.info}},function(n){0<n.el.find(".notification").length?o.c.find(".empty").fadeOut(1):o.c.find(".empty").fadeIn(1),n.el.find(".notification").on("click",e)})},s=function(){};return{primary:i,getdata:function(i){f.app.platform.sdk.notifications.get(function(n){i({})})},destroy:function(){o={},delete f.app.platform.ws.messages.INVOICE.clbks.notificationsPage},init:function(n){s(),(o={}).c=n.el.find("#"+f.map.id),o.seen=o.c.find(".seenWrapper"),o.new=o.c.find(".newWrapper"),a({seen:!0}),a({}),f.app.platform.ws.messages.INVOICE.clbks.notificationsPage=function(){a()},n.clbk(null,n)},tooltip:{options:{theme:"lighttooltip notificationTolltip",position:"left",zIndex:50,functionPosition:function(n,i,t){return t.coord.top=15,t.coord.left+=10,t}},event:"click"}}};return f.run=function(n){var i=f.addEssense(t,o,n);f.init(i,n)},f.stop=function(){_.each(t,function(n){n.destroy()})},f}();"undefined"!=typeof module?module.exports=notifications:(app.modules.notifications={},app.modules.notifications.module=notifications);
 /*_____*/ 
var panel=function(){var a=new nModule,i={},o=function(n){var e,i=deep(n,"history"),o=function(){a.nav.api.load({open:!0,id:"discussions",el:e.cnt,animation:!1,clbk:function(n,e){}})},t=function(){};return{primary:i,getdata:function(n){n({})},destroy:function(){e={}},init:function(n){t(),(e={}).c=n.el.find("#"+a.map.id),e.cnt=e.c.find(".panelcnt"),o(),n.clbk(null,n)}}};return a.run=function(n){var e=a.addEssense(i,o,n);a.init(e,n)},a.stop=function(){_.each(i,function(n){n.destroy()})},a}();"undefined"!=typeof module?module.exports=panel:(app.modules.panel={},app.modules.panel.module=panel);
 /*_____*/ 
var discussions=function(){var o=new nModule,i={},u=function(n){var s=deep(n,"history"),i=function(){};return{primary:s,getdata:function(n){n({})},destroy:function(){({})},init:function(n){i(),{}.c=n.el.find("#"+o.map.id),n.clbk(null,n)}}};return o.run=function(n){var s=o.addEssense(i,u,n);o.init(s,n)},o.stop=function(){_.each(i,function(n){n.destroy()})},o}();"undefined"!=typeof module?module.exports=discussions:(app.modules.discussions={},app.modules.discussions.module=discussions);
 /*_____*/ 
var authorization=function(){var c=new nModule,a={},t=function(e){var o,t,i,l=deep(e,"history"),n="secondary";l&&(n="primary"),e.inWnd&&(n="window");var a=function(){localStorage.stay="",localStorage.mnemonic,c.app.user.stay=!1},s=new Parameter({type:"BOOLEAN",name:"stay",id:"stay",name:"Stay Signed",_onChange:function(e){console.log(e),e?dialog({html:c.app.localization.e("staysafe"),btn1text:c.app.localization.e("dyes"),btn2text:c.app.localization.e("dno"),fail:function(){s.value=0,s.el.removeAttr("checked"),a()},class:"yesnodialog"}):a()}}),r={login:function(){var e,a={},n=trim(o.login.val());(e=n,bitcoin.bip39.validateMnemonic(e))&&(localStorage.stay=s.value,c.user.stay=s.value,c.user.signin(n,function(e){if(e){var n={};n.href=t.successHref,!n.href&&l&&(n.href=function(){return c.app.user.validate()?"index":"filluser"}),n.nav=t.nav,n.clbk=function(){topPreloader(100);var e=deep(i,"container.close");e&&e(),t.signInClbk&&t.signInClbk()},"_this"==deep(t,"successHref")?c.app.reloadModules(function(){if(c.app.user.validate()){var e=deep(i,"container.close");e&&e(),t.signInClbk&&t.signInClbk()}else c.nav.api.loadSameThis("filluser",a)}):c.app.reload(n)}else dialog({class:"one",header:c.app.localization.e("id98"),html:c.app.localization.e("id99"),btn1text:c.app.localization.e("daccept"),btn2text:c.app.localization.e("dcancel")})}))}};return{primary:l,id:n,getdata:function(e,n){if(n.state&&l)c.nav.api.load({open:!0,href:"index",history:!0});else{s.value=localStorage.stay||0;var a=localStorage.mnemonic||"";s.value||(a=""),e({stay:s,mnemonic:a})}},destroy:function(){o={}},init:function(e){var n,a;(o={}).c=e.el.find("#"+c.map.id),o.login=o.c.find(".loginValue"),o.pwd=o.c.find(".pwdValue"),o.enter=o.c.find(".enter"),o.toRegistration=o.c.find(".toRegistration"),o.forgotPassword=o.c.find(".forgotPassword"),t=e.essenseData||{},n=i=e,o.enter.on("click",r.login),o.toRegistration.on("click",function(){c.nav.api.loadSameThis("registration",n)}),initUpload({el:o.c.find(".uploadFile"),ext:["txt","png"],dropZone:o.c,action:function(e,n){if("png"==e.ext)grayscaleImage(e.base64,function(e){qrscanner.q.callback=function(e){"error decoding QR Code"==e?sitemessage(c.app.localization.e("filedamaged")):(o.login.val(trim(e)),r.login())},qrscanner.q.decode(e)});else{var a=e.base64.split(",")[1],t=b64_to_utf8(a).split("/");t[1]?(o.login.val(trim(t[1])),r.login()):sitemessage(c.app.localization.e("filedamaged"))}}}),o.c.find("input").on("focus",function(){o.c.find(".inputTable").addClass("typeactive")}),o.c.find("input").on("blur",function(){o.c.find(".inputTable").removeClass("typeactive")}),a=parameters(),ParametersLive([s],o.c),a.restore&&r.forgotPassword(),dialog({html:"<p>Pocketnet.app is still under development.</p><p>You may experience outages due to development work. <b>Beta test starts on Jan 3, 2019</b>.</p>",id:"betasign",class:"betasign"}),e.clbk(null,e)},tooltip:{options:{position:"left",functionPosition:function(e,n,a){return a.coord.top=10,a.coord.left+=10,a}},event:"mouseenter"},wnd:{class:"withoutButtons allscreen"}}};return c.run=function(e){var n=c.addEssense(a,t,e);c.init(n,e)},c.stop=function(){_.each(a,function(e){e.destroy()})},c}();"undefined"!=typeof module?module.exports=authorization:(app.modules.authorization={},app.modules.authorization.module=authorization);
 /*_____*/ 
var addaccount=function(){var c=new nModule,o={},t=function(n){var i,o,e=deep(n,"history"),t="secondary";e&&(t="primary"),n.inWnd&&(t="window");var a=function(){var n,e=trim(i.login.val());(n=e,bitcoin.bip39.validateMnemonic(n))&&(o.success&&o.success(e),c.closeContainer())};return{primary:e,id:t,getdata:function(n,e){n({})},destroy:function(){i={}},init:function(n){(i={}).c=n.el.find("#"+c.map.id),i.login=i.c.find(".loginValue"),i.enter=i.c.find(".enter"),o=n.essenseData||{},n,i.enter.on("click",a),initUpload({el:i.c.find(".uploadFile"),ext:["txt","png"],dropZone:i.c,action:function(n,e){if("png"==n.ext)grayscaleImage(n.base64,function(n){qrscanner.q.callback=function(n){"error decoding QR Code"==n?sitemessage(c.app.localization.e("filedamaged")):(i.login.val(trim(n)),a())},qrscanner.q.decode(n)});else{var o=n.base64.split(",")[1],t=b64_to_utf8(o).split("/");t[1]?(i.login.val(trim(t[1])),a()):sitemessage(c.app.localization.e("filedamaged"))}}}),n.clbk(null,n)},tooltip:{options:{position:"left",functionPosition:function(n,e,o){return o.coord.top=10,o.coord.left+=10,o}},event:"mouseenter"},wnd:{class:"withoutButtons allscreen"}}};return c.run=function(n){var e=c.addEssense(o,t,n);c.init(e,n)},c.stop=function(){_.each(o,function(n){n.destroy()})},c}();"undefined"!=typeof module?module.exports=addaccount:(app.modules.addaccount={},app.modules.addaccount.module=addaccount);
 /*_____*/ 
var scheduler=function(){var f=new nModule,t={},n=function(e){var s,r,a=deep(e,"history"),t=[],n=null,i=function(a){return _.find(t,function(e){return e.id==a})},o=function(a){return findIndex(t,function(e){return e.id==a})},d={postInterval:function(){n=setInterval(function(){var e=d.taskForTime();l.time(),e.length&&lazyEach({array:e,sync:!0,action:function(e){var a=e.item;f.app.platform.sdk.node.transactions.get.unspent(function(){d.post(a,function(){e.success()})},null,!0)}})},6e4)},missed:function(e){dialog({html:"You have <b>"+e.length+"</b> missed posts. Do you want to share it?",btn1text:"Yes",btn2text:"No",success:function(){_.each(e,function(e){d.post(e)})},fail:function(){_.each(e,function(e){e.time=null,l.task(e,null,!0)})}})},taskForTime:function(){var a=new Date;return _.filter(t,function(e){if(e.time&&e.ready&&a>e.time&&!e.remove)return!0})},post:function(n,s){if(n.share){var e=n.share.validation();e?(sitemessage(e),d.failPost(n.id),s&&s(!1)):f.app.platform.sdk.pool.dumpKey(r,n.address,function(e){if(e){var a=bitcoin.ECPair.fromPrivateKey(Buffer.from(e,"hex")),t=bitcoin.payments.p2pkh({pubkey:a.publicKey});n.module.post(function(e,a){e?d.successPost(n.id):(sitemessage(a),d.failPost(n.id)),s&&s(e)},{address:t,keys:a})}else sitemessage("noprivateley")})}else console.log("task",n),sitemessage("error"),d.failPost(n.id),s&&s(!1)},add:function(){var e={time:null,id:makeid(),share:new Share,address:f.app.platform.sdk.address.pnet().address,ready:!1};e.share.on.change.scheduler=function(){u.save()},t.push(e),l.task(e),u.save()},remove:function(e){var a=o(e);t.splice(a,1),u.save(),s.c.find('.shareAppendWrapper[t="'+e+'"]').remove()},failPost:function(a){var e=i(a);e.time=null,l.task(e,function(){l.ready();var e=s.c.find('.shareAppendWrapper[t="'+a+'"] .result');e.html('<i class="fas fa-exclamation-circle"></i>'),e.addClass("bad")},!0)},successPost:function(e){i(e).remove=!0;var a=s.c.find('.shareAppendWrapper[t="'+e+'"] .result');a.html('<i class="far fa-check-circle"></i>'),a.addClass("good"),l.ready(),u.save()}},c=function(){var e=$(this).closest(".shareTimeWrapper").attr("task"),a=i(e),t=function(){d.remove(e)};a&&(a.share.validation()?t():dialog({html:"Do you really want to remove this task?",btn1text:"Yes",btn2text:"No",success:t}))},l={tasks:function(e){lazyEach({array:t,action:function(e){var a=e.item;l.task(a,e.success)},sync:!0,all:{success:e}})},task:function(t,n,e){e||s.tasks.append('<div class="shareAppendWrapper" t="'+t.id+'">'),_el=s.tasks.find('.shareAppendWrapper[t="'+t.id+'"]'),f.shell({name:"task",el:_el,data:{task:t}},function(e){e.el.find(".remove").on("click",c);var a=e.el.find('.shareTimeWrapper[task="'+t.id+'"] .shareContainer');f.nav.api.load({open:!0,id:"share",el:a,animation:!1,_id:t.id,essenseData:{daddress:t.address||f.app.platform.sdk.address.pnet().address,dtype:t.ready,share:t.share,exoprtByTime:!0,pack:r||{},time:t.time,notClear:!0,changeArrange:function(){u.save()},selectTime:function(e){t.time=e,l.ready(),u.save()},address:function(e){t.address=e,l.ready(),u.save()},type:function(e){"p"==e&&d.post(t,function(){}),"t"==e&&(t.ready=!0),"w"==e&&(t.ready=!1),l.time(),l.ready(),u.save()}},clbk:function(e,a){t.module=a,n&&n()}})})},time:function(){var e=new Date;s.c.find(".timeCellWrapper .time").html(e.getHours()+":"+e.getMinutes())},ready:function(){var a=new Date,e=_.filter(t,function(e){if(e.time&&e.ready&&a<e.time&&!e.remove)return!0});s.c.find(".activeTasks .count").html(e.length)}},u={save:function(){var e=_.filter(t,function(e){if(!e.remove)return!0}),a=_.map(e,function(e){var a=null;return e.time&&(a=dateToStr(e.time)),{time:a,id:e.id,share:e.share.export(!0),address:e.address,ready:e.ready}});localStorage.tasks=JSON.stringify(a)},load:function(){var e=JSON.parse(localStorage.tasks||"[]");t=_.map(e,function(e){var a=new Share;a.import(e.share),a.on.change.scheduler=function(){u.save()};var t=null;return e.time&&(t=strToDate(e.time)),{time:t,id:e.id,share:a,address:e.address,ready:e.ready||!1}})}};return{primary:a,getdata:function(e){u.load(),e({tasks:t})},destroy:function(){s={},n&&clearInterval(n),n=null},init:function(e){var a,t,n;u.load(),(s={}).c=e.el.find("#"+f.map.id),s.tasks=s.c.find(".shares"),s.add=s.c.find(".addshare"),s.add.on("click",d.add),d.postInterval(),a=f.app.platform.sdk.address.pnet().address,t=f.app.platform.sdk.pool.getPack(a),n=function(){l.tasks();var e=d.taskForTime();l.time(),l.ready(),e.length&&d.missed(e)},t?(r=t[0],f.app.platform.sdk.pool.info(r,function(){n()})):n(),e.clbk(null,e)}}};return f.run=function(e){var a=f.addEssense(t,n,e);f.init(a,e)},f.stop=function(){_.each(t,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=scheduler:(app.modules.scheduler={},app.modules.scheduler.module=scheduler);
 /*_____*/ 
var main=function(){var d=new nModule,e={},i=function(n){var a,i=deep(n,"history"),e=null,t=null,o=function(){isMobile()||d.nav.api.load({open:!0,id:"share",el:a.share,animation:!1,clbk:function(n,a){e&&e.apply()}})},u=function(){d.nav.api.load({open:!0,id:"lenta",el:a.lenta,animation:!1,mid:"main",clbk:function(n,a){t=a,e&&e.apply()}})},l=function(){},c=function(){o()};return{primary:i,authclbk:function(){c(),a.c.find(".bgCaption").removeClass("hidden")},getdata:function(n,a){a.state;n({})},destroy:function(){e&&e.destroy(),t&&t.destroy(),t=e=null},init:function(n){t=e=null,l(),(a={}).c=n.el.find("#"+d.map.id),a.share=a.c.find(".share"),a.lenta=a.c.find(".lentaWrapper"),a.panel=a.c.find(".panel"),u(),d.app.user.isState(function(n){n&&c()})}}};return d.run=function(n){var a=d.addEssense(e,i,n);d.init(a,n)},d.stop=function(){var i=null;return _.each(e,function(n){var a=n.destroy();a&&(i=a)}),i},d.authclbk=function(){_.each(e,function(n){n.authclbk()})},d}();"undefined"!=typeof module?module.exports=main:(app.modules.main={},app.modules.main.module=main);
 /*_____*/ 
var author=function(){var m=new nModule,a={},n=function(e){var o,a,s=deep(e,"history"),n=function(){_.each(c,function(e){e.active=!1,e.module&&e.module.destroy()})},r=function(n){var e=new Unsubscribe;e.address.set(o.address),topPreloader(10),m.sdk.node.transactions.create.commonFromUnspent(e,function(e,s){if(e){var a=deep(app,"platform.sdk.users.storage."+m.user.address.value.toString("hex"));a&&a.removeRelation({adddress:o.address})}topPreloader(100),n(e,s)})},t=function(n){var e=new Subscribe;e.address.set(o.address),topPreloader(10),m.sdk.node.transactions.create.commonFromUnspent(e,function(e,s){if(e){var a=deep(app,"platform.sdk.users.storage."+m.user.address.value.toString("hex"));a&&a.addRelation({adddress:o.address,private:!1})}topPreloader(100),n(e,s)})},i=function(n){var e=new SubscribePrivate;e.address.set(o.address),topPreloader(10),m.sdk.node.transactions.create.commonFromUnspent(e,function(e,s){if(e){var a=deep(app,"platform.sdk.users.storage."+m.user.address.value.toString("hex"));a&&a.addRelation({adddress:o.address,private:!0})}topPreloader(100),n(e,s)})},d=function(){r(function(e,s){e?a.subscribe.removeClass("subscribed"):sitemessage(s)})},u=function(){t(function(e,s){e?a.subscribe.addClass("subscribed"):sitemessage(s)})},l=function(){i(function(e,s){e?a.subscribe.addClass("subscribed"):sitemessage(s)})},c={shares:{name:m.app.localization.e("uposts"),mobile:'<i class="fas fa-align-justify"></i>',id:"shares",render:"lenta",count:function(){return 0}},followers:{name:m.app.localization.e("followers"),mobile:'<i class="fas fa-users"></i>',id:"followers",render:"followers",count:function(){return 0}},following:{name:m.app.localization.e("following"),id:"following",mobile:'<i class="fas fa-user-plus"></i>',render:"following",count:function(){return deep(o,"data.subscribes.length")||0}},settings:{name:m.app.localization.e("settings")+' <i class="fas fa-cog"></i>',mobile:'<i class="fas fa-cog"></i>',id:"settings",href:"userpage?id=test",class:"tosettings",if:function(){if(m.user.isItMe(o.address))return!0}}},p={report:function(e){n(),e.active=!0,m.app.nav.api.history.addParameters({report:e.id}),p[e.render](a.lenta,e),p.menu()},menu:function(s){m.shell({name:"menu",el:a.menu,data:{reports:c},animation:"fadeIn"},function(e){e.el.find(".toReport").on("click",function(){var e=$(this).attr("report");p.report(c[e])}),s&&s()})},userslist:function(e,s,a,n,o){m.nav.api.load({open:!0,id:"userslist",el:e,animation:!1,essenseData:{addresses:s,empty:a,caption:n},clbk:function(e,s){o&&o(e,s)}})},followers:function(e,a){var s=_.map(deep(o,"data.followers")||[],function(e){return e.adddress}),n=m.app.localization.e("anofollowers");m.user.isItMe(o.address)&&(n=m.app.localization.e("aynofollowers")),p.userslist(e,s,n,"Followers",function(e,s){a.module=s})},following:function(e,a){var s=_.map(deep(o,"data.subscribes")||[],function(e){return e.adddress}),n=m.app.localization.e("anofollowing");m.user.isItMe(o.address)&&(n=m.app.localization.e("aynofollowing")),p.userslist(e,s,n,"Following",function(e,s){a.module=s})},lenta:function(e,a){m.nav.api.load({open:!0,id:"lenta",el:e,animation:!1,mid:o.address,essenseData:{author:o.address,byauthor:!0},clbk:function(e,s){a.module=s}})}},f=function(){};return{primary:s,getdata:function(e){o={};var s=parameters();o.address=s.address,m.sdk.users.get(o.address,function(){m.sdk.ustate.get(o.address,function(){m.app.platform.sdk.address.pnet()&&o.address==m.app.platform.sdk.address.pnet().address?c.shares.name=m.app.localization.e("myuposts"):c.shares.name=m.app.localization.e("uposts"),o.data=m.sdk.users.storage[o.address],o.state=m.sdk.ustate.storage[o.address],e({author:o})})})},destroy:function(){n(),a={}},init:function(e){var s;f(),(a={}).c=e.el.find("#"+m.map.id),a.lenta=a.c.find(".lentaWrapper"),a.menu=a.c.find(".usermenu"),a.subscribe=a.c.find(".subscribebuttons"),s=parameters().report||"shares",p.report(c[s]),p.menu(),a.subscribe.find(".subscribe").on("click",u),a.subscribe.find(".unsubscribe").on("click",d),a.subscribe.find(".subscribeprivate").on("click",l),e.clbk(null,e)}}};return m.run=function(e){var s=m.addEssense(a,n,e);m.init(s,e)},m.stop=function(){_.each(a,function(e){e.destroy()})},m}();"undefined"!=typeof module?module.exports=author:(app.modules.author={},app.modules.author.module=author);
 /*_____*/ 
var post=function(){var p=new nModule,t={},a=function(n){var a,o,e=deep(n,"history"),t={additional:function(e,n){n?(e.addClass("showAdditional"),e.find(".subscribeWrapper").fadeIn()):(e.removeClass("showAdditional"),e.find(".subscribeWrapper").fadeOut())},position:function(){var e=($(window).height()-a.wr.height())/2;0<e?a.wr.css("margin-top",e+"px"):a.wr.css("margin-top","0px")},initVideo:function(e){var n=a.c.find(".js-player");n.length&&new Plyr(n[0],{autoplay:!0,resetOnEnd:!0}).on("ready",function(){e&&e()})},like:function(e,t){var n=o.upvote(e);p.sdk.node.transactions.create.commonFromUnspent(n,function(e,n){console.log(e,n),topPreloader(100),e?(dialog({html:"<b>TXID:</b> "+e.txid,class:"one"}),t&&t()):sitemessage(errors.upvote[n])})},complain:function(t){var e=o.complain();p.sdk.node.transactions.create.commonFromUnspent(e,function(e,n){console.log(e,n),topPreloader(100),e?(dialog({html:"<b>TXID:</b> "+e.txid,class:"one"}),t&&t(!0)):(a.postWrapper.addClass("showError"),sitemessage(errors.complain[n]),t&&t())})},unsubscribe:function(e,t){var n=new Unsubscribe;n.address.set(e),topPreloader(10),p.sdk.node.transactions.create.commonFromUnspent(n,function(e,n){topPreloader(100),t(e,n)})},subscribe:function(e,t){var n=new Subscribe;n.address.set(e),topPreloader(10),p.sdk.node.transactions.create.commonFromUnspent(n,function(e,n){console.log(e,n),topPreloader(100),t(e,n)})},subscribePrivate:function(e,t){var n=new SubscribePrivate;n.address.set(e),topPreloader(10),p.sdk.node.transactions.create.commonFromUnspent(n,function(e,n){console.log(e,n),topPreloader(100),t(e,n)})},openGallery:function(e){var n=_.map(o.images,function(e){return{src:e}});p.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:{initialValue:e,idName:"src",images:n}})}},s=function(){p.app.platform.sdk.node.transactions.get.tx(o.txid)},i=function(){var e=$(this).closest(".stars");if(!e.attr("value")){var n=$(this).attr("value");t.stateAction("_this",function(){t.like(n),e.attr("value",n),e.addClass("liked"),_scrollTo(e)})}},r=function(){dialog({html:"Do yor really want to complain on this post?",btn1text:"Yes",btn2text:"No",success:function(){a.share.addClass("complained"),topPreloader(30),t.complain(function(e){topPreloader(100),e||n.removeClass("hidden")})}})},d=function(){var e=$(this).attr("i");t.openGallery(e)},c={empty:function(){p.shell({name:"empty",el:a.share},function(e){t.position()})},images:function(e){var n=a.c.find(".image"),t=a.c.find(".images");!t.hasClass("active")&&n.length&&t.length?n.imagesLoaded({background:!0},function(s){"a"!=o.settings.v&&_.each(s.images,function(e,n){var t=e.img,a=$(s.elements[n]).closest(".imagesWrapper"),o=a.width();a.height(),t.width,t.height;a.height(o*(t.height/t.width))}),t.addClass("active"),n.addClass("active"),e&&e()}):e&&e()},share:function(n){p.shell({turi:"lenta",name:"share",el:a.share,data:{share:o,all:!0}},function(e){t.position(),a.wr.addClass("active"),c.url(function(){t.position(),c.urlContent(function(){t.position(),t.initVideo(),c.images(function(){t.position(),n&&n()})})})})},url:function(n){var e=o.url,t=p.app.platform.sdk.remote.storage[e];p.shell({turi:"share",name:"url",el:a.c.find(".url"),data:{url:e,og:t,share:o}},function(e){var t=e.el.find("img");e.el.find("img").imagesLoaded({background:!0},function(e){_.each(e.images,function(e,n){e.isLoaded?$(t[n]).addClass("active"):$(t[n]).closest(".image").css("display","none")}),n&&n()})})},urlContent:function(n){var e=o.url;if(e){var t=p.app.platform.parseUrl(e),a=p.app.platform.sdk.remote.storage[e];e&&!a?"youtube"==t.type||"vimeo"==t.type?n&&n():p.app.platform.sdk.remote.get(e,function(e){e?c.url(n):n&&n()}):n&&n()}else n&&n()}},l=function(){};return{primary:e,getdata:function(e,n){var t=deep(n,"settings.essenseData.share");if(o=null,t&&!(o=p.app.platform.sdk.node.shares.storage.trx[t])){var a=_.find(p.sdk.node.transactions.temp.share,function(e){return e.txid==t});(o=new pShare)._import(a),o.temp=!0,o.address=p.app.platform.sdk.address.pnet().address}e({})},destroy:function(){a={},p.app.nav.api.history.removeParameters(["s"])},init:function(e){l(),(a={}).c=e.el.find("#"+p.map.id),a.share=a.c.find(".share"),a.wr=a.c.find(".postWrapper"),a.c.on("click",".stars i",i),a.c.on("click",".complain",r),a.c.on("click",".image",d),a.c.on("click",".txid",s),o?c.share():c.empty(),p.app.nav.api.history.addParameters({s:o.txid}),e.clbk(null,e)},wnd:{class:"withoutButtons postwindow",close:function(){p.app.nav.api.history.removeParameters(["s"])}}}};return p.run=function(e){var n=p.addEssense(t,a,e);p.init(n,e)},p.stop=function(){_.each(t,function(e){e.destroy()})},p}();"undefined"!=typeof module?module.exports=post:(app.modules.post={},app.modules.post.module=post);
 /*_____*/ 
var userslist=function(){var f=new nModule,s={},t=function(e){var s,t,n=deep(e,"history"),i=[],o=!1,r=0,u=function(){$(window).scrollTop()+$(window).height()>$(document).height()-400&&!t&&!o&&c()},d=function(e,n){f.shell({name:"users",el:s.users,data:{addresses:e,commonkey:"subscribes"},inner:append},function(e){n&&n()})},a=function(e,n){t||(t=!0,topPreloader(80),f.sdk.users.get(e,function(){t=!1,topPreloader(100),n&&n()}))},c=function(e){var n=_.filter(i,function(e,n){if(10*r<=n&&n<10*(r+1))return!0});n.length?(a(n,function(){d(n,e)}),r++):o=!0},l=function(){};return{primary:n,getdata:function(e,n){r=0,t=o=!1;var s={};i=deep(n.settings,"essenseData.addresses")||[],s.addresses=i,s.empty=deep(n.settings,"essenseData.empty"),s.caption=deep(n.settings,"essenseData.caption"),e(s)},destroy:function(){window.removeEventListener("scroll",u),s={}},init:function(e){l(),(s={}).c=e.el.find("#"+f.map.id),s.users=s.c.find(".users"),c(function(){window.addEventListener("scroll",u)}),e.clbk(null,e)}}};return f.run=function(e){var n=f.addEssense(s,t,e);f.init(n,e)},f.stop=function(){_.each(s,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=userslist:(app.modules.userslist={},app.modules.userslist.module=userslist);
 /*_____*/ 
var ustate=function(){var c=new nModule,n={},o=function(t){var n,o,e=deep(t,"history"),a=makeid(),i={profileInfo:{vis:"profileInfo",name:c.app.localization.e("sprofile"),bad:function(){return!c.app.user.validate()}},post:{key:"post",vis:"scale",name:c.app.localization.e("spc"),bad:function(t){if(t<=2)return!0}},score:{key:"score",vis:"scale",name:c.app.localization.e("ssc"),bad:function(t){if(t<=8)return!0}},reputation:{key:"reputation",vis:"number",name:c.app.localization.e("srep"),bad:function(t){return!1}}},s=function(e){c.shell({name:"uscnt",el:n.c,data:{mestate:o,metrics:i}},function(t){e&&e()})},u=function(e){var t=i;i.profileInfo.bad()&&(t={profileInfo:i.profileInfo,reputation:i.reputation}),c.shell({name:"ustatecontent",el:n.ustatecontent,data:{metrics:t,mestate:o}},function(t){e&&e()})},p=function(){},r=function(){c.app.platform.sdk.ustate.me(function(t){o=t,console.log("mestate",o),s(function(){n.ustatecontent=n.c.find(".ustatecontent"),u()})})};return{primary:e,getdata:function(t){t({})},destroy:function(){n={},delete c.app.platform.sdk.ustate.clbks[a]},init:function(t){p(),(n={}).c=t.el.find("#"+c.map.id),(c.app.platform.sdk.ustate.clbks[a]=r)()},tooltip:{options:{minWidth:380,position:"left",functionPosition:function(t,e,n){return n.coord.top=10,n.coord.left+=10,n},theme:"tooltipster-light zindex ustatetooltip"}}}};return c.run=function(t){var e=c.addEssense(n,o,t);c.init(e,t)},c.stop=function(){_.each(n,function(t){t.destroy()})},c}();"undefined"!=typeof module?module.exports=ustate:(app.modules.ustate={},app.modules.ustate.module=ustate);