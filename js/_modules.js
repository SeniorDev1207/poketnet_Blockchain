
 /*_____*/ 
var page404=function(){var t=new nModule,o={},u=function(n){var e=deep(n,"history"),o=function(){};return{primary:e,getdata:function(n){n({})},destroy:function(){({})},init:function(n){o(),{}.c=n.el.find("#"+t.map.id),n.clbk(null,n)}}};return t.run=function(n){var e=t.addEssense(o,u,n);t.init(e,n)},t.stop=function(){_.each(o,function(n){n.destroy()})},t}();"undefined"!=typeof module?module.exports=page404:(app.modules.page404={},app.modules.page404.module=page404);
 /*_____*/ 
var anothersite=function(){var i=new nModule,t={},o=function(n){var e=deep(n,"history"),t=function(){};return{primary:e,getdata:function(n,e){n({link:e.settings.essenseData.link})},destroy:function(){({})},init:function(n){t(),{}.c=n.el.find("#"+i.map.id),n.clbk(null,n)},wnd:{header:"Another site",class:"transparent small anothersite"}}};return i.run=function(n){var e=i.addEssense(t,o,n);i.init(e,n)},i.stop=function(){_.each(t,function(n){n.destroy()})},i}();"undefined"!=typeof module?module.exports=anothersite:(app.modules.anothersite={},app.modules.anothersite.module=anothersite);
 /*_____*/ 
var terms=function(){var i=new nModule,e={},o=function(n){var t,e=deep(n,"history"),o=function(){i.shell({name:i.app.localization.key,el:t.c,data:{}},function(n){})},u=function(){};return{primary:e,getdata:function(n){n({})},destroy:function(){t={}},init:function(n){u(),(t={}).c=n.el.find("#"+i.map.id),o(),n.clbk(null,n)},wnd:{class:"withoutButtons allscreen black a100"}}};return i.run=function(n){var t=i.addEssense(e,o,n);i.init(t,n)},i.stop=function(){_.each(e,function(n){n.destroy()})},i}();"undefined"!=typeof module?module.exports=terms:(app.modules.terms={},app.modules.terms.module=terms);
 /*_____*/ 
var token=function(){var a=new nModule,n={},o=function(e){var t=deep(e,"history"),o=function(){var e=parameters().token||null;return{type:parameters().type||null,token:e}};return{primary:t,getdata:function(t){var n=o();if("activate"!=n.type)a.app.platform.ws.addBlock();else{var e=a.app.platform.ws.messages.CUSTOMER.ACTIVE;delete e.clbks.successDialog,e.clbks.success=function(){var e=deep(a,"app.modules.menu.module");e&&e.restart()}}a.app.platform.sdk.tokens.check(n.token,function(e){n.result=e,t(n)})},destroy:function(){a.app.platform.ws.removeBlock(),{}},init:function(e){o(),{}.c=e.el.find("#"+a.map.id),e.clbk(null,e)}}};return a.run=function(e){var t=a.addEssense(n,o,e);a.init(t,e)},a.stop=function(){_.each(n,function(e){e.destroy()})},a}();"undefined"!=typeof module?module.exports=token:(app.modules.token={},app.modules.token.module=token);
 /*_____*/ 
var usersettings=function(){var u=new nModule,t={},o=function(n){var e,t,o=deep(n,"history"),s=function(){u.shell({name:"options",el:e.options,data:{composed:t.c}},function(n){ParametersLive(t.o,n.el)})},i=function(){};return{primary:o,getdata:function(n){t=u.app.platform.sdk.usersettings.compose();n({})},destroy:function(){e={}},init:function(n){i(),(e={}).c=n.el.find("#"+u.map.id),e.options=e.c.find(".options"),s(),n.clbk(null,n)}}};return u.run=function(n){var e=u.addEssense(t,o,n);u.init(e,n)},u.stop=function(){_.each(t,function(n){n.destroy()})},u}();"undefined"!=typeof module?module.exports=usersettings:(app.modules.usersettings={},app.modules.usersettings.module=usersettings);
 /*_____*/ 
var messenger=function(){var k=new nModule,a={},t=function(a){var n,t,c,e=deep(a,"history"),r=function(e){n.c.addClass("toChat"),h.chat(e)},o=function(e){var s=k.app.platform.clientrtc.rtchttp,a=0,t=deep(s,"storage.chat."+e);return t&&(a=t.messages.unreaded),a},i=function(){var e=$(this).closest(".chat").attr("chat");r(e)},s=function(){n.c.addClass("toNewChat"),c=[],h.userslist()},l=function(){n.c.removeClass("toNewChat"),n.c.removeClass("toChat")},u=function(){var e=$(this);e.toggleClass("active");var s=e.attr("address");e.hasClass("active")?c.push(s):removeEqual(c,s)},d=function(){if(c.length){var e=_.sortBy(c,function(e){return e});e.unshift(k.app.platform.sdk.address.pnet().address);var s=_.reduce(e,function(e,s){return e+""+s},""),a=k.app.platform.sdk.chats.add(bitcoin.crypto.hash256(s).toString("hex"),"messenger");a.users=_.clone(e),k.app.platform.sdk.chats.save(),k.app.platform.sdk.messenger.getChat(a),t=k.app.platform.sdk.chats.get("messenger"),g(),r(a.id)}else dialog({html:"You must select at least one user",class:"one"})},f=function(e,s){k.app.platform.sdk.users.get(e,s)},p=function(e){k.app.platform.clientrtc.rtchttp;k.app.platform.clientrtc.rtchttp.info.allchats(function(){e&&e()})},h={chat:function(t){k.shell({name:"chat",el:n.chat,data:{chatid:t}},function(e){var s=k.app.platform.sdk.chats.storage[t],a={open:!0,href:"mchat",animation:!1,history:!0,history:!1};a.el=e.el.find(".chatWrapper"),a.essenseData={view:"buildin",chat:s,destroyClbk:function(){openedChat=null,l()}},a.clbk=function(e,s){openedChat=s},k.nav.api.load(a)})},chats:function(e,s){k.app.platform.sdk.chats.info(e,function(){k.shell({name:"chats",el:n.chats,data:{chats:e}},function(e){e.el.find(".chatBody").on("click",i),s&&s()})})},userslist:function(){var s=[],e=deep(k.app,"platform.sdk.users.storage."+k.app.platform.sdk.address.pnet().address);_.each(deep(e,"subscribes")||[],function(e){s.push(e.adddress)}),_.each(deep(e,"subscribers")||[],function(e){s.push(e)}),s=_.uniq(s),f(s,function(){k.shell({name:"userslist",el:n.userslist,data:{list:s}},function(e){e.el.find(".addressTable").on("click",u)})})},newmessages:function(e,s){var a=n.chats.find('[chat="'+e+'"] .newMessages');o(e)?k.shell({name:"newmessages",el:a,data:{count:o(e)},display:"table-cell"},function(e){s&&s()}):(a.css("display","none"),s&&s())},newmessagesAll:function(e){lazyEach({array:_.toArray(t),action:function(e){h.newmessages(e.item.id,e.success)},all:{success:function(){e&&e()}}})}},m=function(){},g=function(){h.chats(t,function(){p(function(){h.newmessagesAll()})})};return{primary:e,getdata:function(e){var s={};t=k.app.platform.sdk.chats.get("messenger"),k.loadTemplate({name:"newmessages"},function(){e(s)})},destroy:function(){delete k.app.platform.sdk.messenger.clbks.messenger,n={}},init:function(e){m(),(n={}).c=e.el.find("#"+k.map.id),n.newChat=n.c.find(".newMessage"),n.back=n.c.find(".back"),n.messengerSearch=n.c.find(".messengerSearch"),n.usersSearch=n.c.find(".usersSearch"),n.createChat=n.c.find(".createChat"),n.userslist=n.c.find(".usersListWrapper"),n.chats=n.c.find(".mchatsContent"),n.chat=n.c.find(".currentChat"),n.newChat.on("click",s),n.back.on("click",l),n.createChat.on("click",d),search(n.messengerSearch,{placeholder:"Search",clbk:function(e){},events:{fastsearch:function(e,s){s(null)},search:function(e,s){}}}),search(n.usersSearch,{icon:'<i class="fas fa-users"></i> Recievers',class:"recievers",clbk:function(e){},collectresults:!0,events:{fastsearch:function(e,s){s(["asdads","asdasd","assaddss"])},search:function(e,s){}}}),k.app.platform.sdk.messenger.clbks.messenger=function(e,s){"chat"==e&&(t=k.app.platform.sdk.chats.get("messenger"),g()),"message"==e&&h.newmessages(s.id,a.success)},g(),e.clbk(null,e)}}};return k.run=function(e){var s=k.addEssense(a,t,e);k.init(s,e)},k.stop=function(){_.each(a,function(e){e.destroy()})},k}();"undefined"!=typeof module?module.exports=messenger:(app.modules.messenger={},app.modules.messenger.module=messenger);
 /*_____*/ 
var articles=function(){var f=new nModule,n={},e=function(a){var t,n=deep(a,"history"),e=function(){f.nav.api.load({open:!0,href:"article?aid="+makeid(),inWnd:!0,history:!0,essenseData:{save:function(t){f.app.platform.sdk.articles.storage||(f.app.platform.sdk.articles.storage=[]),_.find(f.app.platform.sdk.articles.storage,function(a){if(t.id==a.id)return!0})||f.app.platform.sdk.articles.storage.unshift(t),f.app.platform.sdk.articles.save()},close:function(){d.articles()},complete:function(){f.closeContainer()},closeContainer:function(){f.closeContainer()}}})},i=function(a){f.nav.api.load({open:!0,href:"article?aid="+a.id,inWnd:!0,history:!0,essenseData:{art:a,save:function(a){f.app.platform.sdk.articles.save()},close:function(){d.articles()},complete:function(){f.closeContainer()},closeContainer:function(){f.closeContainer()}}})},r=function(a){removeEqual(f.app.platform.sdk.articles.storage,{id:a}),t.c.find('.art[art="'+a+'"]').remove(),f.app.platform.sdk.articles.save(),d.ini()},o=function(){var a=$(this).closest(".art").attr("art");dialog({html:"Do You really want to remove this article?",btn1text:f.app.localization.e("dyes"),btn2text:f.app.localization.e("dno"),class:"zindex",success:function(){r(a)}})},s=function(){e()},c=function(){var t=$(this).closest(".art").attr("art"),a=_.find(f.app.platform.sdk.articles.storage,function(a){return a.id==t});i(a)},l=function(){f.nav.api.load({open:!0,href:"author?address="+f.app.user.address.value.toString("hex"),history:!0}),f.closeContainer()},d={ini:function(){f.app.platform.sdk.articles.storage.length?t.c.removeClass("initial"):t.c.addClass("initial")},articles:function(){d.ini(),f.shell({name:"articles",el:t.articles.find(".artwrapper"),data:{articles:f.app.platform.sdk.articles.storage}},function(a){a.el.find(".artcnt").on("click",c),a.el.find(".remove").on("click",o)})}},p=function(){};return{primary:n,auto:function(){var t=parameters(),a=null;t.marticle&&!f.app.nav.wnds.article&&(t.aid&&(a=_.find(f.app.platform.sdk.articles.storage,function(a){return a.id==t.aid})),a?i(a):e())},getdata:function(a){a({})},destroy:function(){t={}},init:function(a){p(),(t={}).c=a.el.find("#"+f.map.id),t.articles=t.c.find(".articles"),t.add=t.c.find(".add"),t.add.on("click",s),t.c.find(".top").on("click",l),d.articles(),a.clbk(null,a)},wnd:{class:"allscreen a100 article "}}};return f.run=function(a){var t=f.addEssense(n,e,a);f.init(t,a)},f.stop=function(){_.each(n,function(a){a.destroy()})},f}();"undefined"!=typeof module?module.exports=articles:(app.modules.articles={},app.modules.articles.module=articles);
 /*_____*/ 
var help=function(){var l=new nModule,a={},o=function(e){var a,n,o,t=deep(e,"history"),i={roadmap:[{d:"February 2019",n:"Social Network Beta Test Starts",r:!0},{d:"March 2019",n:"Windows Desktop App",r:!0},{d:"March 2019",n:"Search users, posts",r:!1},{d:"March 2019",n:"Buy Pocketcoin for Bitcoin, Litecoin on pocketnet.app",r:!1},{d:"April 2019",n:"Linux/Mac Desktop Apps",r:!1},{d:"May 2019",n:"Android/iPhone Apps",r:!1},{d:"June 2019",n:"Chinese, French, German, Russian, Spanish versions",r:!1},{d:"July 2020",n:"Peer-to-peer encrypted chat, including group chat",r:!1},{d:"August 2020",n:"Full synchronization between desktop and mobile device",r:!1},{d:"October 2020",n:"Decentralized reputation platform and crypto store",r:!1}]},c=function(e){o&&(o.destroy(),o=null),a.menuitem.removeClass("active"),a.c.find('.tipitem[page="'+e+'"]').addClass("active"),n=e,p.save(),r[e]?r[e](e):r.page(e)},d=function(){var e=$(this).attr("page");c(e)},r={faq:function(n){this.page(n,function(e){console.log("PAGE",n),l.nav.api.load({open:!0,id:"faq",el:e.find(".faqWrapper"),clbk:function(e,n){console.log("EXTERNAL",n),o=n}})})},videos:function(e){this.page(e,function(e){l.nav.api.load({open:!0,id:"lenta",el:e.find(".lenta"),animation:!1,mid:"videos",essenseData:{byauthor:!0,notscrollloading:!0,txids:["ad9067c72a7be97c1752a00566940f372e5b526291278cf9bc203b99f81bbaf0","df4064b9e2c8b311fd097804f36802ceb68337dca396bfdea732c0f94c977a3a","986a6acba795482894876ac87440124e176cc02cff40558a3ec3d423850e2e93"]},clbk:function(e,n){o=n}})})},page:function(e,n){l.shell({name:e,el:a.page,data:{c:i}},function(e){n&&n(e.el)})}},p={save:function(){l.app.nav.api.history.addParameters({page:n})},load:function(){n=parameters().page||"faq"}};return{primary:t,getdata:function(e){p.load();e({})},destroy:function(){console.log("help"),o&&(o.destroy(),o=null),a={}},init:function(e){p.load(),(a={}).c=e.el.find("#"+l.map.id),a.page=a.c.find(".page"),a.menuitem=a.c.find(".tipitem"),a.menuitem.on("click",d),c(n),e.clbk(null,e)}}};return l.run=function(e){var n=l.addEssense(a,o,e);l.init(n,e)},l.stop=function(){_.each(a,function(e){e.destroy()})},l}();"undefined"!=typeof module?module.exports=help:(app.modules.help={},app.modules.help.module=help);
 /*_____*/ 
var video=function(){var d=new nModule,i={},o=function(e){var a,r,n=deep(e,"history"),c=[{key:"311925017",width:560,height:315,source:"vimeo",loc:{en:{title:"Pocketnet - Decentralized Social Network on the Blockchain",id:"311925017",description:"Pocketnet is a fully decentralized publishing and social platform. Based on the blockchain technology, it runs on a set of computers around the world, not controlled by any single entity.No corporation behind it to take fruits of your labor. All advertising revenue is split equally between node operators and those who publish highly rated content. Your subscribers always see your content, unless they decide to unsubscribe. Pocketnet is self-policed by the platform participants with good reputation. Nobody records your keystrokes, viewing habits or searches. Join The New Peer-To-Peer Internet: Go to Pocketnet.app and join for free now"}}}],l={validateEmail:function(e){return!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)},saveEmail:function(e,n,i,o){o||(o="4");var t={Email:e,Name:n};t.Action||(t.Action="ADDTOMAILLIST"),t.TemplateID||(t.TemplateID=o),$.ajax({type:"POST",url:"https://pocketnet.app/Shop/AJAXMain.aspx",data:t,dataType:"json",success:function(){i&&i()}})},joinSuccess:function(e){d.fastTemplate("joinSuccess",function(e){dialog({html:e,class:"one joinbeta",btn1text:"Okay"})},{email:e})},join:function(e){d.fastTemplate("join",function(e){dialog({html:e,wrap:!0,success:function(e){var n=e.el.find(".email"),i=e.el.find(".name"),o=n.val(),t=i.val();if(l.validateEmail(o)&&t)return l.saveEmail(o,t),l.joinSuccess(o,t),!0},clbk:function(e){var i=e.find(".name"),o=e.find(".email"),n=function(){var e=o.val(),n=i.val();return l.validateEmail(e)&&n?(t.removeClass("disabled"),!0):(t.addClass("disabled"),!1)},t=e.find(".btn1");t.addClass("disabled"),t.on("click",function(){}),i.focus(),i.on("change",n),i.on("keyup",n),o.on("change",n),o.on("keyup",n)},class:"one joinbeta"})},{action:e})}},i=function(){l.join()},s=function(){var e='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+r.id+'?rel=0&amp;autoplay=1" frameborder="0" allow="autoplay;" allowfullscreen></iframe>';"vimeo"==r.source&&(e='<iframe src="https://player.vimeo.com/video/'+r.id+'?title=0&byline=0&portrait=0" width="560" height="315" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),a.c.find(".container").html(e),r.description&&a.c.find(".description").html(r.description)};return{primary:n,getdata:function(e,n){var i=parameters();i.v||(i.v="311925017");var o,t,a=_.find(c,function(e){return e.key==i.v}),l=function(){d.nav.api.load({open:!0,href:"page404",history:!0})};a?(d.app.el.menu.addClass("logoview").addClass("landing"),r=_.clone(a),o=r,(t=deep(o,"loc.en")||null)&&(o=_.extend(o,t)),r.id?e(r):l()):l()},destroy:function(){a={},d.app.el.menu.removeClass("logoview").removeClass("landing"),d.app.el.app.removeClass("videoActive")},init:function(t){(a={}).c=t.el.find("#"+d.map.id),a.container=a.c.find(".container"),a.c.click&&a.c.click(),d.app.el.app.addClass("videoActive"),a.c.find(".joinbeta").on("click",i),setTimeout(function(){var e,n,i,o;s(),e=r,n=a.container,i=n.width(),o=i/(e.width/e.height),n.find("iframe").width(i),n.find("iframe").height(o),a.container.find("iframe").fadeIn(200),a.c.find(".description").fadeIn(200),t.clbk(null,t)},100)},animation:!1}};return d.run=function(e){var n=d.addEssense(i,o,e);d.init(n,e)},d.stop=function(){_.each(i,function(e){e.destroy()})},d}();"undefined"!=typeof module?module.exports=video:(app.modules.video={},app.modules.video.module=video);
 /*_____*/ 
var embeding20=function(){var f=new nModule,a={},i=function(e){var t,n=deep(e,"history"),i={},l="Max 6 Images Allowed",a=function(e,n){if(t.c){var a=t.c.find("."+e+"Part .partPreloader");n?a.fadeIn(200):a.fadeOut(200)}},u=function(e,n){var a={};5<i.images.value.length?sitemessage(l):(a.id=makeid(),a.src=e,i.images.value.push(a),c.images()),n&&n()},o=function(e,n){var a={};resize(e,1080,1080,function(e){if(e.split(",")[1]){5<i.images.value.length?sitemessage(l):(a.id=makeid(),a.base64=e,i.images.value.push(a),c.images())}n&&n()})},r=function(e){removeEqual(i.images.value,{id:e}),c.images()},s=function(){var e=$(this).closest(".imageContainer").attr("value");r(e)},c={url:function(n,a){var i=f.app.platform.parseUrl(n),l=f.app.platform.sdk.remote.storage[n];f.shell({name:"url",inner:html,el:t.url,data:{url:n,og:l,remove:!0},turi:"share"},function(e){if(n&&!l)if("youtube"==i.type||"vimeo"==i.type)Plyr.setup(".js-player");else f.app.platform.sdk.remote.get(i.url,function(e){e&&c.url(n)});a&&a()})},images:function(e,n){e||(e=i.images.value),e.length&&f.shell({name:"images",el:t.images,data:{images:e}},function(e){e.el.find(".remove").on("click",s),e.el.find(".image").each(function(){}),n&&n()})}},d=function(){};return{primary:n,getdata:function(e){(i={url:new Parameter({type:"URL",id:"url",placeholder:"Add link to external site",value:""}),images:{isValid:function(){return!0},value:[]}}).url._onChange=function(e){a("left",!0),checkUrlForImage(e)?u(e,function(){a("left",!1),i.url.value="",i.url.el.val("")}):c.url(e,function(){a("left",!1)})},i.images.value=[],i.url.value="",e({options:i})},destroy:function(){t={}},init:function(e){d(),(t={}).c=e.el.find("#"+f.map.id),t.upload=t.c.find(".upload"),t.images=t.c.find(".images"),t.error=t.c.find(".error"),t.url=t.c.find(".url"),ParametersLive([i.url],t.c),initUpload({el:t.upload,ext:["png","jpeg","jpg"],dropZone:t.c.closest(".wnd"),multiple:!0,action:function(e,n){o(e.base64,n)},onSuccess:function(){t.c.addClass("right"),t.c.removeClass("left")}}),e.clbk(null,e)},wnd:{header:"",buttons:{close:{class:"close",html:'<i class="fa fa-times"></i> Close',fn:function(e,n){}}},close:function(){},success:function(e,n){wndObj=n,wnd=e},noInnerScroll:!0,class:"embeding20"}}};return f.run=function(e){var n=f.addEssense(a,i,e);f.init(n,e)},f.stop=function(){_.each(a,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=embeding20:(app.modules.embeding20={},app.modules.embeding20.module=embeding20);
 /*_____*/ 
var accounts=function(){var u=new nModule,s={},n=function(a){var n,d,o,e=deep(a,"history"),s=function(o){u.app.platform.sdk.pool.expand(d,function(a){var e=_.indexOf(a.addresses,o);if(-1<e){var s=a.private[e],n=u.app.user.stay;u.app.user.signout(),u.app.user.stay=n,u.user.signin(s,function(a){u.app.reloadLight(function(){var a="userpage?id=accounts&s="+makeid(),e=!1;u.app.user.validate()||(a="filluser",e=!0),u.app.nav.api.load({open:!0,href:a,history:e})})})}})},p=function(a){u.app.platform.sdk.pool.remove(d,a),u.app.platform.sdk.pool.save(),c.addresses()},t=function(){2<=deep(d,"addresses.length")?sitemessage("You have reached a maximum of 2 accounts. No more can be added "):u.app.nav.api.load({open:!0,id:"addaccount",inWnd:!0,essenseData:{success:function(e){u.app.platform.sdk.pool.expand(d,function(a){u.app.platform.sdk.pool.add(a,e,function(a,e){e?dialog({html:u.app.localization.e("aused"),class:"one"}):u.app.platform.sdk.pool.export(a,function(a){u.app.platform.sdk.pool.current.packs[o]=a,u.app.platform.sdk.pool.save(),d=a,u.app.platform.sdk.pool.info(a,function(){c.addresses()})})})})}}})},r=function(){var a=$(this).closest(".addressTable").attr("address");p(a)},i=function(){var a=$(this).closest(".addressTable").attr("address");s(a)},c={addresses:function(e){u.shell({name:"addresses",el:n.addresses,data:{current:u.app.platform.sdk.address.pnet().address,pack:d},animation:"fadeIn"},function(a){a.el.find(".remove").on("click",r),a.el.find(".ncurrent .label").on("click",i),e&&e()})}},l=function(){};return{primary:e,getdata:function(a){o=d=null;a({})},destroy:function(){n={}},init:function(a){var e,s;l(),(n={}).c=a.el.find("#"+u.map.id),n.addresses=n.c.find(".addresses"),n.c.find(".add").on("click",t),e=u.app.platform.sdk.address.pnet().address,(s=u.app.platform.sdk.pool.getPack(e))?(d=s[0],o=s[1],u.app.platform.sdk.pool.info(d,function(){c.addresses()})):sitemessage("ERROR"),a.clbk(null,a)}}};return u.run=function(a){var e=u.addEssense(s,n,a);u.init(e,a)},u.stop=function(){_.each(s,function(a){a.destroy()})},u}();"undefined"!=typeof module?module.exports=accounts:(app.modules.accounts={},app.modules.accounts.module=accounts);
 /*_____*/ 
var embeding=function(){var g=new nModule,a={},i=function(e){var s,i,n,a=deep(e,"history"),t=null,o={url:new Parameter({type:"URL",id:"url",placeholder:"Add link to external site",onType:!0}),images:{isValid:function(){return!0},value:[]}},l={url:"Url doesn't valid",imagesLength:"Max 6 Images Allowed"},u={check:function(e){if(o[e].isValid(o[e].value))return s.error.html(""),!0;s.error.html(l[e])},removeImage:function(e){removeEqual(o.images.value,{id:e}),r.images(),s.error.html("")},add:{url:function(){u.check("url")&&(i.added(o.url.value),g.closeContainer())},images:function(){if(u.check("images")){var n=[];_.each(o.images.value,function(e){e.base64&&n.push(e.base64)}),i.added(n),g.closeContainer()}}},slowUploadGif:function(e,n){e.id=makeid(),e.slow=!0,e.base64=e.base64,o.images.value.push(e),n&&n()},slowUpload:function(n,a){resize(n.base64,1080,1080,function(e){e.split(",")[1]&&(n.id=makeid(),n.slow=!0,n.base64=e,o.images.value.push(n)),a&&a()})},upload:function(a,i){resize(a.base64,1080,1080,function(e){var n=e.split(",");if(n[1]){5<o.images.value.length?s.error.html(l.imagesLength):(s.error.html(""),a.id=makeid(),a.loading=!0,o.images.value.push(a),r.images(),g.ajax.run({type:"POST",imgur:!0,data:{Action:"image",image:n[1]},success:function(e){a.loading=!1,a.src=deep(e,"data.link")||"https://pocketnet.app/img/imagenotuploaded.jpg",r.images(),i&&i()},fail:function(){a.src="https://pocketnet.app/img/imagenotuploaded.jpg",r.images(),i&&i()}}))}})}},c=function(){var e=$(this).attr("action")||t;u.add[e]()},d=function(){var e=$(this).closest(".imageContainer").attr("value");u.removeImage(e)},r={images:function(e,n){e||(e=o.images.value),e.length&&g.shell({name:"images",el:s.images,data:{images:e}},function(e){e.el.find(".remove").on("click",d),e.el.find(".image").each(function(){$(this)}),n&&n()})}},m=function(){};return{primary:a,getdata:function(e,a){t=a.settings.essenseData.type,i=a.settings.essenseData.on,n=a.settings.essenseData,a.settings.essenseData.subtype||null,a.settings.essenseData.storage&&_.each(o,function(e,n){e.value=a.settings.essenseData.storage[n],"images"==n&&(e.value=[])}),e({type:t,options:o})},destroy:function(){s={}},init:function(e){m(),(s={}).c=e.el.find("#"+g.map.id),s.error=s.c.find(".error"),s.action=s.c.find(".action"),s.upload=s.c.find(".upload"),s.images=s.c.find(".imagesMi"),function(){if(s.c.find("input").focus().on("change",c),s.action.on("click",c),"images"==t){if(r.images(),n.value){var e={base64:n.value};u.slowUpload(e)}initUpload({el:s.upload,ext:["png","jpeg","jpg","gif"],dropZone:s.c.closest(".wnd"),multiple:!0,action:function(e,n){"gif"==e.ext?u.slowUploadGif(e,n):u.slowUpload(e,n)},onSuccess:function(){u.add.images()}})}else ParametersLive([o[t]],s.c)}(),e.clbk(null,e)},wnd:{header:"",buttons:{close:{class:"close",html:'<i class="fa fa-check"></i> Finish',fn:function(e,n){u.add[t]()}}},close:function(){},success:function(e,n){wndObj=n,wnd=e},offScroll:!0,noInnerScroll:!0,class:"embeding"}}};return g.run=function(e){var n=g.addEssense(a,i,e);g.init(n,e)},g.stop=function(){_.each(a,function(e){e.destroy()})},g}();"undefined"!=typeof module?module.exports=embeding:(app.modules.embeding={},app.modules.embeding.module=embeding);
 /*_____*/ 
var toppanel=function(){var i=new nModule,t={},a=function(e){var a,n=deep(e,"history"),o={index:"index",sub:"index?r=sub",recommended:"index?r=recommended"},r=function(){var e=_.toArray(o),n=parameters(i.app.nav.current.completeHref,!0).r||"index",t=new Parameter({type:"VALUES",name:"Contents",id:"contents",possibleValues:e,possibleValuesLabels:["All Posts","Your Pocket","Top posts"],defaultValue:o[n]});return t.value=o[n],t._onChange=function(e){var n=e;i.nav.api.load({open:!0,href:n,history:!0})},t},t=function(n){var t=r();i.app.user.isState(function(e){i.shell({name:"menu",el:a.menu,data:{pathname:n,state:e,mobile:isTablet(),selector:t}},function(e){ParametersLive([t],e.el)})})},p=function(){};return{primary:n,getdata:function(e){e({})},destroy:function(){delete i.app.nav.clbks.history.toppanel,a={}},init:function(e){p(),(a={}).c=e.el.find("#"+i.map.id),a.menu=a.c.find(".panelitems"),i.app.nav.clbks.history.toppanel=function(e){t(e)},t(i.app.nav.current.href),e.clbk(null,e)}}};return i.run=function(e){var n=i.addEssense(t,a,e);i.init(n,e)},i.stop=function(){_.each(t,function(e){e.destroy()})},i}();"undefined"!=typeof module?module.exports=toppanel:(app.modules.toppanel={},app.modules.toppanel.module=toppanel);
 /*_____*/ 
var s=function(){var v=new nModule,t={},n=function(s){var n,a,u,r,i,e=deep(s,"history"),t=0,o=10,l="list",c={clickNext:function(){h("users",t+=o,30),c.displayArrows()},clickArrow:function(s){"left"==s&&(t-=o)<0&&(t=0),"right"==s&&((t+=o)>=u.users.count&&(t=u.users.count-1),h("users",t,o)),c.slideCarousel()},displayArrows:function(){0<t?c.displayArrow("left",!0):c.displayArrow("left",!1),t+o<u.users.count?(c.displayArrow("right",!0),c.displayNext(!0)):(c.displayArrow("right",!1),c.displayNext(!1))},displayNext:function(s){s?n.unext.addClass("active"):n.unext.removeClass("active")},displayArrow:function(s,e){var t=n.ea;s&&(t=n["u"+s]),e?t.addClass("active"):t.removeClass("active")},slideCarousel:function(){var s=n.c.find(".user").width(),e=t*s;n.userslist.css("margin-left","-"+e+"px"),c.displayArrows()},applyCarousel:function(){if("list"==l){var s=n.c.find(".user").width(),e=n.c.find(".userslistwrapper").width();o=Math.min(Number((e/s).toFixed(0)),10),n.c.find(".user").width((e/o).toFixed(0)+"px"),n.userslist.width((u.users.data.length*(e/o)).toFixed(0)+1),c.slideCarousel()}else n.userslist.css("margin-left","0px"),n.userslist.css("width","auto"),n.c.find(".user").css("width","auto")},changeUsersView:function(){"list"==l?l="full":(l="list",t=0),n.users.attr("view",l),c.applyCarousel()}},d=function(){var s=$(this).attr("arrow");c.clickArrow(s)},p=function(){c.clickNext()},f={users:function(s,e){v.shell({name:"userslist",el:n.users.find(".userslist"),data:{users:s},inner:append,bgImages:{clbk:function(s){$(s.elements[0]).addClass("active")}}},function(s){"list"==l&&c.applyCarousel(),e&&e(s)})},posts:function(){var s=!1;v.nav.api.load({open:!0,id:"lenta",el:n.lenta,animation:!1,mid:"search",essenseData:{search:!0,searchValue:a,loader:function(t){var e=function(s){var e=v.app.platform.sdk.node.shares.transform(s);t&&t(e,null,{count:10})};s?h("posts",u.posts.data.length,10,function(s){e(s)}):(s=!0,e(u.posts.data))}},clbk:function(s,e){i=e}})}},h=function(e,s,t,n){var a=u[e].data.length,r=u[e].count;if(!(s+t<=a)){if(s<a){var i=a-s;s=a,t-=i}r<s+t&&(t=r-s),t<=0||m[e](function(s){n?n(s):f[e](s)},s,t)}},m={users:function(e,s,t){v.app.platform.sdk.search.get(a,"users",s,t,r,function(s){e(s.data)})},posts:function(e,s,t){v.app.platform.sdk.search.get(a,"posts",s,t,r,function(s){e(s.data)})}},w=function(){};return{primary:e,getdata:function(t){var n={};i=null,a=(parameters().ss||"").replace("tag:","#");var s=deep(v,"app.modules.menu.module.showsearch");s&&s(a),v.app.platform.sdk.search.get(a,"all",0,10,null,function(s,e){r=e,u=s,n.result=s,n.value=a,t(n)})},destroy:function(s){if(s!=v.app.nav.current.href){var e=deep(v,"app.modules.menu.module.closesearch");e&&e()}i&&i.destroy(),i=null,n={}},init:function(s){t=0,o=10,w(),(n={}).c=s.el.find("#"+v.map.id),n.users=n.c.find(".users"),n.userslist=n.c.find(".userslist"),n.posts=n.c.find(".posts"),n.uleft=n.c.find(".uleft"),n.uright=n.c.find(".uright"),n.ua=n.c.find(".arrow"),n.showmore=n.c.find(".showmore"),n.unext=n.c.find(".nextpage"),n.lenta=n.c.find(".lentasearch"),n.ua.on("click",d),n.showmore.on("click",c.changeUsersView),n.unext.on("click",p),deep(u,"users.data.length")&&f.users(u.users.data),deep(u,"posts.data.length")&&f.posts(),s.clbk(null,s)}}};return v.run=function(s){var e=v.addEssense(t,n,s);v.init(e,s)},v.stop=function(e){_.each(t,function(s){s.destroy(e)})},v}();"undefined"!=typeof module?module.exports=s:(app.modules.s={},app.modules.s.module=s);
 /*_____*/ 
var navigation=function(){var o=new nModule,e={},t=function(n){var e,a=deep(n,"history"),t=function(n){var a=localStorage.lentakey||"index";"index"!=a&&(a="index?r="+a),o.shell({name:"menu",inner:html,el:e.menu,data:{href:n,lentakey:a}},function(n){})},i=function(){};return{primary:a,getdata:function(n,a){n({})},destroy:function(){delete o.app.nav.clbks.history.navigation,e={}},init:function(n){i(),(e={}).c=n.el.find("#"+o.map.id),e.menu=e.c.find(".nmenu"),o.app.nav.clbks.history.navigation=function(n){t(o.app.nav.get.pathname())},n.clbk(null,n),t(o.app.nav.get.pathname())}}};return o.run=function(n){var a=o.addEssense(e,t,n);o.init(a,n)},o.stop=function(){_.each(e,function(n){n.destroy()})},o}();"undefined"!=typeof module?module.exports=navigation:(app.modules.navigation={},app.modules.navigation.module=navigation);
 /*_____*/ 
var imagegallery=function(){var p=new nModule,i={},n=function(e){var a,i,n,t=deep(e,"history"),r=null,m=0,o={back:function(){o.prepareImages(),--m<0&&(m=i.images.length-1),u()},next:function(){o.prepareImages(),++m>=i.images.length&&(m=0),u()},initialValue:function(){o.prepareImages(),i.initialValue&&(m=findIndex(i.images,function(e){var a="name";if(i.idName&&(a=i.idName),e[a]==i.initialValue)return!0}))},prepareImages:function(){i.getImages&&(i.images=i.getImages())},prepareImage:function(e,a){i.getImage?i.getImage(e,function(e){a&&a(e)}):a&&a(e)}},s={resize:function(){s.bestFit(a.imagesWrapper.find(".image"),r)},bestFit:function(e,a){var i=e.closest(".imagesAbsWrapper"),n=e.find(".imgWrapper"),t=a.naturalWidth||a.width,r=a.naturalHeight||a.height,m=r/t;e.css("padding-top","0px");var o=e.width(),s=e.height(),g=i.width(),l=i.height();g<o&&(o=g),l<s&&(s=l),o<t&&(r=(t=o)*m),s<=r&&(t=(r=s)/m);var d=(s-r)/2;e.css("padding-top",d+"px"),a.width=t,a.height=r,$(a).attr("data-camanwidth",t),$(a).attr("data-camanheight",r),$(a).animate({opacity:1}),n.width(t),n.height(r)},nFormat:function(e){return e<10&&(e="0"+e),e}},g=function(){if(!n){var e=$(this).attr("action");o[e]()}},l=function(e){a.imageNavigation.find(".number").html(s.nFormat(m+1)),$(window).off("resize",s.resize),e||(e={}),p.shell({name:"image",el:a.images,inner:html,display:"table",data:{data:i,image:e.image}},function(e){e.el.find("img").imagesLoaded(function(e){a.c.removeClass("loading"),n=!1,(r=deep(e,"images.0.img"))&&(s.resize(),$(window).on("resize",s.resize))})})},d=function(){},u=function(){a.c.addClass("loading"),n=!0;var e=i.images[m];p.app.nav.api.history.addParameters({num:m.toString()}),o.prepareImage(e,function(e){l({image:e})})};return{primary:t,parametersHandler:function(){var e=parameters().num;void 0!==e&&(m=Number(e),o.prepareImages(),u())},getdata:function(e){e({})},destroy:function(){r=null,$(window).off("resize",s.resize),n=!1,p.app.nav.api.history.removeParameters(["i"]),p.app.nav.api.history.removeParameters(["num"]),a={}},init:function(e){r=null,n=!1,i=e.essenseData||{},d(),o.initialValue(),(a={}).c=e.el.find("#"+p.map.id),a.imagesWrapper=e.el.find(".imagesWrapper"),a.images=e.el.find(".images"),a.imageNavigation=e.el.find(".imageNavigation"),a.arrows=a.imageNavigation.find(".arrow"),u(),a.arrows.on("click",g),e.clbk(null,e)},wnd:{class:"allscreen black withoutButtons imageGallery"}}};return p.run=function(e){var a=p.addEssense(i,n,e);p.init(a,e)},p.stop=function(){_.each(i,function(e){e.destroy()})},p}();"undefined"!=typeof module?module.exports=imagegallery:(app.modules.imagegallery={},app.modules.imagegallery.module=imagegallery);
 /*_____*/ 
var footer=function(){var t=new nModule,o={},n=function(a){var e,o=deep(a,"history"),n=new Parameter({type:"VALUES",name:"Localization",id:"localization",defaultValue:app.localization.current().name,possibleValues:app.localization.availableMap("name"),possibleValuesLabels:app.localization.availableMap("name"),format:{right:!0},_onChange:function(a){var e=app.localization.findByName(a);e&&e.key!=app.localization.key&&app.localization.set(e.key)}}),i=function(){};return{primary:o,getdata:function(a){var e={};e._SEO=_SEO,e.loc=n,a(e)},destroy:function(){e={}},init:function(a){i(),(e={}).c=a.el.find("#"+t.map.id),ParametersLive([n],e.c),a.clbk(null,a)}}};return t.run=function(a){var e=t.addEssense(o,n,a);t.init(e,a)},t.stop=function(){_.each(o,function(a){a.destroy()})},t}();"undefined"!=typeof module?module.exports=footer:(app.modules.footer={},app.modules.footer.module=footer);
 /*_____*/ 
var aboutus=function(){var t=new nModule,o={},e=function(n){var u=deep(n,"history"),o=function(){};return{primary:u,getdata:function(n){n({})},destroy:function(){({})},init:function(n){o(),{}.c=n.el.find("#"+t.map.id),n.clbk(null,n)}}};return t.run=function(n){var u=t.addEssense(o,e,n);t.init(u,n)},t.stop=function(){_.each(o,function(n){n.destroy()})},t}();"undefined"!=typeof module?module.exports=aboutus:(app.modules.aboutus={},app.modules.aboutus.module=aboutus);
 /*_____*/ 
var send=function(){var d=new nModule,a={},t=function(n){var e,a,t=deep(n,"history"),i={stateAction:function(e,a){d.app.user.isState(function(n){n?a():d.nav.api.load({open:!0,id:"authorization",inWnd:!0,essenseData:{loginText:d.app.localization.e("llogin"),successHref:e,signInClbk:function(){a&&a()}}})})},send:function(){i.stateAction("_this",function(){d.nav.api.load({open:!0,history:!0,href:"userpage?id=wallet&action=send&address="+a.address+"&amount="+a.amount})})}},s=function(){},o=function(){var n;e.c.find(".send").on("click",i.send),e.am.on("change",function(){var n=$(this).val();a.amount=n}),0<(n={alias:"numeric",groupSeparator:",",radixPoint:".",digits:6,digitsOptional:!1,autoGroup:!0,allowMinus:!1}).digits&&(n.placeholder="0.000000"),e.am.inputmask(n),parameters().setammount||e.am.blur()};return{primary:t,getdata:function(n){var e=parameters();a={},e.address&&bitcoin.address.fromBase58Check(e.address)&&(a.address=e.address),e.amount&&(a.amount=Number(e.amount)),e.label&&(a.label=clearScripts(donottrustLink(findAndReplaceLink(e.label,!0)))),e.message&&(a.message=clearScripts(donottrustLink(findAndReplaceLink(hexDecode(e.message,!0))))),a.amount&&a.address&&a.message?n(a):d.nav.api.load({open:!0,href:"page404",history:!0})},destroy:function(){e={}},init:function(n){s(),(e={}).c=n.el.find("#"+d.map.id),e.am=e.c.find(".amredit"),o(),n.clbk(null,n)}}};return d.run=function(n){var e=d.addEssense(a,t,n);d.init(e,n)},d.stop=function(){_.each(a,function(n){n.destroy()})},d}();"undefined"!=typeof module?module.exports=send:(app.modules.send={},app.modules.send.module=send);
 /*_____*/ 
var support=function(){var r=new nModule,t={},e=function(n){var o,t=deep(n,"history"),e={send:function(){var n=e.values();n?(o.c.removeClass("showError"),topPreloader(20),r.app.platform.sdk.user.support(n,function(){topPreloader(100),dialog({html:r.app.localization.e("contactSuccess"),class:"one"}),$.each(o.inputs,function(){$(this).val("")})})):o.c.addClass("showError")},values:function(){var e={},s=!0;return $.each(o.inputs,function(){var n=$(this),o=n.val(),t=n.attr("systemId");o?e[t]=o:s=!1}),s?e:null}},s=function(){e.send()},u=function(){};return{primary:t,getdata:function(n){n({})},destroy:function(){o={}},init:function(n){u(),(o={}).c=n.el.find("#"+r.map.id),o.send=o.c.find(".send"),o.inputs=o.c.find(".forminput"),o.send.on("click",s),n.clbk(null,n)}}};return r.run=function(n){var o=r.addEssense(t,e,n);r.init(o,n)},r.stop=function(){_.each(t,function(n){n.destroy()})},r}();"undefined"!=typeof module?module.exports=support:(app.modules.support={},app.modules.support.module=support);
 /*_____*/ 
var notifications=function(){var p=new nModule,t={},o=function(i){var s,t,o,n=deep(i,"history"),e="",f=function(){var n=s.c.find(".notification:not(.seen)");n.length&&(t=slowMade(function(){if(p.app.platform.sdk.notifications.seenall(),0<n.length){n.addClass("seen")}},t,50))},a=function(){p.nav.api.go({href:"userpage?id=notifications&report=notifications",history:!0,open:!0}),p.closeContainer()},c=function(){f()},l=function(o,n){o||(o={});var e=o.notifications||p.app.platform.sdk.notifications.storage.notifications;if(o.el=s.new,o.el){var i=p.app.platform.currentTime();o.seenFilter&&(e=_.filter(e,function(n){if(!n.seen||i-n.seen<86400)return!0}));var a=-e.length+(o.notifications||p.app.platform.sdk.notifications.storage.notifications).length;e=_.sortBy(e,function(n){return Number(-n.nblock)}),p.shell({name:"notifications",el:o.el,data:{notifications:e,ws:p.app.platform.ws},inner:prepend},function(t){var n="fadeOut",i=".empty";a&&s.c.find(".more").html("("+a+")"),p.app.platform.sdk.notifications.storage.notifications.length?(i=".emptyNew",0==o.el.find(".notification").length&&(n="fadeIn")):n="fadeIn",_.each(e,function(n){var i=p.app.platform.ws.messages[n.msg].fastMessageEvents;i&&i(n,{el:t.el.find('.notification[notification="'+n.txid+'"]')})}),s.c&&s.c.find(i)[n](1),f()})}},r=function(){};return{primary:n,getdata:function(n){n({})},destroy:function(){s={},e="",t&&clearTimeout(t),t=null,o.removeEventListener("scroll",c),delete p.app.platform.sdk.notifications.clbks.added["notifications"+e]},init:function(n){r(),(s={}).c=n.el.find("#"+p.map.id),s.new=s.c.find(".newWrapper"),"tooltip"==n.insert?(o=s.c.find(".nabsContentWrapper")[0],e="tt"):(e="",o=window),jinel=$(o),s.c.find(".showAll").on("click",a),o.addEventListener("scroll",c),n.insert,console.log(i,"PPPP"),l({seenFilter:i.inTooltip}),p.app.platform.sdk.notifications.clbks.added["notifications"+e]=function(n){l({notifications:n})},n.clbk(null,n)},tooltip:{options:{theme:"lighttooltip notificationTolltip",position:"left",zIndex:50,functionPosition:function(n,i,t){return t.coord.top=15,t.coord.left+=10,t}},event:"click"}}};return p.run=function(n){var i=p.addEssense(t,o,n);p.init(i,n)},p.stop=function(){_.each(t,function(n){n.destroy()})},p}();"undefined"!=typeof module?module.exports=notifications:(app.modules.notifications={},app.modules.notifications.module=notifications);
 /*_____*/ 
var addaccount=function(){var c=new nModule,o={},t=function(n){var i,e,o=deep(n,"history"),t="secondary";o&&(t="primary"),n.inWnd&&(t="window");var a=function(){var n=trim(i.login.val());e.success&&e.success(n),c.closeContainer()};return{primary:o,id:t,getdata:function(n,e){n({})},destroy:function(){i={}},init:function(n){(i={}).c=n.el.find("#"+c.map.id),i.login=i.c.find(".loginValue"),i.enter=i.c.find(".enter"),e=n.essenseData||{},n,i.enter.on("click",a),i.login.on("focus",function(){i.c.find(".inputTable").addClass("typeactive")}),i.login.on("blur",function(){i.c.find(".inputTable").removeClass("typeactive")}),initUpload({el:i.c.find(".uploadFile"),notexif:!0,ext:["txt","png","jpeg","jpg"],dropZone:i.c,action:function(n,e){if("png"==n.ext||"jpeg"==n.ext||"jpg"==n.ext)grayscaleImage(n.base64,function(n){qrscanner.q.callback=function(n){"error decoding QR Code"==n?sitemessage(c.app.localization.e("filedamaged")):(i.login.val(trim(n)),a())},qrscanner.q.decode(n)});else{var o=n.base64.split(",")[1],t=b64_to_utf8(o).split("/");t[1]?(i.login.val(trim(t[1])),a()):sitemessage(c.app.localization.e("filedamaged"))}}}),n.clbk(null,n)},tooltip:{options:{position:"left",functionPosition:function(n,e,o){return o.coord.top=10,o.coord.left+=10,o}},event:"mouseenter"},wnd:{class:"withoutButtons allscreen"}}};return c.run=function(n){var e=c.addEssense(o,t,n);c.init(e,n)},c.stop=function(){_.each(o,function(n){n.destroy()})},c}();"undefined"!=typeof module?module.exports=addaccount:(app.modules.addaccount={},app.modules.addaccount.module=addaccount);
 /*_____*/ 
var authorization=function(){var c=new nModule,o={},a=function(e){var i,a,t,l=deep(e,"history"),n="secondary";l&&(n="primary"),e.inWnd&&(n="window");var r=new Parameter({type:"BOOLEAN",name:"stay",id:"stay",name:"Stay Signed",_onChange:function(e){e||(console.log("stayH"),localStorage.stay="0",localStorage.mnemonic,c.app.user.stay=0)}}),s={login:function(){var o={},e=trim(i.login.val());localStorage.stay=boolToNumber(r.value).toString(),c.user.stay=r.value,c.user.signin(e,function(e){if(e){var n={};n.href=a.successHref,!n.href&&l&&(n.href=function(){return c.app.user.validate()?"index":"filluser"}),n.nav=a.nav,n.clbk=function(){topPreloader(100);var e=deep(t,"container.close");e&&e(),a.signInClbk&&a.signInClbk()},"_this"==deep(a,"successHref")?c.app.reloadModules(function(){if(c.app.user.validate()){var e=deep(t,"container.close");e&&e(),a.signInClbk&&a.signInClbk()}else c.nav.api.loadSameThis("filluser",o)}):c.app.reload(n)}else dialog({class:"one",header:c.app.localization.e("id98"),html:c.app.localization.e("id99"),btn1text:c.app.localization.e("daccept"),btn2text:c.app.localization.e("dcancel")})})}};return{primary:l,id:n,getdata:function(e,n){if(n.state&&l)c.nav.api.load({open:!0,href:"index",history:!0});else{r.value=numberToBool(c.app.user.stay);localStorage.mnemonic;e({stay:r,mnemonic:""})}},destroy:function(){i={}},init:function(e){var n,o;(i={}).c=e.el.find("#"+c.map.id),i.login=i.c.find(".loginValue"),i.pwd=i.c.find(".pwdValue"),i.enter=i.c.find(".enter"),i.toRegistration=i.c.find(".toRegistration"),i.forgotPassword=i.c.find(".forgotPassword"),a=e.essenseData||{},n=t=e,i.enter.on("click",s.login),i.toRegistration.on("click",function(){c.nav.api.loadSameThis("registration",n)}),initUpload({el:i.c.find(".uploadFile"),ext:["txt","png","jpeg","jpg"],notexif:!0,dropZone:i.c,action:function(e,n){if("png"==e.ext||"jpeg"==e.ext||"jpg"==e.ext)grayscaleImage(e.base64,function(e){qrscanner.q.debug=!0,qrscanner.q.callback=function(e){console.log(e),"error decoding QR Code"==e?sitemessage(c.app.localization.e("filedamaged")):(i.login.val(trim(e)),s.login())},qrscanner.q.decode(e)});else{var o=e.base64.split(",")[1],a=b64_to_utf8(o).split("/");a[1]?(i.login.val(trim(a[1])),s.login()):sitemessage(c.app.localization.e("filedamaged"))}}}),i.c.find(".loginValue").on("focus",function(){i.c.find(".inputTable").addClass("typeactive")}),i.c.find(".loginValue").on("blur",function(){i.c.find(".inputTable").removeClass("typeactive")}),o=parameters(),ParametersLive([r],i.c),o.restore&&s.forgotPassword(),e.clbk(null,e)},tooltip:{options:{position:"left",functionPosition:function(e,n,o){return o.coord.top=10,o.coord.left+=10,o}},event:"mouseenter"},wnd:{class:"withoutButtons allscreen"}}};return c.run=function(e){var n=c.addEssense(o,a,e);c.init(n,e)},c.stop=function(){_.each(o,function(e){e.destroy()})},c}();"undefined"!=typeof module?module.exports=authorization:(app.modules.authorization={},app.modules.authorization.module=authorization);
 /*_____*/ 
var complain=function(){var h=new nModule,i={},a=function(e){var t,i,a,o,s,n=deep(e,"history"),r={post:[{name:"Sexual content",gid:1,group:[{name:"Graphic sexual activity",id:"1"},{name:"Nudity",id:"2"},{name:"Suggestive, but without nudity",id:"3"},{name:"Content involving minors",id:"4"},{name:"Abusive title or description",id:"5"},{name:"Other sexual content",id:"6"}]},{name:"Violent or repulsive content",gid:2,group:[{name:"Adults fighting",id:"7"},{name:"Physical attack",id:"8"},{name:"Youth violence",id:"9"},{name:"Animal abuse",id:"10"}]},{name:"Hateful or abusive content",gid:3,group:[{name:"Promotes hatred or violence",id:"11"},{name:"Abusing vulnerable individuals",id:"12"},{name:"Bullying",id:"13"},{name:"Abusive title or description",id:"14"}]},{name:"Harmful dangerous acts",gid:4,group:[{name:"Pharmaceutical or drug abuse",id:"19"},{name:"Abuse of fire or explosives",id:"20"},{name:"Suicide or self injury",id:"21"},{name:"Other dangerous acts",id:"22"}]},{name:"Child abuse",id:"23"},{name:"Promotes terrorism",id:"24"},{name:"Spam or misleading",gid:6,group:[{name:"Mass advertising",id:"25"},{name:"Pharmaceutical drugs for sale",id:"26"},{name:"Misleading text",id:"27"},{name:"Misleading thumbnail",id:"28"},{name:"Scams / fraud",id:"29"}]},{name:"Infringes my rights",gid:7,group:[{name:"Infringes my copyright",id:"30"},{name:"Invades my privacy",id:"31"},{name:"Other legal claim",id:"32"}]}]},d=function(n){return _.find(r[i],function(e){return(e.gid||e.id)==n})},l=function(i){var e=a.complain(o);topPreloader(30),h.sdk.node.transactions.create.commonFromUnspent(e,function(e,n){console.log(e,n),topPreloader(100),e?i&&i(!0):(h.app.platform.errorHandler(n,!0),i&&i())})},u=function(){o?t.next.removeClass("disabled"):t.next.addClass("disabled")},c=function(){h.closeContainer()},m=function(){!t.next.hasClass("disabled")&&o&&l(function(e){e&&(h.closeContainer(),s.success&&s.success())})},p=function(){var e=$(this).attr("reason"),n=d(e);n&&($(this).hasClass("active")||(t.c.find(".reason").removeClass("active"),o=null,$(this).addClass("active"),n.group?f.selector(n):o=n.id,u()))},f={reasons:function(){h.shell({name:"reasons",inner:html,el:t.reasons,data:{reasons:r[i]}},function(e){e.el.find(".reason").on("click",p)})},selector:function(e){var n=t.c.find('.reason[reason="'+e.gid+'"] .reasongroupIn'),i=_.map(e.group,function(e){return e.name}),a=_.map(e.group,function(e){return e.id}),s=new Parameter({type:"VALUES",name:e.name,id:e.gid,possibleValues:a,possibleValuesLabels:i,placeholder:"Choose one"});s._onChange=function(e){o=e||null,u()},h.shell({name:"selector",inner:html,el:n,data:{selector:s}},function(e){ParametersLive([s],e.el)})}},g=function(){};return{primary:n,getdata:function(e,n){(o=null,i=deep(n,"settings.essenseData.item")||"post",a=deep(n,"settings.essenseData.obj")||null,s=n.settings.essenseData||{},a)&&e({ess:i})},destroy:function(){t={}},init:function(e){g(),(t={}).c=e.el.find("#"+h.map.id),t.reasons=t.c.find(".reasons"),t.next=t.c.find(".next"),t.c.find(".cancel").on("click",c),t.next.on("click",m),f.reasons(),e.clbk(null,e)},wnd:{class:"withoutButtons transparent small complain"}}};return h.run=function(e){var n=h.addEssense(i,a,e);h.init(n,e)},h.stop=function(){_.each(i,function(e){e.destroy()})},h}();"undefined"!=typeof module?module.exports=complain:(app.modules.complain={},app.modules.complain.module=complain);
 /*_____*/ 
var surveyiframe=function(){var o=new nModule,r={},i=function(e){var n,r=deep(e,"history"),i=function(e){"endsurvey"==(e.originalEvent.data||{}).message&&o.closeContainer()},a=function(){};return{primary:r,getdata:function(e){e({})},destroy:function(){n={}},init:function(e){localStorage.survey1=!0,a(),(n={}).c=e.el.find("#"+o.map.id),$(n.c.find("iframe")[0].contentWindow).on("message",i),e.clbk(null,e)},wnd:{class:"allscreen black surveyiframe"}}};return o.run=function(e){var n=o.addEssense(r,i,e);o.init(n,e)},o.stop=function(){_.each(r,function(e){e.destroy()})},o}();"undefined"!=typeof module?module.exports=surveyiframe:(app.modules.surveyiframe={},app.modules.surveyiframe.module=surveyiframe);
 /*_____*/ 
var ustate=function(){var p=new nModule,e={},i=function(t){var e,i,o,n=deep(t,"history"),a=makeid(),u={profileInfo:{vis:"profileInfo",name:p.app.localization.e("sprofile"),bad:function(){return!p.app.user.validate()},if:function(){if(!o||"inf"==o)return!0}},waitActions:{vis:"waitActions",name:"",bad:function(){return!1},if:function(){if(o&&"inf"!=o)return!0}},post:{key:"post",vis:"scale",name:p.app.localization.e("spc"),bad:function(t){if(t<=2)return!0},if:function(){if(!o)return!0}},score:{key:"score",vis:"scale",name:p.app.localization.e("ssc"),bad:function(t){if(t<=8)return!0},if:function(){if(!o)return!0}},reputation:{key:"reputation",vis:"number",name:p.app.localization.e("srep"),bad:function(t){return!1}}},f=function(n){p.shell({name:"uscnt",el:e.c.find(".mwork"),data:{mestate:i,metrics:u}},function(t){n&&n()})},r=function(n){var t=u;u.profileInfo.bad()&&(t={profileInfo:u.profileInfo,reputation:u.reputation}),p.shell({name:"ustatecontent",el:e.ustatecontent,data:{metrics:t,mestate:i,waitActions:o}},function(t){n&&n()})},s=function(){},c=function(){p.app.platform.sdk.user.waitActions(function(n){p.app.platform.sdk.ustate.me(function(t){o=n,i=t,f(function(){e.ustatecontent=e.c.find(".ustatecontent"),r()})})})};return{primary:n,getdata:function(t){t({})},destroy:function(){e={},delete p.app.platform.sdk.ustate.clbks[a]},init:function(t){s(),(e={}).c=t.el.find("#"+p.map.id),(p.app.platform.sdk.ustate.clbks[a]=c)()},tooltip:{options:{minWidth:380,position:"left",functionPosition:function(t,n,e){return e.coord.top=10,e.coord.left+=10,e},theme:"tooltipster-light zindex ustatetooltip"}}}};return p.run=function(t){var n=p.addEssense(e,i,t);p.init(n,t)},p.stop=function(){_.each(e,function(t){t.destroy()})},p}();"undefined"!=typeof module?module.exports=ustate:(app.modules.ustate={},app.modules.ustate.module=ustate);
 /*_____*/ 
var socialshare=function(){var s=new nModule,t={},a=function(e){var i,t=deep(e,"history"),a={},n=[{n:"Facebook",i:'<i class="fab fa-facebook-f"></i>',t:"facebook",c:"#3b5999"},{n:"Twitter",i:'<i class="fab fa-twitter"></i>',t:"twitter",c:"#55acee"},{n:"VK",i:'<i class="fab fa-vk"></i>',t:"vk",c:"#4c75a3"},{n:"Pinterest",i:'<i class="fab fa-pinterest-p"></i>',t:"pinterest",c:"#bd081c"},{n:"LinkedIn",i:'<i class="fab fa-linkedin-in"></i>',t:"linkedin",c:"#0077B5"},{n:"Reddit",i:'<i class="fab fa-reddit-alien"></i>',t:"reddit",c:"#ff5700"},{n:"Whatsapp",i:'<i class="fab fa-whatsapp"></i>',t:"whatsapp",c:"#075e54"}],c=function(){};return{primary:t,getdata:function(e,i){if((a=i.settings.essenseData||{}).title||(a.title="Pocketnet"),a.text||(a.text="Great news. I gained my independence from social media monopolies, Come join me at pocketnet.app so we can share and chat independently on the blockchain. Join me here"),a.image||(a.image="https://pocketnet.app/img/logobigpadding.png"),!a.url)if("undefined"!=typeof _Electron||window.cordova){var t=(i=window.location.pathname.split("/"))[i.length-1];a.url="https://pocketnet.app/"+t+window.location.search}else a.url="https://pocketnet.app/"+s.app.nav.get.href();e({socials:n,url:a.url,rescue:a.rescue||!1,caption:a.caption})},destroy:function(){i={}},init:function(e){c(),(i={}).c=e.el.find("#"+s.map.id),i.url=i.c.find(".url"),i.c.find(".socialsharebtn").ShareLink({title:a.title,text:a.text,image:a.image,url:a.url,class_prefix:"s_",width:640,height:480}),i.c.find(".copycell").on("click",function(){copyText(i.url.find(".urlcell")),sitemessage(s.app.localization.e("urlsuccesscopied"))}),e.clbk(null,e)},wnd:{header:"Social sharing",class:"allscreen sharingwindow black"}}};return s.run=function(e){var i=s.addEssense(t,a,e);s.init(i,e)},s.stop=function(){_.each(t,function(e){e.destroy()})},s}();"undefined"!=typeof module?module.exports=socialshare:(app.modules.socialshare={},app.modules.socialshare.module=socialshare);
 /*_____*/ 
var panel=function(){var u=new nModule,i={},t=function(n){var e,i=deep(n,"history"),t=null,o=null,a=function(){var n=o.discussions||{};n.view="fixedin",u.nav.api.load({open:!0,id:"discussions",el:e.cnt,animation:!1,essenseData:n,clbk:function(n,e){t=e}})},s=function(){};return{primary:i,getdata:function(n,e){o=e.settings.essenseData||{};n({})},destroy:function(){t&&(t.destroy(),t=null),e={}},init:function(n){s(),(e={}).c=n.el.find("#"+u.map.id),e.cnt=e.c.find(".panelcnt"),a(),n.clbk(null,n)}}};return u.run=function(n){var e=u.addEssense(i,t,n);u.init(e,n)},u.stop=function(){_.each(i,function(n){n.destroy()})},u}();"undefined"!=typeof module?module.exports=panel:(app.modules.panel={},app.modules.panel.module=panel);
 /*_____*/ 
var filluser=function(){var m=new nModule,t={},a=function(e){var i,o,a,n,t=deep(e,"history"),s=null,l={email:{id:"email",prev:function(e){localStorage.uei?p.next():(e(),m.app.platform.sdk.node.transactions.get.allBalance(),m.sdk.users.requestFreeMoney(function(e,n){m.app.platform.sdk.node.transactions.clbks.filluser=function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){0<e&&1==r&&(m.app.platform.m.log("userwisard_money_success"),delete m.app.platform.sdk.node.transactions.clbks.filluser,p.next())})}}))},ret:!1,render:"email",after:function(e,n,t){var a=function(e){return!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)},o=e.find(".uemailinput"),i=e.find(".skip"),s=e.find(".addEmail"),l="";o.focus(),o.on("keyup",function(){l=$(this).val(),a(l)?(s.removeClass("disabled"),i.addClass("hidden"),s.html("Add email and continue")):(s.addClass("disabled"),i.removeClass("hidden"),s.html("Add email"))}),s.on("click",function(){var e=o.val();a(e)&&(m.app.platform.m.log("userwisard_email_add"),p.next(),function(e,n){topPreloader(20);var t={Email:e};t.Action||(t.Action="ADDTOMAILLIST"),t.TemplateID="1005",$.ajax({type:"POST",url:"https://pocketnet.app/Shop/AJAXMain.aspx",data:t,dataType:"json",success:function(){topPreloader(100),n&&n()}})}(localStorage.uei=e,function(){}))}),i.one("click",function(){m.app.platform.m.log("userwisard_email_skip"),p.next()})}},money:{id:"money",prev:function(n){m.app.platform.sdk.ustate.me(function(e){e?m.app.platform.sdk.node.transactions.get.allBalance(function(e){if(0<e)return m.app.platform.m.log("userwisard_money_success"),void p.next();m.app.platform.sdk.node.transactions.clbks.filluser=function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){0<e&&1==r&&(m.app.platform.m.log("userwisard_money_success"),delete m.app.platform.sdk.node.transactions.clbks.filluser,p.next())})},n()}):p.to(4)})},ret:!1,render:"money",after:function(n,t,e){console.log("AFTER"),p.timer(n.find(".time"),e||59,function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){1!=r&&5!=r||(1<e?(m.app.platform.m.log("userwisard_money_success"),p.to(2)):(m.app.platform.m.log("userwisard_modey_delay"),n.find(".subcaption").html(m.app.localization.e("wesentmoneydelay")),l.money.after(n,t,30)))},!0)})}},settings:{id:"settings",prev:function(n){m.app.platform.sdk.ustate.me(function(e){e?(m.app.platform.m.log("userwisard_account"),n()):p.to(4)})},render:"settings",after:function(e,n){},next:!0},welcome:{id:"welcome",prev:function(e){e()},render:"welcome",after:function(e){m.app.platform.m.log("userwisard_success"),e.find(".welcome").on("click",function(){if("_this"==deep(a,"successHref")){var e=deep(n,"container.close");e&&e(),a.signInClbk&&a.signInClbk()}else m.nav.api.go({href:"index",history:!0,open:!0})})}},network:{id:"network",prev:function(e){m.app.platform.m.log("userwisard_network_fail"),e()},render:"network",after:function(e){n&&clearInterval(n);var n=setInterval(function(){m.app.platform.sdk.ustate.me(function(e){e&&(m.app.platform.m.log("userwisard_network_success"),clearInterval(n),p.to(1))})},5e3)}}};l.moneym={id:"moneym",prev:function(e){m.app.platform.sdk.node.transactions.clbks.filluserm=function(){m.app.platform.sdk.node.transactions.get.allBalance(function(e){console.log("AMOUNT< CURRENT",e,r),0<e&&5==r&&(m.app.platform.m.log("userwisard_money_success"),p.to(2))})},e()},ret:l.money.ret,render:"moneym",after:l.money.after};var r=-1,c=["email","money","settings","welcome","network","moneym"],p={to:function(e,n){r=e,p.makeStep(n)},next:function(e){r++,p.makeStep(function(){})},makeStep:function(e){var t=l[c[r]];t&&t.prev(function(){i.c&&(i.c.attr("step",t.id),f.panel(t,function(n){f.step(t,function(e){_scrollTo(e,s),n.find(".elpanel").addClass("active"),t.after(e,n)})}))})},timer:function(a,o,e){var i=new CircularProgress({radius:120,strokeStyle:"#ff1975",lineCap:"round",lineWidth:1,font:"100 56px 'Segoe UI',SegoeUI,'Helvetica Neue',Helvetica,Arial,sans-serif",fillStyle:"#5D5D5D",text:{value:""},initial:{strokeStyle:"#fff",lineWidth:1}});a.find(".circle").html(i.el);var n=function(e){var n=secInTime(e/1e3).split(":");a.find(".t .min").html(n[0]),a.find(".t .sec").html(n[1]),i.options.text={value:""};var t=100*(1-e/(1e3*o));t<0&&(t=0),i.update(t)};timer=new Timer({ontick:function(){n(timer.getDuration())},onend:function(){e&&e()}}),timer.start(o),n(timer.getDuration())}},d=function(){if(!(r<0)){var e=l[c[r]],n=i.c.find('.step[step="'+e.id+'"] .stepBody').closest(".step"),t=i.c.find(".stepsWrapperLine"),a=n.closest(".stepsWrapper").width();i.c.find(".step").width(a),t.css("margin-left","-"+r*a+"px"),t.width(a*c.length)}},f={step:function(e,t){i.c.find(".step").removeClass("active");var n=i.c.find('.step[step="'+e.id+'"] .stepBody'),a=n.closest(".step"),o=i.c.find(".stepsWrapperLine");f[e.render](n,function(e){var n=a.closest(".stepsWrapper").width();i.c.find(".step").width(n),o.css("margin-left","-"+r*n+"px"),o.width(n*c.length),a.closest(".step").addClass("active"),t&&t(e)})},panel:function(e,n){m.shell({name:"panel",el:i.panel,data:{step:e}},function(e){n&&n(e.el)})},email:function(e,n){m.shell({name:"email",el:e,data:{}},function(e){n&&n(e.el)})},welcome:function(e,n){m.shell({name:"welcome",el:e,data:{}},function(e){n&&n(e.el)})},network:function(e,n){m.shell({name:"network",el:e,data:{}},function(e){n&&n(e.el)})},money:function(e,n){m.shell({name:"money",el:e,data:{}},function(e){n&&n(e.el)})},moneym:function(e,n){m.shell({name:"moneym",el:e,data:{}},function(e){n&&n(e.el)})},settings:function(t,a,e){m.nav.api.load({open:!0,id:"test",el:t,essenseData:{wizard:!0,panel:i.panel,success:function(){p.next()}},clbk:function(e,n){o=n,a&&a(t)}})}},u=function(){};return{primary:t,getdata:function(n,e){a=e.settings.essenseData||{},r=-1;var t={steps:l};m.app.user.validate()?m.app.nav.api.load({open:!0,href:"index",history:!0}):m.fastTemplate("panel",function(e){n(t)})},destroy:function(){window.removeEventListener("resize",d),o&&o.destroy(),o=null,i={}},init:function(e){u(),(i={}).c=e.el.find("#"+m.map.id),i.panel=i.c.find(".panelWrapper"),window.addEventListener("resize",d),n=e,p.next(),(s=i.c.closest(".wndcontent")).length||(s=null),e.clbk(null,e)}}};return m.run=function(e){var n=m.addEssense(t,a,e);m.init(n,e)},m.stop=function(){_.each(t,function(e){e.destroy()})},m}();"undefined"!=typeof module?module.exports=filluser:(app.modules.filluser={},app.modules.filluser.module=filluser);
 /*_____*/ 
var about=function(){var p=new nModule,n={},a=function(e){var n,t,a,i=deep(e,"history"),o=null,s=null,c={videoWidth:function(e){var t=560,n=315,a=e.width(),i=a/(t/n);e.find("iframe").width(a),e.find("iframe").height(i)},time:function(){today=new Date,today=Math.floor((t-today)/1e3),tsec=today%60,today=Math.floor(today/60),tsec<0?tsec="00":tsec<10&&(tsec="0"+tsec),tmin=today%60,today=Math.floor(today/60),tmin<0?tmin="00":tmin<10&&(tmin="0"+tmin),thour=today%24,today=Math.floor(today/24),thour<0&&(thour="00"),today<0&&(today="00"),n.days.html(today),n.seconds.html(tsec),n.minutes.html(tmin),n.hours.html(thour)},fixed:function(){var e=$(window).scrollTop();n.main.offset().top+n.main.height()<e?n.fixed.addClass("active"):n.fixed.removeClass("active")},explore:function(){var e=n.c.find(".faq");_scrollToTop(e)},validateEmail:function(e){return!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)},saveEmail:function(e,t,n,a){a||(a="4");var i={Email:e,Name:t};i.Action||(i.Action="ADDTOMAILLIST"),i.TemplateID||(i.TemplateID=a),$.ajax({type:"POST",url:"https://pocketnet.app/Shop/AJAXMain.aspx",data:i,dataType:"json",success:function(){n&&n()}})},joinSuccess:function(e){p.fastTemplate("joinSuccess",function(e){dialog({html:e,class:"one joinbeta",btn1text:"Okay"})},{email:e})},join:function(e){p.fastTemplate("join",function(e){dialog({html:e,wrap:!0,success:function(e){var t=e.el.find(".email"),n=e.el.find(".name"),a=t.val(),i=n.val();if(c.validateEmail(a)&&i)return c.saveEmail(a,i),c.joinSuccess(a,i),!0},clbk:function(e){var n=e.find(".name"),a=e.find(".email"),t=function(){var e=a.val(),t=n.val();return c.validateEmail(e)&&t?(i.removeClass("disabled"),!0):(i.addClass("disabled"),!1)},i=e.find(".btn1");i.addClass("disabled"),i.on("click",function(){}),n.focus(),n.on("change",t),n.on("keyup",t),a.on("change",t),a.on("keyup",t)},class:"one joinbeta"})},{action:e})},whitepaperSuccess:function(){p.fastTemplate("whitepaperSuccess",function(e){dialog({html:e,class:"one joinbeta",btn1text:"Okay"})})},whitepaper:function(){p.fastTemplate("whitepaper",function(e){dialog({html:e,wrap:!0,success:function(e){var t=e.el.find("input").val();if(c.validateEmail(t))return c.saveEmail(t,"",null,"5"),c.whitepaperSuccess(),!0},clbk:function(e){var t=function(){var e=$(this).val();return c.validateEmail(e)?(n.removeClass("disabled"),!0):(n.addClass("disabled"),!1)},n=e.find(".btn1");n.addClass("disabled"),n.on("click",function(){});var a=e.find("input");a.focus(),a.on("change",t),a.on("keyup",t)},class:"one joinbeta"})})}},l=function(){c.whitepaper()},d=function(){c.join()},r=function(){var e=$(this).attr("answer");e&&s.send(e,function(){f.survey()})},u=[{name:"Twitter",icon:'<i class="fab fa-twitter"></i>',href:"https://twitter.com/Pocket_Net"},{name:"Telegram",icon:'<i class="fab fa-telegram"></i>',href:"https://t.me/PocketRep"},{name:"Facebook",icon:'<i class="fab fa-facebook"></i>',href:"https://www.facebook.com/PocketNet"},{name:"Minds",image:"https://cdn-assets.minds.com/front/dist/assets/logos/bulb.svg",href:"https://www.minds.com/PocketNet"},{name:"Linkedin",icon:'<i class="fab fa-linkedin"></i>',href:"https://www.linkedin.com/company/cryptolo-io"},{name:"Mastodon",icon:'<i class="fab fa-mastodon"></i>',href:"https://mastodon.social/@PocketRep"},{name:"Gab",image:"https://gab.com/assets/img/logo-dec.png",href:"https://gab.com/PocketNet"},{name:"Sola",image:"https://web.solacore.net/img/logo_medium-3_mNF.png",href:"https://sola.ai/cryptolo_io"},{name:"Medium",icon:'<i class="fab fa-medium"></i>',href:"https://medium.com/@cryptolo.io"}],f={survey:function(t){p.shell({name:"survey",el:n.survey,data:{survey:s},animation:"fadeIn"},function(e){e.el.find(".sendanswer").on("click",r),e.el.find(".resultpercent").each(function(){var e=$(this);e.animate({width:e.attr("w")+"%"},130)}),t&&t()})},tes:function(){var e=n.c.find(".tes");lazyEach({array:e,sync:!0,action:function(e){var t=$(e.item),n=t.attr("time")||600;t.addClass("show"),setTimeout(function(){e.success()},n)}})},lenta:function(){p.nav.api.load({open:!0,id:"lenta",el:n.lenta,animation:!1,mid:"about",essenseData:{author:"PEj7QNjKdDPqE9kMDRboKoCtp8V6vZeZPd",byauthor:!0,authAction:function(e){c.join(e)},notscrollloading:!0},clbk:function(e,t){o=t}})}},m=function(){};return{primary:i,getdata:function(e){o=null,s=new sQuestion({id:"pocketnetlanding",ajax:p.app.ajax,question:"Are you fed up with traditional social media like Facebook, Twitter and others?",answers:[{t:"Yes, very",v:1},{t:"Yes, somewhat",v:2},{t:"Facebook and Twitter are just great",v:3}]}),e({socials:u,survey:s})},destroy:function(){a&&clearInterval(a),o&&(o.destroy(),o=null),window.removeEventListener("scroll",c.fixed),n={}},init:function(e){m(),(n={}).c=e.el.find("#"+p.map.id),n.lenta=e.el.find(".lenta"),n.main=n.c.find(".main"),n.fixed=n.c.find(".fixedButton"),n.join=n.c.find(".ejoin"),n.whitepaper=n.c.find(".whitepaper"),n.days=e.el.find(".days"),n.seconds=e.el.find(".seconds"),n.minutes=e.el.find(".minutes"),n.hours=e.el.find(".hours"),n.survey=e.el.find(".survey"),t=new Date(2019,0,23,23,59),a=setInterval(c.time,1e3),n.join.on("click",d),n.whitepaper.on("click",l),n.c.find(".exploremore").on("click",c.explore),window.addEventListener("scroll",c.fixed),f.tes(),f.lenta(),s.init(function(){f.survey()}),c.videoWidth(n.c.find(".videoContent")),e.clbk(null,e)}}};return p.run=function(e){var t=p.addEssense(n,a,e);p.init(t,e)},p.stop=function(){_.each(n,function(e){e.destroy()})},p}();"undefined"!=typeof module?module.exports=about:(app.modules.about={},app.modules.about.module=about);
 /*_____*/ 
var registration=function(){var v=new nModule,t={},i=function(n){var l,t,i,o=deep(n,"history"),a={last:!1,end:!1},s=null,c=new Parameter({type:"STRING",name:"keyInput",id:"keyInput",placeholder:v.app.localization.e("confirmkey"),autoSearch:function(e,n,t){if(0==a.mnemonicKey.indexOf(e)&&(console.log("v[v.length - 1]",e[e.length-1])," "!=e[e.length-1])){var i=e.split(" "),o=i.length-1;i[o];t(_.filter(a.mnemonicContent,function(e,n){if(n<=o)return!0}).join(" "))}}}),r={download:function(o){a.os&&a.os.github&&$.get(a.os.github.url,{},function(e){var n=deep(e,"assets")||[],t=_.find(n,function(e){return e.name==a.os.github.name});if(t){v.app.platform.m.log("registration_application_download",a.os.github.name);var i=document.createElement("a");i.setAttribute("href",t.browser_download_url),i.setAttribute("download","download"),i.click(),o&&o(t.browser_download_url)}})},validation:function(){var e=trim(c.value);return e!=a.mnemonicKey&&e!=a.mk?(l.c.find(".note").html(v.app.localization.e("keysnotmatch")),l.c.addClass("error"),!1):(l.c.removeClass("error"),l.c.find(".note").html(""),!0)},registration:function(){r.validation()&&(localStorage.stay="1",v.app.user.stay=1,v.user.signin(a.mnemonicKey,function(e){if(!e)return l.c.find.note.html(v.app.localization.e("id98")),void l.c.addClass("error");a.end=!0,g.confirm(function(){g.success(function(){setTimeout(function(){if("_this"==deep(t,"successHref"))if(v.app.user.validate()){var e=deep(i,"container.close");e&&e(),t.signInClbk&&t.signInClbk()}else v.nav.api.loadSameThis("filluser",n);else v.app.reload({href:t.successHref||"filluser",nav:t.nav})},2e3)})})}))},generate:function(){l.c.removeClass("begin"),a.mnemonicKey=bitcoin.bip39.generateMnemonic(),a.mnemonicMask=_.shuffle(indexArray(a.mnemonicKey.length)),a.mnemonicContent=a.mnemonicKey.split(" ");var e=v.app.user.keysFromMnemo(a.mnemonicKey);a.mainAddress=app.platform.sdk.address.pnet(e.publicKey).address,a.mk=e.privateKey.toString("hex"),g.key()},repeat:function(){a.last=!1,g.confirm(function(){g.tips(function(){setTimeout(function(){l.c.removeClass("last"),setTimeout(function(){r.generate()},300)},300)})})},continue:function(){var e=l.c.find(".mnemonicKey");l.c.find(".keyStep").removeClass("showedPanel"),g.mnemonicEffect(e,!0,function(){a.last=!0,g.key(function(){setTimeout(function(){g.tips(),l.c.addClass("last"),setTimeout(function(){g.confirm()},300)},300)})})},removeDisabled:function(e){e.find(".continue").removeClass("disabled"),e.find(".preloader").remove(),e.find(".save").addClass("black"),e.find(".copy").addClass("black")}},d=function(){r.registration()},f=function(){r.generate()},u=function(){$(this).hasClass("disabled")||r.continue()},p=function(){r.repeat()},m=function(){r.download(function(e){l.c.find(".osStep").addClass("rundownloading"),l.c.find(".skipositem").html('<div class="downloadstart">You will now continue your registration after you install Pocketnet Desktop.</div><div><a href="'+e+'"><b>If Pocketnet for Windows did not start downloading, please click here to install it</b></a></div>')})},g={os:function(n){var e=os();v.app.platform.m.log("registration_application"),e&&v.app.platform.applications[e]&&"undefined"==typeof _Electron&&!window.cordova?(a.os=v.app.platform.applications[e],g.step("os",function(e){e.el.find(".downloadOs").on("click",m),e.el.find(".skip").on("click",function(){n&&n()})})):n()},step:function(e,n){v.shell({name:e,el:l.c.find("."+e+"Step"),data:a,animation:{id:"slide"}},function(e){n&&n(e)})},success:function(n){g.step("success",function(e){v.app.platform.m.log("registration_success"),n&&n()})},tips:function(n){v.app.platform.m.log("registration_tips"),g.step("tips",function(e){e.el.find(".generate").on("click",f),n&&n()})},confirm:function(e){c.value="",a.keyInput=c,g.step("confirm",function(n){n.el.find(".repeat").on("click",p),n.el.find(".registrationButton").on("click",d),e?e():(ParametersLive([c],n.el),_scrollTo(n.el,s),initUpload({el:n.el.find(".uploadFile"),ext:["txt","png","jpeg","jpg"],notexif:!0,dropZone:l.c.find(".confirm"),action:function(e,n){if("png"==e.ext||"jpeg"==e.ext||"jpg"==e.ext)grayscaleImage(e.base64,function(e){qrscanner.q.callback=function(e){"error decoding QR Code"==e?(v.app.platform.m.log("registration_qr_damaged"),l.c.find(".note").html(v.app.localization.e("filedamaged"))):(v.app.platform.m.log("registration_qr_success"),c.value=trim(e),c.el.val(c.value),r.registration())},qrscanner.q.decode(e)});else{var t=e.base64.split(",")[1],i=b64_to_utf8(t).split("/");i[1]?(c.value=trim(i[1]),c.el.val(c.value),r.registration()):l.c.find(".note").html(v.app.localization.e("filedamaged"))}}}),setTimeout(function(){n.el.find("input").bind("paste",function(e){n.el.find(".note").html(v.app.localization.e("removepaste")),e.preventDefault()}),n.el.find('input[type="text"]').on("focus",function(){n.el.find(".inputTable").addClass("typeactive")}),n.el.find('input[type="text"]').on("blur",function(){n.el.find(".inputTable").removeClass("typeactive")}),isMobile()||n.el.find(".autosearchInputCnt input").focus()},600))})},qrcode:function(e,n){new QRCode(e[0],{text:n,width:256,height:256})},key:function(a){g.step("key",function(n){v.app.platform.m.log("registration_key");var e=n.el.find(".mnemonicKey"),t=l.c.find(".keyStep");t.removeClass("showedPanel");var i=n.el.find(".hiddenMnemonicKey").html();if(i){var o=v.app.user.keysFromMnemo(trim(i)).privateKey.toString("hex");g.qrcode(n.el.find(".qrcode"),o)}g.mnemonicEffect(e,!1,function(){t.addClass("showedPanel")}),n.el.find(".continue").on("click",u),setTimeout(function(){r.removeDisabled(n.el)},2e3),v.app.platform.clbks._focus.registration=function(){r.removeDisabled(n.el)},n.el.find(".copy").on("click",function(){copyText(n.el.find(".hiddenMnemonicKey")),sitemessage(v.app.localization.e("successfullycopied")),r.removeDisabled(n.el)}),n.el.find(".save").on("click",function(){var e=n.el.find(".qrcode img").attr("src");saveAs({file:e,format:"png",name:"pocketnetkey"})}),a?a():_scrollTo(n.el,s)})},mnemonicEffect:function(t,e,n){var i=indexArray(101);e&&i.reverse();var o=t.height();t.css("min-height",o+"px"),lazyEach({array:i,sync:!0,action:function(e){var n=e.item;t.html(g.mnemonic(n)),o=t.height(),t.css("min-height",o+"px"),setTimeout(e.success,rand(1,5))},all:{success:function(){t.css("min-height","0px"),n&&n()}}})},mnemonic:function(e){var i="",o=(a.mnemonicMask.length*e/100).toFixed(0);return _.each(a.mnemonicKey,function(e,n){var t=_.indexOf(a.mnemonicMask,n);i+=t<o||" "==e?e:v.app.platform.values.alph[rand(0,v.app.platform.values.alph.length-1)]}),i}};return{primary:o,getdata:function(e,n){if(n.state&&o)v.nav.api.load({open:!0,href:"index",history:!0});else{v.app.platform.m.log("registration_open"),a={last:!1,end:!1};e({})}},destroy:function(){delete v.app.platform.clbks._focus.registration,l={}},init:function(e){var n;(l={}).c=e.el.find("#"+v.map.id),l.registrationButton=l.c.find(".registrationButton"),l.toAuthorization=l.c.find(".toAuthorization"),l.login=l.c.find(".loginValue"),l.ler=l.c.find(".ler"),l.key=l.c.find(".key"),t=e.essenseData||{},i=e,(s=l.c.closest(".wndcontent")).length||(s=null),g.os(function(){g.tips()}),n=e,l.toAuthorization.on("click",function(){v.nav.api.loadSameThis("authorization",n)}),e.clbk(null,e)},wnd:{class:"withoutButtons allscreen"}}};return v.run=function(e){var n=v.addEssense(t,i,e);v.init(n,e)},v.stop=function(){_.each(t,function(e){e.destroy()})},v}();"undefined"!=typeof module?module.exports=registration:(app.modules.registration={},app.modules.registration.module=registration);
 /*_____*/ 
var article=function(){var g=new nModule,t={},n=function(a){var s,o,t,n,e,i=deep(a,"history"),c=/[,.!?;:()<> \n\r]/g,r={message:g.app.localization.e("emptymessage")},p={newart:function(){return g.app.platform.sdk.articles.empty()},complete:function(){t.save&&t.save(o),d.close(),t.complete&&t.complete(o)},change:function(e){o.content=e,o.time=Math.floor((new Date).getTime()/1e3),t.save&&t.save(o)},changecaption:function(e){o.caption.value=e,o.time=Math.floor((new Date).getTime()/1e3),t.save&&t.save(o)},trx:function(e,i){s.c.addClass("loading"),g.sdk.node.transactions.create.commonFromUnspent(e,function(e,a){if(topPreloader(100),s.c.removeClass("loading"),e)try{var t=new pShare;t._import(e,!0),t.temp=!0,t.address=e.address,g.app.platform.sdk.node.shares.add(t),o.txid=t.txid,o.ptime=Math.floor((new Date).getTime()/1e3),g.app.platform.sdk.user.survey(),p.complete()}catch(e){console.log(e)}else if(i)i(!1,r[a]);else{var n=g.app.platform.errorHandler(a,!0);n&&sitemessage(n)}},a)},add:function(){var e=new Share,a=g.app.platform.sdk.articles.echo(o);e.message.set(a),e.caption.set(o.caption.value),e.images.set(g.app.platform.sdk.articles.getImages(a)),e.tags.set(p.tagsFromText(a)),e.settings.v="a",e.settings.videos=g.app.platform.sdk.articles.getVideos(a),console.log(e,g.app.platform.sdk.articles.getImages(a));var t=e.validation();t?r[t]&&sitemessage(r[t]):dialog({html:"Do you really want to publish this article?",btn1text:g.app.localization.e("dyes"),btn2text:g.app.localization.e("dno"),class:"zindex",success:function(){a=filterXSS(a,{stripIgnoreTag:!0,whiteList:{a:["href","title","target"],br:["style"],b:["style"],span:["style"],figure:["style"],figcaption:["style","class"],i:["style"],img:["src","width","height"],div:["class","data-plyr-provider","data-plyr-embed-id"],p:[],ul:[],ol:[],li:[],h2:[],h1:[],h3:[],h4:[],h5:[],em:[],u:[],blockquote:[],strong:[],picture:["img-type"],source:["srcset","type"]}}),console.log("TESTTESTSTETS"),e.message.set(a),p.trx(e)}})},tagsFromText:function(e){var a=e.split(c),t=_.filter(a,function(e){if("#"==e[0])return!!(e=e.replace(/#/g,""))});return _.each(t,function(e,a){t[a]=e.replace(/\#/g,"")}),t}},d={authorclose:function(){g.nav.api.load({open:!0,href:"author?address="+g.app.user.address.value.toString("hex"),history:!0}),g.closeContainer(),t.closeContainer&&t.closeContainer()},changecaption:function(){var e=$(this).val();p.changecaption(e)},change:function(){e=slowMade(function(){var e=g.app.platform.sdk.articles.lightVideo(n.serialize());p.change(e)},e,300)},close:function(){t.close&&t.close(),g.closeContainer()},add:function(){p.add()},goto:function(){o.txid&&(g.closeContainer(),t.closeContainer&&t.closeContainer(),g.nav.api.load({open:!0,href:"index?s="+o.txid,history:!0}))}},f=function(e,a){s.caption.val(e.caption.value)},u=function(){};return{primary:i,getdata:function(e,a){t=a.settings.essenseData||{},e({art:o=t.art||p.newart(parameters().aid)})},destroy:function(){g.app.nav.api.history.removeParameters(["aid"]),s={}},init:function(e){var a;u(),(s={}).c=e.el.find("#"+g.map.id),s.caption=s.c.find(".caption"),s.content=s.c.find(".content"),s.back=s.c.find(".back"),s.add=s.c.find(".add"),s.goto=s.c.find(".goto"),s.back.on("click",d.close),s.caption.on("keyup",d.changecaption),s.add.on("click",d.add),s.goto.on("click",d.goto),s.c.find(".uic").on("click",d.authorclose),s.c.find(".username").on("click",d.authorclose),console.log(MediumEditor),n=new MediumEditor(".edt",{delay:500,targetBlank:!0,toolbar:{buttons:["bold","italic","underline","anchor","quote"],diffLeft:25,diffTop:10},anchor:{placeholderText:"Type a link",customClassOption:"btn",customClassOptionText:"Create Button"},paste:{cleanPastedHTML:!0,cleanAttrs:["style","dir"],cleanTags:["label","meta"]},anchorPreview:{hideDelay:300},placeholder:{text:"Text",hideOnClick:!1}}),$(function(){$(".edt").mediumInsert({editor:n,addons:{images:{label:'<span class="fas fa-camera"></span>',deleteScript:function(e,a){g.sdk.imagesH.delete(e)},fileDeleteOptions:{},preview:!0,captions:!0,captionPlaceholder:"Type caption for image (optional)",autoGrid:3,formData:{},upload:function(e,n){resize(e,1080,1080,function(e){var a=e.split(",");a[1]&&g.ajax.run({type:"POST",imgur:!0,data:{Action:"image",image:a[1]},success:function(e){var a=deep(e,"data.link");if(a){var t=deep(e,"data.deletehash");t&&g.sdk.imagesH.add(a,t)}else a="https://pocketnet.app/img/imagenotuploaded.jpg";n&&n(a)},fail:function(){l="https://pocketnet.app/img/imagenotuploaded.jpg",n&&n(l)}})})},fileUploadOptions:{acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i},styles:{wide:{label:'<span class="fa fa-align-justify"></span>',added:function(e){},removed:function(e){}},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'},grid:{label:'<span class="fa fa-th"></span>'}},actions:{remove:{label:'<span class="fa fa-times"></span>',clicked:function(e){var a=$.Event("keydown");a.which=8,$(document).trigger(a)}}},messages:{acceptFileTypesError:"This file is not in a supported format: ",maxFileSizeError:"This file is too big: "},uploadCompleted:function(e,a){d.change()},uploadFailed:function(e,a){}},embeds:{label:'<span class="fas fa-play"></span>',placeholder:"Paste a YouTube, Vimeo link and press Enter",styles:{wide:{label:'<span class="fa fa-align-justify"></span>',added:function(e){},removed:function(e){}},left:{label:'<span class="fa fa-align-left"></span>'},right:{label:'<span class="fa fa-align-right"></span>'}},actions:{remove:{label:'<span class="fa fa-times"></span>',clicked:function(e){var a=$.Event("keydown");a.which=8,$(document).trigger(a)}}}}}}),n.subscribe("editableKeyup",function(){d.change()}),n.subscribe("editablePaste",function(){d.change()}),n.subscribe("editableBlur",function(){d.change()}),f(o),Plyr.setup(".js-player"),a&&a()}),e.clbk(null,e)},wnd:{class:"allscreen a100 article articlebtn"}}};return g.run=function(e){var a=g.addEssense(t,n,e);g.init(a,e)},g.stop=function(){_.each(t,function(e){e.destroy()})},g}();"undefined"!=typeof module?module.exports=article:(app.modules.article={},app.modules.article.module=article);
 /*_____*/ 
var userpage=function(){var d=new nModule,t={},o=function(e){var r,n=deep(e,"history"),o=null,i=null,a=null,p=[],s={eachReport:function(a,e,n){e||(e=p);var r=function(e,o,i){o||(o=0),i||(i=""),_.each(e,function(e,n){var t=i;t&&(t+="_"),t+=e.id,e.reports?a.group(e,o,t,function(){r(e.reports,o+1,t)},n):a.report(e,o,t)})};r(e,0,n)},findReport:function(e){var i=function(e,n){var t=n.split("_");if(!t.length)return null;n=t[0];var o=_.find(e||[],function(e){return e.id==n});return o?(t.splice(0,1),(n=t.join("_"))&&o.reports?i(o.reports,n):o):null};return i(p,e)},mobileReports:function(){var i=[];return s.eachReport({group:function(e,n,t,o){e.mobile&&i.push(e),o()},report:function(e){e.mobile&&i.push(e)}}),i.push({name:d.app.localization.e("signout"),id:"signout"}),i},selector:function(){var e=s.mobileReports(),n=_.map(e,function(e){return e.id}),t=_.map(e,function(e){return e.text||e.name}),o=new Parameter({type:"VALUES",name:"Contents",id:"contents",possibleValues:n,possibleValuesLabels:t,defaultValue:n[0]});return o.value=parameters().id||n[0],o._onChange=function(e){if("signout"==e)c.signout();else{var n=s.findReport(e),t=parameters();t.report=n.report,t.id=n.id;var o="userpage"+collectParameters(t);d.nav.api.load({open:!0,href:o,history:!0})}},o}},c={closeGroup:function(e){var n=s.findReport(e);if(n){n.active=!n.active;var t=r.c.find('[levelid="'+e+'"]');n.active?t.addClass("active"):t.removeClass("active")}},openTree:function(a){s.eachReport({group:function(e,n,t,o){var i=r.c.find('[levelid="'+t+'"]');0==a.indexOf(t)?(e.active=!0,i.addClass("active"),o()):(e.active=!1,i.find(".openReport").removeClass("active"))},report:function(e,n,t){var o=r.c.find('[id="'+t+'"]');a==t?(e.active=!0,o.addClass("active")):(e.active=!1,o.removeClass("active"))}})},openReport:function(e,n){r.c.find(".openReport").removeClass("active"),r.c.find('[rid="'+e+'"]').addClass("active"),c.openTree(e),t.report(e),n&&d.nav.api.history.addParameters({id:e})},signout:function(){d.app.user.signout(),d.app.reload({href:"authorization"})}},l=function(){var e=$(this).closest("[levelid]").attr("levelid");c.closeGroup(e)},u=function(){var e=$(this).attr("rid");c.openReport(e,!0)},t={bgcaption:function(e){s.selector();r&&r.bgcaption&&d.shell({name:"bgcaption",el:r.bgcaption.find(".bgCaptionInner"),data:{}},function(e){})},contents:function(n){var t=s.selector();d.shell({name:"contents",el:r.contents,data:{reports:p,each:s.eachReport,selector:t}},function(e){e.el.find(".groupNamePanelWrapper").on("click",l),e.el.find(".openReport").on("click",u),ParametersLive([t],e.el),n&&n()})},report:function(e,t){o&&o.destroy();var n=s.findReport(e);d.shell({name:"report",el:r.report,data:{}},function(e){d.nav.api.load({open:!0,id:n.report,el:e.el.find(".reportCnt"),animation:!1,primary:!0,essenseData:{sub:n.sub},clbk:function(e,n){o=n,i&&i.apply(),t&&t()}})})}},f=function(){};d.authclbk=function(){t.bgcaption()};return{primary:n,getdata:function(n){(p=[]).push({name:d.app.localization.e("rstate"),id:"ustate",report:"ustate",mobile:!0,if:function(){if(a)return!0}}),p.push({name:"Notifications",id:"notifications",report:"notifications",mobile:!0}),p.push({name:d.app.localization.e("rwallet"),id:"wallet",report:"wallet",mobile:!0}),p.push({name:d.app.localization.e("rprofile"),id:"test",report:"test",mobile:!0}),p.push({name:d.app.localization.e("rsettings"),id:"usersettings",report:"usersettings",mobile:!0}),p.push({name:d.app.localization.e("raccounts"),id:"accounts",report:"accounts",mobile:!0});var t={};parameters();t.p2pkh=d.app.platform.sdk.address.pnet(),d.app.platform.sdk.ustate.me(function(e){a=e,n(t)})},destroy:function(){o&&o.destroy(),o=null,i&&i.destroy(),i=null,$("#menu").removeClass("abs"),r={}},init:function(e){f(),(r={}).c=e.el.find("#"+d.map.id),r.contents=r.c.find(".contents"),r.report=r.c.find(".report"),r.bgcaption=r.c.find(".bgCaption"),$("#menu").addClass("abs"),new Caption({container:r.c,caption:r.c.find(".captionfwrapper"),offset:[0,0]}).init(),r.c.on("click",".signout",function(){c.signout()}),function(e){t.bgcaption();var n=parameters().id||"ustate";t.contents(function(){c.openReport(n),e&&e()}),isMobile()||(i=new Roller({selector:".roller",inner:".cnt",cnt:r.c.find(".maketsWrapper"),offset:65}).init().apply())}(function(){e.noscroll=d.app.actions.scrollBMenu(),e.clbk(null,e)})}}};return d.run=function(e){var n=d.addEssense(t,o,e);d.init(n,e)},d.stop=function(){_.each(t,function(e){e.destroy()})},d}();"undefined"!=typeof module?module.exports=userpage:(app.modules.userpage={},app.modules.userpage.module=userpage);
 /*_____*/ 
var donations=function(){var f=new nModule,t={},a=function(n){var i,e=deep(n,"history"),t=["PHdW4pwWbFdoofVhSEfPSHgradmrvZdbE5","PTziv8ym7eJRUfyfAFBejJgEYemTdUgFzH","PBE1MLbsFoY3o1YW6t3Goi6spS1y9GY1vj","PRV1eoYkhA5PGkASm2tyD12xwdQnigbpkp","PRCeHituQ5WN2EXRZz4t9qTYyCBqTc4g4M","P9V67HjuApdEhj4DZxNnibxEqSnmCPbxvB","PA57U1QmmowNzSaz6ThG2EPs34QCsLyksL"],a={amount:new Parameter({name:f.app.localization.e("wsamount"),id:"amount",type:"NUMBER",placeholder:f.app.localization.e("wsamountof"),format:{Precision:6}})},o=[{id:"btc",name:"Bitcoin",action:function(n){u.ways.ltcbtc(n)},qrname:"bitcoin"},{id:"ltc",name:"Litecoin",qrname:"litecoin",action:function(n){u.ways.ltcbtc(n)}},{id:"xmr",name:"Monero",qrname:"monero",action:function(n){u.ways.xmr(n)}},{id:"paypal",name:"Paypal",action:function(n){u.ways.paypal(n)}}],s={},c=null,u={checkFunds:function(n,e,t){u.status(n,e,function(n,e){t&&t(e)})},waitfunds:function(e,t,a,o){s[e]=t,l.save(),r.address(e,t,o,a,function(n){c=setInterval(function(){u.checkFunds(e,t,function(n){"AWAITINGFUNDS"!=n.Status&&"AWAITINGDONATION"!=n.Status&&(clearInterval(c),c=null),"AWAITINGFUNDS"==n.Status||"AWAITINGDONATION"==n.Status||"EXPIREDAWAITINGFUNDS"==n.Status?r.address(e,t,o,n):r.thankyou(o,!1,a)})},6e4)})},ways:{ltcbtc:function(t){var a=t.id;s[a]?(console.log("cur, storage[cur]",a,s[a]),u.status(a,s[a],function(n,e){"AWAITINGFUNDS"==e.Status||"AWAITINGDONATION"==e.Status?u.waitfunds(a,s[a],e,t):"EXPIREDAWAITINGFUNDS"==e.Status?u.address(a,function(n,e){u.waitfunds(a,n,e,t)}):(delete s[a],l.save(),r.thankyou(t,!0,e))})):u.address(a,function(n,e){u.waitfunds(a,n,e,t)})},xmr:function(n){r.xmraddress(n,function(n){})},paypal:function(n){window.open("https://www.paypal.me/pocketnet","_blank").focus(),r.thankyou(n)}},donate:function(){u.hidepage(function(){r.ways()})},hidepage:function(n){i.c.find(".hideprocess").fadeOut(200,n)},showpage:function(n){i.c.find(".hideprocess").fadeIn(200,n)},status:function(n,e,t){f.app.platform.sdk.exchanges.status(n,e,t)},address:function(n,t){f.app.ajax.run({data:{Action:"GETADDRESSFORDONATION",Currency:n.toUpperCase()},success:function(n){var e=deep(n,"Address.Address");e?t&&t(e,n.Address):sitemessage("Something went wrong. Please reload page and try again (error: 0001)")},fail:function(){sitemessage("Something went wrong. Please reload page and try again (error: 0001)")}})}},d=function(){u.donate()},r={thankyou:function(e,t,n){_scrollTop(0),a.amount.value=deep(n,"Amount")||0,f.shell({name:"thankyou",inner:html,el:i.process.find(".step"),data:{second:t,curobj:e,info:n,parameters:a}},function(n){ParametersLive(_.toArray(a),n.el),n.el.find(".send").on("click",function(){0<a.amount.value?$.ajax({type:"POST",url:"https://pocketnet.app/Shop/AJAXMain.aspx",data:{Action:"ADDTOMAILLIST",TemplateID:100,Email:f.app.platform.sdk.address.pnet().address,Name:(e.name||"NAN0")+", "+(a.amount.value||0)},dataType:"json",success:function(){n.el.html(""),setTimeout(function(){u.showpage()},100),dialog({html:"Thank you for supporting our work for freedom. We will make sure every penny counts.",class:"one"})}}):sitemessage("Please fill amount of donation")}),n.el.find(".back").on("click",function(){t?(n.el.html(""),setTimeout(function(){e.action(e)},100)):(n.el.html(""),setTimeout(function(){u.showpage()},100))})})},xmraddress:function(e,t){_scrollTop(0),f.shell({name:"xmraddress",inner:html,el:i.process.find(".step"),data:{curobj:e}},function(n){n.el.find(".back").on("click",function(){n.el.html(""),setTimeout(function(){r.ways()},100)}),n.el.find(".next").on("click",function(){r.thankyou(e,!0)}),n.el.on("click",".copyaddress",function(){copyText(n.el.find(".aw")),sitemessage(f.app.localization.e("waddresswascop"))}),t&&t(n.el)})},address:function(t,a,o,s,e){f.shell({name:"address",inner:html,el:i.process.find(".step"),data:{curobj:o,address:a,currency:t,info:s}},function(n){n.el.find(".back").on("click",function(){n.el.html(""),setTimeout(function(){r.ways()},100),c&&(clearInterval(c),c=null)}),n.el.on("click",".copyaddress",function(){copyText(n.el.find(".aw")),sitemessage(f.app.localization.e("waddresswascop"))}),n.el.find(".reactivate").on("click",function(){f.app.platform.sdk.exchanges.reactivate({address:a,currency:t},function(n,e){n?sitemessage("Something went wrong. Please reload page and try again (error: 0002)"):u.waitfunds(t,a,s,o)})}),n.el.find(".next").on("click",function(){r.thankyou(o,!0),c&&(clearInterval(c),c=null)}),e&&e(n.el)})},ways:function(e){_scrollTop(0),f.shell({name:"ways",inner:html,el:i.process.find(".step"),data:{ways:o}},function(n){n.el.find(".back").on("click",function(){n.el.html(""),setTimeout(function(){u.showpage()},100)}),n.el.find(".way").on("click",function(){var e=$(this).attr("way"),n=_.find(o,function(n){return n.id==e});n&&n.action(n)}),e&&e()})}},l={save:function(){f.app.settings.set(f.map.uri,"storage",JSON.stringify(s))},load:function(){s=JSON.parse(f.app.settings.get(f.map.uri,"storage")||"{}")}};return{primary:e,getdata:function(n){l.load(),f.sdk.users.get(t,function(){n({donated:t})},!0)},destroy:function(){c&&(clearInterval(c),c=null),i={}},init:function(n){(i={}).c=n.el.find("#"+f.map.id),i.process=i.c.find(".process"),i.donate=i.c.find(".donate"),i.donate.on("click",d),n.clbk(null,n)}}};return f.run=function(n){var e=f.addEssense(t,a,n);f.init(e,n)},f.stop=function(){_.each(t,function(n){n.destroy()})},f}();"undefined"!=typeof module?module.exports=donations:(app.modules.donations={},app.modules.donations.module=donations);
 /*_____*/ 
var discussions=function(){var y=new nModule,i={},t=function(s){var d,l,u,n,i=deep(s,"history"),t={},o={},e={},f=null,a=!1,c=null,r=null,p={preloader:function(s){d.c&&(s?d.c.addClass("loading"):d.c.removeClass("loading"))},inView:function(s,n,i){if(_.toArray(l).length&&d.c){var t=d.c.find(n||".discussion"),o="offset";"fixedin"==f.view&&(o="position");var e=inView(t,{inel:u,offset:0,mode:"part",f:o});if(0<e.length){var a={},c=_.map(e,function(s){var n=$(s).attr("chat");return a[n]=!0,l[n]});if(i){var r=[];_.each(l,function(s,n){a[n]||r.push(s)}),i(r)}s&&s(c)}}},chatp:function(s){l[s]&&(p.preloader(!0),retry(function(){if(o[s]||!t[s])return!0},function(){p.chat(l[s])}))},chat:function(n){r=!0,p.closeAll(function(){y.app.platform.sdk.chats.save();var s={open:!0,href:"chat",animation:!1,history:!0};"fixedin"==f.view?(s.history=!1,s.el=d.c.find(".chatWrapper"),s.essenseData={view:"fixedin",chat:n,destroyClbk:function(){r=!1,p.preloader(!0),d.c.removeClass("forChat"),s.el.html(""),m.discussions(null,function(){c=null,p.preloader(!1),u.scrollTop(0),setTimeout(function(){p.openInView()},100)})}},s.clbk=function(s,n){c=n,d.c.addClass("forChat"),p.preloader(!1)}):s.href="chat?chatid="+n.chat.id,y.nav.api.load(s)})},open:function(s,n){},remove:function(s){p.preloader(!0),p.close(s,function(){p.preloader(!1),y.app.platform.sdk.chats.remove(s),l=y.app.platform.sdk.discussions.fromChats(y.app.platform.sdk.chats.get("share"),f.author),d.c.find('.discussion[chat="'+s+'"]').remove(),m.empty()})},openInView:function(s){p.inView(function(s){_.map(s,function(s){return console.log(s),s.chat.id});_.each(s,function(s){p.open(s)})},".discussion:not(.dempty)",function(s){var n=_.map(s,function(s){return s.chat.id});p.closeMany(n)})},close:function(s,n){e[s]?retry(function(){if(!e[s])return!0},n):(e[s]=!0,retry(function(){if(o[s])return!0},function(){y.app.platform.rtc.destroy(s),delete e[s],delete o[s],delete t[s],n()}))},closeMany:function(s,n){lazyEach({array:s,action:function(s){var n=s.item;t[n]?p.close(n,s.success):s.success()},all:{success:function(){n&&n()}}})},closeAll:function(s){var n=_.map(t,function(s,n){return n});lazyEach({array:n,action:function(s){var n=s.item;p.close(n,s.success)},all:{success:function(){t={},o={},e={},s&&s()}}})}},h={inViewScroll:function(){n=slowMade(function(){r||(h.inView(),p.openInView())},n,200)},inView:function(){a||p.inView(function(s){a=!0,y.app.platform.sdk.discussions.info(s,function(s){m.fdiscussions(s,function(){a=!1}),l=y.app.platform.sdk.discussions.fromChats(y.app.platform.sdk.chats.get("share"),f.author)})},".discussion.dempty")},chat:function(){var s=$(this).closest(".discussion").attr("chat");p.chatp(s)},remove:function(){var s=$(this).closest(".discussion").attr("chat");p.remove(s)}},m={empty:function(){_.toArray(l).length?d.c.removeClass("sempty"):d.c.addClass("sempty")},message:function(s,n){y.shell({name:"message",inner:html,el:d.list.find('[chat="'+n+'"] .lastMessage'),data:{message:s}},function(s){})},discussion:function(s,n){var i=d.list.find('[chat="'+s.chat.id+'"]');s.share&&s.author?y.shell({name:"discussion",inner:html,el:i,data:{discussion:s}},function(s){i.removeClass("dempty"),s.el.find(".discussioncnt").on("click",h.chat),s.el.find(".remove").on("click",h.remove),n&&n()}):(i.remove(),n&&n())},fdiscussions:function(s,n){lazyEach({array:_.toArray(s),action:function(s){var n=s.item;m.discussion(n,s.success)},all:{success:function(){p.openInView(),n&&n()}}})},discussions:function(s,n,i){s||(s=l);var t=_.toArray(s);t=_.sortBy(t,function(s){return-s.chat.time}),y.shell({name:"discussions",inner:i||html,el:d.list,data:{discussions:t}},function(s){h.inView(),n&&n()})},discussionTemp:function(i,t,o){y.shell({name:"discussions",el:d.temp,data:{discussions:i}},function(s){var n=s.el.find(".discussion");y.app.platform.sdk.discussions.info(i,function(s){y.shell({name:"discussion",inner:html,el:n,data:{discussion:i[0],c:t}},function(s){n.removeClass("dempty"),n.on("click",function(){y.app.platform.sdk.chats.add(i[0].chat.id,"share")}),o&&o()})})})}},v=function(){};return{primary:i,getdata:function(s,n){f=n.settings.essenseData||{},a=!1;var i=y.app.platform.sdk.address.pnet().address+"addedtochat";localStorage[i]=!0,y.app.platform.sdk.chats.add("6768de97ad495c0110a9e09d43825ef24f1055449a5d368225ac102804397dc1_PEj7QNjKdDPqE9kMDRboKoCtp8V6vZeZPd","share");var t={};console.log("self.app.platform.sdk.chats.get('share')",y.app.platform.sdk.chats.get("share")),l=y.app.platform.sdk.discussions.fromChats(y.app.platform.sdk.chats.get("share"),f.author),t.discussions=l,s(t)},destroy:function(){u&&u.off("scroll",h.inViewScroll),delete y.app.platform.sdk.chats.clbks.discussions,p.closeAll(),c&&(c.destroy(),c=null),d={}},init:function(s){s,t={},opened={},r=!(o={}),v(),(d={}).c=s.el.find("#"+y.map.id),u="fixedin"==f.view?d.c.find(".discussionsWrapper"):$(window),d.list=d.c.find(".list"),d.temp=d.c.find(".gotoDisscussion"),u.on("scroll",h.inViewScroll),y.app.platform.sdk.chats.clbks.discussions=function(s,n,i){if("removeTemp"==n)return d.temp.html(""),void d.temp.fadeOut(1);var t=_.toArray(y.app.platform.sdk.discussions.fromChats([s]));"add"==n&&(l=y.app.platform.sdk.discussions.fromChats(y.app.platform.sdk.chats.get("share"),f.author),m.empty(),m.discussions(t,function(){p.chatp(t[0].chat.id)},prepend)),"addTemp"==n&&m.discussionTemp(t,i,function(){}),"addtwice"==n&&(m.discussions(),p.chatp(t[0].chat.id))},console.log("discussions",l),p.chatp("6768de97ad495c0110a9e09d43825ef24f1055449a5d368225ac102804397dc1_PEj7QNjKdDPqE9kMDRboKoCtp8V6vZeZPd"),s.clbk(null,s)}}};return y.run=function(s){var n=y.addEssense(i,t,s);y.init(n,s)},y.stop=function(){_.each(i,function(s){s.destroy()})},y}();"undefined"!=typeof module?module.exports=discussions:(app.modules.discussions={},app.modules.discussions.module=discussions);
 /*_____*/ 
var imageGalleryEdit=function(){var P=new nModule,a={},n=function(e){var a,n,i=deep(e,"history"),t=null,r=0,l=!1,p=null,o=null,s=null,c={normal:{name:"Normal"},vintage:{name:"Vintage"},oldBoot:{name:"Old Boot"},clarity:{name:"Clarity"},sunrise:{name:"Sunrise"},crossProcess:{name:"Cross Process"},orangePeel:{name:"Orange Peel"},love:{name:"Love"},jarques:{name:"Jarques"},pinhole:{name:"Pinhole"}},d={},f={back:function(){--r<0&&(r=n.images.length-1),y()},next:function(){++r>=n.images.length&&(r=0),y()},initialValue:function(){n.initialValue&&(r=n.initialValue)},filters:function(){return(l=!l)?(a.c.addClass("filters"),h.filters()):a.c.removeClass("filters"),u.resize(),l},caman:function(e,i){var a="#galleryImage";i&&(a=i),o&&!i?e&&e(o):Caman(a,function(){i||(o=this),e&&e(this)})},crop:function(){return p?(p.destroy(),p=null,!1):(f.caman(function(){var e=a.imagesWrapper.find("#galleryImage"),i=e.parent();t=o,n.crop||(n.crop={}),p=new Cropper(e[0],{aspectRatio:n.crop.aspectRatio||null,autoCropArea:n.crop.autoCropArea||.9,checkOrientation:!1,crop:function(e){var i=o.width,a=o.height,n={x:e.detail.x/i,y:e.detail.y/a,w:e.detail.width/i,h:e.detail.height/a};d.crop=n},ready:function(){i.find(".cropper-container").addClass(n.crop.style||""),i.find(".cropper-crop-box").append('<div class="applyCrop center" action="apply">\t\t\t\t\t\t\t\t\t<span class="fa fa-check" aria-hidden="true"></span>\t\t\t\t\t\t\t\t</div>'),i.find(".applyCrop").on("click",function(){f.apply("crop"),h.savePanel()})}})}),!0)},camanFilter:function(e,i,a){e.revert(!1),"normal"!=i&&e.newLayer(function(){this.opacity(50),this.copyParent(),this.filter[i]()}),e.render(a)},previewFilter:function(e,i){var a=e.attr("filter"),n=e.attr("imageId");Caman("#"+n,function(){f.camanFilter(this,a,function(){e.animate({opacity:1})})}),e.on("click",function(){f.caman(function(){f.camanFilter(o,a,function(){t=o,d.filter=a,h.savePanel(),u.resize()})})})},applyFilters:function(t,e,r,l){"crop"!=e?"filter"==e&&f.caman(function(e){f.camanFilter(e,t,function(){l&&l()})},r):f.caman(function(e){var i=e.canvas.width,a=e.canvas.height,n={x:t.x*i,y:t.y*a,width:t.w*i,height:t.h*a};e.crop(n.width,n.height,n.x,n.y),e.resize({width:n.width,height:n.height}),e.render(function(){e.resetOriginalPixelData(),e.cropped=!1,e.cropCoordinates={x:0,y:0},e.originalHeight=n.height,e.originalWidth=n.width,e.preScaledHeight=n.height,e.preScaledWidth=n.width,e.resized=!1,r||u.resize(),l&&l()})},r)},apply:function(e,i){e&&d[e]&&(f.applyFilters(d[e],e,i),f[e](),a.c.find('[action="'+e+'"]').removeClass("active"))},close:function(){n.success?(topPreloader(20),n.success(n.images,function(){topPreloader(100),P.closeContainer()})):P.closeContainer()},exit:function(){n.apply&&(f.apply("crop"),f.save(!0)),f.close()},cancel:function(){d={},h.savePanel(),h.image({image:s})},save:function(e){f.checkUpdates()&&(s.original=o.toBase64(),d={},e||(h.savePanel(),h.image({image:s})))},checkUpdates:function(){return!!(d.filter&&"normal"!=d.filter||d.crop)}},u={resize:function(){u.bestFit(a.imagesWrapper.find(".image"),t)},bestFit:function(e,i){var a=e.closest(".imagesAbsWrapper"),n=e.find(".imgWrapper"),t=i.naturalWidth||i.width,r=i.naturalHeight||i.height,l=r/t;e.css("padding-top","0px");var o=e.width(),s=e.height(),c=a.width(),d=a.height();c<o&&(o=c),d<s&&(s=d),o<t&&(r=(t=o)*l),s<=r&&(t=(r=s)/l);var f=(s-r)/2;e.css("padding-top",f+"px"),i.canvas?(i.resize({width:t,height:r}),i.render()):(i.width=t,i.height=r,$(i).attr("data-camanwidth",t),$(i).attr("data-camanheight",r),$(i).css("opacity","1")),n.width(t),n.height(r),p&&p.resize({width:t,height:r})},nFormat:function(e){return e<10&&(e="0"+e),e}},m=function(){var e=$(this).attr("action");f[e]()},g=function(){var e=$(this).attr("action"),i=$(this);f[e]()?i.addClass("active"):i.removeClass("active")},h={savePanel:function(){(d.filter&&"normal"!=d.filter||d.crop)&&!n.apply?a.exitPanel.fadeOut(200,function(){a.savePanel.fadeIn(200)}):a.savePanel.fadeOut(200,function(){a.exitPanel.fadeIn(200)})},image:function(i){o=t=null,d={},h.savePanel(),p&&(p.destroy(),p=null,a.editPanel.find('.eitem[action="crop"]').removeClass("active")),a.imageNavigation.find(".number").html(u.nFormat(Number(r)+1)),$(window).off("resize",u.resize),i||(i={}),P.shell({name:"image",el:a.images,inner:html,display:"table",animation:!1,data:{data:n,image:i.image}},function(e){e.el.find("img").imagesLoaded(function(e){t=deep(e,"images.0.img"),s=i.image,u.resize(),$(window).on("resize",u.resize),l&&(l=!l,f.filters()),i.clbk&&i.clbk()})})},filters:function(i){i||(i={}),i.image||(i.image=n.images[r]),a.filters.html(""),resizeFit(i.image.original,80,80,function(e){P.shell({name:"filters",el:a.filters,data:{data:n,image:e,filters:c}},function(e){e.el.find(".preview").each(function(){f.previewFilter($(this),i.image)});var l=e.el.find(".filtersSwipe");swipedetect(l[0],function(e,i,a,n){var t=Number(l.css("margin-left").replace("px",""))+Number(1.7*i),r=-l.find(".filtersList").width()+l.closest(".filtersWrapperOvf").width();0<t&&(t=0),t<r&&(t=r),l.css("margin-left",t+"px")})})})}},v=function(){},y=function(){h.image({image:n.images[r],clbk:function(){n.apply&&(f.filters(),f.crop())}})},w=function(e){n.edit?P.nav.api.loadRelations({relations:[{src:"js/vendor/caman.full.min.js",f:"js",require:function(){Caman=require("../../js/vendor/caman.full.min.js").Caman}},{src:"js/vendor/cropper.js",f:"js",require:function(){Cropper=require("../../js/vendor/cropper.js")}},{src:"css/cropper.min.css",f:"css"}]},e):e&&e()};return{primary:i,getdata:function(e){e({})},destroy:function(){$(window).off("resize",u.resize),console.log("ASDSADDSA"),a={}},init:function(e){console.log("ASDSADDS122121A"),s=t=o=null,l=!1,d={},n=e.essenseData||{},v(),f.initialValue(),(a={}).c=e.el.find("#"+P.map.id),a.imagesWrapper=e.el.find(".imagesWrapper"),a.images=e.el.find(".images"),a.imageNavigation=e.el.find(".imageNavigation"),a.arrows=a.imageNavigation.find(".arrow"),a.editPanel=a.c.find(".editPanel"),a.savePanel=a.c.find(".panel .savePanel"),a.exitPanel=a.c.find(".panel .exitPanel"),a.filters=a.c.find(".filters"),w(function(){y(),a.arrows.on("click",m),a.editPanel.find(".eitem").on("click",g),a.savePanel.find(".sitem").on("click",g),a.exitPanel.find(".sitem").on("click",g),e.clbk(null,e)})},wnd:{class:"allscreen black withoutButtons imageGalleryEdit"}}};return P.run=function(e){var i=P.addEssense(a,n,e);P.init(i,e)},P.stop=function(){_.each(a,function(e){e.destroy()})},P}();"undefined"!=typeof module?module.exports=imageGalleryEdit:(app.modules.imageGalleryEdit={},app.modules.imageGalleryEdit.module=imageGalleryEdit);
 /*_____*/ 
var main=function(){var y=new nModule,o={},a=function(n){var l,a,o=deep(n,"history"),e=null,i=null,t=null,s=null,r="common",d={panelTopPosition:function(){isMobile()||(45<$(window).scrollTop()?l.panel.closest(".fxd").addClass("dfxd"):l.panel.closest(".fxd").removeClass("dfxd"),d.panelPosition())},panelPosition:function(){var n=l.panel.closest(".fxd"),e=l.panel.closest(".mwork"),a=$(window).width();if(n.hasClass("dfxd")){var o=(a-1280)/2;o<0&&(o=0);var i=a-(e.offset().left+e.width())+0,t=a-i-350+0+0;n.css("right",i+"px"),n.css("left",t+"px")}else n.removeAttr("style")},showHideUp:function(){200<l.w.scrollTop()?l.up.addClass("active"):l.up.removeClass("active")},currentMode:function(){"recommended"==r?y.nav.api.history.addParameters({r:"recommended"}):"sub"==r?y.nav.api.history.addParameters({r:"sub"}):y.nav.api.history.removeParameters(["r"]),m.lenta(),h(),m.smallpanel()}},c=function(){r=$(this).attr("lenta"),d.currentMode()},p=function(){d.panelPosition()},u=function(){s=slowMade(function(){d.showHideUp()},s,30)},f=function(){_scrollTop(0)},m={smallpanel:function(){l.smallpanel.find(".item").removeClass("active"),l.smallpanel.find('.item[lenta="'+r+'"]').addClass("active")},share:function(){isMobile()||y.nav.api.load({open:!0,id:"share",el:l.share,animation:!1,clbk:function(n,e){t=e}})},panel:function(){y.nav.api.load({open:!0,id:"panel",el:l.panel,animation:!1,clbk:function(n,e){a=e,d.panelPosition(),window.addEventListener("resize",p),window.addEventListener("scroll",d.panelTopPosition)}})},lenta:function(){y.nav.api.load({open:!0,id:"lenta",el:l.lenta,animation:!1,mid:"main",essenseData:{hr:"index?"},clbk:function(n,e){i=e}})}},v=function(){},h=function(){y.app.user.isState(function(n){n&&(isMobile()||(console.log("currentMode",r),"common"==r?(m.share(),l.c.find(".bgCaption").removeClass("hidden")):(l.share.html(""),l.c.find(".bgCaption").addClass("hidden"))))})},w=function(n){localStorage.lentakey=parameters().r||"index",m.lenta(),h(),y.app.user.isState(function(n){n&&(isMobile()||m.panel())}),m.smallpanel()};return{primary:o,parametersHandler:function(n){localStorage.lentakey=parameters().r||"index",r=parameters().r?parameters().r:"common",m.lenta(),h(),n&&n()},authclbk:function(){void 0!==l&&l.c&&l.c.find(".bgCaption").removeClass("hidden")},getdata:function(n,e){var a=parameters();if(r=a.r?a.r:"common",beginmaterial=a.s||a.i||a.v||null,e.state||!o||"undefined"==typeof _Electron&&!window.cordova&&("common"!=r||beginmaterial)){n({})}else"undefined"!=typeof _Electron||window.cordova?y.nav.api.load({open:!0,href:"authorization",history:!0}):y.nav.api.load({open:!0,href:"video",history:!0})},destroy:function(){window.removeEventListener("scroll",u),window.removeEventListener("scroll",d.panelTopPosition),window.removeEventListener("resize",p),e&&e.destroy(),i&&i.destroy(),t&&t.destroy(),a&&a.destroy(),i=e=a=null},init:function(n){i=e=null,v(),(l={}).c=n.el.find("#"+y.map.id),l.share=l.c.find(".share"),l.lenta=l.c.find(".lentaWrapper"),l.panel=l.c.find(".panel"),l.up=l.c.find(".upbutton"),l.smallpanel=l.c.find(".smallpanell"),l.w=$(window),window.addEventListener("scroll",u),l.up.on("click",f),l.smallpanel.find(".item").on("click",c),w()}}};return y.run=function(n){var e=y.addEssense(o,a,n);y.init(e,n)},y.stop=function(){var a=null;return _.each(o,function(n){var e=n.destroy();e&&(a=e)}),a},y.authclbk=function(){_.each(o,function(n){n.authclbk()})},y}();"undefined"!=typeof module?module.exports=main:(app.modules.main={},app.modules.main.module=main);
 /*_____*/ 
var userslist=function(){var f=new nModule,s={},t=function(e){var s,t,n=deep(e,"history"),i=[],o=!1,r=0,u=function(){$(window).scrollTop()+$(window).height()>$(document).height()-400&&!t&&!o&&c()},d=function(e,n){f.shell({name:"users",el:s.users,data:{addresses:e,commonkey:"subscribes"},inner:append},function(e){n&&n()})},a=function(e,n){t||(t=!0,topPreloader(80),f.sdk.users.get(e,function(){t=!1,topPreloader(100),n&&n()}))},c=function(e){var n=_.filter(i,function(e,n){if(10*r<=n&&n<10*(r+1))return!0});n.length?(a(n,function(){d(n,e)}),r++):o=!0},l=function(){};return{primary:n,getdata:function(e,n){r=0,t=o=!1;var s={};i=deep(n.settings,"essenseData.addresses")||[],s.addresses=i,s.empty=deep(n.settings,"essenseData.empty"),s.caption=deep(n.settings,"essenseData.caption"),e(s)},destroy:function(){window.removeEventListener("scroll",u),s={}},init:function(e){l(),(s={}).c=e.el.find("#"+f.map.id),s.users=s.c.find(".users"),c(function(){window.addEventListener("scroll",u)}),e.clbk(null,e)}}};return f.run=function(e){var n=f.addEssense(s,t,e);f.init(n,e)},f.stop=function(){_.each(s,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=userslist:(app.modules.userslist={},app.modules.userslist.module=userslist);
 /*_____*/ 
var test = (function(){

	var self = new nModule();

	var mdl = self;

	var essenses = {};

	var Essense = function(p){

		var primary = deep(p, 'history');

		var el, lastTransaction, ed, ref; 

		var firstTime = false;

		var tempInfo = {
			language : /*self.app.localization.key ||*/ 'en'
		}

		var changedLoc = false;

		var actions = {		

			valid : function(v1, v2){
				if(!actions.equal((v1), (v2))){

					if(trim(v1.name) && v1.image) return true

				}
			},

			equal : function(v1, v2){

				var a = function(o){
					return 'name:' + (trim(o.name) || "") + 'image:' + (o.image || "") + 'about:' + (trim(o.about) || "") + 'site:' + (trim(o.site) || "")  + 'language:' + (o.language || "") + "addresses:" + JSON.stringify(o.addresses || [])
				}

				console.log(v1, v2)


				return a(v1) == a(v2)
			},
			cancel : function(){
				actions.userOptions()

				actions.upanel();

				renders.icon();

				renders.options();
			},
			save : function(clbk){

				if(el.c.find('.userPanel').hasClass('loading')){
					return
				}

				if(actions.equal(tempInfo, self.app.platform.sdk.user.storage.me)){
					sitemessage(self.app.localization.e('uchanges'))

					return
				}

				if(!actions.valid(tempInfo, self.app.platform.sdk.user.storage.me)){
					sitemessage(self.app.localization.e('uchangesvalid'))

					if(!trim(tempInfo.name)){	
						var pn = el.c.find('[parameter="name"] input')

						pn.focus()

						_scrollTo(pn)
					}
					else{
						if(!tempInfo.image){	
							var pn = el.c.find('.fileUploader')

							_scrollTo(pn)
						}	

						/*else
						{
							if(!tempInfo.about){	
								var pn = el.c.find('[parameter="about"] input')

								pn.focus()

								_scrollTo(pn)
							}	
						}*/
					}

						

					return
				}

				var userInfo = new UserInfo();

					userInfo.name.set(trim(tempInfo.name));
					userInfo.language.set(tempInfo.language);
					userInfo.about.set(trim(tempInfo.about));
					userInfo.site.set(trim(tempInfo.site));
					userInfo.image.set(tempInfo.image);
					userInfo.addresses.set(tempInfo.addresses);

					userInfo.ref.set(deep(ref, 'address') || '');

				topPreloader(40)

				el.c.find('.userPanel').addClass('loading')

				el.upanel.addClass('loading')

				userInfo.uploadImage(function(){


					self.sdk.node.transactions.create.commonFromUnspent(

						userInfo,

						function(tx, error){

							el.upanel.removeClass('loading')

							el.c.find('.userPanel').removeClass('loading')

							topPreloader(100)

							if(!tx){

								self.app.platform.errorHandler(error, true)	
							}
							else
							{

								self.app.platform.sdk.user.storage.me = tx
								
								tempInfo = _.clone(self.app.platform.sdk.user.storage.me)
								
								actions.upanel()

								if (ref && firstTime){
									localStorage[self.app.platform.sdk.address.pnet().address + 'subscribeRef'] = ref.address
								}

								self.app.reloadModules(function(){


									if (primary){

										self.nav.api.go({
											href : 'index',
											history : true,
											open : true
										})	

									}
									else
									{

										if (ed.success){
											ed.success()
										}
										else
										{
											if (clbk)
												clbk()
										}

										

									}

									

								})

								
							}

						},

						/*{
							pseudo : true
						}*/
					
					)
				})
				
		
			},
			upload	: function(file, clbk){

				topPreloader(20);

				var images = [{
					original : file.base64,
					index : 0
				}]

				self.nav.api.load({
					open : true,
					id : 'imageGalleryEdit',
					inWnd : true,

					essenseData : {
						edit : true,
						initialValue : 0,
						images : images,

						apply : true,

						crop : {
							aspectRatio : 1 / 1,
							style : 'round apply',
							autoCropArea : 0.9,
						},

						success : function(i, editclbk){

							images[0].original

							resize(images[0].original, 100, 100, function(resized){
								var r = resized.split(',');

								editclbk();

								if (r[1]){

									tempInfo.image = resized;

									renders.icon()

									actions.upanel()

									

								}
								else
								{
									topPreloader(100);
								}
							})

						}
					}
				})


				
			},
			upanel : function(){

				if(!el.upanel) return

				if(_.toArray((self.app.platform.sdk.node.transactions.temp.userInfo || {})).length > 0){

					el.upanel.addClass('wait')

					el.c.find('.caption').remove()

				}
				else{
					el.upanel.removeClass('wait')

					if(actions.equal(tempInfo, self.app.platform.sdk.user.storage.me) || !actions.valid(tempInfo, self.app.platform.sdk.user.storage.me)){
						
						el.upanel.removeClass('changes')
					}
					else
					{
						el.upanel.addClass('changes')
					}
				}

				
				
			},

			clear : function(){
				actions.userOptions();
				renders.caption();
			},

			userOptions : function(){

				console.log('self.app.platform.sdk.user.storage.me', self.app.platform.sdk.user.storage.me)

				tempInfo = _.clone(self.app.platform.sdk.user.storage.me)

				_.each(userOptions, function(parameter, id){
					var value = self.app.platform.sdk.user.storage.me[parameter.id];

					if(id == 'addresses'){
						value = _.clone(self.app.platform.sdk.user.storage.me[parameter.id]);
					}
					
					parameter.value = value || parameter.defaultValue || ''
					tempInfo[parameter.id] = parameter.value

					parameter._onChange = function(value){

						if(id == 'addresses'){
							tempInfo[parameter.id] = _.clone(value);
						}
						else
						{
							tempInfo[parameter.id] = trim(value);
						}

						

						actions.upanel()

						if (id == 'language'){
							var a = self.app.localization.available[value];

							if (a && a.key != self.app.localization.key)
							{
								self.app.localization.lightSet(a.key);
							}
						}

						if (id == 'name'){
							self.app.platform.sdk.users.nameExist(tempInfo[parameter.id], function(exist){

								if(!exist || exist == self.app.platform.sdk.address.pnet().address){
									el.c.find('.errorname').fadeOut();
								}
								else
								{
									el.c.find('.errorname').fadeIn();
								}

								
							})	
						}
					}

					//if(id == 'ref'){

						//self.app.platform.api.inputs.user(parameter)

					//}
				})
			},

			signout : function(){
				self.app.user.signout();

				self.app.reload({
					href : 'authorization'
				});
			}
		}

		var userOptions = {
			name : new Parameter({
				name : 'Nickname',
				id : 'name',
				type : "STRING",
				onType : true,
				require : true
			}),

			language : new Parameter({
				name : self.app.localization.e('ulanguage'),
				id : 'language',
				type : "VALUES",
				defaultValue : /*self.app.localization.key || */'en',
				possibleValues : ['en'/*, 'ru'*/],
				possibleValuesLabels : ['English'/*, 'Русский'*/],
			}),

			about : new Parameter({
				name : self.app.localization.e('uabout'),
				id : 'about',
				type : "TEXT",
				onType : true,
				
				placeholder : 'Please write a few words about yourself to help people decide if they want to follow you'
			}),

			site : new Parameter({
				name : self.app.localization.e('uwebsite'),
				id : 'site',
				type : "TEXT",
				onType : true,
				value : ''
			}),

			addresses : new function(){

				var _self = this;

				_self.id = 'addresses';
				_self.name = self.app.localization.e('uaddresesd')
				_self.value = [];

				_self.defaultValue = [];

				_self.remove = function(currency, address){
					removeEqual(_self.value, {
						currency : currency,
						address : address
					})

					if (_self._onChange)
						_self._onChange(_self.value)

					_self.addedAddresses();
				}

				_self.add = function(v){


					_self.value.push(v)

					if (_self._onChange)
						_self._onChange(_self.value)

					_self.addedAddresses();

				}

				_self.addDialog = function(){

					var validate = function(cur, address){

						if(address.length > 0){
							return true
						}
						else
						{
							return false
						}

						
					}

					mdl.fastTemplate('addaddress', function(rendered){

						dialog({
							html : rendered,

							wrap : true,

							success : function(d){

								var currency = d.el.find('.currency').val();
								var address = d.el.find('.address').val();

								if(validate(currency, address)){


									_self.add({
										currency : currency,
										address : address
									})

									return true;

								}
							},

							clbk : function(_el){

								var currency = _el.find('.currency');
								var address = _el.find('.address');
								var b = _el.find('.btn1');


								var vl = function(){
									var c = currency.val();
									var a = address.val();

									if(validate(c, a)){
										b.removeClass('disabled')

										return true;
									}
									else
									{
										b.addClass('disabled')
										return false;
									}
								}

								address.focus()
								address.on('change', vl)
								address.on('keyup', vl)

								currency.on('change', vl)
								currency.on('keyup', vl)

								vl()
							},

							class : "one addaddressDialog"
						})

					}, {
					})
				}

				_self.removeEvent = function(){
					var currency = $(this).closest('.addedAddress').attr('currency')
					var address = $(this).closest('.addedAddress').attr('address')

					_self.remove(currency, address)
				}

				_self.addedAddresses = function(){

					/* 1F1tAaz5x1HUXrCNLbtMDqcw6o5GNn4xqX */

					var h = '';

					_.each(_self.value, function(v){
					
						if(!v || !v.currency) return

						h += '<div class="addedAddressWrapper">'
							h += '<div class="addedAddress table" currency="'+v.currency+'" address="'+v.address+'">'

							h += 	'<div class="currencyWrapper">'	
							h += 		v.currency.toUpperCase()
							h += 	'</div>'

							h += 	'<div class="addressWrapper">'	
							h += 		v.address
							h += 	'</div>'

							h += 	'<div class="panelWrapper">'	
							h += 		'<div class="item remove">'	
							h += 			'<i class="far fa-times-circle"></i>'	
							h += 		'</div>'
							h += 	'</div>'

							h += '</div>'
						h += '</div>'
					})
					
					_self.el.find('.addedAddressesWrapper').html(h)

					_self.el.find('.addedAddressesWrapper .remove').on('click', _self.removeEvent)
				}



				_self.init = function(_el){

					_self.defaultValue = [];

					_self.el = _el.find('.adressesInput')

					_self.addedAddresses();

					_self.el.find('.addaddress').on('click', _self.addDialog)
				}	

				_self.input = function(){
					var h = ''

					h += '<div class="adressesInput">'
					h += 	'<div class="addaddressWrapper">'
					h += 		'<div class="addaddress">'
					h += 			'<i class="fas fa-plus"></i>'
					h += 		'</div>'
					h += 	'</div>'
					h += 	'<div class="addedAddressesWrapper">'
					h += 	'</div>'
					h += '</div>'

					return h;
				}

				return _self
			},

			/*ref : new Parameter({
				name : "Referal",
				id : 'ref',
				type : "BOOLEAN",
				onType : true,
				value : ''
			}),*/
			
		}

		var privateInformation = {
			/*sex : new Parameter({
				name : "Sex",
				id : 'sex',
				type : "VALUES",
				defaultValue : 'notspecified',
				possibleValues : ['men', 'woman', 'notspecified'],
				possibleValuesLabels : ['Not Specified', 'Man', 'Woman'],
			})*/
		}

		var events = {
			signout : function(){
				actions.signout()
			},
			save : function(){
				actions.save()
			},
			cancel : function(){
				actions.cancel()
			},
			importAddress : function(){

				var address = self.app.platform.sdk.address.pnet()
				
				topPreloader(30);

				self.app.platform.sdk.node.account.import(address.address, function(){

					topPreloader(100);

					sitemessage("Address " + address.address + " was successfully imported")

				})
			}
		}

		var setNode = null;
		var setAddressType = null;

		var renders = {
			options : function(clbk){

				self.shell({

					name :  'options',
					el :   el.options,
					data : {
						tempInfo : tempInfo,
						userOptions : userOptions
					},

				}, function(_p){

					ParametersLive(_.toArray(userOptions), _p.el)

					userOptions.addresses.init(_p.el)

					if (clbk)
						clbk();

				})
			},
			icon : function(clbk){
				self.shell({

					name :  'icon',
					el :   el.icon,
					data : {
						tempInfo : tempInfo,
						ed : ed
					},

				}, function(_p){

					initUpload({
						el : _p.el.find('.pgroup'),
			
						ext : ['png', 'jpeg', 'jpg'],

						dropZone : el.c,

						multiple : false,

						action : function(file, clbk){

							actions.upload(file, function(){								

								if (clbk)
									clbk();

							})
							
						}
					})

					if (clbk)
						clbk();

				})
			},
			unspent : function(unspent, clbk){
				self.shell({

					name :  'unspent',
					el :   el.unspent,
					data : {
						unspent : unspent
					},

				}, function(_p){

					if (clbk)
						clbk();

				})
			},

			caption : function(unspent, clbk){

				return

				self.shell({

					name :  'caption',
					el :   el.caption,
					data : {
						p2pkh : self.app.platform.sdk.address.pnet(),
						tempInfo : tempInfo
					},

				}, function(_p){					

					if (clbk)
						clbk();

				})
			},

			address : function(){
				el.c.find('.adr').html(bitcoin.payments[self.app.platform.addressType]({ pubkey: self.app.user.key.value}))
			}
			
		}

		var state = {
			save : function(){

			},
			load : function(){
				
			}
		}

		var initEvents = function(){
			el.import.on('click', events.importAddress)
			el.showhidetestpanel.on('click', function(){
				$(this).closest('.testPanel').toggleClass('active')
			})

			el.upanel.find('.cancel').on('click', events.cancel)
			el.upanel.find('.save').on('click', events.save)

			ParametersLive([setNode, setAddressType], el.c)			

			el.signout.on('click', events.signout)

			el.c.find('.refRemove').on('click', function(){
				ref = null;

				delete localStorage['ref']

				el.c.find('.referalMaketWrapper').remove()
			})
		}

		var make = function(){

			renders.caption()

			renders.icon();

			renders.options();

			self.sdk.node.transactions.get.unspent(function(unspent){
				renders.unspent(unspent)
			})

			self.app.platform.ws.messages.transaction.clbks.utemp = function(data){
				if(data.temp){
					if(data.temp.type == 'userInfo'){
						actions.upanel()
					}
				}
			}
		}

		var prepare = function(){

			var pv = _.map(self.app.platform.nodes, function(n, i){
				return i.toString()
			})

			var pvl = _.map(self.app.platform.nodes, function(n, i){
				return n.full
			})

			setNode = new Parameter({
				type : "VALUES",
				name : "setNode",
				id : 'setNode',
				possibleValues : pv,
				possibleValuesLabels : pvl,
				defaultValue : "1",
			}),

			setNode.value = self.app.platform.nodeid

			setNode._onChange = function(value){
				self.app.platform.nodeid = value;

				self.app.platform.state.save()
			}

			setAddressType = new Parameter({
				type : "VALUES",
				name : "setAddressType",
				id : 'setAddressType',
				possibleValues : self.app.platform.addressTypes,
				possibleValuesLabels : ['P2PKH', 'P2SH'/*, 'P2WPKH'*/],

				defaultValue : "p2sh"
			}),

			setAddressType.value = self.app.platform.addressType
			

			setAddressType._onChange = function(value){

				self.app.platform.addressType = value;

				self.app.platform.state.save()

				self.user.address.set(self.app.platform.sdk.address.pnet().address)

				self.app.reload();

			}

			actions.userOptions()

		}

		var freeMoney = function(){			

			self.app.platform.sdk.users.checkFreeMoney(self.app.platform.sdk.address.pnet().address, function(res){
				
			})
		}

		
		return {
			primary : primary,

			getdata : function(clbk, p){

				ref = null
				changedLoc = true;

				ed = p.settings.essenseData;

				self.app.platform.sdk.user.get(function(){

					if(_.isEmpty(self.app.platform.sdk.user.storage.me)){
						firstTime = true

						var _r = self.app.ref;

						if (_r && _r != self.app.platform.sdk.address.pnet())

						ref = _r;
					}

					prepare();

					var data = {};

						data.p2pkh = self.app.platform.sdk.address.pnet()

						data.setNode = setNode;
						data.setAddressType = setAddressType;
						data.userOptions = userOptions;
						data.tempInfo = tempInfo;
						data.firstTime = firstTime;
						data.ref = ref;

					if(ref){
						self.sdk.users.get(ref, function(){

							var address = ref;

							ref = self.sdk.users.storage[address] || null;

							if(ref) ref.address = address;

							
							data.ref = ref;

							clbk(data);

						})
					}
					else
					{
						clbk(data);
					}

					

				})

			},

			destroy : function(){
				el = {};



				if(self.app.platform.sdk.user.storage.me && !actions.equal(tempInfo, self.app.platform.sdk.user.storage.me)){
					
					return function(clbk){


						var locF = function(){

							delete self.app.platform.ws.messages.transaction.clbks.utemp
							
							clbk()

						}

						dialog({
							html : self.app.localization.e('usavechanges'),
							btn1text : self.app.localization.e('dyes'),
							btn2text : self.app.localization.e('dno'),
							success : function(){
								actions.save(locF)
							},

							fail : function(){

								tempInfo = _.clone(self.app.platform.sdk.user.storage.me)
								
								locF()
							}
						})

					}

				}

				return null;
			},
			
			init : function(p){

			
				state.load();

				el = {};
				el.c = p.el.find('#' + self.map.id);
				el.transaction = p.el.find('.transactionInfo');
				el.unspent = p.el.find('.unspentlist');
				el.showhidetestpanel = p.el.find('.showhidetestpanel')
				el.import = p.el.find('.import');
				el.caption = el.c.find('.bgCaption');
				el.icon = el.c.find('.pgroupIconWrapper');

				el.usericon = el.c.find('.usericon');
				el.options = el.c.find('.optionsParameters');
				el.upanel = ed.panel || el.c.find('.upanel');

				el.signout = el.c.find('.signout')

				initEvents();

				actions.upanel();

				make();

				p.clbk(null, p);
			}
		}
	};



	self.run = function(p){

		var essense = self.addEssense(essenses, Essense, p);

		self.init(essense, p);

	};

	self.stop = function(){

		var s = null

		_.each(essenses, function(essense){

			var d = essense.destroy();

			if (d){
				s = d;
			}

		})

		if(!s) return;

		return {
			action : s
		};

	}

	return self;
})();


if(typeof module != "undefined")
{
	module.exports = test;
}
else{

	app.modules.test = {};
	app.modules.test.module = test;

}
 /*_____*/ 
var scheduler=function(){var f=new nModule,t={},n=function(e){var s,r,a=deep(e,"history"),t=[],n=null,i=function(a){return _.find(t,function(e){return e.id==a})},o=function(a){return findIndex(t,function(e){return e.id==a})},d={postInterval:function(){n=setInterval(function(){var e=d.taskForTime();l.time(),e.length&&lazyEach({array:e,sync:!0,action:function(e){var a=e.item;f.app.platform.sdk.node.transactions.get.unspent(function(){d.post(a,function(){e.success()})},null,!0)}})},6e4)},missed:function(e){dialog({html:"You have <b>"+e.length+"</b> missed posts. Do you want to share it?",btn1text:"Yes",btn2text:"No",success:function(){_.each(e,function(e){d.post(e)})},fail:function(){_.each(e,function(e){e.time=null,l.task(e,null,!0)})}})},taskForTime:function(){var a=new Date;return _.filter(t,function(e){if(e.time&&e.ready&&a>e.time&&!e.remove)return!0})},post:function(n,s){if(n.share){var e=n.share.validation();e?(sitemessage(e),d.failPost(n.id),s&&s(!1)):f.app.platform.sdk.pool.dumpKey(r,n.address,function(e){if(e){var a=bitcoin.ECPair.fromPrivateKey(Buffer.from(e,"hex")),t=bitcoin.payments.p2pkh({pubkey:a.publicKey});n.module.post(function(e,a){e?d.successPost(n.id):(sitemessage(a),d.failPost(n.id)),s&&s(e)},{address:t,keys:a})}else sitemessage("noprivateley")})}else sitemessage("error"),d.failPost(n.id),s&&s(!1)},add:function(){var e={time:null,id:makeid(),share:new Share,address:f.app.platform.sdk.address.pnet().address,ready:!1};e.share.on.change.scheduler=function(){u.save()},t.push(e),l.task(e),u.save()},remove:function(e){var a=o(e);t.splice(a,1),u.save(),s.c.find('.shareAppendWrapper[t="'+e+'"]').remove()},failPost:function(a){var e=i(a);e.time=null,l.task(e,function(){l.ready();var e=s.c.find('.shareAppendWrapper[t="'+a+'"] .result');e.html('<i class="fas fa-exclamation-circle"></i>'),e.addClass("bad")},!0)},successPost:function(e){i(e).remove=!0;var a=s.c.find('.shareAppendWrapper[t="'+e+'"] .result');a.html('<i class="far fa-check-circle"></i>'),a.addClass("good"),l.ready(),u.save()}},c=function(){var e=$(this).closest(".shareTimeWrapper").attr("task"),a=i(e),t=function(){d.remove(e)};a&&(a.share.validation()?t():dialog({html:"Do you really want to remove this task?",btn1text:"Yes",btn2text:"No",success:t}))},l={tasks:function(e){lazyEach({array:t,action:function(e){var a=e.item;l.task(a,e.success)},sync:!0,all:{success:e}})},task:function(t,n,e){e||s.tasks.append('<div class="shareAppendWrapper" t="'+t.id+'">'),_el=s.tasks.find('.shareAppendWrapper[t="'+t.id+'"]'),f.shell({name:"task",el:_el,data:{task:t}},function(e){e.el.find(".remove").on("click",c);var a=e.el.find('.shareTimeWrapper[task="'+t.id+'"] .shareContainer');f.nav.api.load({open:!0,id:"share",el:a,animation:!1,_id:t.id,essenseData:{daddress:t.address||f.app.platform.sdk.address.pnet().address,dtype:t.ready,share:t.share,exoprtByTime:!0,pack:r||{},time:t.time,notClear:!0,changeArrange:function(){u.save()},selectTime:function(e){t.time=e,l.ready(),u.save()},address:function(e){t.address=e,l.ready(),u.save()},type:function(e){"p"==e&&d.post(t,function(){}),"t"==e&&(t.ready=!0),"w"==e&&(t.ready=!1),l.time(),l.ready(),u.save()}},clbk:function(e,a){t.module=a,n&&n()}})})},time:function(){var e=new Date;s.c.find(".timeCellWrapper .time").html(e.getHours()+":"+e.getMinutes())},ready:function(){var a=new Date,e=_.filter(t,function(e){if(e.time&&e.ready&&a<e.time&&!e.remove)return!0});s.c.find(".activeTasks .count").html(e.length)}},u={save:function(){var e=_.filter(t,function(e){if(!e.remove)return!0}),a=_.map(e,function(e){var a=null;return e.time&&(a=dateToStr(e.time)),{time:a,id:e.id,share:e.share.export(!0),address:e.address,ready:e.ready}});localStorage.tasks=JSON.stringify(a)},load:function(){var e=JSON.parse(localStorage.tasks||"[]");t=_.map(e,function(e){var a=new Share;a.import(e.share),a.on.change.scheduler=function(){u.save()};var t=null;return e.time&&(t=strToDate(e.time)),{time:t,id:e.id,share:a,address:e.address,ready:e.ready||!1}})}};return{primary:a,getdata:function(e){u.load(),e({tasks:t})},destroy:function(){s={},n&&clearInterval(n),n=null},init:function(e){var a,t,n;u.load(),(s={}).c=e.el.find("#"+f.map.id),s.tasks=s.c.find(".shares"),s.add=s.c.find(".addshare"),s.add.on("click",d.add),d.postInterval(),a=f.app.platform.sdk.address.pnet().address,t=f.app.platform.sdk.pool.getPack(a),n=function(){l.tasks();var e=d.taskForTime();l.time(),l.ready(),e.length&&d.missed(e)},t?(r=t[0],f.app.platform.sdk.pool.info(r,function(){n()})):n(),e.clbk(null,e)}}};return f.run=function(e){var a=f.addEssense(t,n,e);f.init(a,e)},f.stop=function(){_.each(t,function(e){e.destroy()})},f}();"undefined"!=typeof module?module.exports=scheduler:(app.modules.scheduler={},app.modules.scheduler.module=scheduler);
 /*_____*/ 
var mchat=function(){var w=new nModule,i={},n=function(e){var d,t=deep(e,"history"),n=makeid(),m={},l=null,f=null,a=null,p=null,u={},h={},g={preloader:function(e){e?d.c.addClass("loading"):d.c.removeClass("loading")},close:function(){w.removeEssense(i,n),m.closeClbk&&m.closeClbk()},sendClbk:function(e,t,n){var a=d.messages.find("#"+e.EncryptedMessageID);t?(e.EncryptedMessageID=t,e.result="success",e.Message=n.note||"",e.Attachment=n.attachment||"",e.AttachmentName=n.attachmentName||"",e.AttachmentPreview=n.attachmentPreview||"",a.attr("id",e.EncryptedMessageID)):e.result="fail",a.removeClass("sending"),a.addClass(e.result)},mobileBuildHeight:function(){if("buildin"==m.view&&isMobile()){var e=d.c.find(".chatwindow").height(),t=$(window).height(),n=d.c.find(".chatmessages").height();e<=t-175&&n<e?d.c.find(".chatwindow").height(t-175):d.c.find(".chatwindow").css("height","auto")}},spacer:function(){if(g.mobileBuildHeight(),isTablet()){var e=0;0<d.messages.find(".chatmessage").length&&(d.c.find(".spacer").height(0),(e=d.c.find(".chatwindow").height()-d.c.find(".chatmessages").height()-10)<0&&(e=0),d.spacer.height(e+"px"))}},send:function(e){e&&p.rtc.send(e)},sendAttachment:function(e,n){w.app.platform.sdk.chats.send({attachment:e.attachment,attachmentName:e.attachmentName,attachmentPreview:e.attachmentPreview,temp:n},p.ThreadID,function(e,t){g.sendClbk(n,e,t)})},addTempMessage:function(e){var t=new Date;w.app.platform.timeDifference&&(t=t.addSeconds(w.app.platform.timeDifference/1e3));var n={Created:dateToStrUtcS(t),ThreadID:p.ThreadID,EncryptedMessageID:makeid(!0),temp:!0,UserID:w.app.user.data.id,decrypted:{Message:e.note,AttachmentName:e.attachmentName,AttachmentPreview:e.attachmentPreview}};return p.messages.push(n),o.messages(null,[n],!0),n},clearTempMessages:function(){d.messages.find(".temp").remove()},scrollToPx:function(e,t){if(!g.checkState())return!1;if(null!==t){var n=null,a=null,s="position";if("buildin"==m.view?(n=$(window),a=$("html"),s="offset"):(n=d.c.find(".chatwindow"),a=d.c.find(".chatmessages")),"toLast"==e||"toLast"==t){var i=d.messages.find(".chatmessage:nth-last-child(1)");if(i[s]()){var c=70;isMobile()&&(c=115),t=i[s]().top+i.height()+c-n.height(),n.scrollTop(t,200)}}else{var o=a.height();n.scrollTop(o-t,200)}}},scrollPx:function(e){var t=null,n=null,a=null;if(n="buildin"==m.view?(t=$(window),$("html")):(t=d.c.find(".chatwindow"),d.c.find(".chatmessages")),"toLast"==e)a="toLast";else{var s=d.messages.find(".chatmessage:nth-last-child(1)"),i="position";if("buildin"==m.view&&(i="offset"),inView(s,{inel:t,offset:0}).length){var c=n.height(),o=t.scrollTop();a=s[i]().top+s.height()+70,a=o+t.height()>a?c-o:"toLast"}}return a},saveAttachment:function(e){topPreloader(30);var t=c.findEl(e);t&&t.addClass("saveAttachment"),w.app.platform.sdk.chats.getAttachment(e,function(e){topPreloader(100),t&&t.removeClass("saveAttachment"),e?e.ChatMessageAttach&&saveAs({download:e.decrypted.AttachmentName,file:e.ChatMessageAttach,noA:!0}):console.log("ERROR")})},openGallery:function(e){var t={idName:"EncryptedMessageID",initialValue:e.EncryptedMessageID,getImages:function(){return _.filter(p.messages,function(e){var t=deep(e,"decrypted.AttachmentName");if(t&&(-1<t.indexOf(".jpg")||-1<t.indexOf(".png")||-1<t.indexOf(".jpeg")))return!0})},getImage:function(e,n){e.ChatMessageAttach?n&&n({src:e.ChatMessageAttach,name:e.decrypted.AttachmentName}):w.app.platform.sdk.chats.getAttachment(e,function(e){var t={src:e.ChatMessageAttach,name:e.decrypted.AttachmentName};n&&n(t)})}};o.gallery(t)},getPreview:function(e){w.app.platform.sdk.chats.getPreview(e,function(e){_.each(e,function(e){var t=c.findEl(e);o.messages(null,[e],!0,t)})})},read:function(){w.app.platform.focus&&w.app.platform.sdk.chats.read(p.messages,function(e){g.countUnread(),_.each(e,function(e){c.findEl(e).addClass("read")})})},countUnread:function(){w.app.user.data.id},checkState:function(){if(!d.c.hasClass("minimized"))return!0}},v={minimize:function(){d.c.addClass("minimized"),m.minimizeClbk&&m.minimizeClbk(),l.clear(),f.clear(),d.type.blur()},expand:function(){d.c.removeClass("minimized"),m.expandClbk&&m.expandClbk(),isTablet()||d.type.focus(),g.spacer(),setTimeout(function(){g.scrollToPx("toLast","toLast")},100)},out:function(){w.app.modules.chats.module.api.add(p.ThreadID)},close:function(){g.close()},type:function(e,t){var n,a;if(a=isMobile()?(n=this).getText():(t=e,(n=$(this)).val()),13==t.which||13==t.keyCode)return a&&(isMobile()?n.setText(""):n.val(""),g.send(a)),!1},resizeWindow:function(){l&&l.setOffset([$("#menu .menuWrapper").height(),0]),f&&f.setOffset([50,100])},getAttachment:function(){var e=$(this).closest(".chatmessage"),t=e.attr("id");if(!e.hasClass("sending")){var n=c.findMessage(t);if(n.decrypted&&n.decrypted.AttachmentName){var a=n.decrypted.AttachmentName.toLowerCase();-1<a.indexOf(".jpg")||-1<a.indexOf(".png")||-1<a.indexOf(".jpeg")?g.openGallery(n):g.saveAttachment(n)}}},messagesInView:function(){a=slowMade(function(){if(!g.checkState())return!1;var e,t=d.messages.find(".chatmessage"),n=d.messages.find(".chatmessage:nth-last-child(1)");"buildin"==m.view&&(e=$(window)),"fixedin"==m.view&&(e=d.c.find(".chatwindow"));var a=inView(t,{inel:e}),s=inView(n,{inel:e});if(0<a.length)_.map(a,function(e){var t=$(e).attr("id");return c.findMessage(t)});s.length},a,100)}},c={findMessage:function(t){return _.find(p.messages,function(e){return e.EncryptedMessageID==t})},findEl:function(e){return d.c.find("#"+(e.tm+e.f))}},o={gallery:function(e){e||(e={}),w.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:e})},safemessages:function(e,t){var s=_.map(h,function(e,t){return{m:e,t:t}});s=_.sortBy(s,function(e){return Number(e.t)});var i=[];_.each(s,function(t,n){var a={newmessages:[],oldmessage:t};_.each(e,function(e){(Number(e.tm)<Number(t.t)||n==s.length-1)&&(!n||Number(s[n-1].t)>Number(e.tm))&&a.newmessages.push(e)}),a.newmessages.length&&(a.newmessages.push(a.oldmessage),a.newmessages=_.sortBy(a.newmessages,function(e){return Number(t.t)}),i.push(a))}),i.length?lazyEach({array:i,action:function(e){var t=e.item,n=c.findEl(t.oldmessage);o.messages(e.success,t.newmessages,null,n)},all:{success:t}}):o.messages(t,e)},messages:function(t,e,n,a){var s="toLast";e&&(s="fixed");var i=g.scrollPx(s);e||(e=[]),e=_.filter(e,function(e){var t=e.tm+e.f;if(!u[t])return u[t]=!0,h[e.tm]=e,!0});var c=_.sortBy(e,function(e){return Number(e.tm)});n||g.clearTempMessages();var o=append,r=d.messages;a&&(o=replaceWith,r=a),w.shell({name:"messages",el:r,data:{chat:p,messages:c},inner:o},function(e){m.messagesClbk&&m.messagesClbk(),d.messages.find(".attachment").off("click"),d.messages.find(".attachment").on("click",v.getAttachment),v.messagesInView(),0<d.messages.find(".chatmessage").length?d.c.find(".other").fadeOut(1):d.c.find(".other").fadeIn(1),n&&(i="toLast"),g.spacer(),setTimeout(function(){g.scrollToPx(s,i)},20),l&&l.action(),f&&f.action(),g.countUnread(),t&&t()})}},s=function(){};return{primary:t,getdata:function(t,e){deep(e,"settings.essenseData");var n={};(p=deep(e,"settings.essenseData.chat"))&&w.app.platform.sdk.chats.info([p],function(e){n.chat=p,w.app.platform.sdk.messenger.getChat(p),n.canEnc=!0,t(n)})},destroy:function(){d.type&&d.type.blur(),$("html").off("mousemove",v.messagesInView),window.removeEventListener("scroll",v.messagesInView),window.removeEventListener("resize",v.resizeWindow),w.app.platform.ws,a&&clearTimeout(a),d={},l&&l.destroy(),f&&f.destroy(),l=f=null,w.app.platform.rtc.destroy(p.chat.id),p=null,0,m.destroyClbk&&m.destroyClbk()},init:function(e){u={},h={},(m=e.essenseData||{}).view||(m.view="buildin"),s(),(d={}).c=e.el.find("#"+w.map.id),d.messages=d.c.find(".chatmessages"),d.type=d.c.find(".type"),d.attachement=d.c.find(".attachement"),d.countUnread=d.c.find(".countUnread"),d.spacer=d.c.find(".spacer"),d.c.addClass(m.view),function(){if("buildin"==m.view){isMobile()||(l=new Caption({container:d.c.find(".chatWrapper"),caption:d.c.find(".captionfwrapper"),offset:[$("#menu .menuWrapper").height(),0]}).init());var e=0;isMobile()&&(e=50),f=new Caption({container:d.c.find(".chatWrapper"),caption:d.c.find(".bcaptionfwrapper"),offset:[e,2*e],pos:"bottom"}).init(),d.c.find(".out").on("click",v.out),window.addEventListener("scroll",v.messagesInView),window.addEventListener("resize",v.resizeWindow),$("html").on("mousemove",v.messagesInView)}"fixedin"==m.view&&(d.c.find(".close").on("click",v.close),d.c.find(".chatwindow").on("scroll",v.messagesInView),$("html").on("mousemove",v.messagesInView)),d.c.find(".minimize").on("click",v.minimize),d.c.find(".expand").on("click",v.expand),d.countUnread.on("click",function(){v.expand()}),isMobile(),d.type.on("keyup",v.type),initUpload({el:d.attachement,ext:["png","jpeg","jpg","pdf"],multiple:!0,maxFileSize:5,dropZone:d.c.find(".chatWrapper"),beforeUpload:function(e){var a=deep(e,"file.name");if("png"==e.ext||"jpeg"==e.ext||"jpg"==e.ext)resize(e.base64,200,200,function(t){var n=g.addTempMessage({attachmentName:a,attachmentPreview:t});resize(e.base64,1600,1600,function(e){g.sendAttachment({attachment:e,attachmentName:a,attachmentPreview:t},n)})});else{var t=g.addTempMessage({attachmentName:a});g.sendAttachment({attachment:e.base64,attachmentName:a},t)}}})}(),function(){if(p.rtc.clbks.receive.message.messenger=function(e){w.app.platform.sdk.messenger.load.messages(e,function(){o.messages(null,[e])})},p.rtc.clbks.receive.messages.messenger=function(e){w.app.platform.sdk.messenger.load.messages(e,function(){o.safemessages(e)})},p.rtc.clbks.send.message.messenger=function(e){w.app.platform.sdk.messenger.load.messages(e,function(){o.messages(null,[e],!0)})},p){var e=_.toArray(p.rtc.storage._db||{});w.app.platform.sdk.messenger.load.messages(e,function(){o.messages(null,e,!0)}),p.rtc.connect(function(){console.log(p)})}}(),w.app.platform.ws,e.clbk(null,e)},id:n,api:v}};return w.run=function(e){var t=w.addEssense(i,n,e);w.init(t,e)},w.stop=function(){_.each(i,function(e){e.destroy()})},w}();"undefined"!=typeof module?module.exports=mchat:(app.modules.mchat={},app.modules.mchat.module=mchat);
 /*_____*/ 
var chat=function(){var k=new nModule,y={},n=function(e){var t,m,i,n=deep(e,"history"),a=makeid(),d={},l=null,f=null,s=null,c=0,u=null,p=null,h={},g={},v={preloader:function(e){e?m.c.addClass("loading"):m.c.removeClass("loading")},close:function(){k.removeEssense(y,a),d.closeClbk&&d.closeClbk()},sendClbk:function(e,t,n){var a=m.messages.find("#"+e.EncryptedMessageID);t?(e.EncryptedMessageID=t,e.result="success",e.Message=n.note||"",e.Attachment=n.attachment||"",e.AttachmentName=n.attachmentName||"",e.AttachmentPreview=n.attachmentPreview||"",a.attr("id",e.EncryptedMessageID)):e.result="fail",a.removeClass("sending"),a.addClass(e.result)},mobileBuildHeight:function(){if("buildin"==d.view&&isMobile()){var e=m.c.find(".chatwindow").height(),t=$(window).height(),n=m.c.find(".chatmessages").height();e<=t-175&&n<e?m.c.find(".chatwindow").height(t-175):m.c.find(".chatwindow").css("height","auto")}},spacer:function(){if(v.mobileBuildHeight(),isTablet()){var e=0;0<m.messages.find(".chatmessage").length&&(m.c.find(".spacer").height(0),(e=m.c.find(".chatwindow").height()-m.c.find(".chatmessages").height()-10)<0&&(e=0),m.spacer.height(e+"px"))}},send:function(e){e&&u.rtc.send(e)},sendAttachment:function(e,n){k.app.platform.sdk.chats.send({attachment:e.attachment,attachmentName:e.attachmentName,attachmentPreview:e.attachmentPreview,temp:n},u.ThreadID,function(e,t){v.sendClbk(n,e,t)})},addTempMessage:function(e){var t=new Date;k.app.platform.timeDifference&&(t=t.addSeconds(k.app.platform.timeDifference/1e3));var n={Created:dateToStrUtcS(t),ThreadID:u.ThreadID,EncryptedMessageID:makeid(!0),temp:!0,UserID:k.app.user.data.id,decrypted:{Message:e.note,AttachmentName:e.attachmentName,AttachmentPreview:e.attachmentPreview}};return u.messages.push(n),r.messages(null,[n],!0),n},clearTempMessages:function(){m.messages.find(".temp").remove()},scrollToPx:function(e,t){if(!v.checkState())return!1;if(null!==t){var n=null,a=null,s="position";if("buildin"==d.view?(n=$(window),a=$("html"),s="offset"):(n=m.c.find(".chatwindow"),a=m.c.find(".chatmessages")),"toLast"==e||"toLast"==t){var i=m.messages.find(".chatmessage:nth-last-child(1)");if(i[s]()){var c=70;isMobile()&&(c=115),t=i[s]().top+i.height()+c-n.height(),n.scrollTop(t,200)}}else{var o=a.height();n.scrollTop(o-t,200)}}},scrollPx:function(e){var t=null,n=null,a=null;if(n="buildin"==d.view?(t=$(window),$("html")):(t=m.c.find(".chatwindow"),m.c.find(".chatmessages")),"toLast"==e)a="toLast";else{var s=m.messages.find(".chatmessage:nth-last-child(1)"),i="position";"buildin"==d.view&&(i="offset");inView(s,{inel:t,offset:-20,mode:"partall"});if(s&&s[i]()){var c=n.height(),o=t.scrollTop();a=c-s.height()-150,a=o+t.height()>a?"toLast":null}}return a},saveAttachment:function(e){topPreloader(30);var t=o.findEl(e);t&&t.addClass("saveAttachment"),k.app.platform.sdk.chats.getAttachment(e,function(e){topPreloader(100),t&&t.removeClass("saveAttachment"),e?e.ChatMessageAttach&&saveAs({download:e.decrypted.AttachmentName,file:e.ChatMessageAttach,noA:!0}):console.log("ERROR")})},openGallery:function(e){var t={idName:"EncryptedMessageID",initialValue:e.EncryptedMessageID,getImages:function(){return _.filter(u.messages,function(e){var t=deep(e,"decrypted.AttachmentName");if(t&&(-1<t.indexOf(".jpg")||-1<t.indexOf(".png")||-1<t.indexOf(".jpeg")))return!0})},getImage:function(e,n){e.ChatMessageAttach?n&&n({src:e.ChatMessageAttach,name:e.decrypted.AttachmentName}):k.app.platform.sdk.chats.getAttachment(e,function(e){var t={src:e.ChatMessageAttach,name:e.decrypted.AttachmentName};n&&n(t)})}};r.gallery(t)},getPreview:function(e){k.app.platform.sdk.chats.getPreview(e,function(e){_.each(e,function(e){var t=o.findEl(e);r.messages(null,[e],!0,t)})})},read:function(){c&&setTimeout(function(){c=0,v.countUnread()}),t=slowMade(function(){},t,1e3)},countUnread:function(){if(m.countUnread){var e=c;e?m.countUnread.html(e+' <i class="far fa-envelope"></i>'):m.countUnread.html(""),k.app.platform.api.electron.notifications(e,"messages")}},checkState:function(){if(!m.c.hasClass("minimized"))return!0}},w={minimize:function(){m.c.addClass("minimized"),d.minimizeClbk&&d.minimizeClbk(),l.clear(),f.clear(),m.type.blur()},expand:function(){m.c.removeClass("minimized"),d.expandClbk&&d.expandClbk(),isTablet()||m.type.focus(),v.spacer(),setTimeout(function(){v.scrollToPx("toLast","toLast")},100)},out:function(){k.app.modules.chats.module.api.add(u.ThreadID)},close:function(){v.close()},type:function(e,t){var n=this.getText();if(13==t.which||13==t.keyCode)return n&&(this.setText(""),v.send(n),$(this).val("")),!1},resizeWindow:function(){l&&l.setOffset([0,0]),f&&f.setOffset([50,100])},getAttachment:function(){var e=$(this).closest(".chatmessage"),t=e.attr("id");if(!e.hasClass("sending")){var n=o.findMessage(t);if(n.decrypted&&n.decrypted.AttachmentName){var a=n.decrypted.AttachmentName.toLowerCase();-1<a.indexOf(".jpg")||-1<a.indexOf(".png")||-1<a.indexOf(".jpeg")?v.openGallery(n):v.saveAttachment(n)}}},messagesInView:function(){s=slowMade(function(){if(!v.checkState())return!1;var e,t=m.messages.find(".chatmessage"),n=m.messages.find(".chatmessage:nth-last-child(1)");"buildin"==d.view&&(e=$(window)),"fixedin"==d.view&&(e=m.c.find(".chatwindow"));var a=inView(t,{inel:e}),s=inView(n,{inel:e});if(0<a.length)_.map(a,function(e){var t=$(e).attr("id");return o.findMessage(t)});0<s.length&&v.read()},s,100)}},o={findMessage:function(t){return _.find(u.messages,function(e){return e.EncryptedMessageID==t})},findEl:function(e){return m.c.find("#"+(e.tm+e.f))}},r={gallery:function(e){e||(e={}),k.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:e})},safemessages:function(e,t){var s=_.map(g,function(e,t){return{m:e,t:t}});s=_.sortBy(s,function(e){return Number(e.t)});var i=[];_.each(s,function(t,n){var a={newmessages:[],oldmessage:t};_.each(e,function(e){(Number(e.tm)<Number(t.t)||n==s.length-1)&&(!n||Number(s[n-1].t)>Number(e.tm))&&a.newmessages.push(e)}),a.newmessages.length&&(a.newmessages.push(a.oldmessage.m),a.newmessages=_.sortBy(a.newmessages,function(e){return Number(t.t)}),i.push(a))}),i.length?lazyEach({array:i,action:function(e){var t=e.item,n=o.findEl(t.oldmessage);r.messages(e.success,t.newmessages,null,n)},all:{success:t}}):r.messages(t,e)},messages:function(t,a,n,e){a=_.filter(a,function(e,t){var n=e.tm;if(17==e.tm.length&&(e.tm=n+"0"),!(p&&p.tm>e.tm))return!(a.length-50>t)});var s="toLast";a&&(s="fixed");var i=v.scrollPx(s);a||(a=[]),a=_.filter(a,function(e){var t=e.tm+e.f;return!!e.tm&&(h[t]?void 0:(h[t]=!0,g[e.tm]=e,!0))});var c=_.sortBy(a,function(e){var t=e.tm;return 17==e.tm.length&&(e.tm=t+"0"),Number(e.tm)});n||v.clearTempMessages();var o=append,r=m.messages;e&&(o=replaceWith,r=e),a.length?(p=c[c.length-1],k.shell({name:"messages",el:r,data:{chat:u,messages:c},inner:o},function(e){d.messagesClbk&&d.messagesClbk(),m.messages.find(".attachment").off("click"),m.messages.find(".attachment").on("click",w.getAttachment),w.messagesInView(),0<m.messages.find(".chatmessage").length?m.c.find(".other").fadeOut(1):m.c.find(".other").fadeIn(1),n&&(i="toLast"),v.spacer(),setTimeout(function(){v.scrollToPx(s,i)},20),l&&l.action(),f&&f.action(),v.countUnread(),t&&t()})):t&&t()}},b=function(){};return{primary:n,getdata:function(t,e){var n={},a=deep(e,"settings.essenseData.chat");if(!a){var s=parameters().chatid;a=k.app.platform.sdk.discussions.fromChatId(s)}deep(e,"settings.essenseData");a&&(u=a.chat,k.app.platform.sdk.chats.info([a.chat],function(e){n.chat=a,k.app.platform.sdk.tempmessenger.getChat(a.chat),n.canEnc=!0,k.app.platform.sdk.ustate.me(function(e){i=e,n.mestate=i,t(n)})}))},destroy:function(){t&&clearInterval(t),m.type&&m.type.blur(),$("html").off("mousemove",w.messagesInView),window.removeEventListener("scroll",w.messagesInView),window.removeEventListener("resize",w.resizeWindow),function(){k.app.platform.ws;$(window).off("focus",v.read),$(window).off("mousemove",v.read),delete u.rtc.clbks.receive.message.messenger,delete u.rtc.clbks.receive.messages.messenger,delete u.rtc.clbks.send.message.messenger}(),s&&clearTimeout(s),m={},l&&l.destroy(),f&&f.destroy(),l=f=null,u&&(u.rtc.leave(),u=null),clearInterval(null),0,$("#tawkchat-container").fadeIn(),d.destroyClbk&&d.destroyClbk()},init:function(e){h={},g={},(d=e.essenseData||{}).view||(d.view="buildin"),b(),(m={}).c=e.el.find("#"+k.map.id),m.messages=m.c.find(".chatmessages"),m.type=m.c.find(".type"),m.attachement=m.c.find(".attachement"),m.countUnread=m.c.find(".countUnread"),m.spacer=m.c.find(".spacer"),m.c.addClass(d.view),function(){if("buildin"==d.view){isMobile()||(l=new Caption({container:m.c.find(".chatWrapper"),caption:m.c.find(".captionfwrapper"),offset:[0,0]}).init());var e=0;isMobile()&&(e=50),f=new Caption({container:m.c.find(".chatWrapper"),caption:m.c.find(".bcaptionfwrapper"),offset:[e,2*e],pos:"bottom"}).init(),m.c.find(".out").on("click",w.out),window.addEventListener("scroll",w.messagesInView),window.addEventListener("resize",w.resizeWindow),$("html").on("mousemove",w.messagesInView)}"fixedin"==d.view&&(m.c.find(".close").on("click",w.close),m.c.find(".chatwindow").on("scroll",w.messagesInView),$("html").on("mousemove",w.messagesInView)),m.c.find(".minimize").on("click",w.minimize),m.c.find(".expand").on("click",w.expand),m.countUnread.on("click",function(){w.expand()}),m.type.emojioneArea({pickerPosition:"top",search:!1,tones:!1,attributes:{spellcheck:!0,autocomplete:"on"},events:{keyup:w.type,onLoad:function(e,t){}}}),initUpload({el:m.attachement,ext:["png","jpeg","jpg","pdf"],multiple:!0,maxFileSize:5,dropZone:m.c.find(".chatWrapper"),beforeUpload:function(e){var a=deep(e,"file.name");if("png"==e.ext||"jpeg"==e.ext||"jpg"==e.ext)resize(e.base64,200,200,function(t){var n=v.addTempMessage({attachmentName:a,attachmentPreview:t});resize(e.base64,1600,1600,function(e){v.sendAttachment({attachment:e,attachmentName:a,attachmentPreview:t},n)})});else{var t=v.addTempMessage({attachmentName:a});v.sendAttachment({attachment:e.base64,attachmentName:a},t)}}})}(),function(){if(u.rtc.clbks.receive.message.messenger=function(e){!k.app.platform.focus&&k.app.platform.titleManager&&k.app.platform.titleManager.add("You have new messages"),p=e,k.app.platform.sdk.messenger.load.messages(e,function(){r.messages(null,[e])})},u.rtc.clbks.receive.messages.messenger=function(e){c++,k.app.platform.sdk.messenger.load.messages(e,function(){r.messages(null,e,!0)})},u.rtc.clbks.send.message.messenger=function(e){k.app.platform.sdk.messenger.load.messages(e,function(){p=e,r.messages(null,[e],!0)})},u){var e=_.toArray(u.rtc.storage._db||{});k.app.platform.sdk.messenger.load.messages(e,function(){r.messages(null,e,!0)}),u.rtc.connect(function(){})}}(),function(){k.app.platform.ws;$(window).on("focus",v.read),$(window).on("mousemove",v.read)}(),v.countUnread(),e.clbk(null,e)},id:a,api:w}};return k.run=function(e){var t=k.addEssense(y,n,e);k.init(t,e)},k.stop=function(){_.each(y,function(e){e.destroy()})},k}();"undefined"!=typeof module?module.exports=chat:(app.modules.chat={},app.modules.chat.module=chat);
 /*_____*/ 
var faq=function(){var h=new nModule,o={},a=function(e){var a,t=deep(e,"history"),o=[{name:"Technical",id:"technical",group:[{id:"downloadclient",q:"Where do I download the client?",a:'<div><a href="https://github.com/pocketnetteam/pocketnet.gui/releases/latest">https://github.com/pocketnetteam/pocketnet.gui/releases/latest</a></div><div>Click on PocketnetSetup.exe</div>'}]},{name:"Pocketnet Roadmap",id:"roadmap",group:[{id:"walletaddresses",q:"I see a PN address and a wallet address... are both these addresses on the PN blockchain?",a:"<div>PN address is the one used for posting content and using social network in general. It also keeps coins that you win for your highly rated posts.</div><div>Wallet addresses are to keep the rest of coins.</div>"},{id:"linktoprofile",q:'Can I link to my profile? or my "page"? So that i can post it into my community to bring members over.',a:"<div>In the browser, go to your profile by clicking on avatar in the upper right and just copy the browser address, everyone who will sign up from that link will follow you automatically and you will actually get rewards.</div>\t\t\t\t\t<div>On the desktop,  from a desktop application go to your profile,  once there, there will be three icons to the right of your avatar first there will be a wallet with number of coins, then a bell with notifications and a third is a green cross icon click on that green cross  and click copy,  send that link around everyone who subscribes will follow you and you will get rewards.</div>"},{id:"starsystem",q:"The star system. is there a limit on how many stars a person has to give people?",a:"<div>There are some limits. But as your reputation grows you can upvote more and more. This is done, so bots don&rsquo;t break down our blockchain. Initially you can 10 ratings every 24 hours. As your reputation grows (that happens by posting and getting rated), then you do 45 ratings a day.</div>"},{id:"updateprofiletime",q:"How long until I&rsquo;m able to update my profile? ",a:"<div>You are able to update your profile once every hour.</div>"},{id:"linuxdesktop",q:"Is there a Linux Desktop?",a:"<div>Yes! It is in the works 2-3 weeks as the beta test progresses.</div>"},{id:"savevideo",q:"Where do you save the video content?",a:"<div>We are working on video storage, in the meantime you can share from Bitchute, Youtube, Vimeo and other video sources.</div>"},{id:"mobileapp",q:"Is there a mobile app?",a:"<div>Mobile app is not ready yet. We plan it for June 2019. But we strongly encourage everyone to also download the desktop app, since, unlike Android or iPhone app, it cannot be taken away from you by Google or Apple.</div>"},{id:"postinglimit",q:"Can you tell me what is the limit for posting each day or hour?",a:"<div>We do have some limitations, but after testing it we have increased our limits. At the outset you can make 15 posts and issue 45 ratings every 24 hours. Once your reputation grows above 50, you will be able to make up to 30 posts and 90 ratings every 24 hours.</div>"},{id:"reputation",q:"What is reputation and how is it calculated?",a:"<div>Your reputation is the sum of your ratings calculated in the following way.</div>\t\t\t\t<div>5=2<br>4=1<br>3=0<br>2=-1<br>1=-2</div><div>So, if you have two 5 start ratings and one 1 star rating, the total will be 2+2-2=2</div>"},{id:"deletepostoruser",q:"Is there a way to delete or edit a post?",a:"<div>Not at this point, as it is baked into blockchain. However, we are working on a feature to create an overwrite transaction as well &#10075;hide&#10076; transaction, which would effectively translate to edit or delete.</div>"},{id:"usersearch",q:"Is there a way to search for a user?",a:"<div>We are going to release this feature before the end of March.</div>"},{id:"follow",q:"How do you follow someone?",a:"<div>Next to post author (on top of post) there is a Follow link, you can find his posts in Top posts (red flame on top of the page). You will also soon see Subscriptions feed, which is going to be different from the main feed. The main feed will be everything that anyone posts chronologically, but Subscriptions feed will only contain posts from people you follow. So, you will go into general feed in search of good content, though you may not like everything. Then select those you want to keep. Kind of like fishing :)</div>"},{id:"otherbrowsers",q:"Can it be used on Brave or Duck Duck go browsers?",a:"<div>Those browsers are not yet fully supported. Our developers are aware of the issue and are working on making pocketnet work on them. It is fully functional on Chrome and Firefox. But we strongly encourage everyone to download the desktop app. It cannot be blocked ever (even if pocketnet.app is down or blocked for some reason). This is a serious consideration in totalitarian and quasi-totalitarian countries which, if you think about it, is beginning to include more and more of the globe.</div>"},{id:"replypost",q:"Can we reply to our own/and other&rsquo;s posts?",a:"<div>That feature is being worked on by our developers. No timeline yet.</div>"},{id:"addtags",q:"How to add a tag to a post?",a:"<div>Just type in the field tag and press enter. No need to specify #, it will be added automatically.</div>"},{id:"usepublicaddress",q:"How can I use the public address?",a:"<div>Your public address is what Pocketnet uses to verify your identity. Essentially, your private key is a really large number (that can be represented with a 12 word sequence or a QR code). This number gets multiplied by another that everyone knows (called a base point) and we get a public key. When you enter your private key, we can multiply it by the base point to get your public key and we can match it against public address. If they match, we know it is you. It is impossible to go back i.e. to divide public key by the base point to get your private key. The way multiplication in cryptography works is it is only one way and cannot be reversed, so your key is safe. Pocketnet uses the same exact cryptography as Bitcoin.</div>"},{id:"desktopmac",q:"Will there be a downloadable executable for Mac?",a:"<div>Yes - we are working of Mac platform. Target is for mid-April.</div>"}]},{name:"Pocketcoin",id:"pocketcoin",group:[{id:"pocketcoin",q:"What can I do with Pocketcoin?",a:"<div>Currently you can win it or send as a gift. However, if and when Pocketnet takes off, Pocketcoin will be the main method of buying advertising on the platform. Advertisers will be able to easily find content authors with the right audience and then offer them advertising opportunities. This will be a trustless endeavor (i.e. neither side can cheat), because of something called multi-signature contracts. Multisig contract requires a digital signature of both parties to be valid. When advertiser offers an ad to the content creator, he creates the first of two required signatures. He signs the actual ad and the amount bid. Content creator reviews this partially signed multisig and if it is accepted, then he appends the second signature. When a blockchain sees both signatures, content creator is automatically paid and an ad is automatically shown on creator’s channel. These transactions will only be done through Pocketcoin. Thus, if Pocketcoin becomes big, it will be an immensely valuable token.</div>"},{id:"pocketcoinstock",q:"Is Pocketcoin like a share of stock in Pocketnet?",a:"<div>Definitely no. Pocketnet is not even a corporation and does not have any ownership. It is an open source code that anyone can copy and run. Pocketcoin is a token that facilitates value exchange, specifically advertising transactions. In addition, Pocketnet will include a marketplace where goods and services will be sold directly for Pocketcoin</div>"},{id:"pocketcoinbuy",q:"Can I buy additional Pocketcoin?",a:"<div>Yes, we will create a way to buy Pocketcoin for Bitcoin and a few other cryptocurrencies on pocketnet.app. All proceeds of sales will be used to advertise Pocketnet to the world. So, by buying a Pocketcoin you are positioning yourself for success of Pocketnet, but just as importantly you are helping Pocketnet achieve this success. All major social networks had billion dollar advertising budgets. Pocketnet was funded by its founders and developers worked only for Pocketcoin. We need you to help us spread the word. To go the extra mile consider buying some Pocketcoin to help us advertise the site. To buy Pocketcoin you will need to first buy Bitcoin or some other cryptocurrency, which is exceedingly easy now.</div>"},{id:"pocketcoinbuyfiat",q:"Can I buy Pocketcoin for US Dollars or other fiat currency?",a:"<div>No.</div>"}]},{name:"Privacy",id:"privacy",group:[{id:"anonymous",q:"Are people who do not enter their real names anonymous?",a:"<div>Yes - no names, phones, email is NOT connected to your account in any way, it is just optionally entered to receive newsletter updates.</div>"},{id:"viewoutside",q:"Can someone view a profile (someone&rsquo;s posts) outside the garden? Is it a walled garden?",a:"<div>Since the whole blockchain and all the posts are in opensource anyone can have access to your posts and profile. They just know that it is linked to your public address. In practice, you can have multiple accounts. You can use some with your real name and others anonymously. Anonymity is a great tool to protect free speech from abuse of power.</div>"},{id:"walletid",q:"Is my public key like a wallet ID that I enter on my profile and people can send points to?",a:"<div>Exactly. And it is safe to reveal. But not a secret phrase - keep it safe!</div>"},{id:"runnode",q:"Can I run a node on my headless server?",a:"<div>We will put the node&rsquo;s sources into GitHub. Instructions for running a node will be made available in early April.</div>"},{id:"signback",q:"How can I sign back in?",a:"<div>You can use your private 12-word key or a QR code to sign in.</div>"}]},{name:"Curation of content",id:"curation",group:[{id:"content",q:"Is any content allowed on Pocketnet? If some content is not allowed, can the platform still be called free speech?",a:"<div>This is a very important question and we will be releasing many videos and articles about it, as well as looking for your input. To begin with, not all types of content are allowed. However, and this is crucial, the enforcement is transparent and up to the community in the way we will explain below. Enforcement is done by the community and is in the open with no hidden shadow bans or selective banning practiced by the Silicon Valley.</div>"},{id:"specific",q:"Specifics of curation on Pocketnet.",a:"<div>When your reputation gets to 100 and you press on dots in the upper right of any post, you will see an option to Complain. If enough Complaints come in, the post will not be shown anymore. When someone has more than 2 posts that are voted off the platform in 24 hours, they cannot post for another 48 hours after the second post. Complain is completed when number of complaints is at least ⅓ of the number of 4 and 5 star ratings, subject to a minimum of 10 complaints (which will be adjusted over time in consultation with the community).</div><div>We are extremely and passionately pro-speech. However, we do not want to turn Pocketnet into a marginal forum where lunatics reign. What would cause you to Complain?</div><div>Do NOT complain about stuff that you simply don’t like or that offends you. That is not a high enough bar. Do not follow people who offend you, soon we will have a feature for not seeing their posts, but do not complain about them. Complain only about things that threaten long term viability of Pocketnet as a mass communication platform that intends to reach to all levels of society in many countries.</div><div>We strongly recommend that you complain about porn of any kind. There are plenty of porn sites on the web, we do not want to mix our free speech endeavor with that. We strongly encourage the community to vote off porn. Secondly, any type of a direct threat should be voted off and clear examples of racism should too. If we allow MSM to tie us to racism or violence directly, Pocketnet will cease to exist before we can even get it out there. Just because MSM media cries wolf about fake racism, doesn’t mean we should prove them right by tolerating it in our platform. It will detract from what we are trying to achieve, which is to challenge new totalitarianism created by the unholy alliance of media, finance and corrupt government officials.</div> "},{id:"racism",q:"Important Note on Racism.",a:"<div>Free thought and free speech is under attack on mainstream social platforms and in the media. We need to speak the truth and this platform is non-corporate and decentralized for that very reason. But we ask everyone make your point without attacking people&rsquo;s nationality or race. You can make your point based on evidence. We cannot afford to turn Pocketnet into a marginal platform. Speak the truth, but please avoid racism and attacks against specific nationalities on the whole. We know that Silicon Valley and MSM has turned the issue of racism into their playing card and they constantly cry wolf. Even more the reason for us to be measured and evidence based and not let them smear us with that. If we are not, we are not allowing most of the population to weigh the evidence of MSM corruption presented on Pocketnet. Please keep that in mind, so that free speech can thrive and we can beat the facebokks of the world.</div><div>Ultimately, it is the community that will determine the direction of the platform. Having a bunch of snowflakes that complain about stuff that offends them is equally as bad as when people want to voice direct violent threats. However, the first indication is that early users of the platform are generally intelligent and evidence based, so the future looks incredibly bright. Pocketnet team has noticed after a few days of the beta test, that we stopped reading even alternative news, because there was so much interesting content on Pocketnet. Keep it up!</div><div>Please get involved in the discussion on these topics. This is a community platform. We are always eager to improve transparency of the platform and you should let us know how we can improve our content curation and policing. Use group chat or email support(at)pocketnet*dot*app or make full posts on this topic.</div>"}]},{name:"How is Pocketnet different from...",id:"differents",group:[{id:"differents1",q:"Twitter, Facebook, Reddit & other centralized platforms?",a:"<div>There is no central authority or corporation. Platform is run by equal nodes on a blockchain. All revenue is split between node operators and content creators. Node operators stake Pocketcoin in order to mint blocks with rewards and transactions fees. Half of rewards in each block go to content creators based on ratings their content gathers from users.</div>"},{id:"differents2",q:"Decentralized platforms like Minds.com and Sola?",a:"<div>Both of those platforms, while great, are not self-contained. Both are highly dependent on the Ethereum platform, because their tokens are based on ERC-20 Ethereum standard. That means that operations with tokens carry Ether gas fees. Also, those entities have corporations behind them and a corporation will always be a point of centralization due to its economic logic of growing profits. In addition, corporations are exceedingly easy to censor.</div>"},{id:"differents3",q:"From Steemit?",a:"<div>Steemit has its own blockchain, but is a corporate entity with all of the centralization that comes from that.</div>"},{id:"differents4",q:"Decentralized platforms like Mastodon and others?",a:"<div>While Mastodon is a fully decentralized platform, it requires a great deal of technical knowledge to use. This presents a great hindrance to potential widespread acceptance. Pocketnet features a web and desktop applications and users can log in from any device, pull in their personal settings from the blockchain and start using the platform immediately without any technial knowledge.</div>"}]},{name:"Pocketnet ecosystem",id:"ecosystem",group:[{id:"ecosystem1",q:"How is Pocketnet develpment funded?",a:"<div>Pocketnet is open sourced and is currently run by the group of volunteers with some serious programming and math skills. After launch Pocketnet will attract top programming talent based on its promise of creating a decentralized fair social network. Programmers and marketers working on Pocketcoin receive 5% of emission. The awards to developers and marketers will be assigned by nodes voting in a transparent manner.</div>"},{id:"ecosystem2",q:"What is Pocketcoin?",a:"<div>Pocketcoin is a network token. It is used exclusively to buy advertising from Pocketnet contributors and to pay transaction fees for such payments. Pocketcoin emission depends on the number of users of Pocketnet and has inherent algorithmic factors tying its long term value to Annual Revenue Per User (ARPU). ARPU is a term in digital advertising which signifies the total amount of revenue platform receives for one active user per year. In Pocketent all of the revenue is split between content creators and nodes.</div>"},{id:"ecosystem3",q:"How are content creators and node operators rewarded?",a:"<div>Pocketnet features unique Direct Marketplace where content creators can sell advertising to ad buyers. Content creators set their price and can accept mass-produced ads or can offer highly valued custom placements (creators pitching the product in their own way). Direct Marketplace is essentially an exchange for advertising that allows ad buyers target specific audiences without any intermediaries. All ad buys and ads themselves are linked on the blockchain, therefore ad buying is completely trustless.</div>"},{id:"ecosystem4",q:"What if users post illegal content, pornography and SPAM?",a:"<div>Pocketnet is not a darknet platform or some sort of pornhub. While it is decentralized and censorship resistant, it is policed by the users. Any illegal content is flagged and removed from the platform using the Wikipedia model. This means that users with highest reputation can police the platform. However, there are safeguards in place (within the open source code) from same or very similar group(s) of people repeatedly voting content off the platform. Also, users are explicitly encouraged to flag only illegal content, not simply the content they find offensive. To make sure that Pocketnet is a free speech platform, we encourage you to start participate, grow your reputation and police the platform properly without the censorship currently prevalent in centralized social media.</div>"}]}],i={},n=function(e){_scrollToTop(a.c.find('.faqcnt .question[question="'+e+'"]'),null,null,-110)},r=function(e){_scrollToTop(a.c.find('.faqcnt .group[group="'+e+'"]'),null,null,-110)},s=function(e){console.log(i,e);var t=i[e],o="https://pocketnet.app/help?page=faq&id="+e+"&ref="+h.app.platform.sdk.address.pnet().address,a=t.q;h.nav.api.load({open:!0,href:"socialshare",history:!0,inWnd:!0,essenseData:{url:o,caption:"Share FAQ answer in social",title:a}})},l=function(){var e=$(window).height()/4,t=inView(a.c.find(".faqcnt .group"),{offsetTop:e,offsetBottom:e,mode:"line"}),o=null;0<t.length&&(o=$(t[0]).attr("group"),a.contens.removeClass("active"),a.c.find('.contens .item[group="'+o+'"]').addClass("active"))},d=function(){var e=$(this).attr("group");r(e)},c=function(){var e=$(this).closest(".question").attr("question");s(e)},u=function(){};return{primary:t,getdata:function(e){i={},_.each(o,function(e){_.each(e.group,function(e){i[e.id]=e})}),e({groups:o})},destroy:function(){console.log("DESTROY"),roller&&roller.destroy(),window.removeEventListener("scroll",l),a={}},init:function(e){u(),(a={}).c=e.el.find("#"+h.map.id),a.contens=a.c.find(".contens .item"),a.contens.on("click",d),a.c.find(".share").on("click",c),a.c.find(".question .questionName").on("click",function(){$(this).closest(".question").toggleClass("opened")}),window.addEventListener("scroll",l),roller=new Roller({selector:".roller",inner:".cnt",cnt:a.c,offset:65}).init().apply();var t=parameters().id;t&&n(t),e.clbk(null,e)}}};return h.run=function(e){var t=h.addEssense(o,a,e);h.init(t,e)},h.stop=function(){_.each(o,function(e){e.destroy()})},h}();"undefined"!=typeof module?module.exports=faq:(app.modules.faq={},app.modules.faq.module=faq);
 /*_____*/ 
var menu=function(){var l=new nModule,a={},t=function(){var o,n=null,a=null,e=null,t=new Parameter({type:"VALUES",name:"Localization",id:"localization",defaultValue:app.localization.current().name,possibleValues:app.localization.availableMap("name"),format:{right:!0},_onChange:function(e){var n=app.localization.findByName(e);n&&n.key!=app.localization.key&&app.localization.set(n.key)}}),r={autoUpdate:function(){l.app.user.isState(function(e){})},elswidth:function(){o.c.find(".autowidth.active").each(function(){r.setWidth($(this))})},setWidth:function(e){if(e.offset()){var n=e.offset().left,a=e.width(),t=n-(o.c.width()-n-a);e.width(a+t)}},ah:function(e,n){0<n?e.addClass("amountHave"):e.removeClass("amountHave"),e.find(".amount").html(n)},sitenameToNav:function(){i.navinit.el&&(e=slowMade(function(){var e=l.app.nav.current.href;if(("index"==e||"author"==e)&&45<$(window).scrollTop()){o.nav.addClass("active"),o.c.addClass("menupanelactive"),o.nav.find(".pcenterLabel").removeClass("active");var n=parameters(l.app.nav.current.completeHref,!0).r||"empty";"index"==e&&o.nav.find('.pcenterLabel[r="'+n+'"]').addClass("active")}else o.c.removeClass("menupanelactive"),o.nav.removeClass("active");r.elswidth()},e,10))}},i={navinit:{init:function(e){isTablet()||($(window).on("scroll",r.sitenameToNav),l.app.nav.clbks.history.menu=function(e){r.sitenameToNav()})},destroy:function(){$(window).off("scroll",r.sitenameToNav),delete l.app.nav.clbks.history.menu}},sitename:{click:function(){l.app.user.isState(function(e){if("index"!=l.app.nav.get.pathname()){var n=localStorage.lentakey||"index";parameters().r==n&&(n="index"),"index"!=n&&(n="index?r="+n),e||(n="index"),l.nav.api.go({href:n,history:!0,open:!0,handler:!0})}})}},activate:{click:function(){dialog({header:l.app.localization.e("id167"),html:l.app.localization.e("id168"),class:"one",btn1text:l.app.localization.e("id169"),success:function(){l.app.platform.sdk.user.activateWithDialogs(function(e){})}})}},notifications:{init:function(n){var a=function(){return _.filter(l.app.platform.sdk.notifications.storage.notifications,function(e){if(!e.seen)return!0})};l.app.platform.sdk.notifications.init(function(){var e=a().length;r.ah(n,e),l.app.platform.api.electron.notifications(e,"notifications"),isMobile()||l.nav.api.load({open:!0,id:"notifications",el:n,inTooltip:!0})}),l.app.platform.sdk.notifications.clbks.added.menu=l.app.platform.sdk.notifications.clbks.seen.menu=function(){var e=a().length;r.ah(n,e),l.app.platform.api.electron.notifications(e,"notifications")}},click:function(e){isMobile()&&l.nav.api.go({href:"userpage?id=notifications&report=notifications",history:!0,open:!0})}},messenger:{init:function(e){var n=l.app.platform.clientrtc.rtchttp,a=function(){var a=0;return _.each(n.storage.chat,function(e,n){a+=e.messages.unreaded}),a};l.app.platform.clientrtc.rtchttp.info.allchats(function(){r.ah(e,a())}),l.app.platform.sdk.messenger.clbks.menu=function(){r.ah(e,a())}},click:function(e){isMobile()?l.nav.api.load({href:"messenger",history:!0,open:!0}):l.nav.api.go({href:"userpage?id=messenger&report=messenger",history:!0,open:!0})}},savecross:{init:function(a){var e=deep(l.app,"platform.sdk.user.storage.me.rc")||0;r.ah(a,e),l.app.platform.ws.messages.event.clbks.menusave=function(e){if("userInfo"==e.mesType){var n=deep(l.app,"platform.sdk.user.storage.me.rc")||0;r.ah(a,n)}}},click:function(){l.nav.api.load({open:!0,href:"socialshare",history:!0,inWnd:!0,essenseData:{rescue:!0}})}},search:{click:function(){o.c.toggleClass("searchactive"),o.c.hasClass("searchactive")?(o.postssearch.find("input").focus(),o.postssearch.addClass("active"),n&&(clearTimeout(n),n=null)):(o.postssearch.removeClass("active"),o.postssearch.find("input").val("")),r.elswidth()}},searchinit:{init:function(t){var i=function(e){("s"!=l.app.nav.current.href||e)&&(t.find("input").val(""),o.c.removeClass("searchactive"),s())},s=function(){n&&(clearTimeout(n),n=null)};search(o.postssearch,{placeholder:"SEARCH ON POCKETNET...",clbk:function(e){e.find("input").on("blur",function(){n=slowMade(function(){i()},n,200)})},last:{get:function(){return[]},tpl:function(e,n){}},events:{fastsearch:function(n,a){l.app.platform.sdk.search.get(n,"fs",null,null,null,function(e){console.log("RESULTS",e),c.results(e||{},n,function(e){a(e,function(e,n){bgImages(e),e.find(".result").on("click",function(){var e=$(this).attr("result");t.find("input").val(e),l.nav.api.go({href:"s?ss="+e.replace("#","tag:"),history:!0,open:!0}),n.closeResults(),s()}),e.find(".user").on("click",function(){var e=$(this).attr("address");l.nav.api.go({href:"author?address="+e,history:!0,open:!0}),n.closeResults(),i(),s()})})})})},search:function(e,n,a,t){l.nav.api.go({href:"s?ss="+e.replace("#","tag:"),history:!0,open:!0}),t.closeResults(),s(),n&&n(!0)},clear:function(e){e||(t.find("input").blur(),setTimeout(function(){i(!0),s()},100))}}})}},newaccount:{click:function(){l.nav.api.go({href:"registration",history:!0,open:!0})}},ustate:{click:function(){isMobile()&&l.nav.api.go({href:"userpage?id=ustate&report=ustate",history:!0,open:!0})},init:function(a){isMobile()||l.nav.api.load({open:!0,id:"ustate",el:a,inTooltip:!0});var e=function(){l.app.platform.sdk.user.waitActions(function(n){l.app.platform.sdk.ustate.attention(1,function(e){isMobile()||(e||!l.app.user.validate()||n?a.removeClass("hidden"):a.addClass("hidden"),l.app.platform.sdk.ustate.me(function(e){e?(a.removeClass("disconected"),l.app.user.validate()&&n?a.addClass("wait"):a.removeClass("wait")):a.addClass("disconected")}))})})};e(),l.app.platform.sdk.ustate.clbks.menu=e,l.app.platform.ws.messages.transaction.clbks.menu=e}},wallets:{click:function(){l.nav.api.go({open:!0,href:"userpage?id=wallet",history:!0})},init:function(i){var s=i.find(".number"),o=!0,c=0,e=function(){l.app.platform.sdk.node.transactions.get.allBalance(function(e){var t,n,a=(e+=l.app.platform.sdk.node.transactions.tempBalance())-c;o&&(a=0,c=e),o=!1,t=c,n=a,i.removeClass("hidden"),0==n?(s.text(l.app.platform.mp.coin(t)),r.elswidth()):s.animateNumber({number:n,numberStep:function(e,n){r.elswidth(),i.addClass("good");var a=Number(t+e).toFixed(8);$(n.elem).text(l.app.platform.mp.coin(a))}},rand(400,1200),function(){i.removeClass("good")}),c=e,l.app.platform.sdk.wallet.drawSpendLine(i.find(".numberWrp"))})},n=function(){e()};(l.app.platform.sdk.node.transactions.clbks.menu=n)()}},signout:{click:function(){l.app.user.signout(),l.app.reload({href:"authorization"})}},signin:{init:function(e){},click:function(){l.nav.api.go({href:"authorization",history:!0,open:!0})}},signup:{init:function(e){},click:function(){l.nav.api.go({href:"registration",history:!0,open:!0})}}},c={results:function(e,n,a){p||(p={}),l.shell({name:"results",data:{results:e,value:n}},function(e){a&&a(e.rendered)})}};return{getdata:function(e,n){var a={};t.value=app.localization.current().name,a.loc=t,a._SEO=_SEO,n.state,e(a)},destroy:function(){$(window).off("resize",r.elswidth),delete l.app.platform.sdk.node.transactions.clbks.menu,delete l.app.platform.ws.messages.event.clbks.menusave,delete l.app.platform.sdk.notifications.clbks.seen.menu,delete l.app.platform.sdk.notifications.clbks.added.menu,delete l.app.platform.sdk.messenger.clbks.menu,a&&clearInterval(a),_.each(i,function(e){delete e.el,e.destroy&&e.destroy()}),o={}},closesearch:function(){o.c.removeClass("searchactive")},showsearch:function(e){o.c.addClass("searchactive"),o.postssearch.find("input").val(e.replace("tag:","#"))},init:function(e){(o={}).c=e.el.find("#"+l.map.id),o.a=e.el.find(".additionalbar"),o.cart=o.c.find(".cart"),o.likes=o.c.find(".favorites"),o.messagesCount=o.c.find(".dialogs .count"),o.notificationsCount=o.c.find(".notifications .count"),o.walletsAmount=o.c.find(".wallets .amount"),o.notactive=o.c.find(".notactive"),o.currency=o.c.find(".currencyWrapper"),o.postssearch=o.c.find(".postssearch"),o.nav=o.c.find(".menutoppanel"),o.c.find("[events]").each(function(){var a=$(this),e=a.attr("events");i[e]&&(i[e].el=a,_.each(i[e],function(e,n){"init"==n?e(a):a.on(n,e)}))}),$(window).on("resize",r.elswidth),ParametersLive([t],o.c),a=setInterval(r.autoUpdate,100),l.app.user.isState(function(e){parameters().ss&&(o.c.addClass("searchactive"),o.c.find(".postssearch").addClass("active"),r.elswidth(),o.postssearch.find("input").val(parameters().ss.replace("tag:","#")))}),e.clbk(null,e)}}};return l.run=function(e){var n=l.addEssense(a,t,e);l.init(n,e)},l.stop=function(){_.each(a,function(e){e.destroy()})},l.closesearch=function(){_.each(a,function(e){e.closesearch()})},l.showsearch=function(n){_.each(a,function(e){e.showsearch(n)})},l}();"undefined"!=typeof module?module.exports=menu:(app.modules.menu={},app.modules.menu.module=menu);
 /*_____*/ 
var comments=function(){var L=new nModule,t={},s=function(e){var c,r,m,o,t,s,i,a,n=deep(e,"history"),f={},l=!1,p=!1,d=!1,u={content:"message empty",share:"hasn't share",messagelength:"Comments have 1000 character limit per comment",money:"hasn't money",network:"network error"},h={},v={},w=/[,.!?;:() \n\r]/g,g=function(e,n,t,s,i,o,a){if(t==r&&(c.c.find(".sending").removeClass("sending"),!e)){x.save(),c.c.find(".emojionearea-editor").blur(),c.c.find(".att").html("");var l={comments:[n]};if(p&&(m.lastComment=L.app.platform.sdk.comments.toLastComment(n)),delete f[a],"0"==a&&(l.class="firstcomment"),"0"==a)v[a]&&v[a].setText("");else{var d=c.c.find("#"+a);o?(d.find(".edit").html(""),n.timeupd=n.timeupd.addMinutes(1),n.parentid||(l.class="firstcomment"),delete v[a],delete h[a],d.removeClass("editing"),l.inner=replaceWith,l.el=d):(d.find(".answer").html(""),d.find(".repliescount").html(Number(d.find(".repliescount").html()||"0")+1),d.find(".replies").removeClass("hidden"),l.el=c.c.find("#"+a+" .answers"),delete v[a])}l.newcomments="newcomments",b.list(l),!o&&m.send&&m.send(n),o||(m.comments&&m.comments++,C.showhideLabel())}},C={removeForm:function(e){delete v[e],c.c.find("#"+e+" .answer").html(""),c.c.find("#"+e+" .edit").html("")},post:function(e,n,t,s){e||(e="0");var i=f[e];if(i){var o=i.validation();o?(c.c.find(".sending").removeClass("sending"),sitemessage(u[o])):C.send(i,function(e,n){},n,t,s,e)}},send:function(e,t,n,s,i,o){L.app.platform.sdk.comments.send(r,e,n,s,function(e,n){c.c&&c.c.find(".sending").removeClass("sending"),e?(L.app.platform.errorHandler(e,!0),t&&t(e,null)):t&&t(null,n)},i,o)},links:function(e,n){e||(e="0");var t=f[e];if(t&&!t.url.v){var s=null,i=n.match(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);i&&0<i.length&&(s=i[0]),s&&t.url.set(s)}},process:function(e){e||(e="0"),f[e]||(f[e]=new Comment(r))},message:function(e,n){e||(e="0"),f[e]&&f[e].message.set(n),x.save()},emessage:function(e,n){var t=n.getText();C.links(e,t),C.message(e,t)},fastreply:function(n){n&&C.replies(n.parentid||n.answerid,!0,function(){if(n.noaction){C.tocomment(n.answerid);var e=c.c.find("#"+n.answerid);e.addClass("newcommentsn"),setTimeout(function(){e.removeClass("newcommentsn")},2500)}else C.reply(n.parentid||n.answerid,n.answerid)})},reply:function(o,a){var e=c.c.find("#"+o).find(".answer");b.post(function(e,n){var t="0";a!=o&&(t=o);var s=L.app.platform.sdk.comments.address(r,a,t)||deep(m,"lastComment.address"),i="@"+(deep(L.app,"platform.sdk.usersl.storage."+s+".name")||s)+",  ";s==L.app.platform.sdk.address.pnet().address&&(i=""),e.setText(i),v[o]=e,n.focus(),n.closest(".answer").addClass("active"),i.length&&ecaretPosition(n,0,i.length)},{placeholder:"Send Reply",el:e,answer:"answer",pid:o,aid:a,id:o})},hideallReplies:function(){_.each(L.app.platform.sdk.comments.storage[r][0],function(e,n){C.replies(n,!1)}),m.lastComment&&C.replies(m.lastComment.id,!1)},replies:function(n,e,t){if("0"!=n){var s={};s.el=c.c.find("#"+n+" .answers");var i=c.c.find("#"+n);void 0===e&&(i.hasClass("showedreplies")?e=!1:(e=!0,i.find(".repliesloaderWrapper").removeClass("hidden"))),e?T.level(n,function(e){i.find(".repliesloaderWrapper").addClass("hidden"),s.comments=L.app.platform.sdk.comments.storage[r][n],i.addClass("showedreplies"),b.list(s,function(){o||b.caption(),t&&t()})}):(_.each(L.app.platform.sdk.comments.storage[r][n],function(e){delete h[e.id]}),i.removeClass("showedreplies"),C.removeForm(n),s.el.html(""))}else t&&t()},getid:function(e){if(e.attr("answer")){(n=e.closest(".comment")).attr("id");return e.closest(".firstcomment").attr("id")}if(e.attr("edit")){var n;(n=e.closest(".comment")).attr("aid"),n.attr("pid");return n.attr("id")}return"0"},tocomment:function(e){_scrollTo(c.c.find("#"+e),t)},closeEdit:function(e){c.c.find("#"+e).removeClass("editing"),C.removeForm(e)},update:function(e){var n={},t=null;t=e?c.c.find("#"+id+" .answers"):(n.class="firstcomment",c.c.find(".list")),T.level(e,function(e){t.html(""),n.comments=e,b.list(n)})},hiddenCounts:function(e){0<e?c.showall.find(".ccounts").html("("+e+")"):c.showall.find(".ccounts").html()},showall:function(){d=!0,c.c.addClass("showedall"),C.showhideLabel(),p&&(p=!1,c.c.removeClass("listpreview"),c.c.find(".loaderWrapper").removeClass("hidden"),b.caption(),T.level(null,function(e){h={};var n={};n.comments=L.app.platform.sdk.comments.storage[r][0],n.class="firstcomment",n.inner=html,b.list(n,function(){c.c.find(".loaderWrapper").addClass("hidden")})}))},showhideLabel:function(){if(c.showall)if(d)c.showall.addClass("hidden");else{var e=deep(L.app.platform,"sdk.node.shares.storage.trx."+r+".comments")||0,n=deep(L.app.platform,"sdk.node.shares.storage.trx."+r+".lastComment.children")||0;p?1<e-n?(c.showall.removeClass("hidden"),C.hiddenCounts(e-n-1)):c.showall.addClass("hidden"):5<e?(c.showall.removeClass("hidden"),C.hiddenCounts(e-5)):c.showall.addClass("hidden")}}},k={replyandreplies:function(){var e=$(this).closest(".firstcomment").attr("id");C.replies(e,!0);var n=$(this).closest(".comment"),t=(e=$(this).closest(".firstcomment").attr("id"),n.attr("id"));C.reply(e,t)},replies:function(){var e=$(this).closest(".firstcomment").attr("id");C.replies(e)},emessage:function(e,n){var t=C.getid(e.closest(".postbody"));C.emessage(t,this)},message:function(){var e=$(this).val(),n=C.getid(editor.closest(".postbody"));C.links(n,e),C.message(n,e)},reply:function(){var e=$(this).closest(".comment"),n=$(this).closest(".firstcomment").attr("id"),t=e.attr("id");C.reply(n,t)},tocomment:function(){var e=$(this).attr("comment");C.tocomment(e)},metmenu:function(){var t=$(this),e=t.closest(".comment"),s=t.closest(".commentBody"),n=e.attr("id"),i=e.attr("pid"),o=L.app.platform.sdk.comments.find(r,n,i),a={address:L.app.user.address.value,caddress:L.app.platform.sdk.comments.address(r,n,i)};p&&m.lastComment&&(o=L.app.platform.sdk.comments.ini([m.lastComment])[0],a.caddress=o.address),L.fastTemplate("metmenu",function(e,n){L.app.platform.api.tooltip(t,function(){return n(a)},function(e){e.find(".edit").on("click",function(){b.edit(s,o),t.tooltipster("hide")}),e.find(".remove").on("click",function(){t.tooltipster("hide")})},{theme:"zindex lighttooltip"})},a)}},y=function(i,t,s){var e=t.el.find(".leaveComment"),o=t.el.find(".postbody");e.emojioneArea({pickerPosition:"top",search:!1,tones:!1,autocomplete:!1,attributes:{spellcheck:!0},events:{change:k.emessage,click:k.emessage,keyup:function(e,n){var t=String.fromCharCode(n.keyCode||n.which),s=this.getText();if(w.test(t)&&C.links(s),n.ctrlKey&&13==n.keyCode){if(o.hasClass("sending"))return;return o.addClass("sending"),void C.post(i.id||"0",i.pid,i.aid,i.editid)}C.message(i.id||"0",s)},onLoad:function(e,n){(m.init||i.init)&&(t.el.find(".emojionearea-editor").focus(),t.el.addClass("active"),m.init=!1),i.value&&this.setText(i.value),s&&s(this,t.el.find(".emojionearea-editor"))}}}),t.el.find(".emojionearea-editor").on("focus",function(){C.process(i.id||"0"),t.el.addClass("active")}),t.el.find(".emojionearea-editor").on("blur",function(){setTimeout(function(){t.el.removeClass("active")},150)}),C.process(i.id||"0"),t.el.find(".postaction").on("click",function(){o.hasClass("sending")||(o.addClass("sending"),C.post(i.id||"0",i.pid,i.aid,i.editid))}),i.id&&t.el.find(".closeEdit").on("click",function(){C.closeEdit(i.id)}),t.el.find(".closeAnswer").on("click",function(){C.removeForm(i.id||"0")})},b={cpreview:function(e){e||(e=m.caption),c.caption.find(".captionPreview").html(e),bgImages(c.caption.find(".captionPreview"))},caption:function(n){m.caption&&L.shell({name:"caption",el:c.caption,data:{ed:m}},function(e){b.cpreview(),o=new Caption({container:c.c,caption:c.c.find(".captionfwrapper"),offset:[s,-100],removeSpacer:!0,iniHeight:!0,_in:t}).init(),e.el.find(".close .cact").on("click",function(){m.close&&m.close()}),e.el.find(".top .cact").on("click",function(){m.totop&&_scrollToTop(m.totop,t,0,-65)}),e.el.find(".bottom .cact").on("click",function(){var e=c.c.find(".post .emojionearea-editor");_scrollTo(e,t),e.focus()}),n&&n()})},edit:function(e,n){e.addClass("editing"),b.post(function(e,n){},{value:n.message,init:!0,edit:"edit",el:e.find(">div.edit"),pid:n.parentid,aid:n.answerid,id:n.id,editid:n.id})},post:function(n,t){t||(t={});var s=l&&!t.answer&&!t.editid;L.shell({name:"post",el:t.el||c.post,data:{placeholder:t.placeholder||"",answer:t.answer||"",edit:t.edit||"",preview:s,mestate:a}},function(e){s?e.el.find("textarea").on("click",function(){l=!1,$(this).blur(),t.init=!0,c.c.removeClass("preview"),y(t,e,n)}):y(t,e,n)})},list:function(e,n){e||(e={}),e.comments=_.filter(e.comments||[],function(e){if(!h[e.id])return h[e.id]=!0}),e.comments=_.sortBy(e.comments,function(e){return e.time}),e.el||(e.el=c.list),L.shell({name:"list",el:e.el||c.list,inner:e.inner||append,data:{comments:e.comments||[],_class:e.class||"",newcomments:e.newcomments||"",replaceName:function(e,n){return'<span class="tocomment" comment="'+n.comment+'">'+e+"</span>"},replaceNameNoComment:function(e,n){return'<span class="tocommentno">'+e+"</span>"},mestate:a}},function(e){c.list.find(".reply").off("click").on("click",k.replyandreplies),c.list.find(".replies").off("click").on("click",k.replies),c.list.find(".panel").off("click").on("click",k.metmenu),c.list.find(".tocomment").off("click").on("click",k.tocomment),setTimeout(function(){c.list.find(".newcomments").removeClass("newcomments")},600),bgImages(c.list),n&&n()})}},T={preview:function(e){var n=[];m.lastComment&&(n=L.app.platform.sdk.comments.ini([m.lastComment])),L.sdk.comments.users(n,function(){e&&e(n)})},level:function(e,n){L.app.platform.sdk.comments.get(r,e||"",function(e){n&&n(e)})}},x={save:function(){},load:function(){var e=L.app.settings.get(L.map.id,r);e&&f[0].import(e)}};return{primary:n,getdata:function(n,e){if(i=e.settings.eid,h={},f={},m=e.settings.essenseData||{},l=m.preview||!1,p=l,d=!1,r=m.txid||null,f[0]=new Comment(r),r){var t={};L.app.platform.sdk.ustate.me(function(e){a=e,n(t)})}},destroy:function(){delete L.app.platform.sdk.comments.sendclbks[i],delete L.app.platform.ws.messages.comment.clbks[i],o&&o.destroy(),c={}},init:function(e){var n;(c={}).c=e.el.find("#"+L.map.id),c.post=c.c.find(".post"),c.list=c.c.find(".list"),c.caption=c.c.find(".captionCnt"),c.showall=c.c.find(".showall"),t=c.c.closest(".wndcontent"),s=t.length?0:(t=null,65),l?function(){c.c.find(".loaderWrapper").addClass("hidden"),c.c.addClass("preview"),c.c.addClass("listpreview");var n={};b.post(function(e){v[0]=e}),T.preview(function(e){n.comments=e,n.class="firstcomment",C.showhideLabel(),b.list(n,function(){})})}():(n={},T.level(null,function(e){n.comments=L.app.platform.sdk.comments.storage[r][0],n.class="firstcomment",C.showhideLabel(),b.caption(),b.list(n,function(){c.c.find(".loaderWrapper").addClass("hidden"),b.post(function(e){v[0]=e,C.fastreply(m.reply)})})}),m.showall&&C.showall()),c.c.find(".showall").on("click",function(){C.showall()}),L.app.platform.sdk.comments.sendclbks[i]=g,L.app.platform.ws.messages.comment.clbks[i]=function(e){if(e.posttxid==r){var n={};if(n.comments=[e.comment],e.parentid){var t=c.c.find("#"+e.parentid);if(n.el=t.find(".answers"),t.find(".repliescount").html(Number(t.find(".repliescount").html()||"0")+1),t.find(".replies").removeClass("hidden"),!t.hasClass("showedreplies"))return}else n.el=c.c.find(".list"),n.class="firstcomment";b.list(n)}},e.clbk(null,e)},hideall:function(e){d=!1,void 0!==e&&(p=e||!1),p?(c.c.addClass("listpreview"),o&&o.destroy(),o=null):c.c.removeClass("listpreview"),c.c.removeClass("showedall"),C.hideallReplies(),C.showhideLabel()},changein:function(e,n){e?(t=e,s=n,o&&(o.addscroll=!0,o.setOffset([s,0]),o.setIn(t))):(t=c.c.closest(".wndcontent"),s=t.length?0:(t=null,65),o&&(o.addscroll=!!t,o.setOffset([s,0]),o.setIn(t)))}}};return L.run=function(e){var n=L.addEssense(t,s,e);L.init(n,e)},L.stop=function(){_.each(t,function(e){e.destroy()})},L}();"undefined"!=typeof module?module.exports=comments:(app.modules.comments={},app.modules.comments.module=comments);
 /*_____*/ 
var author=function(){var d=new nModule,s={},n=function(e){var i,t,o=deep(e,"history"),s=null,n=null,a={showmoreabout:function(){var e=filterXSS(clearScripts(findAndReplaceLink(deep(i,"data.about"),!0)));t.c.find(".aboutwrapper").html(e),t.c.find(".showmoreabout").remove()},showHideUp:function(){200<t.w.scrollTop()?t.up.addClass("active"):t.up.removeClass("active")},panelTopPosition:function(){if(!isMobile()){var e=$(window).scrollTop();t.caption.height()+20<e?t.fxd.addClass("dfxd"):t.fxd.removeClass("dfxd"),a.panelPosition()}},panelPosition:function(){if(!isMobile()){var e=t.fxd,o=t.panel.closest(".mwork"),s=$(window).width(),n=(s-1280)/2;n<0&&(n=0);var i=s-(o.offset().left+o.width())+0,a=s-i-350+0+0;e.css("right",i+"px"),e.css("left",a+"px")}},destroy:function(){_.each(l,function(e){e.active=!1,e.module&&e.module.destroy()})}},r={showHideUp:function(){n=slowMade(function(){a.showHideUp()},n,30)},up:function(){_scrollTop(0)},unsubscribe:function(){d.app.platform.api.actions.unsubscribe(i.address,function(e,o){e||d.app.platform.errorHandler(o,!0)})},subscribe:function(){d.app.platform.api.actions.subscribe(i.address,function(e,o){e||d.app.platform.errorHandler(o,!0)})},subscribePrivate:function(){a.subscribePrivate(function(e,o){e?t.subscribe.addClass("subscribed"):d.app.platform.errorHandler(o,!0)})}},l={shares:{name:d.app.localization.e("uposts"),mobile:'<i class="fas fa-align-justify"></i>',id:"shares",render:"lenta",count:function(){return 0}},followers:{name:d.app.localization.e("followers"),mobile:'<i class="fas fa-users"></i>',id:"followers",render:"followers",count:function(){return deep(i,"data.subscribers.length")||0}},following:{name:d.app.localization.e("following"),id:"following",mobile:'<i class="fas fa-user-plus"></i>',render:"following",count:function(){return deep(i,"data.subscribes.length")||0}},settings:{name:d.app.localization.e("settings")+' <i class="fas fa-cog"></i>',mobile:'<i class="fas fa-cog"></i>',id:"settings",href:"userpage?id=test",class:"tosettings",if:function(){if(d.user.isItMe(i.address))return!0}},info:{name:'Info <i class="fas fa-info-circle"></i>',mobile:'<i class="fas fa-info-circle"></i>',id:"info",class:"info",render:"info",if:function(){if(isMobile())return!0}}},u={panel:function(){var e={};d.user.isItMe(i.address)||(e.author=i.address),d.nav.api.load({open:!0,id:"panel",el:t.panel,animation:!1,essenseData:{discussions:e},clbk:function(e,o){s=o,a.panelPosition(),window.addEventListener("resize",r.panelPosition),window.addEventListener("scroll",a.panelTopPosition)}})},report:function(e){a.destroy(),e.active=!0,d.app.nav.api.history.addParameters({report:e.id}),u[e.render](t.lenta,e),u.menulight()},menulight:function(){t.menu.find(".usermenuitem").removeClass("active");var e=_.find(l,function(e){return e.active});e&&t.menu.find(".usermenuitem .c"+e.class).addClass("active")},menu:function(o){d.shell({name:"menu",el:t.menu,data:{reports:l},animation:"fadeIn"},function(e){e.el.find(".toReport").on("click",function(){var e=$(this).attr("report");u.report(l[e])}),o&&o()})},userslist:function(e,o,s,n,i){d.nav.api.load({open:!0,id:"userslist",el:e,animation:!1,essenseData:{addresses:o,empty:s,caption:n},clbk:function(e,o){i&&i(e,o)}})},info:function(e){d.shell({name:"info",el:e,data:{author:i},animation:"fadeIn"},function(e){e.el.find(".showmoreabout").on("click",a.showmoreabout)})},followers:function(e,s){var o=_.map(deep(i,"data.subscribers")||[],function(e){return e}),n=d.app.localization.e("anofollowers");d.user.isItMe(i.address)&&(n=d.app.localization.e("aynofollowers")),u.userslist(e,o,n,"Followers",function(e,o){s.module=o})},following:function(e,s){var o=_.map(deep(i,"data.subscribes")||[],function(e){return e.adddress}),n=d.app.localization.e("anofollowing");d.user.isItMe(i.address)&&(n=d.app.localization.e("aynofollowing")),u.userslist(e,o,n,"Following",function(e,o){s.module=o})},lenta:function(e,s){d.nav.api.load({open:!0,id:"lenta",el:e,animation:!1,mid:i.address,essenseData:{author:i.address,byauthor:!0,hr:"author?address="+i.address+"&"},clbk:function(e,o){s.module=o}})}},c=function(){};return{primary:o,getdata:function(o){i={};var e=parameters();d.sdk.users.addressByName(e.address,function(e){e?(i.address=e,d.sdk.users.get(i.address,function(){d.sdk.ustate.get(i.address,function(){d.app.platform.sdk.address.pnet()&&i.address==d.app.platform.sdk.address.pnet().address?l.shares.name=d.app.localization.e("myuposts"):l.shares.name=d.app.localization.e("uposts"),i.data=d.sdk.users.storage[i.address],i.state=d.sdk.ustate.storage[i.address],o({author:i})})})):console.log("sd")})},destroy:function(){s&&s.destroy(),window.removeEventListener("resize",r.panelPosition),window.removeEventListener("scroll",a.panelTopPosition),window.removeEventListener("scroll",r.showHideUp),delete d.app.platform.ws.messages.event.clbks.author,delete d.app.platform.clbks.api.actions.subscribe.author,delete d.app.platform.clbks.api.actions.unsubscribe.author,a.destroy(),t={}},init:function(e){var o;c(),(t={}).c=e.el.find("#"+d.map.id),t.lenta=t.c.find(".lentaWrapper"),t.menu=t.c.find(".usermenu"),t.panel=t.c.find(".panel"),t.caption=t.c.find(".bgCaption"),t.fxd=t.c.find(".fxd"),t.subscribe=t.c.find(".subscribebuttons"),t.up=t.c.find(".upbutton"),t.w=$(window),t.info=t.c.find(".authorinfoWrapper"),o=parameters().report||"shares",u.report(l[o]),u.menu(),isMobile()||u.info(t.info),t.up.on("click",r.up),t.subscribe.find(".subscribe").on("click",r.subscribe),t.subscribe.find(".unsubscribe").on("click",r.unsubscribe),t.subscribe.find(".subscribeprivate").on("click",r.subscribePrivate),d.app.platform.ws.messages.event.clbks.author=function(e){"subscribe"!=e.mesType&&"unsubscribe"!=e.mesType||(t.c.find('.toReport[report="followers"] .count').html(l.followers.count()),t.c.find('.toReport[report="following"] .count').html(l.following.count()))},d.app.platform.clbks.api.actions.subscribe.author=function(e){e==i.address&&(t.subscribe.addClass("subscribed"),t.c.find('.toReport[report="followers"] .count').html(l.followers.count()),t.c.find('.toReport[report="following"] .count').html(l.following.count()))},d.app.platform.clbks.api.actions.unsubscribe.author=function(e){e==i.address&&(t.subscribe.removeClass("subscribed"),t.c.find('.toReport[report="followers"] .count').html(l.followers.count()),t.c.find('.toReport[report="following"] .count').html(l.following.count()))},e.clbk(null,e)}}};return d.run=function(e){var o=d.addEssense(s,n,e);d.init(o,e)},d.stop=function(){_.each(s,function(e){e.destroy()})},d}();"undefined"!=typeof module?module.exports=author:(app.modules.author={},app.modules.author.module=author);
 /*_____*/ 
var post=function(){var D=new nModule,s={},t=function(a){var t,r,i,s,n=deep(a,"history")||deep(a,"primary");console.log("primary",a);var e=function(e){var a="https://pocketnet.app/"+i.hr+"s="+r.txid+"&mpost=true&ref="+D.app.platform.sdk.address.pnet().address+"&address="+(parameters().address||""),s=r.caption||r.message,t=trimHtml(s,20),n=r.images[0];if(!n&&r.url){var o=videoImage(r.url);o&&(n=o)}D.nav.api.load({open:!0,href:"socialshare",history:!0,inWnd:!0,essenseData:{url:a,caption:"Share publication in social",image:n,title:t}})},o=function(e){var a=deep(app,"platform.sdk.usersl.storage."+r.address)||{address:r.address,addresses:[]},s="send?address="+r.address+"&amount=1&message="+hexEncode(D.app.localization.e("postlabel")+" &mdash; "+(r.caption||r.message).substr(0,20)+"...")+"&label="+(a.name||a.address)+"&setammount=true";D.fastTemplate("donation",function(e){dialog({html:e,class:"one donation",btn1text:D.app.localization.e("dcancel"),clbk:function(e,a){e.find(".pnetdnt").on("click",function(){D.nav.api.load({open:!0,href:s,history:!0}),D.closeContainer(),a.destroy()}),e.find(".copy").on("click",function(){var e=$(this).closest(".address").find(".addr");copyText(e),sitemessage(D.app.localization.e("successfullycopiedaddress"))})}})},{userinfo:a})},c=function(){if(!isMobile()&&!n){var e=($(window).height()-t.wr.height())/2;0<e?t.wr.css("margin-top",e+"px"):t.wr.css("margin-top","0px")}},l=function(e){if(!D.app.platform.sdk.usersettings.meta.embedvideo||D.app.platform.sdk.usersettings.meta.embedvideo.value){var a=t.c.find(".js-player, [data-plyr-provider][data-plyr-embed-id]");if(a.length)new Plyr(a[0],{autoplay:!0,resetOnEnd:!0}).on("ready",function(){e&&e()})}},d=function(e,s){var a=r.upvote(e);if(console.log("upvoteShare",a,e),!a)return D.app.platform.errorHandler("4",!0),void(s&&s(!1));D.sdk.node.transactions.create.commonFromUnspent(a,function(e,a){console.log(e,a),topPreloader(100),e?s&&s(!0):(r.myVal=null,D.app.platform.errorHandler(a,!0),s&&s(!1))})},p=function(s){var e=r.complain();D.sdk.node.transactions.create.commonFromUnspent(e,function(e,a){console.log(e,a),topPreloader(100),e?(dialog({html:"<b>TXID:</b> "+e.txid,class:"one"}),s&&s(!0)):(t.postWrapper.addClass("showError"),sitemessage(errors.complain[a]),s&&s())})},u=function(s){D.app.platform.api.actions.unsubscribe(r.address,function(e,a){e||D.app.platform.errorHandler(a,!0),s&&s(e,a)})},m=function(s){D.app.platform.api.actions.subscribe(r.address,function(e,a){e||D.app.platform.errorHandler(a,!0),s&&s(e,a)})},f=function(a){var e=_.map(r.images,function(e){return{src:e}}),s=findIndex(e,function(e){if(e.src==a)return!0});D.app.nav.api.load({open:!0,href:"imagegallery?i="+r.txid+"&num="+(s||0),inWnd:!0,history:"true",essenseData:{initialValue:a,idName:"src",images:e}})},h=function(e){u(function(){tx&&t.share.find(".shareTable").removeClass("subscribed")})},g=function(e){m(function(e){e&&t.share.find(".shareTable").addClass("subscribed")})},v=function(){D.app.platform.sdk.node.transactions.get.tx(r.txid)},b=function(){var t=$(this).attr("value");D.app.user.isState(function(e){if(e){var s=$(this).closest(".stars");if(s.attr("value"))return;s.attr("value",t),s.addClass("liked"),d(t,function(e){if(e){r.scnt||(r.scnt=0),r.score||(r.score=0),r.scnt++,r.score=Number(r.score||0)+Number(t);var a=Number(r.score)/Number(r.scnt);s.find(".tstarsov").css("width",a/5*100+"%"),s.closest(".itemwr").find(".count span.v").html(a.toFixed(1)),C.stars(),i.like&&i.like(r)}else s.removeAttr("value"),s.removeClass("liked")})}else D.nav.api.load({open:!0,href:"authorization",history:!0})})},k=function(){dialog({html:"Do yor really want to complain on this post?",btn1text:"Yes",btn2text:"No",success:function(){t.share.addClass("complained"),topPreloader(30),p(function(e){topPreloader(100),e||a.removeClass("hidden")})}})},y=function(){var e=$(this).attr("i");f(e)},w=function(){e()},x=function(){o()},C={comments:function(){D.fastTemplate("commentspreview",function(e){var a=t.c.find(".commentsWrapper");D.nav.api.load({open:!0,id:"comments",el:a,eid:r.txid+"post",essenseData:{totop:t.c,caption:e,send:function(){var e=t.c.find(".commentsAction .count span");e.html(Number(e.html()||"0")+1)},txid:r.txid,showall:!0,reply:i.reply},clbk:function(e,a){c(),s=a}})},{share:r})},empty:function(){D.shell({name:"empty",el:t.share},function(e){c()})},images:function(e){var a=t.c.find(".image"),s=t.c.find(".images");!s.hasClass("active")&&a.length&&s.length?a.imagesLoaded({background:!0},function(o){"a"!=r.settings.v&&_.each(o.images,function(e,a){var s=e.img,t=$(o.elements[a]).closest(".imagesWrapper"),n=t.width();t.height(),s.width,s.height;t.height(n*(s.height/s.width))}),s.addClass("active"),a.addClass("active"),e&&e()}):e&&e()},share:function(a){D.shell({turi:"lenta",name:"share",el:t.share,data:{share:r,all:!0,mestate:{}}},function(e){c(),t.wr.addClass("active"),C.stars(function(){C.url(function(){c(),C.urlContent(function(){c(),l(),C.images(function(){c(),a&&a()})})})})})},stars:function(a){D.shell({turi:"lenta",name:"stars",el:t.share.find(".forstars"),data:{share:r}},function(e){fastars(e.el.find(".stars")),a&&a()})},url:function(a){var e=r.url,s=D.app.platform.sdk.remote.storage[e];D.shell({turi:"share",name:"url",el:t.c.find(".url"),data:{url:e,og:s,share:r}},function(s){var t=s.el.find("img");s.el.find("img").imagesLoaded({background:!0},function(e){_.each(e.images,function(e,a){e.isLoaded?($(t[a]).addClass("active"),500<e.img.naturalWidth&&s.el.addClass("bigimageinlink")):$(t[a]).closest(".image").css("display","none")}),a&&a()})})},urlContent:function(a){var e=r.url;if(e){var s=D.app.platform.parseUrl(e),t=D.app.platform.sdk.remote.storage[e];e&&!t?"youtube"==s.type||"vimeo"==s.type?a&&a():D.app.platform.sdk.remote.get(e,function(e){e?C.url(a):a&&a()}):a&&a()}else a&&a()}},T=function(){};return{primary:n,getdata:function(e,a){var s=deep(a,"settings.essenseData.share");if(i=deep(a,"settings.essenseData")||{},r=null,console.log("ID",s),s&&!(r=D.app.platform.sdk.node.shares.storage.trx[s])){var t=_.find(D.sdk.node.transactions.temp.share,function(e){return e.txid==s});t&&((r=new pShare)._import(t,!0),r.temp=!0,r.address=D.app.platform.sdk.address.pnet().address)}console.log("SHARE",r,D.app.platform.sdk.node.shares.storage.trx,s);e({})},destroy:function(){t={},s&&s.destroy(),delete D.app.platform.ws.messages.event.clbks.post,delete D.app.platform.ws.messages.transaction.clbks.temppost,D.app.nav.api.history.removeParameters(["s"])},init:function(e){T(),(t={}).c=e.el.find("#"+D.map.id),t.share=t.c.find(".share"),t.wr=t.c.find(".postWrapper"),t.c.on("click",".stars i",b),t.c.on("click",".complain",k),t.c.on("click",".image",y),t.c.on("click",".txid",v),t.c.on("click",".donate",x),t.c.on("click",".sharesocial",w),t.c.on("click",".asubscribe",g),t.c.on("click",".aunsubscribe",h),D.app.platform.ws.messages.transaction.clbks.temppost=function(e){e.temp&&r.txid==e.temp.txid&&(r.temp=!1,r.scnt="0",r.score="0",r.myVal=0,C.share())},D.app.platform.ws.messages.event.clbks.post=function(e){"upvoteShare"==e.mesType&&e.share&&r.txid==e.share.txid&&C.stars(function(){})},D.app.platform.clbks.api.actions.subscribe.post=function(e){e==r.address&&t.c.find(".shareTable").addClass("subscribed")},D.app.platform.clbks.api.actions.unsubscribe.post=function(e){e==r.address&&t.c.find(".shareTable").removeClass("subscribed")},r?C.share(function(){C.comments()}):C.empty(),e.clbk(null,e)},wnd:{class:"withoutButtons postwindow",close:function(){}}}};return D.run=function(e){var a=D.addEssense(s,t,e);D.init(a,e)},D.stop=function(){_.each(s,function(e){e.destroy()})},D}();"undefined"!=typeof module?module.exports=post:(app.modules.post={},app.modules.post.module=post);
 /*_____*/ 
var share=function(){var u=new nModule,t={},n=function(e){var o,s,i=/[,.!?;:() \n\r]/g,a=deep(e,"history"),r=null,l={waitActions:function(){u.app.platform.sdk.user.waitActions(function(e){o.c&&(e&&"inf"!=e?o.c.addClass("waitActions"):o.c.removeClass("waitActions"))})},autoFilled:function(){l.filled("i",0!=r.images.v.length),l.filled("u",r.url.v),l.filled("t",0!=r.tags.v.length),l.filled("cm",r.message.v||r.caption.v)},filled:function(e,a){var t=o.c.find('.draggablepart[part="'+e+'"]');a?t.addClass("filled"):t.removeClass("filled")},checkUrlForImage:function(a){if(a=a.split("?")[0].toLowerCase(),_.find([".jpg",".gif",".png",".jpeg"],function(e){if(-1<a.indexOf(e))return!0}))return!0},embeding20:function(e){var a=r.export(!0);u.nav.api.load({open:!0,id:"embeding20",inWnd:!0,essenseData:{storage:a,value:e,on:{added:function(e){"url"==type&&e&&l.checkUrlForImage(e)&&(type="images",e=e),r[type].set(e),g[type]&&g[type]()}}}})},embeding:function(n,e){var a=r.export(!0);"article"==n?u.nav.api.load({open:!0,id:"articles",inWnd:!0,history:!0,essenseData:{storage:a,value:e,on:{added:function(e){}}}}):u.nav.api.load({open:!0,id:"embeding",inWnd:!0,essenseData:{type:n,storage:a,value:e,on:{added:function(e){var t=!0;"url"==n&&e&&l.checkUrlForImage(e)&&(n="images",e=e),_.isArray(e)||(e=[e]),_.each(e,function(e,a){t=r[n].set(e),s.share||p.save()}),!t&&c[n]&&sitemessage(c[n]),g[n]&&g[n]()}}}})},addTag:function(e){r.tags.set(e)?(o.error.html(""),s.share||p.save()):o.error.html("You can enter less that 30 tags")},editImage:function(e){var a=_.map(r.images.v,function(e,a){return{original:e,index:a}}),n=_.filter(a,function(e){if(-1<e.original.indexOf("data:image"))return!0});u.nav.api.load({open:!0,id:"imageGalleryEdit",inWnd:!0,essenseData:{edit:!0,initialValue:e,images:n,success:function(e,a){_.each(r.images.v,function(e,a){var t=_.find(n,function(e){if(e.index==a)return!0});t&&(r.images.v[a]=t.original)}),s.share||p.save(),g.images(a)}}})},removeImage:function(t){var e=r.images.v.splice(t,1)[0];o.c.find(".imageContainer").each(function(){var e=$(this),a=e.attr("value");t<a&&e.attr("value",a-1),a==t&&e.remove()}),o.c.find(".imagesEmbWr").isotope();var a=o.eMessage[0].emojioneArea.getText();a=a.split(e).join(""),o.eMessage[0].emojioneArea.setText(a),s.share||p.save()},removelink:function(){var e=r.url.v;r.url.set();var a=o.eMessage[0].emojioneArea.getText();a=a.split(e).join(""),o.eMessage[0].emojioneArea.setText(a),s.share||p.save()},removeTag:function(e){r.tags.remove(e);var a=o.eMessage[0].emojioneArea.getText();a=a.split("#"+e).join(e),o.eMessage[0].emojioneArea.setText(a),s.share||p.save()},applyText:function(e){r.message.set(e)},caption:function(e){r.caption.set(e)},linksFromText:function(e){if(!r.url.v){var a=e.match(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%|_\+.~#/?&//=]*)?/gi);a&&0<a.length&&_.each(a,function(e){if(l.checkUrlForImage(e))-1==r.images.v.indexOf(e)&&(r.images.set(e),g.images());else{if(r.url.v)return;r.url.set(e),g.url()}})}},tagsFromText:function(e){var a=e.split(i),t=_.filter(a,function(e){if("#"==e[0])return!!(e=e.replace(/#/g,""))&&!r.tags.have(e)});t.length&&(_.each(t,function(e){e=e.replace(/\#/g,""),r.tags.set(e)}),g.tags())},post:function(i,e){o.c.addClass("loading"),topPreloader(50),r.uploadImages(u.app,function(){u.sdk.node.transactions.create.commonFromUnspent(r,function(e,a){if(topPreloader(100),o.c.removeClass("loading"),e){try{var t=new pShare;t._import(e,!0),t.temp=!0,t.address=e.address,u.app.platform.sdk.node.shares.add(t),s.notClear||(r.clear(),s.share||p.save(),m())}catch(e){console.log(e)}i&&i(!0)}else if(i)i(!1,c[a]);else{o.postWrapper.addClass("showError");var n=u.app.platform.errorHandler(a,!0);n&&o.error.html(n)}},e)})},error:function(e){var a=r.validation();return a&&!e?(o.postWrapper.addClass("showError"),o.error.html(c[a]),"message"==a&&o.c.find(".emojionearea-editor").focus(),"tags"==a&&o.c.find(".tgs input").focus(),!0):(o.postWrapper.removeClass("showError"),o.error.html(""),!1)},eTextChange:function(e){var a=e.getText();l.tagsFromText(a),l.applyText(a),l.linksFromText(a),g.caption(),s.share||p.save()}},c={message:u.app.localization.e("emptymessage"),tags:u.app.localization.e("emptytags"),images:u.app.localization.e("maximages")},d={selectTime:function(){var e=new Date,a={day:null,hour:(e=e.addMinutes(10)).getHours(),minutes:e.getMinutes()};s.time&&(a.day=s.time.yyyymmdd(),a.hour=s.time.getHours(),a.minutes=s.time.getMinutes()),u.fastTemplate("sharedate",function(e){dialog({html:e,btn1text:u.app.localization.e("daccept"),class:"one sharedate",clbk:function(e){},wrap:!0,success:function(e){var a=e.el.find(".day").val(),t=e.el.find(".hours").val(),n=e.el.find(".minutes").val(),i=strToDateSmall(a);return i=(i=i.addHours(t)).addMinutes(n),new Date<i?(s.time=i,o.selectTime.find(".selectedTime").html(convertDate(dateToStr(i))),s.selectTime&&s.selectTime(i),!0):(sitemessage(u.app.localization.e("pastdate")),!1)}})},{date:a})},changePostTime:function(){var e=$(this),a=$(this).val();if("p"!=a){if("t"==a)l.error()?e.val("w"):s.time&&s.time<new Date&&(s.time=null,o.selectTime.find(".selectedTime").html(u.app.localization.e("timenotselected")),s.selectTime&&s.selectTime(null));a=$(this).val(),s.type&&s.type(a)}else dialog({html:u.app.localization.e("sharenow"),btn1text:u.app.localization.e("dyes"),btn2text:u.app.localization.e("dno"),success:function(){s.type&&s.type(a)},fail:function(){e.val("w")}})},changeAddress:function(){var e=$(this).val(),a=o.c.find(".usericon"),t=deep(app,"platform.sdk.users.storage."+e+".image")||"";t?(a.html(""),a.attr("image",t),bgImages(o.c.find(".icon"))):(a.html('<svg width="30" height="30" data-jdenticon-value="'+e+'"></svg>'),a.attr("image",""),a.css("background","#F9F6F6"),a.css("background-image",""),a.css("background-size",""),a.css("background-position",""),a.css("background-repeat",""),o.c.find("[data-jdenticon-value]").each(function(){var e=$(this),a=e.data("jdenticon-value");e.html(jdenticon.toSvg(a,e.width()))})),s.address&&s.address(e)},change:function(){l.error(!0),l.autoFilled()},post:function(){l.error()||l.post()},embeding:function(){var e=$(this).attr("embeding");"embeding20"==e?l.embeding20():l.embeding(e)},addTag:function(e){l.addTag(e),g.tags()},caption:function(){var e=$(this).val();l.caption(e)},eTextChange:function(e,a){l.eTextChange(this)},textChange:function(){var e=$(this).val();l.tagsFromText(e),l.applyText(e),l.linksFromText(e),g.caption()},eText:function(e,a){var t=String.fromCharCode(a.keyCode||a.which),n=this.getText();i.test(t)&&(l.tagsFromText(n),l.linksFromText(n)),l.applyText(n),g.caption(),s.share||p.save()},text:function(e){var a=String.fromCharCode(e.keyCode||e.which),t=$(this).val();i.test(a)&&(l.tagsFromText(t),l.linksFromText(t)),l.applyText(t),g.caption()},removeTag:function(){var e=$(this).closest(".tag").attr("tag");l.removeTag(e),$(this).closest(".tag").remove()},removelink:function(){l.removelink(),g.url()}},g={tags:function(a){o.tags.find(".tag").remove(),u.shell({name:"tags",inner:append,el:o.tags,data:{tags:r.tags.get()}},function(e){e.el.find(".remove").on("click",d.removeTag),a&&a()})},tagsResults:function(e,a){u.shell({name:"tagsResult",data:{results:e}},function(e){a&&a(e.rendered)})},all:function(){o.eMessage[0].emojioneArea.setText(r.message.v),g.tags(),g.url(),g.caption(),g.images()},caption:function(){r.caption.v||100<r.message.v.length?o.cpt.hasClass("active")||o.cpt.addClass("active"):o.cpt.removeClass("active")},url:function(e){var a=r.url.v,i=u.app.platform.parseUrl(a),s=u.app.platform.sdk.remote.storage[a];u.shell({name:"url",inner:html,el:o.urlWrapper,data:{url:r.url.v,og:s,remove:!0,share:r}},function(t){if(r.url.v&&!s)if("youtube"==i.type||"vimeo"==i.type)Plyr.setup(".js-player");else u.app.platform.sdk.remote.get(i.url,function(e){e&&g.url()});else if(s){var n=t.el.find("img");t.el.find("img").imagesLoaded({background:!0},function(e){_.each(e.images,function(e,a){e.isLoaded?($(n[a]).addClass("active"),500<e.img.naturalWidth&&t.el.addClass("bigimageinlink")):$(n[a]).closest(".image").css("display","none")})}),t.el.find(".removeImage").on("click",function(){r.settings.image="r",g.url(),p.save()})}t.el.find(".removelink").on("click",d.removelink),e&&e()})},images:function(t){u.shell({name:"images",turi:"embeding",inner:html,el:o.images,data:{images:_.map(r.images.v||[],function(e,a){return{src:e,id:a}})}},function(e){e.el.find(".remove").on("click",function(){var e=$(this).closest(".imageContainer").attr("value");l.removeImage(e)}),e.el.find(".edit").on("click",function(){var e=$(this).closest(".imageContainer").attr("value");l.editImage(e)}),e.el.find(".image").on("click",function(){var e=$(this).attr("i");if(e){var a=_.map(r.images,function(e){return{src:e}});u.app.nav.api.load({open:!0,id:"imageGallery",inWnd:!0,essenseData:{initialValue:e,idName:"src",images:a}})}}),e.el.find(".image").imagesLoaded({background:!0},function(e){if(isMobile())t&&t(),o.images.addClass("active");else{var a=o.images.find(".imagesEmbWr");a.isotope({layoutMode:"packery",itemSelector:".imageContainer",packery:{gutter:20},initLayout:!1}),a.on("arrangeComplete",function(){t&&t(),o.images.addClass("active")}),a.isotope()}})})}},p={save:function(){r?u.app.settings.set(u.map.id,"currentShare",r.export(!0)):u.app.settings.set(u.map.id,"currentShare","")},load:function(){var e=u.app.settings.get(u.map.id,"currentShare");e&&r.import(e)}},m=function(){g.all()};return{primary:a,post:l.post,auto:function(){parameters().marticles&&!u.app.nav.wnds.articles&&l.embeding("article",null)},getdata:function(e,a){r=deep(a,"settings.essenseData.share")||new Share,(s=deep(a,"settings.essenseData")||{}).share||p.load(),e({share:r})},destroy:function(){delete u.app.platform.ws.messages.transaction.clbks.share,o.c&&o.c.find(".emojionearea-editor").off("pasteImage"),o={},Sortable&&Sortable.destroy&&Sortable.destroy()},init:function(e){(o={}).c=e.el.find("#"+u.map.id),o.tagSearch=o.c.find(".searchWrapper"),o.tags=o.c.find(".tagsCont"),o.message=o.c.find(".message"),o.eMessage=o.c.find("#emjcontainer"),o.panel=o.c.find(".panel .item"),o.error=o.c.find(".error"),o.postWrapper=o.c.find(".postWrapper"),o.post=o.c.find(".post"),o.urlWrapper=o.c.find(".urlWrapper"),o.caption=o.c.find(".captionshare"),o.cpt=o.c.find(".cpt"),o.images=o.c.find(".imagesWrapper"),o.changeAddress=o.c.find(".changeAddress"),o.changePostTime=o.c.find(".postTime"),o.selectTime=o.c.find(".selectedTimeWrapper"),function(){o.changeAddress.on("change",d.changeAddress),o.changePostTime.on("change",d.changePostTime),o.selectTime.on("click",d.selectTime),o.panel.on("click",d.embeding),o.post.on("click",d.post),o.eMessage.emojioneArea({pickerPosition:"bottom",search:!1,tones:!1,autocomplete:!1,attributes:{spellcheck:!0},events:{change:d.eTextChange,click:d.eTextChange,keyup:d.eText,onLoad:function(e,a){parameters().newshare&&o.c.find(".emojionearea-editor").focus(),o.c.find(".emojionearea-editor").pastableContenteditable(),o.c.find(".emojionearea-editor").on("pasteImage",function(e,a){topPreloader(100),r.images.set(a.dataURL)?g.images&&g.images():sitemessage(c.images)}).on("pasteImageStart",function(){topPreloader(30)}).on("pasteImageError",function(e,a){topPreloader(100)}).on("pasteText",function(e,a){l.eTextChange(o.eMessage[0].emojioneArea)})}}}),o.caption.on("keyup",d.caption),r.on.change.edit=d.change,isMobile()||o.c.find(".tooltip").tooltipster({theme:"tooltipster-light",maxWidth:600,zIndex:20}),search(o.tagSearch,{placeholder:u.app.localization.e("addtags"),clbk:function(e){},time:0,events:{fastsearch:function(e,a,t){if(console.log("fastsearch",e,t),t){var n=String.fromCharCode(t.keyCode||t.which);if(/[,.!?;:() ]/.test(n))return d.addTag(e.replace(/#/g,"").replace(/ /g,"")),o.tagSearch.find("input").val("").focus(),void a(null)}u.app.platform.sdk.tags.search(e,function(e){g.tagsResults(e,function(e){a(e,function(e,a){e.find(".result").on("click",function(){var e=$(this).attr("result");a.closeResults(),a.clear(),d.addTag(e)}),e.find(".empty").on("click",function(){var e=trim(o.tagSearch.find("input").val());e&&(a.closeResults(),a.clear(),d.addTag(e))})})})})},search:function(e,a,t){e=(e=e.replace(/#/g," ")).split(" "),1==(e=_.filter(e,function(e){return e})).length&&(e=e[0]),d.addTag(e),t.clear(),a&&a()}},last:{get:function(){return[u.app.localization.e("tnews"),u.app.localization.e("timages"),u.app.localization.e("tvideos"),u.app.localization.e("tmarket"),u.app.localization.e("tsport")]},tpl:function(e,a){g.tagsResults(e,function(e){a(e,function(e,a){e.find(".result").on("click",function(){var e=$(this).attr("result");a.closeResults(),a.clear(),d.addTag(e)})})})}}});var e={animation:150,swapThreshold:.5,draggable:".draggablepart",onUpdate:function(e){var a=[],t=$(n).find(".draggablepart");$.each(t,function(){a.push($(this).attr("part"))}),r.settings.a=a,s.share||p.save(),s.changeArrange&&s.changeArrange()},forceFallback:!0,handle:".marker"},n=document.getElementById("sortableBody");n&&!isMobile()&&Sortable.create(n,e),l.autoFilled(),console.log("INIT"),u.app.platform.ws.messages.transaction.clbks.share=l.waitActions}(),m(),e.noscroll=u.app.actions.scrollBMenu(),e.clbk(null,e),l.waitActions()},id:e._id}};return u.run=function(e){var a=u.addEssense(t,n,e);u.init(a,e)},u.stop=function(){_.each(t,function(e){e.destroy()})},u}();"undefined"!=typeof module?module.exports=share:(app.modules.share={},app.modules.share.module=share);
 /*_____*/ 
var wallet=function(){var g=new nModule,t={},n=function(e){var i,a=deep(e,"history"),s={},l={pnetwallet:{label:g.app.localization.e("tacaddress"),alabel:g.app.localization.e("tacaddress"),id:"pnetwallet",addresses:function(){return[g.app.platform.sdk.address.pnet().address]}},wallet:{label:g.app.localization.e("twallet"),id:"wallet",addresses:function(){return g.app.platform.sdk.addresses.storage.addresses||[]},caption:g.app.localization.e("twalletaddresses")},total:{label:g.app.localization.e("tTotal"),id:"total",addresses:function(){return[g.app.platform.sdk.address.pnet().address].concat(g.app.platform.sdk.addresses.storage.addresses||[])}}},o={parameters:{source:new Parameter({name:"Source",type:"VALUES",id:"source",defaultValue:"pnetwallet",possibleValuesLabels:[g.app.localization.e("twallet"),g.app.localization.e("tacaddress"),g.app.localization.e("tTotal")],possibleValues:["wallet","pnetwallet","total"],placeholder:g.app.localization.e("wsselect")}),reciever:new Parameter({name:g.app.localization.e("wsreciever"),type:"VALUESCUSTOM",id:"reciever",possibleValuesLabels:[],possibleValues:[],placeholder:g.app.localization.e("wsenter"),onType:!0}),amount:new Parameter({name:g.app.localization.e("wsamount"),id:"amount",type:"NUMBER",placeholder:g.app.localization.e("wsamountof"),format:{Precision:6}}),fees:new Parameter({name:g.app.localization.e("wsincludefees"),type:"VALUES",id:"fees",defaultValue:"include",possibleValuesLabels:[g.app.localization.e("wsrecieverpay"),g.app.localization.e("wssenderpay")],possibleValues:["include","exclude"]})}},n={wallet:g.app.localization.e("twallet"),pnetwallet:g.app.localization.e("tacaddress")},r={active:!1,parameters:{deposit:new Parameter({name:g.app.localization.e("wrecieveon"),type:"VALUES",id:"deposit",defaultValue:"wallet",possibleValuesLabels:[g.app.localization.e("twallet"),g.app.localization.e("tacaddress")],possibleValues:["wallet","pnetwallet"],placeholder:g.app.localization.e("wdselectfrom")}),depositamount:new Parameter({name:g.app.localization.e("wdamount"),id:"depositamount",type:"NUMBER",placeholder:g.app.localization.e("wdenteramount"),onType:!0,format:{Precision:6}}),message:new Parameter({name:g.app.localization.e("wdmessage"),id:"message",type:"TEXT",placeholder:g.app.localization.e("wdmessageplaceholder"),onType:!0}),label:new Parameter({name:g.app.localization.e("wdlabel"),id:"label",type:"STRING",onType:!0})}},d={active:!1,parameters:{reciever:new Parameter({name:g.app.localization.e("wrecieveon"),type:"VALUES",id:"reciever",defaultValue:"pnetwallet",possibleValuesLabels:[g.app.localization.e("tacaddress")],possibleValues:["pnetwallet"],placeholder:g.app.localization.e("wdselectfrom")}),amount:new Parameter({name:"Pocetcoin Amount",id:"amount",type:"NUMBER",placeholder:g.app.localization.e("wsamountof"),format:{Precision:6}}),currency:new Parameter({name:"Currency",id:"currency",type:"VALUES",defaultValue:"btc",possibleValuesLabels:["BTC","LTC"],possibleValues:["btc","ltc"],placeholder:"Select currency"}),currencyAmount:new Parameter({name:"Currency Amount",id:"currencyAmount",type:"NUMBER",placeholder:g.app.localization.e("wsamountof"),format:{Precision:6}})},segments:[{id:"AWAITINGFUNDS",time:180,exclude:"all",label:function(e,a,t){if(e==this.id)return'<div class="todeal">'+t.currency.toUpperCase()+": "+a.Address+' <i class="fas fa-chevron-circle-right"></i> </div>'},currentLabel:function(e){return"Awaitng Funds. Address will be valid for <b>"+e.MinutesLeft+" minutes</b>"}},{id:"EXPIREDAWAITINGFUNDS",class:"bad",finish:!0,exclude:"all",label:function(e,a){return"Time to this deal has been expired."},currentLabel:function(e){return'Time to this deal has been expired. <div class="reactivate">Reactivate</div>'}},{id:"CONFIRMATIONS0",time:10,currentLabel:function(e){return"Waiting blockchain confirmations (0/4)"}},{id:"CONFIRMATIONS1",time:10,currentLabel:function(e){return"Waiting blockchain confirmations (1/4)"}},{id:"CONFIRMATIONS2",time:10,currentLabel:function(e){return"Waiting blockchain confirmations (2/4)"}},{id:"CONFIRMATIONS3",time:10,currentLabel:function(e){return"Waiting blockchain confirmations (3/4)"}},{id:"POCSENT",time:4,currentLabel:function(e){return"Send Pocketcoins to You"}},{id:"POCDELEVERED",finish:!0,currentLabel:function(e){return"Pocketcoins delivered"}}]},c=[],p=[],u=0,m={showCrInStep:function(a,e,t,n){h.step(function(e){h.crowdfunding(function(e){a&&m[a](e,n),h.stepC(e,t)},e)},e,{class:"crowdfunding",view:a})},olddeal:function(e,a){h.crDeal(a,g.app.platform.sdk.exchanges.info[a.info.address],e.find(".actionbody"))},newdeal:function(n){var e={currency:d.parameters.currency.value,address:d.parameters.reciever.value,amount:d.parameters.amount.value,currencyAmount:d.parameters.currencyAmount.value};m.pocAddress(e,function(e,a,t){e?sitemessage("Something went wrong. Please reload page and try again (error: 0003)"):h.crDeal(a,t,n.find(".actionbody"))})},showListcount:function(t){g.app.platform.sdk.exchanges.statuses(function(e,a){e?sitemessage("Something went wrong. Please reload page and try again (error: 0004)"):h.showListcount(a,t.find(".actionbody"))})},status:function(){},pocAddress:function(e,n){e||(e={}),e.reciever&&"pnetwallet"!=e.reciever||(e.address=g.app.platform.sdk.address.pnet().address),"wallet"==e.reciever&&(e.address=g.app.platform.sdk.addresses.storage.addresses[0]),e.currency&&e.address?g.app.platform.sdk.exchanges.address(e,function(e,a,t){e?n&&n("fail",null):n&&n(null,a,t)}):n&&n("no data",null)},sendAddresses:function(){var e=o.parameters.source.value;return l[e].addresses()},canChangeSend:function(){if(o.parameters.reciever.value){var t=null;if(_.find(n,function(e,a){return t=a,o.parameters.reciever.value==e||o.parameters.reciever.value==a}))return t}return null},sendParameters:function(){var t=o.parameters.source.value;(o.parameters.reciever.possibleValues=[],o.parameters.reciever.possibleValuesLabels=[],_.each(n,function(e,a){a!=t&&"total"!=t&&(o.parameters.reciever.possibleValues.push(a),o.parameters.reciever.possibleValuesLabels.push(e))}),"total"==t)&&(_.find(n,function(e,a){return o.parameters.reciever.value==e||o.parameters.reciever.value==a})&&(o.parameters.reciever.value=""));o.parameters.reciever.value!=t&&o.parameters.reciever.value!=n[t]||(o.parameters.reciever.value=o.parameters.reciever.possibleValuesLabels[0]),o.parameters.reciever.possibleValues.length?o.parameters.reciever.placeholder=g.app.localization.e("wrenteraddressselect"):o.parameters.reciever.placeholder=g.app.localization.e("wrenteraddress");var e=m.sendAddresses();g.app.platform.sdk.node.transactions.get.balance(function(e){o.parameters.amount.value>e&&(o.parameters.amount.value=e)},e,null,!0)},addaddress:function(){var e=g.app.platform.sdk.addresses.storage.addresses.length;g.app.platform.sdk.addresses.addWalletAddress(e),g.app.platform.sdk.addresses.save(),topPreloader(0),b(function(){topPreloader(100)})},linkValidation:function(){return 0<r.parameters.depositamount.value&&trim(r.parameters.message.value)},linkValidationQr:function(){return 0<r.parameters.depositamount.value},showDepositInStep:function(a,e,t){h.step(function(e){h.deposit(function(e){m[a](e),h.stepB(e,t)},e)},e,{class:"deposit"})},showQrResult:function(e){r.address&&m.linkValidationQr()&&h.qrResultForDeposit(r.address,e.find(".actionbody"))},showLinkResult:function(e){r.address&&m.linkValidation()&&h.linkResultForDeposit(r.address,e.find(".actionbody"))},showLinkMaker:function(e){r.address&&h.linkMakerForDeposit(r.address,e.find(".actionbody"))},showQrMaker:function(e){r.address&&h.qrMakerForDeposit(r.address,e.find(".actionbody"))},showDeposit:function(a){r.address="";var e=r.parameters.deposit.value,t="";if(r.active=!0,"pnetwallet"==e)return t=g.app.platform.sdk.address.pnet().address,r.address=t,void h.addressForDeposit(t,a.find(".actionbody"));"wallet"!=e||g.app.platform.sdk.addresses.addNewWalletAddress(function(e){g.app.platform.sdk.addresses.save(),t=e,r.address=t,h.addresses(),h.addressForDeposit(t,a.find(".actionbody"))})},showSendInStep:function(a,e,t){h.step(function(e){h.send(function(e){m[a](e),h.stepB(e,t)},e)},e,{class:"send"})},calculateFee:function(a){g.app.platform.sdk.node.fee.estimate(function(e){h.sendFees(a.find(".actionbody"),e)})},validSend:function(){var e=o.parameters.amount.value,a=o.parameters.reciever.value;return!!(0<e&&a)},prepareTransaction:function(l,d){var a=function(r,o,i){g.app.platform.sdk.wallet.txbase(r,_.clone(o),0,i,function(e,a,t){if(e)sitemessage(e);else{var n=g.app.platform.sdk.node.transactions.create.wallet(a,t),s=Math.min(n.virtualSize()*l,.0999);d&&d(r,o,s,i)}})},t=o.parameters.amount.value,n=o.parameters.fees.value,s=m.sendAddresses(),r=[],e=o.parameters.reciever.value;if("pnetwallet"==e||e==g.app.localization.e("tacaddress"))return r.push({address:g.app.platform.sdk.address.pnet().address,amount:t}),void a(s,r,n);"wallet"!=e&&e!=g.app.localization.e("twallet")?(r.push({address:e,amount:t}),a(s,r,n)):g.app.platform.sdk.addresses.addNewWalletAddress(function(e){r.push({address:e,amount:t}),g.app.platform.sdk.addresses.save(),a(s,r,n)})}},f=function(){m.addaddress()},v=function(){$(this).closest(".actionbody").html("")},h={clearMain:function(e){g.shell({animation:{id:"fadeInByElement",selector:".fadeInByElement",timeouts:150},clear:!0,el:i.c.find(".animationWrapper")},e)},clearStep:function(e){g.shell({animation:{id:"fadeInByElement",selector:".fadeInByElementStep",timeouts:150},clear:!0,el:i.step},e)},mainWithClear:function(e){c=[],p=[],h.clearStep(function(){h.main(function(){b()})})},main:function(e){g.shell({name:"main",el:i.main,data:{},animation:"fadeIn"},function(){i.total=i.c.find(".total"),i.addresses=i.c.find(".addresses"),i.send=i.c.find(".send"),i.deposit=i.c.find(".deposit"),i.crowdfunding=i.c.find(".crowdfunding"),e&&e()})},stepC:function(e,a){e.find("._stepback").html('<div class="backWrapper"><div class="back"><i class="fas fa-arrow-left"></i></div></div>'),e.find("._stepclose").html('<div class="closeAdditional"><span><i class="fas fa-undo"></i> '+g.app.localization.e("wreturntoeallet")+"</span></div>"),e.find("._subcaptionlevel span").html(a||"")},stepB:function(e,a){e.find("._stepback").html('<div class="backWrapper"><div class="back"><i class="fas fa-arrow-left"></i></div></div>'),e.find("._stepclose").html('<div class="closeAdditional"><span><i class="fas fa-undo"></i> '+g.app.localization.e("wreturntoeallet")+"</span></div>"),e.find("._subcaptionlevel span").html(a||"")},step:function(t,e,n){n||(n={}),u==e?t&&t(i.c.find(".step")):(c[u=e]=t,p[e]=n,h.clearMain(function(){_scrollToTop(i.step,0,200,-70),setTimeout(function(){g.shell({name:"step",el:i.step,data:{},animation:"fadeIn"},function(e){var a=e.el.find(".step");n.class&&a.addClass(n.class),n.view?a.attr("view",n.view):a.removeAttr("view"),t&&t(a)})},200)}))},showListcount:function(e,a){var t=g.app.platform.sdk.exchanges.get();g.shell({name:"listcr",el:a,data:{list:t,c:d}},function(s){var r=function(e,a){g.app.platform.sdk.exchanges.remove(e.currency,e.info.address),a.remove(),(t=g.app.platform.sdk.exchanges.get()).length||h.step(c[u-1],u-1,p[u-1])};s.el.find(".removecr").on("click",function(){var t=$(this).closest(".item"),e=t.attr("item"),n=g.app.platform.sdk.exchanges.find(e);g.app.platform.sdk.exchanges.status(n.currency,n.info.address,function(e,a){e?sitemessage("Something went wrong. Please reload page and try again (error: 0006)"):"AWAITINGFUNDS"==a.Status||"EXPIREDAWAITINGFUNDS"==a.Status?r(n,t):dialog({html:"Do you really want to delete information about this deal? Deal can't be stop",success:function(){r(n,t)}})})}),s.el.find(".updatecr").on("click",function(){var t=$(this).closest(".item"),e=t.attr("item"),n=g.app.platform.sdk.exchanges.find(e);n?g.app.platform.sdk.exchanges.status({address:n.info.address,currency:n.currency},function(e,a){e?sitemessage("Something went wrong. Please reload page and try again (error: 0002)"):h.crStatus(n,a,t.find(".status"))}):sitemessage("Something went wrong. Please reload page and try again (error: 0001)")}),s.el.on("click",".todeal",function(){var e=$(this).closest(".item").attr("item"),a=g.app.platform.sdk.exchanges.find(e);m.showCrInStep("olddeal",u+1,"Deal",a)}),lazyEach({array:t,action:function(e){var a=e.item,t=s.el.find('[item="'+a.info.address+'"] .status'),n=g.app.platform.sdk.exchanges.info[a.info.address];h.crStatus(a,n,t)}})})},listcount:function(e){var a="",t=g.app.platform.sdk.exchanges.get(),n=e.find(".listcountWrapper");0<t.length?(a="("+t.length+")",e.find(".listcount").html(a),n.fadeIn()):n.fadeOut()},crdealstatusstep:function(e,a,t){g.shell({name:"crdealstatusstep",el:t,data:{addressobject:e,info:a}},function(e){})},crDeal:function(n,s,e){console.log("addressobject",n,s),g.shell({name:"crdeal",el:e,data:{addressobject:n}},function(t){h.crStatus(n,s,t.el.find(".status")),h.crdealstatusstep(n,s,t.el.find(".crdealstatusstep")),t.el.on("click",".copyaddress1",function(){copyText(t.el.find(".forcopyaddress1")),sitemessage(g.app.localization.e("waddresswascop"))}),t.el.on("click",".copyaddress2",function(){copyText(t.el.find(".forcopyaddress2")),sitemessage(g.app.localization.e("waddresswascop"))}),t.el.on("click",".reactivate",function(){g.app.platform.sdk.exchanges.reactivate({address:n.info.address,currency:n.currency},function(e,a){e?sitemessage("Something went wrong. Please reload page and try again (error: 0002)"):(s=a,h.crStatus(n,s,t.el.find(".status")),h.crdealstatusstep(n,s,t.el.find(".crdealstatusstep")))})})})},applyStatus:function(n,s){_.find(d.segments,function(e){var a=s.find('.segment[segment="'+e.id+'"]');if(e.id==n.Status){console.log("Number(info.MinutesLeft) / Number(s.time)",Number(n.MinutesLeft)/Number(e.time),Number(n.MinutesLeft),Number(e.time));var t=100*Math.min((Number(e.time)-Number(n.MinutesLeft))/Number(e.time),.99);return a.find(".line").css("width",t+"%"),a.addClass("active"),e.class&&a.addClass(e.class),e.finish&&(a.addClass("ended"),a.find(".line").css("width","100%")),(e.finish||"all"==e.exclude)&&s.find(".current").html(e.currentLabel(n)),!0}a.addClass("ended"),a.find(".line").css("width","100%")})},crStatus:function(e,a,t,n){g.shell({name:"pocstatus",el:t,data:{addressobject:e,info:a,segments:d.segments}},function(e){h.applyStatus(a,t),n&&n()})},crowdRate:function(e,a,t){e.find(".rate .value").html("<b>1 POC = "+a[t].toFixed(6)+" "+t.toUpperCase()+"</b>")},crowdCurrencyLabel:function(e,a){e.find(".currencyAmountLabel").html(a.toUpperCase()+" Amount</b>")},crowdfunding:function(e,a){2==u&&(c[1]=function(e){m.showCrInStep("",1,"")},p[1]={class:"crowdfunding"}),d.parameters.currency||(d.parameters.currency.value="btc"),g.app.platform.sdk.exchanges.rates(function(n){g.app.platform.sdk.node.transactions.get.balance(function(t){t=Math.min(t/3,1e3),g.shell({name:"crowdfunding",el:a||i.crowdfunding,data:{d:d,amount:t}},function(a){ParametersLive(_.toArray(d.parameters),a.el),a.el.on("click",".closeAdditional",v),h.crowdRate(a.el,n,d.parameters.currency.value),h.crowdCurrencyLabel(a.el,d.parameters.currency.value),h.listcount(a.el),d.parameters.amount._onChange=function(e){d.parameters.amount.value<0&&(d.parameters.amount.value=0),d.parameters.amount.value>t&&(d.parameters.amount.value=t),d.parameters.currencyAmount.value=d.parameters.amount.value*n[d.parameters.currency.value],d.parameters.amount.el.closest(".inputWrapper").html(d.parameters.amount.input()),d.parameters.currencyAmount.el.closest(".inputWrapper").html(d.parameters.currencyAmount.input()),ParametersLive([d.parameters.amount,d.parameters.currencyAmount],a.el)},d.parameters.currency._onChange=function(e){g.app.platform.sdk.exchanges.rates(function(e){n=e,h.crowdRate(a.el,n,d.parameters.currency.value),h.crowdCurrencyLabel(a.el,d.parameters.currency.value)})},d.parameters.currencyAmount._onChange=function(e){d.parameters.currencyAmount.value<0&&(d.parameters.currencyAmount.value=0),d.parameters.currencyAmount.value/n[d.parameters.currency.value]>t&&(d.parameters.currencyAmount.value=Number((t*n[d.parameters.currency.value]).toFixed(6))),d.parameters.amount.value=d.parameters.currencyAmount.value/n[d.parameters.currency.value],d.parameters.amount.el.closest(".inputWrapper").html(d.parameters.amount.input()),d.parameters.currencyAmount.el.closest(".inputWrapper").html(d.parameters.currencyAmount.input()),ParametersLive([d.parameters.amount,d.parameters.currencyAmount],a.el)},a.el.find(".listcountWrapper").on("click",function(){m.showCrInStep("showListcount",2,"List of deals")}),a.el.find(".newdeal").on("click",function(){0<d.parameters.amount.value?(m.showCrInStep("newdeal",2,"Deal"),a.el.find(".required").addClass("hidden")):a.el.find(".required").removeClass("hidden")}),e&&e(a.el)})},"PFF7PevK753eYTwWBScdEAbWQrgu36AdUA",!0,!0)})},qrResultForDeposit:function(e,a,t){g.shell({name:"depositqrresult",el:a,data:{address:e,d:r}},function(e){})},linkResultForDeposit:function(e,a,t){g.shell({name:"depositlinkresult",el:a,data:{address:e,d:r}},function(e){e.el.find(".copylink").on("click",function(){copyText(e.el.find(".linkInTextArea")),sitemessage(g.app.localization.e("waddresswascop"))})})},linkMakerForDeposit:function(e,a,t){g.shell({name:"depositlinkmaker",el:a,data:{address:e,d:r}},function(e){var a=e.el.find(".getlink"),t=[r.parameters.depositamount,r.parameters.message,r.parameters.label];ParametersLive(t,e.el),_.each(t,function(e){e._onChange=function(){m.linkValidation()?a.removeClass("disabled"):a.addClass("disabled")}}),m.linkValidation()&&a.removeClass("disabled"),a.on("click",function(){m.linkValidation()&&m.showDepositInStep("showLinkResult",3,g.app.localization.e("linkCreated"))})})},qrMakerForDeposit:function(e,a,t){g.shell({name:"depositqrmaker",el:a,data:{address:e,d:r}},function(e){var a=e.el.find(".getlink"),t=[r.parameters.depositamount,r.parameters.message,r.parameters.label];ParametersLive(t,e.el),_.each(t,function(e){e._onChange=function(){m.linkValidationQr()?a.removeClass("disabled"):a.addClass("disabled")}}),m.linkValidationQr()&&a.removeClass("disabled"),a.on("click",function(){m.linkValidationQr()&&m.showDepositInStep("showQrResult",3,g.app.localization.e("wqrcodecreated"))})})},addressForDeposit:function(e,a,t){g.shell({name:"depositaddress",el:a,data:{address:e,d:r}},function(e){e.el.find(".getlink").on("click",function(){m.showDepositInStep("showLinkMaker",2,g.app.localization.e("wlinkcreating"))}),e.el.find(".qrcode").on("click",function(){m.showDepositInStep("showQrMaker",2,g.app.localization.e("wqrcodecreating"))}),e.el.find(".copyaddress").on("click",function(){copyText(e.el.find(".adr")),sitemessage(g.app.localization.e("waddresswascop"))})})},deposit:function(e,a){g.shell({name:"deposit",el:a||i.deposit,data:{d:r}},function(t){ParametersLive([r.parameters.deposit],t.el),r.parameters.deposit._onChange=function(e){g.app.settings.set(g.map.uri,"deposit",e);var a=r.parameters.deposit.labelByValue(e);t.el.find(".type").html(a),m.showDepositInStep("showDeposit",1,g.app.localization.e("wdoptions"))},t.el.find(".recieveaddress").on("click",function(){m.showDepositInStep("showDeposit",1,g.app.localization.e("wdoptions"))}),t.el.on("click",".closeAdditional",v),e&&e(t.el)})},sendFees:function(s,e,a){if(m.validSend()){var r=e.feerate||1e-6;m.prepareTransaction(r,function(e,a,t,n){g.shell({name:"sendfees",el:s,data:{fees:t,d:o}},function(e){ParametersLive([o.parameters.fees],e.el),o.parameters.fees._onChange=function(e){g.app.settings.set(g.map.uri,"feesMode",e)},e.el.find(".sendtransaction").on("click",function(){m.prepareTransaction(r,function(e,a,t,n){g.app.platform.sdk.wallet.txbase(e,_.clone(a),t,n,function(e,n,a){if(e)sitemessage(e);else{var t=g.app.platform.sdk.node.transactions.create.wallet(n,a);_.each(n,function(e){e.cantspend=!0}),console.log(n),g.app.platform.sdk.node.transactions.send(t,function(e,a){if(a)g.app.platform.sdk.node.transactions.releaseCS(n),sitemessage(a);else{var t=_.map(n,function(e){return e.txid});g.app.platform.sdk.node.transactions.clearUnspents(t),u=0,h.mainWithClear(),sitemessage(g.app.localization.e("wssuccessfully"))}})}})})})})})}},send:function(a,e){m.sendParameters(),g.shell({name:"send",el:e||i.send,data:{d:o}},function(t){ParametersLive(_.toArray(o.parameters),t.el);var e=t.el.find(".change"),n=function(){m.canChangeSend()?e.removeClass("hidden"):e.addClass("hidden")};o.parameters.amount._onChange=function(e){var a=m.sendAddresses();g.app.platform.sdk.node.transactions.get.balance(function(e){o.parameters.amount.value<0&&(o.parameters.amount.value=0),o.parameters.amount.value>e&&(o.parameters.amount.value=e),o.parameters.amount.el.closest(".inputWrapper").html(o.parameters.amount.input()),ParametersLive([o.parameters.amount],t.el),1==u&&m.showSendInStep("calculateFee",1,g.app.localization.e("wscalculatefees"))},a,null,!0)},o.parameters.source._onChange=function(e){m.sendParameters(),o.parameters.reciever.el.closest(".inputWrapper").html(o.parameters.reciever.input()),o.parameters.amount.el.closest(".inputWrapper").html(o.parameters.amount.input()),ParametersLive([o.parameters.reciever,o.parameters.amount],t.el),n(),1==u&&m.showSendInStep("calculateFee",1,g.app.localization.e("wscalculatefees"))},o.parameters.reciever._onChange=function(e){if(n(),!m.canChangeSend()&&e){var a=!0;try{bitcoin.address.fromBase58Check(e)}catch(e){a=!1}if(!a)return void t.el.find(".notvalidaddress").html(g.app.localization.e("wsaddressnotv"));t.el.find(".notvalidaddress").html(""),e[0]}else t.el.find(".notvalidaddress").html("")},e.on("click",function(){var e=m.canChangeSend();e&&(o.parameters.source.value=e,o.parameters.source._onChange(),o.parameters.source.el.closest(".inputWrapper").html(o.parameters.source.input()),ParametersLive([o.parameters.source],t.el))}),t.el.find(".calculateFee").on("click",function(){m.validSend()?(m.showSendInStep("calculateFee",1,g.app.localization.e("wscalculatefees")),t.el.find(".required").addClass("hidden")):t.el.find(".required").removeClass("hidden")}),n(),a&&a(t.el)})},addresses:function(s){var r=l.total.addresses(),o={};g.app.platform.sdk.node.transactions.get.unspents(function(n){g.app.platform.sdk.node.transactions.get.balance(function(e){_.each(n,function(e,a){o[a]=_.reduce(e,function(e,a){return e+Number(a.amount)},0)});var a=[l.pnetwallet,l.wallet],t=_.map(a,function(e){var a=_.map(e.addresses(),function(e){return{balance:o[e],address:e}});return{caption:e.caption,details:a,label:e.alabel}},r);g.shell({name:"addresses",el:i.addresses,data:{addressesGroup:t,total:e}},function(e){e.el.find(".addaddress").on("click",f),s&&s()})},r)},r)},updateTotal:function(e,a){h.datasets(e,s[e.id].data.datasets),s[e.id].update(),i.total.find('.totalItem[item="'+e.id+'"] .balanceWrapper').html(g.app.platform.mp.coinwithsmall(e.balance)),a&&a()},datasets:function(e,a){var t=[],n=_.map(e.move,function(e){return t.push(e.color),Number(e.summary||0)}),s=[],r=[],o=[],i=[],l="#F1F1F1";_.each(e.move,function(e){_.each(e.items,function(e){s.push(Number(e.value)),r.push(e.color),o.push(l),i.push(8)})});var d=[{data:n,backgroundColor:t,borderColor:[l,l],borderWidth:[8,8]},{data:s,backgroundColor:r,borderColor:o,borderWidth:i}];return _.each(a,function(e,a){e.data=d[a].data}),d},total:function(t,n){t.update?h.updateTotal(t,n):g.shell({name:"total",el:i.total,inner:append,data:{item:t}},function(e){var a=e.el.find("#chart"+t.id)[0].getContext("2d");s[t.id]=new Chart(a,{type:"doughnut",data:{datasets:h.datasets(t)},options:{rotation:.5*Math.PI,cutoutPercentage:85}}),n&&n()})}},t=function(){},w=function(e,d){lazyEach({array:_.toArray(l),sync:!0,action:function(i){var l=i.item,e=l.addresses();g.app.platform.sdk.node.transactions.get.balance(function(o){g.app.platform.sdk.node.transactions.get.canSpend(e,function(e,a){var t="#414244",n=100,s=g.app.platform.sdk.node.transactions.tempBalance();a&&("pnetwallet"!=l.id&&"total"!=l.id||(a=s+a),n=100*e/a,t="#0F8623");var r={positive:{summary:n,color:t}};e<a&&(r.neutral={summary:100-n,color:"#414244"}),"pnetwallet"==l.id&&(o=s+o),h.total({label:l.label,id:l.id,balance:o,move:r,update:d},i.success)})},e)},all:{success:function(){e&&e()}}})},b=function(e){i.total.html(""),w(function(){lazyActions([h.send,h.deposit,h.addresses],e),g.app.platform.sdk.node.transactions.clbks.circles=function(){w(null,!0)},g.app.platform.sdk.node.transactions.clbks.walletaddresses=function(){h.addresses()}})};return{primary:a,getdata:function(e){var a={};a.p2pkh=g.app.platform.sdk.address.pnet(),r.parameters.deposit.value=g.app.settings.get(g.map.uri,"deposit")||r.parameters.deposit.defaultValue,o.parameters.source.value=g.app.settings.get(g.map.uri,"source")||o.parameters.source.defaultValue,o.parameters.reciever.value="",o.parameters.fees.value=g.app.settings.get(g.map.uri,"feesMode")||o.parameters.fees.defaultValue,r.active=!1,u=0,c=[],p=[],e(a)},destroy:function(){delete g.app.platform.sdk.node.transactions.clbks.circles,delete g.app.platform.sdk.node.transactions.clbks.walletaddresses,i={}},init:function(a){s={},t(),(i={}).c=a.el.find("#"+g.map.id),i.step=i.c.find(".actionstep"),i.main=i.c.find(".mainstep"),i.c.on("click","._stepclose",function(){u=0,h.mainWithClear()}),i.c.on("click","._stepback",function(){1<u?h.step(c[u-1],u-1,p[u-1]):(u=0,h.mainWithClear())}),h.main(function(){b(function(){var e=parameters();e.action&&"send"==e.action&&(o.parameters.amount.value=Number(e.amount.replace(/,/g,"")),o.parameters.reciever.value=e.address,o.parameters.amount._onChange(),m.showSendInStep("calculateFee",1,g.app.localization.e("wscalculatefees"))),a.clbk(null,a)})})}}};return g.run=function(e){var a=g.addEssense(t,n,e);g.init(a,e)},g.stop=function(){_.each(t,function(e){e.destroy()})},g}();"undefined"!=typeof module?module.exports=wallet:(app.modules.wallet={},app.modules.wallet.module=wallet);
 /*_____*/ 
var lenta=function(){var ee=new nModule,n={},a=function(e){var d,l,c,i,o,t,n,a=deep(e,"history"),s=e.mid,r=[],p={},f={},u={},h=!1,m=!1,v={},g=[],b=!1,k=0,w=null,x=0,y=0,C=null,T=!1,E={clear:function(){r=[],f={},m=h=!(u={}),v={},k=y=0,C=w=t=null,m=T=b=!(g=[]),loaded=!1,x=0},loadmore:function(){K.shares(function(e,t){e&&J.shares(e,function(){J.sharesInview(e,function(){})},{index:g.length})})},removeAdditionalByScroll:function(){if(w){var e=$(window).scrollTop();150<Math.abs(e-k)&&E.additional(w,!1)}},additional:function(e,t){t?(e.addClass("showAdditional"),e.find(".subscribeWrapper").fadeIn(),k=$(window).scrollTop(),w=e,window.addEventListener("scroll",E.removeAdditionalByScroll)):(e.removeClass("showAdditional"),e.find(".subscribeWrapper").fadeOut(),window.removeEventListener("scroll",E.removeAdditionalByScroll))},applyheight:function(e,t,n){},applyheightEl:function(e,t,n){if(d&&d.shares&&e&&t.length){var a=t.height();return t.length&&l.scrollTop()>t.offset().top?(E.applyheight(e,a,n),d.shares.css("height","auto")):d.shares&&d.shares.css("height","auto"),a}},stateAction:function(t,n){ee.app.user.isState(function(e){e?n():ee.nav.api.load({open:!0,id:"authorization",inWnd:!0,essenseData:{loginText:ee.app.localization.e("llogin"),successHref:t,signInClbk:function(){n&&n()}}})})},initVideo:function(e,t){if(!ee.app.platform.sdk.usersettings.meta.embedvideo||ee.app.platform.sdk.usersettings.meta.embedvideo.value){var n=e.find(".js-player"),a=e.find(".videoWrapper");if(n.length){var s=e.height(),i={muted:!0,resetOnEnd:!0};"a"==t.settings.v&&(i.muted=!1,i.autoplay=!1);var o=new Plyr(n[0],i);v[t.txid]||(v[t.txid]={}),v[t.txid].p=o,v[t.txid].initing=!0,v[t.txid].el=a,v[t.txid].id=a.attr("pid"),o.on("ready",function(){n.find("iframe").attr("disable-x-frame-options","disable-x-frame-options"),v[t.txid].inited=!0,v[t.txid].inited=!0,s=E.applyheightEl(s,e,"video")})}}},openPost:function(e,t){ee.nav.api.load({open:!0,href:"post?s="+e,inWnd:!0,history:!0,clbk:function(){t&&t()},essenseData:{share:e,hr:c.hr,like:function(e){J.stars(e)}}})},sharesocial:function(e,t){var n=ee.app.platform.sdk.node.shares.storage.trx[e];if(n){var a="https://pocketnet.app/"+c.hr+"s="+e+"&mpost=true&ref="+ee.app.platform.sdk.address.pnet().address+"&address="+(parameters().address||""),s=n.caption||n.message,i=trimHtml(s,20),o=n.images[0];if(!o&&n.url){var r=videoImage(n.url);r&&(o=r)}ee.nav.api.load({open:!0,href:"socialshare",history:!0,inWnd:!0,essenseData:{url:a,caption:"Share publication in social",image:o,title:i}})}},donate:function(e,t){var n=ee.app.platform.sdk.node.shares.storage.trx[e];if(n){var a=deep(app,"platform.sdk.usersl.storage."+n.address)||{address:n.address,addresses:[]},s="send?address="+n.address+"&amount=1&message="+hexEncode(ee.app.localization.e("postlabel")+" &mdash; "+(n.caption||n.message).substr(0,20)+"...")+"&label="+(a.name||a.address)+"&setammount=true";ee.fastTemplate("donation",function(e){dialog({html:e,class:"one donation",btn1text:ee.app.localization.e("dcancel"),clbk:function(e,t){e.find(".pnetdnt").on("click",function(){ee.nav.api.load({open:!0,href:s,history:!0}),t.destroy()}),e.find(".copy").on("click",function(){var e=$(this).closest(".address").find(".addr");copyText(e),sitemessage(ee.app.localization.e("successfullycopiedaddress"))})}})},{userinfo:a})}},videoPosition:function(e){var t=e.find(".work");if(e.hasClass("fullScreenVideo")){var n=($(window).height()-(e.find(".videoWrapper").height()+100))/2;0<n?t.css("margin-top",n+"px"):t.css("margin-top","0px")}else t.css("margin-top","0px")},fullScreenVideo:function(e,t){if(v[e]){var n=d.c.find("#"+e);n.addClass("fullScreenVideo"),E.videoPosition(n),ee.app.nav.api.history.addParameters({v:e});var a=v[e];a.p.playing||a.p.play(),a.p.muted=!1,ee.app.actions.offScroll(),p[e]&&p[e].changein(d.c.find("#"+e),0),J.comments(e,!1,!0),t&&t()}},exitFullScreenVideo:function(e){var t=d.c.find("#"+e);t.removeClass("fullScreenVideo"),E.videoPosition(t),v[e].p.muted=!0,ee.app.nav.api.history.removeParameters(["v"]),ee.app.actions.onScroll(),p[e]&&(p[e].changein(null),p[e].hideall(!0))},like:function(n,e,a){var s=n.upvote(e);if(!s)return ee.app.platform.errorHandler("4",!0),void(a&&a(!1));ee.sdk.node.transactions.create.commonFromUnspent(s,function(e,t){topPreloader(100),e?a&&a(!0):(s.myVal=null,n.myVal=0,ee.app.platform.errorHandler(t,!0),a&&a(!1))})},complain:function(e,n){var t=e.complain();ee.sdk.node.transactions.create.commonFromUnspent(t,function(e,t){topPreloader(100),e?n&&n(!0):(d.postWrapper.addClass("showError"),ee.app.platform.errorHandler(t,!0),n&&n())})},openGallery:function(e,t,n){var a=_.map(e.images,function(e){return{src:e}}),s=findIndex(a,function(e){if(e.src==t)return!0});ee.app.nav.api.load({open:!0,href:"imagegallery?i="+e.txid+"&num="+(s||0),inWnd:!0,history:!0,essenseData:{initialValue:t,idName:"src",images:a,gid:e.txid},clbk:function(){n&&n()}})},videosInview:function(e,i,o){if(!ee.app.platform.sdk.usersettings.meta.videoautoplay||ee.app.platform.sdk.usersettings.meta.videoautoplay.value){var r=_.filter(e,function(e){if(e.inited&&!e.playing&&!e.stopped&&e.el)return!0});r.length&&(t=slowMade(function(){r=_.filter(r,function(e){return e.el});_.map(r,function(e){return e.el[0]});var e=inView(d.c.find(".videoWrapper"),{offset:$(window).height()/10,mode:"all"}),t=null;if(0<e.length){var n=$(e[0]);t=n.attr("pid");var a=_.find(r,function(e){return e.id==t});if(!t||!a)return;a&&setTimeout(function(){inView(n,{offset:-100,mode:"all"}).length&&i(a,n)},320)}var s=_.filter(r,function(e){return e.id!=t});s.length&&o(s)},t,30))}},scrollToPost:function(e){_scrollTo($("#"+e))},sharesInview:function(o,r,c){l.scrollTop();o.length&&!b&&(n=slowMade(function(){var e=d.c.find(".share"),t=l,n=$(window).height()/4,a=inView(e,{inel:t,offsetTop:n,offsetBottom:n,mode:"line"});if(0<a.length){var s={},i=_.map(a,function(e){var t=$(e).attr("id");return _.find(o,function(e){return e.txid==t})});i=_.filter(i,function(e){if(e&&!e.temp)return!0}),!0,r(i,a,function(){if(!1,c){var e=_.filter(o,function(e){if(!s[e.txid])return!0});c(e)}})}},n,30))},complain:function(e){ee.nav.api.load({open:!0,id:"complain",inWnd:!0,essenseData:{item:"post",obj:ee.app.platform.sdk.node.shares.storage.trx[e],success:function(){}},clbk:function(){}})}},S=function(){$(this).closest(".authorgroup").find(".share").removeClass("hidden"),$(this).remove(),J.sharesInview(g,function(){})},A=function(){var n=$(this),a=$(this).closest(".share").attr("id"),s=$(this).closest(".shareTable").attr("address"),i={};i.share=ee.app.platform.sdk.node.shares.storage.trx[a],ee.fastTemplate("metmenu",function(e,t){ee.app.platform.api.tooltip(n,function(){return i.share=ee.app.platform.sdk.node.shares.storage.trx[a],i.mestate=o,t(i)},function(e){e.find(".socialshare").on("click",function(){E.sharesocial(a),n.tooltipster("hide")}),e.find(".subscribe").on("click",function(){ee.app.platform.api.actions.subscribe(s,function(e,t){e||ee.app.platform.errorHandler(t,!0)}),n.tooltipster("hide")}),e.find(".unsubscribe").on("click",function(){ee.app.platform.api.actions.unsubscribe(s,function(e,t){e||ee.app.platform.errorHandler(t,!0)}),n.tooltipster("hide")}),e.find(".complain").on("click",function(){E.complain(a),n.tooltipster("hide")}),e.find(".donate").on("click",function(){E.donate(a),n.tooltipster("hide")})})},i)},V=function(){var e=d.c.find(".fullScreenVideo");0<e.length&&E.videoPosition(e)},L=function(){$(window).scrollTop()+$(window).height()>$(document).height()-400&&!h&&!m&&"recommended"!=i&&E.loadmore()},I=function(e){E.sharesInview(g,function(e,t,n){},function(e){})},P=function(e){E.videosInview(v,function(e,t,n){t.closest(".share").hasClass("showAdditional")||e.p.play()},function(e){_.each(e,function(e){e.p.muted=!0,e.p.playing&&e.p.stop()})})},W=function(){var e=$(this).closest(".share").attr("id");J.comments(e,!0)},H=function(){var e=$(this).closest(".share").attr("id");ee.app.platform.sdk.node.transactions.get.tx(e)},M=function(){if(c.authAction)c.authAction("like");else{var n=$(this).closest(".stars");if(!n.attr("value")){var e=$(this).closest(".share").attr("id"),a=$(this).attr("value"),s=ee.app.platform.sdk.node.shares.storage.trx[e];n.attr("value",a),n.addClass("liked"),E.stateAction("_this",function(){E.like(s,a,function(e){if(e){s.scnt||(s.scnt=0),s.score||(s.score=0),s.scnt++,s.score=Number(s.score||0)+Number(a);var t=Number(s.score)/Number(s.scnt);n.find(".tstarsov").css("width",t/5*100+"%"),n.closest(".itemwr").find(".count span.v").html(t.toFixed(1)),J.stars(s)}else n.removeAttr("value"),n.removeClass("liked")})})}}},z=function(){var e=$(this).closest(".share").attr("id");E.complain(e)},D=function(){var e=$(this).closest(".share");E.additional(e,!e.hasClass("showAdditional"))},N=function(){var t=$(this).closest(".share").attr("id"),e=$(this).attr("i"),n=ee.app.platform.sdk.node.shares.storage.trx[t];if(!n){var a=_.find(ee.sdk.node.transactions.temp.share,function(e){return e.txid==t});(n=new pShare)._import(a),n.temp=!0,n.address=ee.app.platform.sdk.address.pnet().address}E.openGallery(n,e)},F=function(){var e=$(this).closest(".shareTable").attr("address");$(this).closest(".share");ee.app.platform.api.actions.subscribe(e,function(e,t){e||ee.app.platform.errorHandler(t,!0)})},B=function(){var e=$(this).closest(".shareTable").attr("address"),n=$(this).closest(".share");ee.app.platform.api.actions.unsubscribe(e,function(e,t){e?n.find(".shareTable").removeClass("subscribed"):ee.app.platform.errorHandler(t,!0)})},O=function(){var e=$(this).closest(".share").attr("id");E.exitFullScreenVideo(e)},G=function(){var e=$(this).closest(".share").attr("id");E.fullScreenVideo(e)},U=function(){if(c.authAction)c.authAction("like");else{var e=$(this).closest(".share").attr("id");E.openPost(e)}},j=function(){var e=$(this).closest(".share").attr("id");E.sharesocial(e)},Z=function(){if(c.authAction)c.authAction("donate");else{var e=$(this).closest(".share").attr("id");E.donate(e)}},R=function(){if(c.authAction)c.authAction("discussion");else{var e=$(this).closest(".share").attr("id"),t=ee.app.platform.sdk.node.shares.getWithTemp(e);isMobile()?ee.nav.api.load({open:!0,id:"discussions",history:!0,clbk:function(){ee.app.platform.sdk.chats.add(e+"_"+t.address,"share")}}):ee.app.platform.sdk.chats.add(e+"_"+t.address,"share")}},Y=function(){E.loadmore()},q=function(){d.c.find(".shares").html('<div class="bspacer"></div>'),d.c.removeClass("showprev"),d.c.removeClass("loading"),d.c.removeClass("sharesEnded"),d.c.removeClass("sharesZero"),E.clear(),p={},X()},J={comments:function(n,t,a,s){if(!p[n]&&d.c){var i=d.c.find("#"+n+" .commentsWrapper"),o=deep(ee.app.platform,"sdk.node.shares.storage.trx."+n);ee.fastTemplate("commentspreview",function(e){ee.nav.api.load({open:!0,id:"comments",el:i,eid:n+"lenta",essenseData:{close:function(){p[n]&&p[n].hideall(!0),_scrollToTop(i,0,0,-65)},totop:d.c.find("#"+n),caption:e,send:function(){var e=d.c.find("#"+n+" .commentsAction .count span");e.html(Number(e.html()||"0")+1)},txid:n,init:t,showall:a,preview:s,lastComment:o.lastComment,count:o.comments},clbk:function(e,t){d.c&&((e=d.c.find("#"+n)).hasClass("fullScreenVideo")&&t.changein(e,0),t&&(p[n]=t))}})},{share:o})}},roomsinfo:function(e){_.each(e,function(e){var t,n=deep(ee.app.platform,"rtc.storage.info."+e+".d.users_count"),a=e.split("_")[0];void 0!==n&&d.c&&d.c.find("#"+a+" .discussion .count").html((t=n)?"<b>"+t+"</b>":"")})},shareSpacers:function(e){_.each(e,function(e){J.shareSpacer(e)})},shareSpacer:function(e){if(f[e.txid]&&!u[e.txid]){var t=d.shares.find("#"+e.txid),n=t.height(),a=t.find(".work").outerHeight();v[e.txid]&&v[e.txid].inited&&(v[e.txid].p.destroy(),v[e.txid].el=null,v[e.txid].inited=!1),f[e.txid]=!1,d.shares.css("height",d.shares.outerHeight()),t.html('<div class="shareSpacer added"></div>'),t.find(".shareSpacer").outerHeight(a),n=E.applyheightEl(n,t,"space")}},share:function(t,n){var a=d.shares.find("#"+t.txid);a.height(),a.find(".added");u[t.txid]=!0,ee.shell({name:"share",el:a,data:{share:t,ed:c,mestate:o}},function(e){a.find(".work");f[t.txid]=!0,J.stars(t),t.temp||J.comments(t.txid,!1,!1,!0),J.url(e.el.find(".url"),t.url,t,function(){J.urlContent(t,function(){c.searchValue&&e.el.find(".canmark").mark(c.searchValue),E.initVideo(e.el,t),u[t.txid]=!1,n&&n()})}),J.images(t,function(){})})},stars:function(e,t){if(d.shares){var n=d.shares.find("#"+e.txid);n.length&&ee.shell({name:"stars",el:n.find(".forstars"),data:{share:e}},function(e){fastars(e.el.find(".stars")),t&&t()})}},sharesInview:function(e,t){e=_.filter(e,function(e){return!$("#"+e.txid).hasClass("hidden")}),lazyEach({array:e,action:function(e){var t=e.item;f[t.txid]?e.success():(f[t.txid]=!0,J.share(t,e.success))},all:{success:function(){t()}}})},shares:function(t,n,e){e||(e={}),e.inner||(e.inner=append);var a="groupshares";(c.author||i||c.txids||c.search)&&(a="shares"),"recommended"==i&&(t=_.sortBy(t,function(e){return-e.time})),ee.shell({name:a,inner:e.inner,el:d.shares,data:{shares:t||[],index:e.index||0},animation:!1},function(e){g=e.inner==append?g.concat(t):t.concat(g),n&&n()})},videoPreview:function(e,t){var n=d.c.find("#"+e.txid);if("a"==e.settings.v){var a=n.find("[data-plyr-provider][data-plyr-embed-id]");console.log("PLYR",a);var s=[];$.each(a,function(){var e=$(this),t={type:e.attr("provider"),id:e.attr("eid")};s.push(videoImage(t))})}else t&&t()},images:function(t,n){if(d.c){var a=d.c.find("#"+t.txid),s=a.find(".image"),c=a.find(".images");if(!c.hasClass("active")&&s.length&&c.length){var l=a.height();s.imagesLoaded({background:!0},function(r){"a"!=t.settings.v&&_.each(r.images,function(e,t){var n=e.img,a=$(r.elements[t]).closest(".imagesWrapper"),s="",i=a.width();a.height();if(n.width>1.2*n.height&&!isMobile()){s="w2";var o=i*(n.width/n.height);o>c.width()&&(o=c.width(),l=o*(n.height/n.width),a.height(l)),a.width(o)}(n.height>1.2*n.width||isMobile())&&(s="h2",a.height(i*(n.height/n.width))),s&&a.addClass(s)}),l=E.applyheightEl(l,a);var e=function(){c.addClass("active"),s.addClass("active"),l=E.applyheightEl(l,a),n&&n()};!isMobile()&&"a"!=t.settings.v&&1<r.images.length?(c.isotope({layoutMode:"packery",itemSelector:".imagesWrapper",packery:{gutter:20},initLayout:!1}),c.on("arrangeComplete",function(){e()}),c.isotope()):e()})}else n&&n()}},url:function(e,t,n,s){if(c.nourlload)s&&s();else{var a=ee.app.platform.sdk.remote.storage[t],i=e.closest(".share"),o=i.height();ee.shell({turi:"share",name:"url",el:e,data:{url:t,og:a,share:n}},function(n){o=E.applyheightEl(o,i,"url");var a=n.el.find("img");n.el.find("img").imagesLoaded({background:!0},function(e){_.each(e.images,function(e,t){e.isLoaded?($(a[t]).addClass("active"),500<e.img.naturalWidth&&n.el.addClass("bigimageinlink")):$(a[t]).closest(".image").css("display","none")}),o=E.applyheightEl(o,i,"url"),s&&s()})})}},urlContent:function(t,n){if(d.c){var a=t.url;if(a){var s=d.c.find("#"+t.txid+" .url"),e=ee.app.platform.parseUrl(a),i=ee.app.platform.sdk.remote.storage[a];a&&!i?"youtube"==e.type||"vimeo"==e.type?n&&n():ee.app.platform.sdk.remote.get(a,function(e){e?J.url(s,a,t,n):n&&n()}):n&&n()}else n&&n()}},urlsContent:function(e){_.each(e,function(e){J.urlContent(e)})},urls:function(e,t){lazyEach({array:e,sync:!0,action:function(e){J.url(e.item.el,e.item.url,e.item.share,e.success)},all:{success:function(){t&&t()}}})}},K={recomended:function(t,n){d.loader.fadeIn(),d.c.addClass("loading"),r=[],c.author||C?t&&t(r):ee.app.platform.sdk.node.shares.recomended({},function(e){r=_.filter(e,function(t){if(!_.find(n,function(e){if(e.txid==t)return!0}))return!0}),ee.app.platform.sdk.node.shares.users(e,function(){t&&t(r)})})},txids:function(e,t){T?t([]):ee.app.platform.sdk.node.shares.getbyid(e,function(e){T=!0,t(e)})},begin:function(t){!C||T||i&&"sub"!=i?t([]):ee.app.platform.sdk.node.shares.getbyid(C,function(e){T=!0,t(e)})},sstuff:function(e,t,n,a){var s=c.author;ee.app.platform.sdk.node.shares.users(e,function(){y+=e.length,h=!1,d.c&&((!e||!e.length||e.length<n.count)&&(C||y?e.length<n.count&&(i||s||c.search)&&setTimeout(function(){d.c.addClass("sharesEnded")},1e3):d.c.addClass("sharesZero"),e.length<n.count&&(i||s||c.search)&&(m=!0)),d.loader.fadeOut(),a&&a(e,t))})},shares:function(s,n){h||m||(d.loader.fadeIn(),d.c.addClass("loading"),h=!0,c.loader?c.loader(function(e,t,n){K.sstuff(e,t,n,s)}):K.begin(function(a){var e=c.author,t="common";i&&("recommended"==i?t="recommended":(t="common",e="1")),c.txids&&(t="txids"),ee.app.platform.sdk.node.shares[t]({author:e,begin:C||"",txids:c.txids},function(t,e,n){_.each(a,function(e){e&&t.unshift(e)}),c.filter&&(t=_.filter(t,c.filter)),K.sstuff(t,e,n,s)},n)}))}},Q=function(){},X=function(){K.shares(function(e,t){e&&(C&&!i&&d.c.addClass("showprev"),J.shares(e,function(){J.sharesInview(e,function(){I();var e=parameters();if(e.s&&E.openPost(e.s,function(){E.scrollToPost(e.p)}),e.i){var t=deep(ee.app.platform,"sdk.node.shares.storage.trx."+e.i),n=null;t&&(e.num&&(n=deep(t,"images."+e.num)),E.openGallery(t,n))}e.v&&(E.scrollToPost(e.v),E.fullScreenVideo(e.v,function(){}))})}))},"clear")};return{id:s,primary:a,getdata:function(n,t){x=0,p={},c=t.settings.essenseData||{},E.clear();var e=parameters();C=e.s||e.i||e.v||null,i=!!e.r&&e.r,c.txids&&(i=!1),t.state||i||c.author||c.txids?ee.app.platform.sdk.ustate.me(function(e){o=e||{};var t={beginmaterial:C,author:c.author,recommended:i};ee.loadTemplate({name:"share"},function(){ee.loadTemplate({turi:"share",name:"url"},function(){ee.loadTemplate({name:"stars"},function(){n(t)})})})}):C?K.begin(function(e){ee.app.platform.sdk.node.shares.users(e,function(){t.settings.el.closest("#main").addClass("onepost"),ee.nav.api.load({open:!0,href:"post",primary:!0,el:t.settings.el,essenseData:{share:C},clbk:function(){}})})}):"undefined"!=typeof _Electron||window.cordova?ee.nav.api.load({open:!0,href:"authorization",history:!0}):ee.nav.api.load({open:!0,href:"video",history:!0})},destroy:function(){_.each(p,function(e){e.destroy()}),p={},delete ee.app.platform.ws.messages.comment.clbks.lenta,delete ee.app.platform.sdk.node.shares.clbks.added.lenta,delete ee.app.platform.ws.messages.transaction.clbks.temp,delete ee.app.platform.ws.messages.event.clbks.lenta,delete ee.app.platform.ws.messages["new block"].clbks.newsharesLenta,delete ee.app.platform.clbks.api.actions.subscribe.lenta,delete ee.app.platform.clbks.api.actions.unsubscribe.lenta,ee.app.platform.sdk.chats.removeTemp(),window.removeEventListener("scroll",P),window.removeEventListener("scroll",I),window.removeEventListener("scroll",L),window.removeEventListener("resize",V),d={}},init:function(e){l=$(window),Q(),(d={}).c=e.el.find("#"+ee.map.id),d.shares=d.c.find(".shares"),d.loader=d.c.find(".loader"),function(){window.addEventListener("scroll",I),window.addEventListener("scroll",P),window.addEventListener("resize",V),c.notscrollloading||window.addEventListener("scroll",L),d.c.on("click",".stars i",M),d.c.on("click",".complain",z),d.c.on("click",".imageOpen",N),d.c.on("click",".txid",H),isMobile()||(d.c.on("click",".sharecaption",U),d.c.on("click",".message",U)),d.c.on("click",".showMore",U),d.c.on("click",".videoTips",G),d.c.on("click",".exitFull",O),d.c.on("click",".additional",D),d.c.on("click",".asubscribe",F),d.c.on("click",".aunsubscribe",B),d.c.on("click",".donate",Z),d.c.on("click",".sharesocial",j),d.c.on("click",".discussion",R),d.c.on("click",".metmenu",A),d.c.find(".loadmore button").on("click",Y),d.c.find(".loadprev button").on("click",q),d.c.on("click",".showmorebyauthor",S),d.c.on("click",".commentsAction",W),c.txids||(ee.app.platform.sdk.node.shares.clbks.added.lenta=function(e){J.shares([e],function(){J.sharesInview([e],function(){})},{inner:prepend})},ee.app.platform.ws.messages.transaction.clbks.temp=function(t){if(t.temp){var e=_.find(g,function(e){if(e.txid==t.temp.txid)return!0});e&&(e.temp=!1,e.scnt="0",e.score="0",e.myVal=0,f[e.txid]=!1,J.sharesInview([e],function(){}))}},ee.app.platform.ws.messages.event.clbks.lenta=function(t){if("upvoteShare"==t.mesType&&t.share){var e=_.find(g,function(e){if(e.txid==t.share.txid)return!0});e&&J.stars(e,function(){})}});var t=function(e){if(!C&&"recommended"!=i&&!c.author&&!c.search){var t=_.toArray(ee.sdk.node.transactions.temp.share||{}),n=0;t.length&&!i&&(n-=t.length),0<(e||0)+n&&(x=x+(e||0)+n,d.c.addClass("showprev"),d.c.find(".countnew").html("("+x+")"))}};ee.app.platform.ws.messages.newblocks.clbks.newsharesLenta=function(e){t("sub"==i?e.cntsubscr:e.cntposts)},ee.app.platform.ws.messages["new block"].clbks.newsharesLenta=function(e){t("sub"==i?e.sharesSubscr:e.shares)},ee.app.platform.ws.messages.comment.clbks.lenta=function(e){if(f[e.posttxid]){var t=d.c.find("#"+e.posttxid+" .commentsAction .count span");t.html(Number(t.html()||"0")+1)}},ee.app.platform.clbks.api.actions.subscribe.lenta=function(e){d.c.find('.shareTable[address="'+e+'"]').addClass("subscribed")},ee.app.platform.clbks.api.actions.unsubscribe.lenta=function(e){d.c.find('.shareTable[address="'+e+'"]').removeClass("subscribed")}}(),X(),e.clbk(null,e)}}};return ee.run=function(e){var t=ee.addEssense(n,a,e);ee.init(t,e)},ee.stop=function(){_.each(n,function(e){e.destroy()})},ee}();"undefined"!=typeof module?module.exports=lenta:(app.modules.lenta={},app.modules.lenta.module=lenta);