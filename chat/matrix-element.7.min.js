(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[7],{"0826":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"typingBlock",staticStyle:{position:"relative"}},[o("div",{staticClass:"typingBlockWrapper"},[t._m(0),o("div",[o("PulseLoader",{attrs:{color:t.color,size:t.size,loading:!0}})],1)])])},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("span",[t._v("typing")])])}],n=o("8a5d"),r={name:"typing",props:{},components:{PulseLoader:n["a"]},data:function(){return{color:"#868686",size:"2px",loading:!0}},methods:{},computed:{}},s=r,c=o("2877");function m(t){var e=o("1b86");e.__inject__&&e.__inject__(t)}var d=Object(c["a"])(s,i,a,!1,m,null,null,!0);e["a"]=d.exports},"1b86":function(t,e,o){"use strict";o.r(e);var i=o("5f7e");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a)},"266d":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page chatInfo"},[o("topheader",{staticClass:"topheader"}),o("maincontent",{scopedSlots:t._u([{key:"content",fn:function(){return[o("chatInfo",{attrs:{events:t.events,chat:t.chat}})]},proxy:!0}])})],1)},a=[],n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"chatTopheader"}},[o("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[o("backButton",{attrs:{action:"back"}})]},proxy:!0},{key:"info",fn:function(){return[o("p",[t._v("room Info")])]},proxy:!0},{key:"right",fn:function(){},proxy:!0}])})],1)},r=[],s={},c=s,m=o("2877");function d(t){}var l=Object(m["a"])(c,n,r,!1,d,"2f4dd71e",null,!0),u=l.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:{minimized:t.minimized},attrs:{id:"chatInfo"}},[o("info",{attrs:{chat:t.chat,events:t.events}})],1)},f=[],h=o("2f62"),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"aboutRoom"},[o("div",{staticClass:"roomInfoWrapper"},[t.membersList.length>1?o("div",{staticClass:"aboutRoomAvatar"},[2===t.membersList.length?o("div",{staticClass:"userspicwrapper twoAvatars"},t._l(t.membersList,(function(t){return o("bgimage",{key:t.id,staticClass:"bgImage",attrs:{src:t.image}})})),1):t._e(),3===t.membersList.length?o("div",{staticClass:"userspicwrapper threeAvatars"},t._l(t.membersList,(function(t){return o("bgimage",{key:t.id,staticClass:"bgImage",attrs:{src:t.image}})})),1):t._e(),4===t.membersList.length?o("div",{staticClass:"userspicwrapper fourAvatars"},t._l(t.membersList,(function(t){return o("bgimage",{key:t.id,staticClass:"bgImage",attrs:{src:t.image}})})),1):t._e(),t.membersList.length>4?o("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.membersList,(function(e){return o("swiper-slide",{key:e.id},[o("div",{staticClass:"imageSwiper",on:{click:function(o){return t.showUserAbout(e)}}},[o("img",{attrs:{src:e.image,alt:""}})])])})),o("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):t._e()],1):t._e(),o("div",{staticClass:"roomInfo"},["member"!==t.isRole?o("div",{staticClass:"name"},[t.nameEdit?o("div",{staticClass:"namewrapper"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],attrs:{type:"text"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}}),o("div",{staticClass:"iconwrapper"},[o("i",{staticClass:"fas fa-check",on:{click:t.saveRoomName}})])]):o("div",{staticClass:"namewrapper"},[o("span",[t._v(t._s(t.changeRoomName))]),o("div",{staticClass:"iconwrapper"},[o("i",{staticClass:"fas fa-pencil-alt",on:{click:t.showEditRoomName}})])])]):t._e(),"member"===t.isRole?o("div",{staticClass:"name"},[o("div",{staticClass:"namewrapper"},[o("span",[t._v(t._s(t.chat.name)+" ")])])]):t._e()])]),o("div",{staticClass:"roomActionsList"},["member"!==t.isRole?o("button",{staticClass:"button small rounded",on:{click:t.modalInviteUser}},[t._v(" Add "),o("i",{staticClass:"fas fa-user-plus"})]):t._e(),t._m(0),o("button",{staticClass:"button small black rounded",on:{click:t.forgetRoom}},[t._v(" Leave "),o("i",{staticClass:"fas fa-sign-out-alt"})])]),o("div",{staticClass:"roomAccordionsList"},[t._l(t.accordionList,(function(e,i){return o("div",{staticClass:"accordion",class:{active:t.isActive===i}},[o("div",{staticClass:"aHeader",on:{click:function(e){return t.toggleItem(i)}}},[o("div",{staticClass:"head"},[o("div",{staticClass:"leftBlock"},["Members"===e.title?o("i",{staticClass:"fas fa-users"}):t._e(),"Media"===e.title?o("i",{staticClass:"far fa-image"}):t._e(),"Files"===e.title?o("i",{staticClass:"fas fa-folder"}):t._e(),t._v(" "+t._s(e.title)+" ")]),"Members"===e.title?o("div",{staticClass:"rightBlock"},[o("div",{staticClass:"membersCount"},[o("span",[t._v(t._s(t.getMembersCount(t.chat)))])])]):t._e()])]),o("div",{staticClass:"body"},[t.isActive===i&&"Members"===e.title?o("div",{staticClass:"membersList"},[t._l(t.membersList,(function(e,i){return"join"===e.roomStatus?o("div",{key:e.id,staticClass:"roomMember"},[o("div",{staticClass:"leftWrapper",on:{click:function(o){return t.showUserAbout(e)}}},[o("div",{staticClass:"avatarNameWrapper"},[o("span",{staticClass:"avatar"},[o("img",{attrs:{src:e.image,alt:""}})])]),o("div",{staticClass:"nameRole"},[o("span",{staticClass:"name"},[t._v(t._s(e.name))]),100===e.level?o("span",{staticClass:"memberRole"},[t._v("Admin")]):t._e(),50===e.level?o("span",{staticClass:"memberRole"},[t._v("Moderator")]):t._e()])]),e.id!==t.currentUser?o("div",{staticClass:"rightWrapper"},[o("dropdownMenu",{ref:"dropdownMenu",refInFor:!0,attrs:{menuItems:t.menuItems,rowObject:{user:e,index:i},icon:"fas fa-ellipsis-h"},on:{itemClicked:t.menuItemClickHandler}})],1):t._e()]):t._e()})),t._l(t.membersList,(function(e,i){return"invite"===e.roomStatus?o("div",{key:e.id,staticClass:"roomMember",staticStyle:{opacity:".8"}},[o("div",{staticClass:"leftWrapper",on:{click:function(o){return t.showUserAbout(e)}}},[o("div",{staticClass:"avatarNameWrapper"},[o("span",{staticClass:"avatar"},[o("img",{attrs:{src:e.image,alt:""}})])]),o("div",{staticClass:"nameRole"},[o("span",{staticClass:"name"},[t._v(t._s(e.name))]),100===e.level?o("span",{staticClass:"memberRole"},[t._v("Admin")]):t._e(),50===e.level?o("span",{staticClass:"memberRole"},[t._v("Moderator")]):t._e()])]),e.id!==t.currentUser?o("div",{staticClass:"rightWrapper"},[o("dropdownMenu",{ref:"dropdownMenu",refInFor:!0,attrs:{menuItems:t.menuItems,rowObject:{user:e,index:i},icon:"fas fa-ellipsis-h"},on:{itemClicked:t.menuItemClickHandler}})],1):t._e()]):t._e()}))],2):t._e(),t.isActive===i&&"Media"===e.title?o("div",[0!==t.imageEvents.length?o("div",{staticClass:"roomAboutWrapper"},t._l(t.imageEvents,(function(e,i){return o("div",{key:e.index,staticClass:"roomAboutImage"},[o("img",{attrs:{src:e._clearEvent.content.url,alt:"img"},on:{click:function(e){return t.showPhotoSwipe(i)}}})])})),0):o("div",{staticClass:"emptyBlock"},[o("span",[t._v("There are no images in this chat yet")])])]):t._e(),t.isActive===i&&"Files"===e.title?o("div",[0!==t.fileEvents.length?o("div",{staticClass:"aboutRoomFileWrapper"},t._l(t.fileEvents,(function(e){return o("div",{key:e.event_id,staticClass:"aboutRoomFile"},[o("i",{staticClass:"fas fa-file-download"}),o("a",{attrs:{href:t.jsonConvertor(e._clearEvent.content.body).url,download:t.jsonConvertor(e._clearEvent.content.body).name}},[o("span",{staticClass:"fileName"},[t._v(t._s(t.jsonConvertor(e._clearEvent.content.body).name))]),o("span",{staticClass:"fileSize"},[t._v(t._s(t.humanReadableSize(t.jsonConvertor(e._clearEvent.content.body).size)))])])])})),0):o("div",{staticClass:"emptyBlock"},[o("span",[t._v("There are no files in this chat yet")])])]):t._e()])])})),t.isOpen?o("div",[o("v-photoswipe",{attrs:{isOpen:t.isOpen,items:t.galleryImages,options:t.options},on:{close:t.hidePhotoSwipe}})],1):t._e()],2),t.inviteUserOpened?o("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[o("span",[t._v("Invite User")])]},proxy:!0},{key:"body",fn:function(){return[o("contacts",{attrs:{mode:t.inviteUsers,chatRoomId:t.chat.roomId},on:{closeModal:t.closeContactModal}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,1840568081)}):t._e()],1)},g=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{staticClass:"button small black rounded"},[t._v(" Mute "),o("i",{staticClass:"fas fa-bell-slash"})])}],b=o("5530"),x=(o("a9e3"),o("4de4"),o("d81d"),o("b0c0"),o("159b"),o("5319"),o("ac1f"),o("7db0"),o("aa20")),w=o("3094"),y=o("0826"),k={name:"chatTopheader",props:{chat:Object,u:String,roomInfo:!1,aboutUser:!1},components:{chatName:x["a"],chatIcon:w["a"],chatTyping:y["a"]},data:function(){return{menuItems:[{click:"callupVideoHandler",title:"Video Call",icon:"fas fa-camera"},{click:"callupHandler",title:"Call",icon:"fas fa-phone"}],loading:!1,typing:!1,userinfo:null,aboutUserShow:!1}},watch:{},mounted:function(){this.getuserinfo()},computed:Object(h["c"])({auth:function(t){return t.auth},m_chat:function(){if(this.chat&&this.chat.roomId){var t=this.core.mtrx.client.getRoom(this.chat.roomId);return t||{}}},m_chat_typing:function(){var t=this;if(!this.chat)return!1;var e=this.chat.roomId,o=this.$store.state.typing[e]||{},i=_.find(o,(function(e,o){var i;if(e)return o!=(null===(i=t.core.user.userinfo)||void 0===i?void 0:i.id)}));return i||!1}}),methods:{getuserinfo:function(){var t=this;this.u&&this.core.user.usersInfo(this.u).then((function(e){t.userinfo=e[0]}))},menuItemClickHandler:function(t,e){this[t.click](e)},callupHandler:function(t){},callupVideoHandler:function(t){}}},C=o("c46f"),I=o("3139"),A=o("cc9f"),R=o("7212"),L=(o("a434"),o("f978")),M=o("d3ff"),j={name:"contacts",props:{source:String,mode:{type:String,default:function(){return""}},title:String,chatRoomId:String},components:{list:L["a"],contact:M["a"]},data:function(){return{aboutShow:!1,loading:!1,fromSearch:[],myContacts:Object,inputText:"",groupContacts:[],selected:!1,groupName:"",contactsPage:"Contacts",showGroupsActions:!1,contact:{}}},created:function(){},watch:{},computed:Object(h["c"])(Object(b["a"])(Object(b["a"])({auth:function(t){return t.auth}},Object(h["c"])(["contactsMap","pocketnet","minimized","active"])),{},{u:function(){return console.log(this.$route.query.u,"UUUUUUUUU ITS U"),this.$route.query.u},contactsList:function(){var t=this.core.mtrx.client;return C["a"].mapObject(this.contactsMap,(function(e,o){null!==t.getUser("@".concat(o,":matrix.pocketnet.app"))?e.isUser=!0:e.isUser=!1})),this.contactsMap},direct:function(){if(1===this.groupContacts.length)return!0},tetatetid:function(){return this.core.mtrx.kit.tetatetid(this.contact,this.core.user.userinfo)},gName:function(){var t=this.groupName;return t.replace(/ /g,"_")}})),methods:{chat:function(){this.core.mtrx.kit.tetatetid(this.contact,this.core.user.userinfo)},search:function(t){var e=this;console.log(this.mode),this.inputText=t,this.core.user.searchContacts(t).then((function(o){if(0===e.groupContacts.length)e.fromSearch=o,e.myContacts=C["a"].where(e.contactsMap,{name:t});else{e.myContacts=C["a"].where(e.contactsMap,{name:t}),e.fromSearch=o;var i=e.groupContacts;e.fromSearch.forEach((function(t){i.forEach((function(e){e.id===t.id&&(t.selected=!0)}))}))}}))},selectedContact:function(t){var e=this;if(this.contact=t,!0!==t.selected){this.groupContacts.push(t);var o=this.fromSearch.filter((function(t){return-1!==e.groupContacts.indexOf(t)}));this.fromSearch.forEach((function(t){o.forEach((function(e){e.id===t.id&&(t.selected=!0)}))}))}else{var i=this.groupContacts.indexOf(t);this.fromSearch.forEach((function(e){e.id===t.id&&(e.selected=!1)})),this.groupContacts.splice(i,1)}},removeEl:function(t){var e=this.groupContacts;this.fromSearch.forEach((function(t){e.forEach((function(e){e.id===t.id&&(t.selected=!1)}))})),this.groupContacts.splice(t,1)},createGroup:function(t){var e=this,o=this.core.mtrx.kit.groupId(t);return 0!==this.groupName.length?(console.log("create room 1"),this.core.mtrx.client.createRoom({room_alias_name:"#"+o.hash,visibility:"private",invite:o.idForInviting,name:"#"+this.groupName,initial_state:[{type:"m.room.guest_access",state_key:"",content:{guest_access:"can_join"}},{type:"m.room.encryption",state_key:"",content:{algorithm:"m.megolm.v1.aes-sha2"}}]}).then((function(t){e.$router.push({path:"chat",query:{id:t.room_id}})}))):(console.log("create room 2"),this.core.mtrx.client.createRoom({room_alias_name:"#"+o.hash,visibility:"private",invite:o.idForInviting,name:"#New Room",initial_state:[{type:"m.room.guest_access",state_key:"",content:{guest_access:"can_join"}},{type:"m.room.encryption",state_key:"",content:{algorithm:"m.megolm.v1.aes-sha2"}}]}).then((function(t){e.$router.push({path:"chat",query:{id:t.room_id}})})))},inviteUserAction:function(t){var e=this.core.mtrx.client,o=this.chatRoomId;t.forEach((function(t){var i="@"+"".concat(t.id)+":matrix.pocketnet.app";e.invite(o,i).then((function(t){}))})),this.$emit("closeModal",!1)}}},S=o("46e4"),E={name:"userspic",props:{users:Array,unseen:Number},data:function(){return{}},created:function(){},computed:Object(h["c"])({auth:function(t){return t.auth},info:function(t){},picture:function(t){return""}}),methods:{}},O={data:function(){return{swiperOption:{watchSlidesProgress:!0,watchSlidesVisibility:!0,slidesPerView:5,direction:"horizontal",pagination:{el:".swiper-pagination",clickable:!0}},encryptedEvents:[],imageEvents:[],fileEvents:[],menuItems:[{click:"adminMakeModer",title:"Make Moderator",icon:"fas fa-user-shield"},{click:"adminBan",title:"Ban",icon:"fas fa-ban",upload:{multiple:!0}},{click:"adminKick",title:"Kick",icon:"fas fa-user-times"}],menuItemsModer:[{click:"moderBan",title:"Ban",icon:"fas fa-ban"},{click:"moderKick",title:"Kick",icon:"fas fa-user-times"}],admin:String,imagesList:[],localRoomName:"",humanSize:Number,inviteUserOpened:!1,inviteUsers:"inviteUsers",msList:[],isOpen:!1,actionMemberShow:!1,options:{index:0,arrowEl:!1,fullscreenEl:!1,shareEl:!1},roomName:"",nameEdit:!1,accordionList:[{title:"Members"},{title:"Media"},{title:"Files"}],isActive:null,isActiveAction:null,currentUser:"",actionUser:{},actionUserMenu:!1}},props:{chat:{},events:{}},components:{topheader:k,VsaList:A["VsaList"],userspic:E,VsaItem:A["VsaItem"],Swiper:R["Swiper"],SwiperSlide:R["SwiperSlide"],VsaHeading:A["VsaHeading"],VsaContent:A["VsaContent"],VsaIcon:A["VsaIcon"],contacts:j,"v-photoswipe":S["PhotoSwipe"],"v-photoswipe-gallery":S["PhotoSwipeGallery"]},computed:Object(b["a"])(Object(b["a"])({},Object(h["c"])(["minimized","active"])),{},{users:function(){var t,e=this,o=C["a"].filter(C["a"].map((null===(t=this.chat)||void 0===t?void 0:t.getJoinedMembers())||[],(function(t){return e.$f.deep(e,"$store.state.users."+t.name)||null})),(function(t){var o;return t&&t.id!=(null===(o=e.core.user.userinfo)||void 0===o?void 0:o.id)}));return console.log("users",o),o},m_chat:function(){if(this.chat.roomId){var t=this.core.mtrx.client.getRoom(this.chat.roomId);return t||{}}},galleryImages:function(){var t=[];return this.imageEvents.forEach((function(e){"m.image"===e._clearEvent.content.msgtype&&t.push({src:e._clearEvent.content.url,w:e._clearEvent.content.info.w,h:e._clearEvent.content.info.h})})),t},isRole:function(){var t=this.core.mtrx.client.getUserId(),e="";return C["a"].mapObject(this.chat.currentState.members,(function(o,i){t===i&&100===o.powerLevel&&(console.log(o.powerLevel,"owner",o.name),e="owner"),t===i&&50===o.powerLevel&&(console.log(o.powerLevel,"moderator",o.name),e="moderator"),t===i&&0===o.powerLevel&&(console.log(o.powerLevel,"member",o.name),e="member")})),this.currentUser=t,e},membersList:function(){var t=[],e=this.$store.state.users;return C["a"].mapObject(this.chat.currentState.members,(function(o,i){C["a"].map(e,(function(e){if("@"+e.id+":matrix.pocketnet.app"===o.userId)return t.push({id:o.userId,image:e.image,name:e.name,level:o.powerLevel,roomStatus:o.membership})}))})),t},getMembersList:function(){var t=this.$store.state.users,e=[],o=[],i=[],a=[],n="",r=[];return C["a"].mapObject(this.chat.currentState.members,(function(t,o){if(100===t.powerLevel&&(n=I["a"].getmatrixid(o)),50===t.powerLevel){var s=I["a"].getmatrixid(o);r.push(s)}"join"===t.membership&&i.push({id:I["a"].getmatrixid(o)}),"invite"===t.membership&&a.push({id:I["a"].getmatrixid(o)}),e.push({id:I["a"].getmatrixid(o)}),console.log(t.membership)})),C["a"].map(t,(function(t){o.push(t)})),console.log(r,"ADMIN ADMIN ADMINS"),a=I["a"].filterByUserId(a,o),i=I["a"].filterByUserId(i,o),console.log(i,a),i.filter((function(t){t.id===n&&(t.role="Owner"),r.filter((function(e){t.id===e&&(t.role="Moderator")}))})),i},changeRoomName:function(){var t=this.chat.name;return t.replace("_"," ")}}),mounted:function(){this.eventsList()},methods:{eventsList:function(){"function"==typeof this.events.filter&&(this.imageEvents=this.events.filter((function(t){return"m.room.encrypted"===t.event.type&&"m.image"===t._clearEvent.content.msgtype})),this.fileEvents=this.events.filter((function(t){return"m.room.encrypted"===t.event.type&&"m.file"===t._clearEvent.content.msgtype})))},jsonConvertor:function(t){return console.log(t,"Datatattt"),JSON.parse(t)},toggleItem:function(t){console.log("cliecked item"),this.isActive=this.isActive===t?null:t,this.actionMemberShow=null},menuItemClickHandler:function(t,e){console.log(e,"item"),"adminMakeModer"===t.click&&(console.log("moderatorMaking",this.$refs.dropdownMenu),this.makeAdmin(e.user),this.$refs.dropdownMenu.filter((function(t){t.hidePopup()}))),"adminBan"===t.click&&(console.log("banMaking",this.$refs.dropdownMenu),this.$refs.dropdownMenu.filter((function(t){t.hidePopup()}))),"adminKick"===t.click&&(console.log("makeKick",this.$refs.dropdownMenu),this.$refs.dropdownMenu.filter((function(t){t.hidePopup()}))),"moderBan"===t.click&&(console.log("makeKick",this.$refs.dropdownMenu),this.$refs.dropdownMenu.filter((function(t){t.hidePopup()}))),"moderKick"===t.click&&(console.log("makeKick",this.$refs.dropdownMenu),this.$refs.dropdownMenu.filter((function(t){t.hidePopup()}))),this.actionUser=e},forgetRoom:function(){var t=this;this.core.mtrx.client.kick(this.chat.roomId,this.currentUser,"leave").then((function(e){t.core.mtrx.client.forget(t.chat.roomId,!0)})).then((function(e){t.$emit("closeAboutRoom",!1)})),this.$router.push({path:"/chats"})},changeName:function(){this.localRoomName=this.chat.name,this.localRoomName.replace("_"," ")},saveRoomName:function(){this.nameEdit=!1,this.roomName.replace(" ","_"),this.core.mtrx.client.setRoomName(this.chat.roomId,this.roomName)},makeAdmin:function(t){var e=this.chat.currentState.getStateEvents("m.room.power_levels");this.core.mtrx.client.setPowerLevel(this.chat.roomId,userID,50,e[0]).then((function(e){console.log(e,"50 505 05",t.id)}))},showEditRoomName:function(){this.nameEdit=!0,this.roomName=this.chat.name,console.log(this.chat.name,"showEditRoomName")},editRoomName:function(){console.log(this.roomName,"omg its name changed")},memberAction:function(t){console.log(t,"user user user"),this.actionMemberShow=!this.actionMemberShow,this.actionUser=t,this.isActiveAction=this.isActiveAction===t.index?null:t.index,console.log("clicked")},kickUser:function(){console.log(this.actionUser,"ussssseeeeer");var t="@"+this.actionUser.user.id+":matrix.pocketnet.app";console.log(t),this.core.mtrx.client.kick(this.chat.roomId,t).then(this.$nextTick((function(){console.log(this.getMembersList,"get memebers list")}))),console.log(this.core.mtrx.client.getJoinedRoomMembers(),"this chat after user kicked")},showPhotoSwipe:function(t){console.log(t,"index index index"),this.isOpen=!0,this.$set(this.options,"index",t)},accordion:function(t){t.target.classList.toggle("active")},hidePhotoSwipe:function(){this.isOpen=!1},showUserAbout:function(t){this.$emit("showAbout",t)},getClick:function(t){this.$emit("showRoomInfo",t)},getMembersCount:function(t){return t.getJoinedMemberCount()},humanReadableSize:function(t){return I["a"].formatBytes(t)},getJoinedMembers:function(){var t=this,e=this.$store.state.users,o=[],i=[],a=[],n="",r="";return this.core.mtrx.client.getJoinedRoomMembers(this.chat.roomId).then((function(s){return C["a"].map(e,(function(t){o.push(t)})),console.log(o,"users"),C["a"].map(s.joined,(function(t){i.push({id:t.display_name})})),console.log(i,"mIds"),a=I["a"].filterByUserId(i,o),C["a"].mapObject(t.chat.currentState.members,(function(t,e){100===t.powerLevel&&(n=I["a"].getmatrixid(e)),50===t.powerLevel&&(r=I["a"].getmatrixid(e))})),console.log(a,"jMembers"),C["a"].map(a,(function(t){t.id===n&&(t.role="owner"),t.id===r&&(t.role="moderator")})),a})).then((function(t){return t}))},modalInviteUser:function(){this.inviteUserOpened=!0},closeModal:function(){this.inviteUserOpened=!1},closeContactModal:function(t){console.log(t," this value modal contacts"),this.inviteUserOpened=t}}},W=O;function U(t){var e=o("ebc0");e.__inject__&&e.__inject__(t);var i=o("99f3");i.__inject__&&i.__inject__(t);var a=o("734c");a.__inject__&&a.__inject__(t)}var N=Object(m["a"])(W,v,g,!1,U,"678581e0",null,!0),$=N.exports,z={name:"chatInfo",components:{info:$},props:{chat:{},events:{}},data:function(){return{}},created:function(){},mounted:function(){},destroyed:function(){},watch:{},computed:Object(h["c"])({pocketnet:function(t){return t.pocketnet},minimized:function(t){return t.minimized},active:function(t){return t.active},auth:function(t){return t.auth},m_chat:function(){if(this.chat&&this.chat.roomId){var t=this.core.mtrx.client.getRoom(this.chat.roomId);return console.log("CHAT",t),t||{}}},joinedMembers:function(){var t=this;return this.core.mtrx.client.getJoinedRoomMembers(t.chat.roomId).then((function(e){return C["a"].mapObject(e.joined,(function(e,o){t.joinedRoomMembers.push(o)}))}))},downloadKeys:function(){var t=this,e=this.core.mtrx.access.accessToken;return t.core.mtrx.client.downloadKeysForUsers(this.joinedMembers,e).then((function(t){return t}))}})},B=z;function F(t){var e=o("382e");e.__inject__&&e.__inject__(t)}var P=Object(m["a"])(B,p,f,!1,F,"7d9df4a3",null,!0),H=P.exports,V={name:"chatinfo",data:function(){return{}},components:{topheader:u,contact:M["a"],chatInfo:H},computed:Object(h["c"])({pocketnet:function(t){return t.pocketnet},minimized:function(t){return t.minimized},u:function(){return this.$route.query.u},chat:function(){var t=this.$route.query.id;return this.core.mtrx.client.getRoom(t)},events:function(){var t=this.$route.query.id;return this.core.mtrx.client.getRoom(t).timeline||{}}}),methods:{}},K=V;function T(t){var e=o("f1cb");e.__inject__&&e.__inject__(t)}var q=Object(m["a"])(K,i,a,!1,T,"e65b756e",null,!0);e["default"]=q.exports},3094:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"chatIcon"},[o("userspic",{attrs:{users:t.users,unseen:this.chat.getUnreadNotificationCount()}})],1)},a=[],n=(o("4de4"),o("d81d"),o("b0c0"),o("c46f")),r={name:"chatIcon",props:{chat:Object},computed:{users:function(){var t,e=this,o=n["a"].filter(n["a"].map((null===(t=this.chat)||void 0===t?void 0:t.currentState.members)||{},(function(t){return e.$f.deep(e,"$store.state.users."+e.$f.getmatrixid(t.name))||null})),(function(t){var o;return t&&t.id!=(null===(o=e.core.user.userinfo)||void 0===o?void 0:o.id)}));return o}}},s=r,c=o("2877");function m(t){}var d=Object(c["a"])(s,i,a,!1,m,"376ef78b",null,!0);e["a"]=d.exports},"382e":function(t,e,o){"use strict";o.r(e);var i=o("e847");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a)},4515:function(t,e,o){var i=o("68d1");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("33ab3f5a",i,t)}},"5f7e":function(t,e,o){var i=o("bd86");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("3c4a7888",i,t)}},"68d1":function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".topheader[data-v-e65b756e]{top:0;z-index:999}",""]),t.exports=e},7184:function(t,e,o){var i=o("e299");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("0beb008a",i,t)}},aa20:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.link?o("router-link",{attrs:{to:t.link}},[o("span",[t._v(t._s(t.name))])]):o("div",[this.chat.currentState.members.length>2&&"#New Room"!==t.chat.name?o("span",{staticClass:"nameline"},[t._v(t._s(t.chat.name))]):o("span",{staticClass:"nameline"},[t._v(t._s(t.name))])])},a=[],n=(o("4de4"),o("b0c0"),o("d81d"),o("a15b"),{name:"chatName",props:{chat:Object,preview:Boolean},computed:{link:function(){var t,e=this;if(!this.preview){var o=_.filter((null===(t=this.chat)||void 0===t?void 0:t.currentState.members)||{},(function(t){var o;return e.$f.getmatrixid(t.name)!=(null===(o=e.core.user.userinfo)||void 0===o?void 0:o.id)}));return 1==o.length?"contact?id="+this.$f.getmatrixid(o[0].name):void 0}},name:function(){var t=this;if(0==this.chat.name.indexOf("#")){var e,o=_.map(_.filter(_.map((null===(e=this.chat)||void 0===e?void 0:e.currentState.members)||{},(function(e){return t.$f.deep(t,"$store.state.users."+t.$f.getmatrixid(e.name))||null})),(function(e){var o;return e&&e.name&&e.id!=(null===(o=t.core.user.userinfo)||void 0===o?void 0:o.id)})),(function(t){return t.name}));return o.length?o.join(", "):"New Chat"}return this.chat.name||""}}}),r=n,s=o("2877");function c(t){}var m=Object(s["a"])(r,i,a,!1,c,"ef616be2",null,!0);e["a"]=m.exports},bd86:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".typingBlock{position:relative}.typingBlock .typingBlockWrapper{position:absolute;left:50%;transform:translateX(-50%);top:-5px;display:flex;align-items:center}.typingBlock .typingBlockWrapper>div{padding:0 .5em}.typingBlock .typingBlockWrapper span{font-size:.7em;color:#707070;opacity:.8}",""]),t.exports=e},cf6f:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,"",""]),t.exports=e},e299:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".userspicwrapper[data-v-678581e0]{width:44px;height:44px;background:#fff;line-height:44px;text-align:center;font-size:.8em;color:#213850;position:relative}.userspicwrapper[data-v-678581e0],.userspicwrapper[data-v-678581e0] .bgimage{border-radius:50%}.unseen[data-v-678581e0]{width:100%;height:100%;left:0;top:0;background:rgba(6,130,58,.8);line-height:44px}.userpic[data-v-678581e0]{margin:0 auto;display:flex;align-items:center;justify-content:center;width:80px;height:80px;background:#dfdfdf;line-height:44px;text-align:center;font-size:.8em;color:#213850;position:relative}.userpic[data-v-678581e0],.userpic[data-v-678581e0] .bgimage{border-radius:50%}.userpic i[data-v-678581e0]{font-size:1 .5em;color:#041f68}.icon[data-v-678581e0]{position:absolute;right:70%;top:70%;font-size:1em;width:20px;height:20px;line-height:20px;background:transparent;border-radius:20px;color:#606369;opacity:.8;z-index:3}.icon.active[data-v-678581e0]{color:#004680}.unseen[data-v-678581e0]{position:absolute;width:22px;height:22px;right:-10%;bottom:-10%;background:rgba(10,104,173,.9);line-height:22px;text-align:center;font-weight:500;border-radius:50%;z-index:2;font-size:.6em;color:#fff}.aboutRoom[data-v-678581e0]{position:relative;padding-bottom:100px}.aboutRoom .roomInfoWrapper[data-v-678581e0]{background:hsla(0,0%,87.5%,.5)}.aboutRoom .roomInfoWrapper .namewrapper[data-v-678581e0]{position:relative;text-align:center;padding:.5em;height:36px}.aboutRoom .roomInfoWrapper .namewrapper input[data-v-678581e0]{text-align:center;font-weight:700}.aboutRoom .roomInfoWrapper .namewrapper .iconwrapper[data-v-678581e0]{position:absolute;right:1em;top:0;bottom:0;line-height:34px}.aboutRoom .roomInfoWrapper .userpicWrapper[data-v-678581e0]{border-bottom:1px solid #dfdfdf;padding:1em}.aboutRoom .roomInfoWrapper .roomInfo[data-v-678581e0]{position:relative}.aboutRoom .roomInfoWrapper .roomInfo .name label[data-v-678581e0]{display:flex;justify-content:space-between;align-items:center;width:100%;height:60px;border-bottom:1px solid #dfdfdf}.aboutRoom .roomInfoWrapper .roomInfo .name label input[data-v-678581e0]{padding:.1em;display:block;border:0;height:90%;width:90%;font-size:.6em;font-weight:700;text-align:center}.aboutRoom .roomInfoWrapper .roomInfo .name span[data-v-678581e0]{font-weight:700}.aboutRoom .roomAccordionsList[data-v-678581e0]{margin-top:.5em;border-top:1px solid #dfdfdf}.aboutRoom .roomAccordionsList .accordion .membersCount[data-v-678581e0]{font-weight:700}.aboutRoom .roomAccordionsList .accordion .aHeader .head[data-v-678581e0]{display:flex;justify-content:space-between;align-items:center;padding:1em;border-bottom:1px solid #dfdfdf}.aboutRoom .roomAccordionsList .accordion .aHeader .head .leftBlock[data-v-678581e0]{flex-grow:1;position:relative}.aboutRoom .roomAccordionsList .accordion .aHeader .head .leftBlock i[data-v-678581e0]{width:30px;color:#0a68ad}.aboutRoom .roomAccordionsList .accordion .body .membersList[data-v-678581e0]{list-style:none;margin:0;padding:0}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember[data-v-678581e0]{padding:1em;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #dfdfdf}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper[data-v-678581e0]{display:flex;justify-content:flex-start;align-items:center;width:90%}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper .avatarNameWrapper[data-v-678581e0]{display:flex;justify-content:flex-start;align-items:center}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper .avatarNameWrapper .avatar[data-v-678581e0]{display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:50%;background:#dfdfdf;line-height:44px;text-align:center;font-size:.8em;color:#213850;position:relative}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper .avatarNameWrapper .avatar[data-v-678581e0] .bgimage{border-radius:50%}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper .avatarNameWrapper .avatar img[data-v-678581e0]{display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:50%}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper .nameRole[data-v-678581e0]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;margin-left:15px}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .leftWrapper .nameRole .memberRole[data-v-678581e0]{font-size:.7em;color:#919191}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper[data-v-678581e0]{position:relative}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper .adminActionsList .fa-caret-up[data-v-678581e0]{font-size:2em;left:0;color:#dfdfdf;z-index:99;top:10px}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper .adminActionsList ul[data-v-678581e0]{z-index:99;width:100px;position:absolute;right:-3px;top:24px;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.1);border-radius:1em 0 1em 1em;list-style:none;margin:0;padding:0}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper .adminActionsList ul li[data-v-678581e0]{position:relative;padding:.5em .8em;border-bottom:1px solid #dfdfdf}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper .adminActionsList ul li[data-v-678581e0]:last-child{border:0}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper .adminActionsList ul li i[data-v-678581e0]{left:10px;top:8px;color:#0a68ad}.aboutRoom .roomAccordionsList .accordion .body .membersList .roomMember .rightWrapper .adminActionsList ul li span[data-v-678581e0]{margin-left:28px}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper[data-v-678581e0]{display:flex;flex-wrap:wrap;justify-content:space-between;padding:1em 1em;align-items:center}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper .roomAboutImage[data-v-678581e0]{margin:.4em 0}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper .roomAboutImage img[data-v-678581e0]{display:block;width:100px;height:100px;-o-object-fit:cover;object-fit:cover;border-radius:1em}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper .aboutRoomFileWrapper .aboutRoomFile[data-v-678581e0]{display:flex;justify-content:flex-start;align-items:flex-start;border-bottom:1px solid #dfdfdf;margin-bottom:.5em;padding:.5em 1em}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper .aboutRoomFileWrapper .aboutRoomFile[data-v-678581e0]:last-child{border:none}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper .aboutRoomFileWrapper .aboutRoomFile a[data-v-678581e0]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;margin:.2em 0}.aboutRoom .roomAccordionsList .accordion .body .roomAboutWrapper .aboutRoomFileWrapper .aboutRoomFile i[data-v-678581e0]{font-size:2em;margin-top:.2em;margin-right:.5em}.roomActionsList[data-v-678581e0]{margin:0 .5em;padding:1em 0;background:#fff;text-align:center}.roomActionsList .button[data-v-678581e0]{min-width:0;margin-right:.5em}.roomActionsList .button[data-v-678581e0]:last-child{margin-right:0}.roomActionsList .actionsItem[data-v-678581e0]{padding:.5em;border-radius:1em;width:80px;box-shadow:0 0 10px rgba(0,0,0,.1)}.emptyBlock[data-v-678581e0]{text-align:center;padding:.5em 0}.emptyBlock span[data-v-678581e0]{font-size:.9em}.aboutRoomAvatar[data-v-678581e0]{padding-top:1em}.threeAvatars[data-v-678581e0]{position:relative;background:none;width:80px;height:80px;margin:0 auto}.threeAvatars .bgImage[data-v-678581e0]{width:40px;height:40px}.threeAvatars .bgImage[data-v-678581e0]:first-child{position:absolute;left:50%;top:0;transform:translate(-50%)}.threeAvatars .bgImage[data-v-678581e0]:nth-child(2){position:absolute;right:-3px;bottom:0;transform:translate(0)}.threeAvatars .bgImage[data-v-678581e0]:nth-child(3){position:absolute;left:-3px;bottom:0}.twoAvatars[data-v-678581e0]{background:none;position:relative;margin:0 auto;width:80px;height:80px}.twoAvatars .bgImage[data-v-678581e0]{width:40px;height:40px;display:flex}.twoAvatars .bgImage[data-v-678581e0]:first-child{position:absolute;top:0;left:0}.twoAvatars .bgImage[data-v-678581e0]:last-child{position:absolute;right:0;bottom:0}.fourAvatars[data-v-678581e0]{background:none;position:relative;margin:0 auto;width:80px;height:80px}.fourAvatars .bgImage[data-v-678581e0]{width:40px;height:40px}.fourAvatars .bgImage[data-v-678581e0]:first-child{position:absolute;top:-3px;left:-3px;transform:translate(0)}.fourAvatars .bgImage[data-v-678581e0]:nth-child(2){position:absolute;right:-3px;top:-3px;transform:translate(0)}.fourAvatars .bgImage[data-v-678581e0]:nth-child(3){position:absolute;left:-3px;bottom:-3px}.fourAvatars .bgImage[data-v-678581e0]:nth-child(4){position:absolute;right:-3px;bottom:-3px}.fourMore[data-v-678581e0]{background:none;margin:0 auto;width:80px;height:80px}.bgImageMore[data-v-678581e0]{width:40px;height:40px}.imageSwiper[data-v-678581e0]{width:50px;height:50px;margin:0 auto}.imageSwiper img[data-v-678581e0]{display:block;border-radius:50%;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}",""]),t.exports=e},e847:function(t,e,o){var i=o("cf6f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("39792afa",i,t)}},ebc0:function(t,e,o){"use strict";o.r(e);var i=o("7184");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a)},f1cb:function(t,e,o){"use strict";o.r(e);var i=o("4515");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a)}}]);
//# sourceMappingURL=matrix-element.7.min.js.map