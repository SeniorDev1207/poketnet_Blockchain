(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[2],{"0826":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"typingBlock",staticStyle:{position:"relative"}},[o("div",{staticClass:"typingBlockWrapper"},[o("div",[o("span",[t._v(t._s(t.$t("caption.typing")))])]),o("div",[o("PulseLoader",{attrs:{color:t.color,size:t.size,loading:!0}})],1)])])},a=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"v-spinner"},[o("div",{staticClass:"v-pulse v-pulse1",style:[t.spinnerStyle,t.spinnerDelay1]}),o("div",{staticClass:"v-pulse v-pulse2",style:[t.spinnerStyle,t.spinnerDelay2]}),o("div",{staticClass:"v-pulse v-pulse3",style:[t.spinnerStyle,t.spinnerDelay3]})])},r=[],s={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}},c=s,d=o("2877");function l(t){var e=o("671b");e.__inject__&&e.__inject__(t)}var u=Object(d["a"])(c,i,r,!1,l,null,null,!0),f=u.exports,p={name:"typing",props:{},components:{PulseLoader:f},data:function(){return{color:"#868686",size:"2px",loading:!0}},methods:{},computed:{}},m=p;function h(t){var e=o("1b86");e.__inject__&&e.__inject__(t)}var v=Object(d["a"])(m,n,a,!1,h,null,null,!0);e["a"]=v.exports},1259:function(t,e,o){var n=o("3459");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("919c9172",n,t)}},"1b86":function(t,e,o){"use strict";o.r(e);var n=o("5f7e");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a)},2479:function(t,e,o){var n=o("ac7e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("0d50a94c",n,t)}},3459:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,"@-webkit-keyframes v-pulseStretchDelay{0%,80%{transform:scale(1);-webkit-opacity:1;opacity:1}45%{transform:scale(.1);-webkit-opacity:.7;opacity:.7}}@keyframes v-pulseStretchDelay{0%,80%{transform:scale(1);-webkit-opacity:1;opacity:1}45%{transform:scale(.1);-webkit-opacity:.7;opacity:.7}}",""]),t.exports=e},"5a81":function(t,e,o){var n=o("ecfa");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("73ecec20",n,t)}},"5f7e":function(t,e,o){var n=o("bd86");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("3c4a7888",n,t)}},"671b":function(t,e,o){"use strict";o.r(e);var n=o("1259");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a)},ac7e:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".nameWrapper[data-v-543043fd]{display:flex;align-items:center;justify-content:center}.roomMuted[data-v-543043fd]{margin-left:3px}.roomMuted i[data-v-543043fd]{font-size:.7em}.editButton[data-v-543043fd]{display:flex;justify-content:center;align-items:center}.editButton i[data-v-543043fd]{font-size:1.5em}.nameline[data-v-543043fd]{max-width:250px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#topheader.minimized.fix[data-v-543043fd]{background:transparent;overflow:inherit}.donationModalBody[data-v-543043fd]{padding:1em;display:flex;flex-direction:column}.donationModalBody span[data-v-543043fd]{color:#00a4ff}.donationModalBody input[data-v-543043fd],.donationModalBody select[data-v-543043fd]{margin-top:.5em;margin-bottom:1.5em;border:1px solid #00a4ff;border-radius:3px;padding:.5em}.donationModalBody input.disabled[data-v-543043fd],.donationModalBody select.disabled[data-v-543043fd]{color:rgba(176,191,198,.8);border:1px solid rgba(176,191,198,.5)}.donationModalBody button[data-v-543043fd]{margin-top:1em}.donationModalBody button i[data-v-543043fd]{margin-right:.2em}.donationModalBody .totalAmount[data-v-543043fd]{font-weight:700;margin-left:.5em;margin-top:.5em;margin-bottom:1em}.donationModalBody .error[data-v-543043fd]{color:#ff0c39;text-align:center}.donationModalBody .linepreloader[data-v-543043fd]{text-align:center;height:29px;margin-top:1em}",""]),t.exports=e},b9a7:function(t,e,o){var n=o("bf4e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("21035a0a",n,t)}},bd86:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".typingBlock{position:relative}.typingBlock .typingBlockWrapper{position:absolute;left:50%;transform:translateX(-50%);top:-5px;display:flex;align-items:center}.typingBlock .typingBlockWrapper>div{padding:0 .5em}.typingBlock .typingBlockWrapper span{font-size:.7em;color:#707070;opacity:.8}",""]),t.exports=e},bf00:function(t,e,o){"use strict";o.r(e);var n=o("b9a7");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a)},bf4e:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,"#matrix-root[theme=black] #topheader.minimized.fix[data-v-543043fd]{background:transparent}#matrix-root[theme=black] .donationModalBody span[data-v-543043fd]{color:#00a4ff}#matrix-root[theme=black] .donationModalBody input[data-v-543043fd],#matrix-root[theme=black] .donationModalBody select[data-v-543043fd]{border:1px solid #00a4ff}#matrix-root[theme=black] .donationModalBody input.disabled[data-v-543043fd],#matrix-root[theme=black] .donationModalBody select.disabled[data-v-543043fd]{color:rgba(176,191,198,.8);border:1px solid rgba(176,191,198,.5)}#matrix-root[theme=black] .donationModalBody .error[data-v-543043fd]{color:#ff0c39}",""]),t.exports=e},cb6b:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,"#matrix-root[theme=white] #topheader.minimized.fix[data-v-543043fd]{background:transparent}#matrix-root[theme=white] .donationModalBody span[data-v-543043fd]{color:#00a4ff}#matrix-root[theme=white] .donationModalBody input[data-v-543043fd],#matrix-root[theme=white] .donationModalBody select[data-v-543043fd]{border:1px solid #00a4ff}#matrix-root[theme=white] .donationModalBody input.disabled[data-v-543043fd],#matrix-root[theme=white] .donationModalBody select.disabled[data-v-543043fd]{color:rgba(176,191,198,.8);border:1px solid rgba(176,191,198,.5)}#matrix-root[theme=white] .donationModalBody .error[data-v-543043fd]{color:#ff0c39}",""]),t.exports=e},d361:function(t,e,o){var n=o("cb6b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=o("35d6").default;t.exports.__inject__=function(t){a("fccf5c52",n,t)}},de71:function(t,e,o){"use strict";o.r(e);var n=o("d361");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a)},e7ae:function(t,e,o){"use strict";o.r(e);var n=o("5a81");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a)},ecfa:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".topheader[data-v-08f37256]{width:100%;top:0;z-index:999}.aboutContact[data-v-08f37256]{position:absolute;left:0;right:0;top:100px;bottom:0;z-index:999;background:#fff}[data-v-08f37256] #maincontent .headerSpacerWrapper{bottom:0}",""]),t.exports=e},ee79:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page chat"},[o("topheader",{staticClass:"topheader",attrs:{u:t.u,chat:t.chat},on:{addMember:t.addMemberModal}}),o("maincontent",{scopedSlots:t._u([{key:"content",fn:function(){return[o("chat",{attrs:{u:t.u,chat:t.chat},on:{sending:t.sending,newchat:t.newchat,removeBrokenRoom:t.creatorLeft,getEvents:t.eventsRoom}})]},proxy:!0}])}),t.openInviteModal?o("modal",{on:{close:t.closeModal},scopedSlots:t._u([{key:"header",fn:function(){return[o("span",[t._v(t._s(t.$t("caption.inviteUser")))])]},proxy:!0},{key:"body",fn:function(){return[o("contacts",{attrs:{mode:"inviteUsers",chatRoomId:t.chat.roomId},on:{closeModal:t.closeContactModal}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,1321158477)}):t._e()],1)},a=[],i=o("5530"),r=o("b163"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"chatTopheader"}},[t.chat||t.u?o("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[o("backButton",{attrs:{action:"chats"}})]},proxy:!0},{key:"info",fn:function(){return[t.chat?o("router-link",{attrs:{to:"chatInfo?id="+t.chat.roomId}},[t.m_chat?o("div",[o("div",{staticClass:"nameWrapper"},[t.roomInfo?t._e():o("chatName",{attrs:{preview:!0,chat:t.chat,m_chat:t.m_chat}}),t.roomMuted?o("div",{staticClass:"roomMuted"},[o("i",{staticClass:"fas fa-bell-slash"})]):t._e()],1),o("transition",{attrs:{name:"fade"}},[t.m_chat_typing?o("chatTyping"):t._e()],1)],1):t._e(),!t.m_chat&&t.userinfo?o("div",[o("span",{staticClass:"nameline"},[t._v(t._s(t.userinfo.name))])]):t._e()]):t._e()]},proxy:!0},{key:"right",fn:function(){return[t.chat?o("router-link",{attrs:{to:"chatInfo?id="+t.chat.roomId}},[o("div",{staticClass:"iconbutton"},[o("i",{staticClass:"fas fa-ellipsis-h"})])]):t._e()]},proxy:!0}],null,!1,3419355125)}):t._e(),t.donateUserOpened?o("modal",{on:{close:t.closeDonateModal},scopedSlots:t._u([{key:"header",fn:function(){return[o("span",[t._v(t._s(t.$t("caption.donate")))])]},proxy:!0},{key:"body",fn:function(){return[o("div",{staticClass:"donationModalBody"},[o("span",[t._v(t._s(t.$t("caption.source")))]),o("input",{staticClass:"disabled",attrs:{type:"text",value:"Account Address",disabled:!0}}),o("span",[t._v(t._s(t.$t("caption.amount")))]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.donationAmount,expression:"donationAmount",modifiers:{number:!0}}],attrs:{type:"number",disabled:t.sending},domProps:{value:t.donationAmount},on:{keyup:function(e){return t.resetDonation()},input:function(e){e.target.composing||(t.donationAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),o("span",[t._v(t._s(t.$t("caption.receiver")))]),o("input",{staticClass:"disabled",attrs:{type:"text",disabled:!0},domProps:{value:t.receiver?t.receiver.name:""}}),o("span",[t._v(t._s(t.$t("caption.message")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.donationMessage,expression:"donationMessage"}],attrs:{type:"text",placeholder:"Your message",disabled:t.sending},domProps:{value:t.donationMessage},on:{input:function(e){e.target.composing||(t.donationMessage=e.target.value)}}}),t.showFeesError&&"money"==t.showFeesError?o("span",{staticClass:"error"},[t._v(t._s(t.$t("caption.balanceTooLow")))]):t.showFeesError?o("span",{staticClass:"error"},[t._v(t._s(t.$t("caption.transactionError")))]):t._e(),1!=t.calculatingFees?o("button",{staticClass:"button small",attrs:{disabled:!t.donationAmount||null!=t.calculatedFees},on:{click:t.onCalculateFeesClick}},[o("i",{staticClass:"fas fa-chevron-circle-right"}),t._v(" "+t._s(t.$t("caption.calculateFees"))+" ")]):t._e(),1==t.calculatingFees?o("div",{staticClass:"linepreloader"},[o("linepreloader")],1):t._e()]),null!=t.calculatedFees?o("div",{staticClass:"donationModalBody"},[o("span",[t._v(t._s(t.$t("caption.includeFeesInAmount")))]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.feesDirection,expression:"feesDirection"}],attrs:{disabled:t.sending},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.feesDirection=e.target.multiple?o:o[0]}}},t._l(t.feesDirectionPossibleValues,(function(e){return o("option",{domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0),o("span",[t._v(t._s(t.$t("caption.transactionFees")))]),o("input",{staticClass:"disabled",attrs:{type:"number",disabled:!0},domProps:{value:t.calculatedFees}}),o("span",[t._v(t._s(t.$t("caption.totalAmount")))]),o("span",{staticClass:"totalAmount"},[t._v(t._s(+t.totalDonationAmount.toFixed(5))+" PKOIN")]),t.showTransactionError&&"balance too low"==t.showTransactionError?o("span",{staticClass:"error"},[t._v(t._s(t.$t("caption.balanceTooLow")))]):t.showTransactionError?o("span",{staticClass:"error"},[t._v(t._s(t.$t("caption.transactionError")))]):t._e(),1!=t.sending?o("button",{staticClass:"button small",attrs:{disabled:t.sending},on:{click:t.sendDonation}},[o("i",{staticClass:"fas fa-arrow-alt-circle-right"}),t._v(" Send ")]):t._e(),1==t.sending?o("div",{staticClass:"linepreloader"},[o("linepreloader")],1):t._e()]):t._e()]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,2899695861)}):t._e()],1)},c=[],d=o("1da1"),l=o("a34a"),u=o.n(l),f=(o("7db0"),o("159b"),o("b0c0"),o("d3b7"),o("e6cf"),o("a79d"),o("d81d"),o("2f62")),p=o("aa20"),m=o("3094"),h=o("0826"),v=o("71da"),b=o("3139"),y={name:"chatTopheader",props:{chat:Object,u:String,roomInfo:!1,aboutUser:!1},components:{chatName:p["a"],chatIcon:m["a"],chatTyping:h["a"],contacts:v["a"]},data:function(){return{menuItems:[{click:"callupVideoHandler",title:this.$i18n.t("caption.videocall"),icon:"fas fa-camera"},{click:"callupHandler",title:this.$i18n.t("caption.call"),icon:"fas fa-phone"}],menuItemsRoom:[{click:"AddMember",title:this.$i18n.t("caption.add"),icon:"fas fa-user-plus"},{click:"MuteRoom",title:this.$i18n.t("caption.mute"),icon:"fas fa-bell-slash"},{click:"LeaveFromRoom",title:this.$i18n.t("caption.leaveAndDelete"),icon:"fas fa-sign-out-alt"}],menuItemsRoomMuted:[{click:"AddMember",title:this.$i18n.t("caption.add"),icon:"fas fa-user-plus"},{click:"MuteRoom",title:this.$i18n.t("caption.unmute"),icon:"fas fa-bell"},{click:"LeaveFromRoom",title:this.$i18n.t("caption.leaveAndDelete"),icon:"fas fa-sign-out-alt"}],oneToOne:[{click:"MuteRoom",title:this.$i18n.t("caption.mute"),icon:"fas fa-bell-slash"},{click:"Donate",title:this.$i18n.t("caption.donate"),icon:"fas fa-money-bill-wave"}],oneToOneMuted:[{click:"MuteRoom",title:this.$i18n.t("caption.unmute"),icon:"fas fa-bell"},{click:"LeaveFromRoom",title:this.$i18n.t("caption.leaveAndDelete"),icon:"fas fa-sign-out-alt"},{click:"Donate",title:this.$i18n.t("caption.donate"),icon:"fas fa-money-bill-wave"}],donateMenu:[{click:"Donate",title:this.$i18n.t("caption.donate"),icon:"fas fa-money-bill-wave"}],loading:!1,typing:!1,userinfo:null,aboutUserShow:!1,roomBanned:!1,roomMuted:!1,donateUserOpened:!1,receiver:null,donationAmount:0,donationMessage:"",calculatedFees:null,showFeesError:"",showTransactionError:"",calculatingFees:!1,sending:!1,feesDirection:"include",feesDirectionPossibleValues:[{value:"include",label:this.$i18n.t("caption.toBePaidByReceiver")},{value:"exclude",label:this.$i18n.t("caption.toBePaidBySender")}]}},watch:{},mounted:function(){this.getuserinfo()},computed:Object(f["c"])({auth:function(t){return t.auth},m_chat:function(){if(this.chat&&this.chat.roomId){var t=this.core.mtrx.client._pushProcessor.getPushRuleById(this.chat.roomId);null!==t&&(this.roomMuted=!0);var e=this.core.mtrx.client.getRoom(this.chat.roomId);return e||{}}},m_chat_typing:function(){var t=this;if(!this.chat)return!1;var e=this.chat.roomId,o=this.$store.state.typing[e]||{},n=_.find(o,(function(e,o){var n;if(e)return o!=(null===(n=t.core.user.userinfo)||void 0===n?void 0:n.id)}));return n||!1},totalDonationAmount:function(){return"include"==this.feesDirection?this.donationAmount:this.donationAmount+this.calculatedFees}}),methods:{navigateToProfile:function(t){this.$router.push({path:"/contact?id=".concat(b["a"].getmatrixid(t))})},getuserinfo:function(){var t=this;this.u&&this.core.user.usersInfo(this.u).then((function(e){t.userinfo=e[0]}))},findOtherUser:function(){var t,e=this.m_chat.myUserId,o=this.m_chat.currentState.getMembers();return o.forEach((function(o){o&&o.userId!==e&&(t=o)})),t},addMember:function(){this.modalInviteUser()},menuItemClickHandler:function(t,e){var o=this;if("AddMember"===t.click&&(this.$emit("addMember",!0),this.$refs.dropdownMenu.hidePopup()),"MuteRoom"===t.click){var n=this.chat.roomId,a=(this.core.mtrx.client.deviceId,this),i=this.core.mtrx.client._pushProcessor.getPushRuleById(this.chat.roomId);null!==i?(a.core.mtrx.client.deletePushRule("global","room",n),this.roomMuted=!1):(a.core.mtrx.client.setRoomMutePushRule("global",n,"true"),this.roomMuted=!0),this.$refs.dropdownMenu.hidePopup()}if("LeaveFromRoom"===t.click){this.core.mtrx.client.leave(this.chat.roomId).then((function(t){o.core.mtrx.client.forget(o.chat.roomId,!0).then((function(t){o.$store.commit("DELETE_ROOM",o.chat.roomId)})).then((function(t){o.$router.push({path:"/chats"})}))})),this.$refs.dropdownMenu.hidePopup()}if("BanRoom"===t.click){var r="",s=this.findOtherUser();s&&s.userId&&(r=s.userId);var c=this.chat.roomId;this.core.mtrx.client.ban(c,r,"ban").then((function(t){})),this.roomBanned=!0,this.$refs.dropdownMenu.hidePopup()}if("Unban"===t.click){var d="",l=this.findOtherUser();l&&l.userId&&(d=l.userId),this.core.mtrx.client.unban(this.chat.roomId,d).then((function(t){o.core.mtrx.client.invite(o.chat.roomId,d)})),this.roomBanned=!1,this.$refs.dropdownMenu.hidePopup()}if("Donate"===t.click){this.donateUserOpened=!0,this.$refs.dropdownMenu.hidePopup();var u=this.findOtherUser();this.receiver=u?this.$f.deep(this,"$store.state.users."+this.$f.getmatrixid(u.name)):null}},closeDonateModal:function(){this.donateUserOpened=!1},onCalculateFeesClick:function(){var t=this;this.calculatingFees=!0,this.calculateFees().finally((function(){return t.calculatingFees=!1}))},calculateFees:function(){var t=this,e=this;return this.showFeesError="",new Promise((function(o,n){if(t.donationAmount<=0||!t.receiver||!t.receiver.source||!t.receiver.source.address)return t.showFeesError="invalid",n("Missing amount or receiver");try{var a=window.POCKETNETINSTANCE.platform.sdk;a.node.fee.estimate((function(t){var i=[{address:e.receiver.source.address,amount:e.donationAmount}];a.wallet.txbase([a.address.pnet().address],i,0,e.feesDirection,(function(i,r,s){if(i)return console.error(i),e.showFeesError=i,n(i);var c=a.node.transactions.create.wallet(r,s),d=Math.min(c.virtualSize()*t.feerate,.0999);return e.calculatedFees=d,o()}))}))}catch(i){return console.error(i),e.showFeesError=i,n(i)}}))},sendDonation:function(){var t=this;return Object(d["a"])(u.a.mark((function e(){var o,n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t,t.sending=!0,t.showTransactionError="",e.prev=3,e.next=6,t.calculateFees();case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](3),t.showTransactionError="error",t.sending=!1,e.abrupt("return");case 13:n=window.POCKETNETINSTANCE.platform.sdk,n.node.transactions.get.canSpend(n.address.pnet().address,(function(t){if(!t||isNaN(t)||t<o.totalDonationAmount)return o.showTransactionError="balance too low",void(o.sending=!1);try{var e=[{address:o.receiver.source.address,amount:o.donationAmount}];n.wallet.embed(e,o.donationMessage),n.wallet.txbase([n.address.pnet().address],e,o.calculatedFees,o.feesDirection,(function(t,e,a){if(t)return console.error(t),o.showTransactionError="error",o.sending=!1,reject(t);var i=n.node.transactions.create.wallet(e,a);e.forEach((function(t){t.cantspend=!0})),n.node.transactions.send(i,(function(t,i){if(i)return n.node.transactions.releaseCS(e),o.showTransactionError="error",void(o.sending=!1);var r=e.map((function(t){return t.txid}));n.node.transactions.clearUnspents(r),n.wallet.saveTempInfoWallet(t,e,a),o.core.mtrx.client.sendEvent(o.chat.roomId,"m.room.message",{from:o.$f.getmatrixid(o.m_chat.myUserId),to:o.receiver.id,amount:o.donationAmount,txId:t,msgtype:"m.notice"},""),o.closeDonateModal()}))}))}catch(a){console.error(a),o.showTransactionError="error",o.sending=!1}}));case 15:case"end":return e.stop()}}),e,null,[[3,8]])})))()},resetDonation:function(){this.calculatedFees=null,this.showFeesError="",this.showTransactionError=""}}},g=y,x=o("2877");function M(t){var e=o("f898");e.__inject__&&e.__inject__(t);var n=o("de71");n.__inject__&&n.__inject__(t);var a=o("bf00");a.__inject__&&a.__inject__(t)}var w=Object(x["a"])(g,s,c,!1,M,"543043fd",null,!0),k=w.exports,$={name:"pagechat",components:{chat:r["a"],topheader:k,contacts:v["a"]},data:function(){return{events:[],openInviteModal:!1,brokenRoom:!1}},computed:Object(i["a"])({u:function(){return this.$route.query.u},chat:function(){var t=this.$route.query.id;return console.log("this.$store.state.chatsMap[id]",this.$store.state.chatsMap,this.$store.state.chatsMap[t],t),this.$store.state.chatsMap[t]}},Object(f["c"])({pocketnet:function(t){return t.pocketnet},minimized:function(t){return t.minimized}})),beforeRouteLeave:function(t,e,o){var n=this;this.brokenRoom?this.core.mtrx.client.leave(e.query.id).then((function(t){n.core.mtrx.client.forget(e.query.id,!0).then((function(t){return t})).then((function(t){n.$store.commit("DELETE_ROOM",e.query.id)})).then((function(t){o()}))})):o()},mounted:function(){},methods:{creatorLeft:function(t){console.log("in chat page",t),this.brokenRoom=t},closeModal:function(){this.openInviteModal=!1},closeContactModal:function(t){this.openInviteModal=t},addMemberModal:function(t){this.openInviteModal=t},newchat:function(t){},sending:function(){},eventsRoom:function(t){this.events=t}}},I=$;function B(t){var e=o("e7ae");e.__inject__&&e.__inject__(t)}var C=Object(x["a"])(I,n,a,!1,B,"08f37256",null,!0);e["default"]=C.exports},f898:function(t,e,o){"use strict";o.r(e);var n=o("2479");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a)}}]);
//# sourceMappingURL=matrix-element.2.min.js.map